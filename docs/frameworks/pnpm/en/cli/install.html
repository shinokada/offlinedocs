<!doctype html><html lang="en"><meta charset="utf-8"><title>pnpm install</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="pnpm-install"><h1 id="pnpm-install">pnpm install</h1><p>Aliases: <code>i</code><p><code>pnpm install</code> is used to install all dependencies for a project.<p>In a CI environment, installation fails if a lockfile is present but needs an update.<p>Inside a <a href="../workspaces.html)">workspace</a>, <code>pnpm install</code> installs all dependencies in all the projects. If you want to disable this behavior, set the <code>recursive-install</code> setting to <code>false</code>.<p><img src="/img/demos/pnpm-install.svg"><section class="level2"aria-labelledby="tldr"><h2 id="tldr">TL;DR</h2><table><thead><tr><th>Command<th>Meaning<tbody><tr><td><code>pnpm i --offline</code><td>Install offline from the store only<tr><td><code>pnpm i --frozen-lockfile</code><td><code>pnpm-lock.yaml</code> is not updated<tr><td><code>pnpm i --lockfile-only</code><td>Only <code>pnpm-lock.yaml</code> is updated</table></section><section class="level2"aria-labelledby="options"><h2 id="options">Options</h2><section class="level3"aria-labelledby="--force"><h3 id="--force">--force</h3><p>Force reinstall dependencies: refetch packages modified in store, recreate a lockfile and/or modules directory created by a non-compatible version of pnpm. Install all optionalDependencies even they don't satisfy the current environment(cpu, os, arch).</section><section class="level3"aria-labelledby="--offline"><h3 id="--offline">--offline</h3><ul><li>Default: <strong>false</strong><li>Type: <strong>Boolean</strong></ul><p>If <code>true</code>, pnpm will use only packages already available in the store. If a package won't be found locally, the installation will fail.</section><section class="level3"aria-labelledby="--prefer-offline"><h3 id="--prefer-offline">--prefer-offline</h3><ul><li>Default: <strong>false</strong><li>Type: <strong>Boolean</strong></ul><p>If <code>true</code>, staleness checks for cached data will be bypassed, but missing data will be requested from the server. To force full offline mode, use <code>--offline</code>.</section><section class="level3"aria-labelledby="--prod--p"><h3 id="--prod--p">--prod, -P</h3><p>pnpm will not install any package listed in <code>devDependencies</code> and will remove those insofar they were already installed, if the <code>NODE_ENV</code> environment variable is set to production. Use this flag to instruct pnpm to ignore <code>NODE_ENV</code> and take its production status from this flag instead.</section><section class="level3"aria-labelledby="--dev--d"><h3 id="--dev--d">--dev, -D</h3><p>Only <code>devDependencies</code> are installed and <code>dependencies</code> are removed insofar they were already installed, regardless of the <code>NODE_ENV</code>.</section><section class="level3"aria-labelledby="--no-optional"><h3 id="--no-optional">--no-optional</h3><p><code>optionalDependencies</code> are not installed.</section><section class="level3"aria-labelledby="--lockfile-only"><h3 id="--lockfile-only">--lockfile-only</h3><ul><li>Default: <strong>false</strong><li>Type: <strong>Boolean</strong></ul><p>When used, only updates <code>pnpm-lock.yaml</code> and <code>package.json</code>. Nothing gets written to the <code>node_modules</code> directory.</section><section class="level3"aria-labelledby="--fix-lockfile"><h3 id="--fix-lockfile">--fix-lockfile</h3><p>Fix broken lockfile entries automatically.</section><section class="level3"aria-labelledby="--frozen-lockfile"><h3 id="--frozen-lockfile">--frozen-lockfile</h3><ul><li>Default:<ul><li>For non-CI: <strong>false</strong><li>For CI: <strong>true</strong>, if a lockfile is present</ul><li>Type: <strong>Boolean</strong></ul><p>If <code>true</code>, pnpm doesn't generate a lockfile and fails to install if the lockfile is out of sync with the manifest / an update is needed or no lockfile is present.<p>This setting is <code>true</code> by default in [CI environments]. The following code is used to detect CI environments:<figure class="language-js"><figcaption>https://github.com/watson/ci-info/blob/44e98cebcdf4403f162195fbcf90b1f69fc6e047/index.js#L54-L61</figcaption><pre class="language-js"><code class="language-js">
exports<span class="token punctuation">.</span><span class="token property-access">isCI</span> <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>
  env<span class="token punctuation">.</span><span class="token constant">CI</span> <span class="token operator">||</span> <span class="token comment">// Travis CI, CircleCI, Cirrus CI, GitLab CI, Appveyor, CodeShip, dsari</span>
  env<span class="token punctuation">.</span><span class="token constant">CONTINUOUS_INTEGRATION</span> <span class="token operator">||</span> <span class="token comment">// Travis CI, Cirrus CI</span>
  env<span class="token punctuation">.</span><span class="token constant">BUILD_NUMBER</span> <span class="token operator">||</span> <span class="token comment">// Jenkins, TeamCity</span>
  env<span class="token punctuation">.</span><span class="token constant">RUN_ID</span> <span class="token operator">||</span> <span class="token comment">// TaskCluster, dsari</span>
  exports<span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">||</span>
  <span class="token boolean">false</span>
<span class="token punctuation">)</span></code></pre></figure><p><a href="https://github.com/watson/ci-info#supported-ci-tools">CI environments</a></section><section class="level3"aria-labelledby="--reportername"><h3 id="--reportername">--reporter=&#x3C;name></h3><ul><li>Default:<ul><li>For TTY stdout: <strong>default</strong><li>For non-TTY stdout: <strong>append-only</strong></ul><li>Type: <strong>default</strong>, <strong>append-only</strong>, <strong>ndjson</strong>, <strong>silent</strong></ul><p>Allows you to choose the reporter that will log debug info to the terminal about<p>the installation progress.<ul><li><strong>silent</strong> - no output is logged to the console, not even fatal errors<li><strong>default</strong> - the default reporter when the stdout is TTY<li><strong>append-only</strong> - the output is always appended to the end. No cursor manipulations are performed<li><strong>ndjson</strong> - the most verbose reporter. Prints all logs in <a href="http://ndjson.org/">ndjson</a> format</ul><p>If you want to change what type of information is printed, use the <a href="../npmrc.html)">loglevel</a> setting.</section><section class="level3"aria-labelledby="--use-store-server"><h3 id="--use-store-server">--use-store-server</h3><ul><li>Default: <strong>false</strong><li>Type: <strong>Boolean</strong></ul><p>Starts a store server in the background. The store server will keep running after installation is done. To stop the store server, run <code>pnpm server stop</code></section><section class="level3"aria-labelledby="--shamefully-hoist"><h3 id="--shamefully-hoist">--shamefully-hoist</h3><ul><li>Default: <strong>false</strong><li>Type: <strong>Boolean</strong></ul><p>Creates a flat <code>node_modules</code> structure, similar to that of <code>npm</code> or <code>yarn</code>. <strong>WARNING</strong>: This is highly discouraged.</section><section class="level3"aria-labelledby="--ignore-scripts"><h3 id="--ignore-scripts">--ignore-scripts</h3><ul><li>Default: <strong>false</strong><li>Type: <strong>Boolean</strong></ul><p>Do not execute any scripts defined in the project <code>package.json</code> and its dependencies.</section><section class="level3"aria-labelledby="--filter-package_selector"><h3 id="--filter-package_selector">--filter &#x3C;package_selector></h3><p><a href="../filtering.html">Read more about filtering.</a></section><section class="level3"aria-labelledby="--resolution-only"><h3 id="--resolution-only">--resolution-only</h3><p>Added in: v8.3.0<p>Re-runs resolution: useful for printing out peer dependency issues. <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section></section>