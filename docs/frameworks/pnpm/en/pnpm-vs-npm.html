<!doctypehtml><html lang="en"><meta charset="utf-8"><title>pnpm vs npm</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css"><section id="pnpm-vs-npm"class="level1"><h1>pnpm vs npm</h1><section id="npms-flat-tree"class="level2"><h2>npm's flat tree</h2><p>npm maintains a [flattened dependency tree] as of version 3. This leads to less disk space bloat, with a messy <code>node_modules</code> directory as a side effect.<p>On the other hand, pnpm manages <code>node_modules</code> by using hard linking and symbolic linking to a global on-disk content-addressable store. This nets you the benefits of far less disk space usage, while also keeping your <code>node_modules</code> clean. There is documentation on the [store layout] if you wish to learn more.<p>The good thing about pnpm's proper <code>node_modules</code> structure is that it [helps to avoid silly bugs] by making it impossible to use modules that are not specified in the project's <code>package.json</code>.<p><a href="https://github.com/npm/npm/issues/6912">flattened dependency tree</a> [store layout]: symlinked-node-modules-structure <a href="https://www.kochan.io/nodejs/pnpms-strictness-helps-to-avoid-silly-bugs.html">helps to avoid silly bugs</a></section><section id="installation"class="level2"><h2>Installation</h2><p>pnpm does not allow installation of packages without saving them to <code>package.json</code>. If no parameters are passed to <code>pnpm add</code>, packages are saved as regular dependencies. Like with npm, <code>--save-dev</code> and <code>--save-optional</code> can be used to install packages as dev or optional dependencies.<p>As a consequence of this limitation, projects won't have any extraneous packages when they use pnpm unless they remove a dependency and leave it orphaned. That's why pnpm's implementation of the <a href="cli/prune">prune command</a> does not allow you to specify packages to prune - it ALWAYS removes all extraneous and orphaned packages.</section><section id="directory-dependencies"class="level2"><h2>Directory dependencies</h2><p>Directory dependencies start with the <code>file:</code> prefix and point to a directory in the filesystem. Like npm, pnpm symlinks those dependencies. Unlike npm, pnpm does not perform installation for the file dependencies.<p>This means that if you have a package called <code>foo</code> (<code>&#x3C;root>/foo</code>) that has <code>bar@file:../bar</code> as a dependency, pnpm won't perform installation for <code>&#x3C;root>/bar</code> when you run <code>pnpm install</code> on <code>foo</code>.<p>If you need to run installations in several packages at the same time, for instance in the case of a monorepo, you should look at the documentation for <a href="cli/recursive"><code>pnpm -r</code></a>.<p><span style="float:footnote"><a href="./index.html#toc">Go to TOC</a></span></section></section>