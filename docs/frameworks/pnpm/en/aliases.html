<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Aliases</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css">
  </head>
  <body>
    <section id="aliases" class="level1">
      <h1>Aliases</h1>
      <p>Aliases let you install packages with custom names.</p>
      <p>
        Let's assume you use <code>lodash</code> all over your project. There is a bug in <code>lodash</code>
        that breaks your project. You have a fix but <code>lodash</code> won't merge it. Normally
        you would either install <code>lodash</code> from your fork directly (as a git-hosted
        dependency) or publish it with a different name. If you use the second solution
        you have to replace all the requires in your project with the new dependency
        name (<code>require('lodash')</code> => <code>require('awesome-lodash')</code>). With aliases, you
        have a third option.
      </p>
      <p>
        Publish a new package called <code>awesome-lodash</code> and install it using <code>lodash</code> as
        its alias:
      </p>
      <pre class="language-text"><code class="language-text">pnpm add lodash@npm:awesome-lodash</code></pre>
      <p>
        No changes in code are needed. All the requires of <code>lodash</code> will now resolve to
        <code>awesome-lodash</code>.
      </p>
      <p>
        Sometimes you'll want to use two different versions of a package in your
        project. Easy:
      </p>
      <pre class="language-sh"><code class="language-sh">pnpm add lodash1@npm:lodash@1
pnpm add lodash2@npm:lodash@2</code></pre>
      <p>
        Now you can require the first version of lodash via <code>require('lodash1')</code> and the
        second via <code>require('lodash2')</code>.
      </p>
      <p>
        This gets even more powerful when combined with hooks. Maybe you want to replace
        <code>lodash</code> with <code>awesome-lodash</code> in all the packages in <code>node_modules</code>. You can
        easily achieve that with the following <code>.pnpmfile.cjs</code>:
      </p>
      <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">readPackage</span><span class="token punctuation">(</span><span class="token parameter">pkg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>pkg<span class="token punctuation">.</span><span class="token property-access">dependencies</span> <span class="token operator">&#x26;&#x26;</span> pkg<span class="token punctuation">.</span><span class="token property-access">dependencies</span><span class="token punctuation">.</span><span class="token property-access">lodash</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pkg<span class="token punctuation">.</span><span class="token property-access">dependencies</span><span class="token punctuation">.</span><span class="token property-access">lodash</span> <span class="token operator">=</span> <span class="token string">'npm:awesome-lodash@^1.0.0'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> pkg
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">hooks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    readPackage
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      <p><span style="float: footnote;"><a href="./index.html#toc">Go to TOC</a></span></p>
    </section>
  </body>
</html>
