<!doctype html><html lang="en"><meta charset="utf-8"><title>Features</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="features"><h1 id="features">Features</h1><p>At the very basic level, developing using Vite is not that different from using a static file server. However, Vite provides many enhancements over native ESM imports to support various features that are typically seen in bundler-based setups.<section class="level2"aria-labelledby="npm-dependency-resolving-and-pre-bundling"><h2 id="npm-dependency-resolving-and-pre-bundling">npm Dependency Resolving and Pre-Bundling</h2><p>Native ES imports do not support bare module imports like the following:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> someMethod <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'my-dep'</span></code></pre><p>The above will throw an error in the browser. Vite will detect such bare module imports in all served source files and perform the following:<ol><li><p><a href="./dep-pre-bundling">Pre-bundle</a> them to improve page loading speed and convert CommonJS / UMD modules to ESM. The pre-bundling step is performed with <a href="http://esbuild.github.io/">esbuild</a> and makes Vite's cold start time significantly faster than any JavaScript-based bundler.<li><p>Rewrite the imports to valid URLs like <code>/node_modules/.vite/deps/my-dep.js?v=f3sf2ebd</code> so that the browser can import them properly.</ol><p><strong>Dependencies are Strongly Cached</strong><p>Vite caches dependency requests via HTTP headers, so if you wish to locally edit/debug a dependency, follow the steps <a href="./dep-pre-bundling.html#browser-cache">here</a>.</section><section class="level2"aria-labelledby="hot-module-replacement"><h2 id="hot-module-replacement">Hot Module Replacement</h2><p>Vite provides an <a href="./api-hmr">HMR API</a> over native ESM. Frameworks with HMR capabilities can leverage the API to provide instant, precise updates without reloading the page or blowing away application state. Vite provides first-party HMR integrations for <a href="https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue">Vue Single File Components</a> and <a href="https://github.com/vitejs/vite-plugin-react/tree/main/packages/plugin-react">React Fast Refresh</a>. There are also official integrations for Preact via <a href="https://github.com/JoviDeCroock/prefresh/tree/main/packages/vite">@prefresh/vite</a>.<p>Note you don't need to manually set these up - when you <a href="./">create an app via <code>create-vite</code></a>, the selected templates would have these pre-configured for you already.</section><section class="level2"aria-labelledby="typescript"><h2 id="typescript">TypeScript</h2><p>Vite supports importing <code>.ts</code> files out of the box.<section class="level3"aria-labelledby="transpile-only"><h3 id="transpile-only">Transpile Only</h3><p>Note that Vite only performs transpilation on <code>.ts</code> files and does <strong>NOT</strong> perform type checking. It assumes type checking is taken care of by your IDE and build process.<p>The reason Vite does not perform type checking as part of the transform process is because the two jobs work fundamentally differently. Transpilation can work on a per-file basis and aligns perfectly with Vite's on-demand compile model. In comparison, type checking requires knowledge of the entire module graph. Shoe-horning type checking into Vite's transform pipeline will inevitably compromise Vite's speed benefits.<p>Vite's job is to get your source modules into a form that can run in the browser as fast as possible. To that end, we recommend separating static analysis checks from Vite's transform pipeline. This principle applies to other static analysis checks such as ESLint.<ul><li><p>For production builds, you can run <code>tsc --noEmit</code> in addition to Vite's build command.<li><p>During development, if you need more than IDE hints, we recommend running <code>tsc --noEmit --watch</code> in a separate process, or use <a href="https://github.com/fi3ework/vite-plugin-checker">vite-plugin-checker</a> if you prefer having type errors directly reported in the browser.</ul><p>Vite uses <a href="https://github.com/evanw/esbuild">esbuild</a> to transpile TypeScript into JavaScript which is about 20~30x faster than vanilla <code>tsc</code>, and HMR updates can reflect in the browser in under 50ms.<p>Use the <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-8.html#type-only-imports-and-export">Type-Only Imports and Export</a> syntax to avoid potential problems like type-only imports being incorrectly bundled, for example:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> <span class="token constant">T</span> <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">'only/types'</span>
<span class="token keyword module">export</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> <span class="token constant">T</span> <span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="typescript-compiler-options"><h3 id="typescript-compiler-options">TypeScript Compiler Options</h3><p>Some configuration fields under <code>compilerOptions</code> in <code>tsconfig.json</code> require special attention.<section class="level4"aria-labelledby="isolatedmodules"><h4 id="isolatedmodules"><code>isolatedModules</code></h4><ul><li><a href="https://www.typescriptlang.org/tsconfig#isolatedModules">TypeScript documentation</a></ul><p>Should be set to <code>true</code>.<p>It is because <code>esbuild</code> only performs transpilation without type information, it doesn't support certain features like const enum and implicit type-only imports.<p>You must set <code>"isolatedModules": true</code> in your <code>tsconfig.json</code> under <code>compilerOptions</code>, so that TS will warn you against the features that do not work with isolated transpilation.<p>If a dependency doesn't work well with <code>"isolatedModules": true</code>. You can use <code>"skipLibCheck": true</code> to temporarily suppress the errors until it is fixed upstream.</section><section class="level4"aria-labelledby="usedefineforclassfields"><h4 id="usedefineforclassfields"><code>useDefineForClassFields</code></h4><ul><li><a href="https://www.typescriptlang.org/tsconfig#useDefineForClassFields">TypeScript documentation</a></ul><p>Starting from Vite 2.5.0, the default value will be <code>true</code> if the TypeScript target is <code>ESNext</code> or <code>ES2022</code> or newer. It is consistent with the <a href="https://github.com/microsoft/TypeScript/pull/42663">behavior of <code>tsc</code> 4.3.2 and later</a>. It is also the standard ECMAScript runtime behavior.<p>Other TypeScript targets will default to <code>false</code>.<p>But it may be counter-intuitive for those coming from other programming languages or older versions of TypeScript. You can read more about the transition in the <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#the-usedefineforclassfields-flag-and-the-declare-property-modifier">TypeScript 3.7 release notes</a>.<p>If you are using a library that heavily relies on class fields, please be careful about the library's intended usage of it.<p>Most libraries expect <code>"useDefineForClassFields": true</code>, such as <a href="https://mobx.js.org/installation.html#use-spec-compliant-transpilation-for-class-properties">MobX</a>.<p>But a few libraries haven't transitioned to this new default yet, including <a href="https://github.com/lit/lit-element/issues/1030"><code>lit-element</code></a>. Please explicitly set <code>useDefineForClassFields</code> to <code>false</code> in these cases.</section><section class="level4"aria-labelledby="target"><h4 id="target"><code>target</code></h4><ul><li><a href="https://www.typescriptlang.org/tsconfig#target">TypeScript documentation</a></ul><p>Vite does not transpile TypeScript with the configured <code>target</code> value by default, following the same behaviour as <code>esbuild</code>.<p>The <a href="/config/shared-options.html#esbuild"><code>esbuild.target</code></a> option can be used instead, which defaults to <code>esnext</code> for minimal transpilation. In builds, the <a href="/config/build-options.html#build-target"><code>build.target</code></a> option takes higher priority and can also be set if needed.</p>warning `useDefineForClassFields` If `target` is not `ESNext` or `ES2022` or newer, or if there's no `tsconfig.json` file, `useDefineForClassFields` will default to `false` which can be problematic with the default `esbuild.target` value of `esnext`. It may transpile to [static initialization blocks](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Static_initialization_blocks#browser_compatibility) which may not be supported in your browser.<p>As such, it is recommended to set <code>target</code> to <code>ESNext</code> or <code>ES2022</code> or newer, or set <code>useDefineForClassFields</code> to <code>true</code> explicitly when configuring <code>tsconfig.json</code>.</section><section class="level4"aria-labelledby="other-compiler-options-affecting-the-build-result"><h4 id="other-compiler-options-affecting-the-build-result">Other Compiler Options Affecting the Build Result</h4><ul><li><a href="https://www.typescriptlang.org/tsconfig#extends"><code>extends</code></a><li><a href="https://www.typescriptlang.org/tsconfig#importsNotUsedAsValues"><code>importsNotUsedAsValues</code></a><li><a href="https://www.typescriptlang.org/tsconfig#preserveValueImports"><code>preserveValueImports</code></a><li><a href="https://www.typescriptlang.org/tsconfig#verbatimModuleSyntax"><code>verbatimModuleSyntax</code></a><li><a href="https://www.typescriptlang.org/tsconfig#jsx"><code>jsx</code></a><li><a href="https://www.typescriptlang.org/tsconfig#jsxFactory"><code>jsxFactory</code></a><li><a href="https://www.typescriptlang.org/tsconfig#jsxFragmentFactory"><code>jsxFragmentFactory</code></a><li><a href="https://www.typescriptlang.org/tsconfig#jsxImportSource"><code>jsxImportSource</code></a><li><a href="https://www.typescriptlang.org/tsconfig#experimentalDecorators"><code>experimentalDecorators</code></a><li><a href="https://www.typescriptlang.org/tsconfig#alwaysStrict"><code>alwaysStrict</code></a></ul>tip `skipLibCheck` Vite starter templates have `"skipLibCheck": "true"` by default to avoid typechecking dependencies, as they may choose to only support specific versions and configurations of TypeScript. You can learn more at [vuejs/vue-cli#5688](https://github.com/vuejs/vue-cli/pull/5688).</section></section><section class="level3"aria-labelledby="client-types"><h3 id="client-types">Client Types</h3><p>Vite's default types are for its Node.js API. To shim the environment of client side code in a Vite application, add a <code>d.ts</code> declaration file:<pre class="language-typescript"><code class="language-typescript"><span class="token comment">/// &#x3C;reference types="vite/client" /></span></code></pre><p>Alternatively, you can add <code>vite/client</code> to <code>compilerOptions.types</code> inside <code>tsconfig.json</code>:<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"types"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"vite/client"</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>This will provide the following type shims:<ul><li>Asset imports (e.g. importing an <code>.svg</code> file)<li>Types for the Vite-injected <a href="./env-and-mode.html#env-variables">env variables</a> on <code>import.meta.env</code><li>Types for the <a href="./api-hmr">HMR API</a> on <code>import.meta.hot</code></ul>tip To override the default typing, add a type definition file that contains your typings. Then, add the type reference before `vite/client`.<p>For example, to make the default import of <code>*.svg</code> a React component:<ul><li><code>vite-env-override.d.ts</code> (the file that contains your typings):<pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'*.svg'</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> content<span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">SVGProps</span></span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">SVGElement</span><span class="token operator">>></span>
  <span class="token keyword module">export</span> <span class="token keyword module">default</span> content
<span class="token punctuation">}</span></code></pre><li>The file containing the reference to <code>vite/client</code>:<pre class="language-ts"><code class="language-ts"><span class="token comment">/// &#x3C;reference types="./vite-env-override.d.ts" /></span>
<span class="token comment">/// &#x3C;reference types="vite/client" /></span></code></pre></ul></section></section><section class="level2"aria-labelledby="vue"><h2 id="vue">Vue</h2><p>Vite provides first-class Vue support:<ul><li>Vue 3 SFC support via <a href="https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue">@vitejs/plugin-vue</a><li>Vue 3 JSX support via <a href="https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue-jsx">@vitejs/plugin-vue-jsx</a><li>Vue 2.7 SFC support via <a href="https://github.com/vitejs/vite-plugin-vue2">@vitejs/plugin-vue2</a><li>Vue 2.7 JSX support via <a href="https://github.com/vitejs/vite-plugin-vue2-jsx">@vitejs/plugin-vue2-jsx</a></ul></section><section class="level2"aria-labelledby="jsx"><h2 id="jsx">JSX</h2><p><code>.jsx</code> and <code>.tsx</code> files are also supported out of the box. JSX transpilation is also handled via <a href="https://esbuild.github.io">esbuild</a>.<p>Vue users should use the official <a href="https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue-jsx">@vitejs/plugin-vue-jsx</a> plugin, which provides Vue 3 specific features including HMR, global component resolving, directives and slots.<p>If using JSX without React or Vue, custom <code>jsxFactory</code> and <code>jsxFragment</code> can be configured using the <a href="/config/shared-options.md#esbuild"><code>esbuild</code> option</a>. For example for Preact:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vite'</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">esbuild</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">jsxFactory</span><span class="token operator">:</span> <span class="token string">'h'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">jsxFragment</span><span class="token operator">:</span> <span class="token string">'Fragment'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>More details in <a href="https://esbuild.github.io/content-types/#jsx">esbuild docs</a>.<p>You can inject the JSX helpers using <code>jsxInject</code> (which is a Vite-only option) to avoid manual imports:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vite'</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">esbuild</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">jsxInject</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">import React from 'react'</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></section><section class="level2"aria-labelledby="css"><h2 id="css">CSS</h2><p>Importing <code>.css</code> files will inject its content to the page via a <code>&#x3C;style></code> tag with HMR support.<section class="level3"aria-labelledby="import-inlining-and-rebasing"><h3 id="import-inlining-and-rebasing"><code>@import</code> Inlining and Rebasing</h3><p>Vite is pre-configured to support CSS <code>@import</code> inlining via <code>postcss-import</code>. Vite aliases are also respected for CSS <code>@import</code>. In addition, all CSS <code>url()</code> references, even if the imported files are in different directories, are always automatically rebased to ensure correctness.<p><code>@import</code> aliases and URL rebasing are also supported for Sass and Less files (see <a href="#css-pre-processors">CSS Pre-processors</a>).</section><section class="level3"aria-labelledby="postcss"><h3 id="postcss">PostCSS</h3><p>If the project contains valid PostCSS config (any format supported by <a href="https://github.com/postcss/postcss-load-config">postcss-load-config</a>, e.g. <code>postcss.config.js</code>), it will be automatically applied to all imported CSS.<p>Note that CSS minification will run after PostCSS and will use <a href="/config/build-options.md#build-csstarget"><code>build.cssTarget</code></a> option.</section><section class="level3"aria-labelledby="css-modules"><h3 id="css-modules">CSS Modules</h3><p>Any CSS file ending with <code>.module.css</code> is considered a <a href="https://github.com/css-modules/css-modules">CSS modules file</a>. Importing such a file will return the corresponding module object:<pre class="language-css"><code class="language-css"><span class="token selector"><span class="token class">.red</span></span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token color">red</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword module">import</span> <span class="token imports">classes</span> <span class="token keyword module">from</span> <span class="token string">'./example.module.css'</span>
<span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">className</span> <span class="token operator">=</span> classes<span class="token punctuation">.</span><span class="token property-access">red</span></code></pre><p>CSS modules behavior can be configured via the <a href="/config/shared-options.md#css-modules"><code>css.modules</code> option</a>.<p>If <code>css.modules.localsConvention</code> is set to enable camelCase locals (e.g. <code>localsConvention: 'camelCaseOnly'</code>), you can also use named imports:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token comment">// .apply-color -> applyColor</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> applyColor <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./example.module.css'</span>
<span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">className</span> <span class="token operator">=</span> applyColor</code></pre></section><section class="level3"aria-labelledby="css-pre-processors"><h3 id="css-pre-processors">CSS Pre-processors</h3><p>Because Vite targets modern browsers only, it is recommended to use native CSS variables with PostCSS plugins that implement CSSWG drafts (e.g. <a href="https://github.com/csstools/postcss-plugins/tree/main/plugins/postcss-nesting">postcss-nesting</a>) and author plain, future-standards-compliant CSS.<p>That said, Vite does provide built-in support for <code>.scss</code>, <code>.sass</code>, <code>.less</code>, <code>.styl</code> and <code>.stylus</code> files. There is no need to install Vite-specific plugins for them, but the corresponding pre-processor itself must be installed:<pre class="language-bash"><code class="language-bash"><span class="token comment"># .scss and .sass</span>
<span class="token function">npm</span> <span class="token function">add</span> -D sass-embedded <span class="token comment"># or sass</span>

<span class="token comment"># .less</span>
<span class="token function">npm</span> <span class="token function">add</span> -D <span class="token function">less</span>

<span class="token comment"># .styl and .stylus</span>
<span class="token function">npm</span> <span class="token function">add</span> -D stylus</code></pre><p>If using Vue single file components, this also automatically enables <code>&#x3C;style lang="sass"></code> et al.<p>Vite improves <code>@import</code> resolving for Sass and Less so that Vite aliases are also respected. In addition, relative <code>url()</code> references inside imported Sass/Less files that are in different directories from the root file are also automatically rebased to ensure correctness.<p><code>@import</code> alias and url rebasing are not supported for Stylus due to its API constraints.<p>You can also use CSS modules combined with pre-processors by prepending <code>.module</code> to the file extension, for example <code>style.module.scss</code>.</section><section class="level3"aria-labelledby="disabling-css-injection-into-the-page"><h3 id="disabling-css-injection-into-the-page">Disabling CSS injection into the page</h3><p>The automatic injection of CSS contents can be turned off via the <code>?inline</code> query parameter. In this case, the processed CSS string is returned as the module's default export as usual, but the styles aren't injected to the page.<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword module">import</span> <span class="token string">'./foo.css'</span> <span class="token comment">// will be injected into the page</span>
<span class="token keyword module">import</span> <span class="token imports">otherStyles</span> <span class="token keyword module">from</span> <span class="token string">'./bar.css?inline'</span> <span class="token comment">// will not be injected</span></code></pre>tip NOTE Default and named imports from CSS files (e.g `import style from './foo.css'`) are removed since Vite 5. Use the `?inline` query instead.</section><section class="level3"aria-labelledby="lightning-css"><h3 id="lightning-css">Lightning CSS</h3><p>Starting from Vite 4.4, there is experimental support for <a href="https://lightningcss.dev/">Lightning CSS</a>. You can opt into it by adding <a href="../config/shared-options.md#css-transformer"><code>css.transformer: 'lightningcss'</code></a> to your config file and install the optional <a href="https://www.npmjs.com/package/lightningcss"><code>lightningcss</code></a> dependency:<pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">add</span> -D lightningcss</code></pre><p>If enabled, CSS files will be processed by Lightning CSS instead of PostCSS. To configure it, you can pass Lightning CSS options to the <a href="../config/shared-options.md#css-lightningcss"><code>css.lightningcss</code></a> config option.<p>To configure CSS Modules, you'll use <a href="https://lightningcss.dev/css-modules.html"><code>css.lightningcss.cssModules</code></a> instead of <a href="../config/shared-options.md#css-modules"><code>css.modules</code></a> (which configures the way PostCSS handles CSS modules).<p>By default, Vite uses esbuild to minify CSS. Lightning CSS can also be used as the CSS minifier with <a href="../config/build-options.md#build-cssminify"><code>build.cssMinify: 'lightningcss'</code></a>.</p>tip NOTE [CSS Pre-processors](#css-pre-processors) aren't supported when using Lightning CSS.</section></section><section class="level2"aria-labelledby="static-assets"><h2 id="static-assets">Static Assets</h2><p>Importing a static asset will return the resolved public URL when it is served:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword module">import</span> <span class="token imports">imgUrl</span> <span class="token keyword module">from</span> <span class="token string">'./img.png'</span>
<span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'hero-img'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">src</span> <span class="token operator">=</span> imgUrl</code></pre><p>Special queries can modify how assets are loaded:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token comment">// Explicitly load assets as URL</span>
<span class="token keyword module">import</span> <span class="token imports">assetAsURL</span> <span class="token keyword module">from</span> <span class="token string">'./asset.js?url'</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token comment">// Load assets as strings</span>
<span class="token keyword module">import</span> <span class="token imports">assetAsString</span> <span class="token keyword module">from</span> <span class="token string">'./shader.glsl?raw'</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token comment">// Load Web Workers</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">Worker</span></span> <span class="token keyword module">from</span> <span class="token string">'./worker.js?worker'</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token comment">// Web Workers inlined as base64 strings at build time</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">InlineWorker</span></span> <span class="token keyword module">from</span> <span class="token string">'./worker.js?worker&#x26;inline'</span></code></pre><p>More details in <a href="./assets">Static Asset Handling</a>.</section><section class="level2"aria-labelledby="json"><h2 id="json">JSON</h2><p>JSON files can be directly imported - named imports are also supported:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token comment">// import the entire object</span>
<span class="token keyword module">import</span> <span class="token imports">json</span> <span class="token keyword module">from</span> <span class="token string">'./example.json'</span>
<span class="token comment">// import a root field as named exports - helps with tree-shaking!</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> field <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./example.json'</span></code></pre></section><section class="level2"aria-labelledby="glob-import"><h2 id="glob-import">Glob Import</h2><p>Vite supports importing multiple modules from the file system via the special <code>import.meta.glob</code> function:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token keyword module">import</span><span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token method function property-access">glob</span><span class="token punctuation">(</span><span class="token string">'./dir/*.js'</span><span class="token punctuation">)</span></code></pre><p>The above will be transformed into the following:<pre class="language-js"><code class="language-js"><span class="token comment">// code produced by vite</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">'./dir/foo.js'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./dir/foo.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string-property property">'./dir/bar.js'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./dir/bar.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre><p>You can then iterate over the keys of the <code>modules</code> object to access the corresponding modules:<pre class="language-js"><code class="language-js"><span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> path <span class="token keyword">in</span> modules<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  modules<span class="token punctuation">[</span>path<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">mod</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> mod<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><p>Matched files are by default lazy-loaded via dynamic import and will be split into separate chunks during build. If you'd rather import all the modules directly (e.g. relying on side-effects in these modules to be applied first), you can pass <code>{ eager: true }</code> as the second argument:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token keyword module">import</span><span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token method function property-access">glob</span><span class="token punctuation">(</span><span class="token string">'./dir/*.js'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">eager</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>The above will be transformed into the following:<pre class="language-js"><code class="language-js"><span class="token comment">// code produced by vite</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token operator">*</span> <span class="token keyword module">as</span> __glob__0_0</span> <span class="token keyword module">from</span> <span class="token string">'./dir/foo.js'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token operator">*</span> <span class="token keyword module">as</span> __glob__0_1</span> <span class="token keyword module">from</span> <span class="token string">'./dir/bar.js'</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">'./dir/foo.js'</span><span class="token operator">:</span> __glob__0_0<span class="token punctuation">,</span>
  <span class="token string-property property">'./dir/bar.js'</span><span class="token operator">:</span> __glob__0_1<span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre><section class="level3"aria-labelledby="multiple-patterns"><h3 id="multiple-patterns">Multiple Patterns</h3><p>The first argument can be an array of globs, for example<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token keyword module">import</span><span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token method function property-access">glob</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'./dir/*.js'</span><span class="token punctuation">,</span> <span class="token string">'./another/*.js'</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre></section><section class="level3"aria-labelledby="negative-patterns"><h3 id="negative-patterns">Negative Patterns</h3><p>Negative glob patterns are also supported (prefixed with <code>!</code>). To ignore some files from the result, you can add exclude glob patterns to the first argument:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token keyword module">import</span><span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token method function property-access">glob</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'./dir/*.js'</span><span class="token punctuation">,</span> <span class="token string">'!**/bar.js'</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><pre class="language-js"><code class="language-js"><span class="token comment">// code produced by vite</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">'./dir/foo.js'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./dir/foo.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre><section class="level4"aria-labelledby="named-imports"><h4 id="named-imports">Named Imports</h4><p>It's possible to only import parts of the modules with the <code>import</code> options.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token keyword module">import</span><span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token method function property-access">glob</span><span class="token punctuation">(</span><span class="token string">'./dir/*.js'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword module">import</span><span class="token operator">:</span> <span class="token string">'setup'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><pre class="language-ts"><code class="language-ts"><span class="token comment">// code produced by vite</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">'./dir/foo.js'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./dir/foo.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token arrow operator">=></span> m<span class="token punctuation">.</span><span class="token property-access">setup</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string-property property">'./dir/bar.js'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./dir/bar.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token arrow operator">=></span> m<span class="token punctuation">.</span><span class="token property-access">setup</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre><p>When combined with <code>eager</code> it's even possible to have tree-shaking enabled for those modules.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token keyword module">import</span><span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token method function property-access">glob</span><span class="token punctuation">(</span><span class="token string">'./dir/*.js'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token keyword module">import</span><span class="token operator">:</span> <span class="token string">'setup'</span><span class="token punctuation">,</span>
  eager<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><pre class="language-ts"><code class="language-ts"><span class="token comment">// code produced by vite:</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> setup <span class="token keyword module">as</span> __glob__0_0 <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./dir/foo.js'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> setup <span class="token keyword module">as</span> __glob__0_1 <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./dir/bar.js'</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">'./dir/foo.js'</span><span class="token operator">:</span> __glob__0_0<span class="token punctuation">,</span>
  <span class="token string-property property">'./dir/bar.js'</span><span class="token operator">:</span> __glob__0_1<span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre><p>Set <code>import</code> to <code>default</code> to import the default export.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token keyword module">import</span><span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token method function property-access">glob</span><span class="token punctuation">(</span><span class="token string">'./dir/*.js'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token keyword module">import</span><span class="token operator">:</span> <span class="token string">'default'</span><span class="token punctuation">,</span>
  eager<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><pre class="language-ts"><code class="language-ts"><span class="token comment">// code produced by vite:</span>
<span class="token keyword module">import</span> <span class="token imports">__glob__0_0</span> <span class="token keyword module">from</span> <span class="token string">'./dir/foo.js'</span>
<span class="token keyword module">import</span> <span class="token imports">__glob__0_1</span> <span class="token keyword module">from</span> <span class="token string">'./dir/bar.js'</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">'./dir/foo.js'</span><span class="token operator">:</span> __glob__0_0<span class="token punctuation">,</span>
  <span class="token string-property property">'./dir/bar.js'</span><span class="token operator">:</span> __glob__0_1<span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></section><section class="level4"aria-labelledby="custom-queries"><h4 id="custom-queries">Custom Queries</h4><p>You can also use the <code>query</code> option to provide queries to imports, for example, to import assets <a href="https://vite.dev/guide/assets.html#importing-asset-as-string">as a string</a> or <a href="https://vite.dev/guide/assets.html#importing-asset-as-url">as a url</a>:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">const</span> moduleStrings <span class="token operator">=</span> <span class="token keyword module">import</span><span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token method function property-access">glob</span><span class="token punctuation">(</span><span class="token string">'./dir/*.svg'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  query<span class="token operator">:</span> <span class="token string">'?raw'</span><span class="token punctuation">,</span>
  <span class="token keyword module">import</span><span class="token operator">:</span> <span class="token string">'default'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> moduleUrls <span class="token operator">=</span> <span class="token keyword module">import</span><span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token method function property-access">glob</span><span class="token punctuation">(</span><span class="token string">'./dir/*.svg'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  query<span class="token operator">:</span> <span class="token string">'?url'</span><span class="token punctuation">,</span>
  <span class="token keyword module">import</span><span class="token operator">:</span> <span class="token string">'default'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><pre class="language-ts"><code class="language-ts"><span class="token comment">// code produced by vite:</span>
<span class="token keyword">const</span> moduleStrings <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">'./dir/foo.svg'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./dir/foo.js?raw'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token arrow operator">=></span> m<span class="token punctuation">[</span><span class="token string">'default'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string-property property">'./dir/bar.svg'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./dir/bar.js?raw'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token arrow operator">=></span> m<span class="token punctuation">[</span><span class="token string">'default'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> moduleUrls <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">'./dir/foo.svg'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./dir/foo.js?url'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token arrow operator">=></span> m<span class="token punctuation">[</span><span class="token string">'default'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string-property property">'./dir/bar.svg'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./dir/bar.js?url'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token arrow operator">=></span> m<span class="token punctuation">[</span><span class="token string">'default'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre><p>You can also provide custom queries for other plugins to consume:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token keyword module">import</span><span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token method function property-access">glob</span><span class="token punctuation">(</span><span class="token string">'./dir/*.js'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  query<span class="token operator">:</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></section></section><section class="level3"aria-labelledby="glob-import-caveats"><h3 id="glob-import-caveats">Glob Import Caveats</h3><p>Note that:<ul><li>This is a Vite-only feature and is not a web or ES standard.<li>The glob patterns are treated like import specifiers: they must be either relative (start with <code>./</code>) or absolute (start with <code>/</code>, resolved relative to project root) or an alias path (see <a href="/config/shared-options.md#resolve-alias"><code>resolve.alias</code> option</a>).<li>The glob matching is done via <a href="https://github.com/mrmlnc/fast-glob"><code>fast-glob</code></a> - check out its documentation for <a href="https://github.com/mrmlnc/fast-glob#pattern-syntax">supported glob patterns</a>.<li>You should also be aware that all the arguments in the <code>import.meta.glob</code> must be <strong>passed as literals</strong>. You can NOT use variables or expressions in them.</ul></section></section><section class="level2"aria-labelledby="dynamic-import"><h2 id="dynamic-import">Dynamic Import</h2><p>Similar to <a href="#glob-import">glob import</a>, Vite also supports dynamic import with variables.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./dir/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>file<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></code></pre><p>Note that variables only represent file names one level deep. If <code>file</code> is <code>'foo/bar'</code>, the import would fail. For more advanced usage, you can use the <a href="#glob-import">glob import</a> feature.</section><section class="level2"aria-labelledby="webassembly"><h2 id="webassembly">WebAssembly</h2><p>Pre-compiled <code>.wasm</code> files can be imported with <code>?init</code>. The default export will be an initialization function that returns a Promise of the <a href="https://developer.mozilla.org/en-US/docs/WebAssembly/JavaScript_interface/Instance"><code>WebAssembly.Instance</code></a>:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword module">import</span> <span class="token imports">init</span> <span class="token keyword module">from</span> <span class="token string">'./example.wasm?init'</span>

<span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  instance<span class="token punctuation">.</span><span class="token property-access">exports</span><span class="token punctuation">.</span><span class="token method function property-access">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>The init function can also take an importObject which is passed along to <a href="https://developer.mozilla.org/en-US/docs/WebAssembly/JavaScript_interface/instantiate"><code>WebAssembly.instantiate</code></a> as its second argument:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token keyword module">import</span> <span class="token imports">init</span> <span class="token keyword module">from</span> <span class="token string">'./example.wasm?init'</span>
<span class="token comment">// ---cut---</span>
<span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">imports</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">someFunc</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">/* ... */</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>In the production build, <code>.wasm</code> files smaller than <code>assetInlineLimit</code> will be inlined as base64 strings. Otherwise, they will be treated as a <a href="./assets">static asset</a> and fetched on-demand.</p>tip NOTE [ES Module Integration Proposal for WebAssembly](https://github.com/WebAssembly/esm-integration) is not currently supported. Use [`vite-plugin-wasm`](https://github.com/Menci/vite-plugin-wasm) or other community plugins to handle this.<section class="level3"aria-labelledby="accessing-the-webassembly-module"><h3 id="accessing-the-webassembly-module">Accessing the WebAssembly Module</h3><p>If you need access to the <code>Module</code> object, e.g. to instantiate it multiple times, use an <a href="./assets.html#explicit-url-imports">explicit URL import</a> to resolve the asset, and then perform the instantiation:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword module">import</span> <span class="token imports">wasmUrl</span> <span class="token keyword module">from</span> <span class="token string">'foo.wasm?url'</span>

<span class="token keyword">const</span> <span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> responsePromise <span class="token operator">=</span> <span class="token function">fetch</span><span class="token punctuation">(</span>wasmUrl<span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> module<span class="token punctuation">,</span> instance <span class="token punctuation">}</span> <span class="token operator">=</span>
    <span class="token keyword control-flow">await</span> <span class="token known-class-name class-name">WebAssembly</span><span class="token punctuation">.</span><span class="token method function property-access">instantiateStreaming</span><span class="token punctuation">(</span>responsePromise<span class="token punctuation">)</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></section><section class="level3"aria-labelledby="fetching-the-module-in-nodejs"><h3 id="fetching-the-module-in-nodejs">Fetching the module in Node.js</h3><p>In SSR, the <code>fetch()</code> happening as part of the <code>?init</code> import, may fail with <code>TypeError: Invalid URL</code>. See the issue <a href="https://github.com/vitejs/vite/issues/8882">Support wasm in SSR</a>.<p>Here is an alternative, assuming the project base is the current directory:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword module">import</span> <span class="token imports">wasmUrl</span> <span class="token keyword module">from</span> <span class="token string">'foo.wasm?url'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> readFile <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'node:fs/promises'</span>

<span class="token keyword">const</span> <span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> resolvedUrl <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword control-flow">await</span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./test/boot.test.wasm?url'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword module">default</span>
  <span class="token keyword">const</span> buffer <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'.'</span> <span class="token operator">+</span> resolvedUrl<span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> instance <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token known-class-name class-name">WebAssembly</span><span class="token punctuation">.</span><span class="token method function property-access">instantiate</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></section></section><section class="level2"aria-labelledby="web-workers"><h2 id="web-workers">Web Workers</h2><section class="level3"aria-labelledby="import-with-constructors"><h3 id="import-with-constructors">Import with Constructors</h3><p>A web worker script can be imported using <a href="https://developer.mozilla.org/en-US/docs/Web/API/Worker/Worker"><code>new Worker()</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/SharedWorker/SharedWorker"><code>new SharedWorker()</code></a>. Compared to the worker suffixes, this syntax leans closer to the standards and is the <strong>recommended</strong> way to create workers.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">Worker</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span><span class="token string">'./worker.js'</span><span class="token punctuation">,</span> <span class="token keyword module">import</span><span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token property-access">url</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>The worker constructor also accepts options, which can be used to create "module" workers:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">Worker</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span><span class="token string">'./worker.js'</span><span class="token punctuation">,</span> <span class="token keyword module">import</span><span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token property-access">url</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'module'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>The worker detection will only work if the <code>new URL()</code> constructor is used directly inside the <code>new Worker()</code> declaration. Additionally, all options parameters must be static values (i.e. string literals).</section><section class="level3"aria-labelledby="import-with-query-suffixes"><h3 id="import-with-query-suffixes">Import with Query Suffixes</h3><p>A web worker script can be directly imported by appending <code>?worker</code> or <code>?sharedworker</code> to the import request. The default export will be a custom worker constructor:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">MyWorker</span></span> <span class="token keyword module">from</span> <span class="token string">'./worker?worker'</span>

<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyWorker</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>The worker script can also use ESM <code>import</code> statements instead of <code>importScripts()</code>. <strong>Note</strong>: During development this relies on <a href="https://caniuse.com/?search=module%20worker">browser native support</a>, but for the production build it is compiled away.<p>By default, the worker script will be emitted as a separate chunk in the production build. If you wish to inline the worker as base64 strings, add the <code>inline</code> query:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">MyWorker</span></span> <span class="token keyword module">from</span> <span class="token string">'./worker?worker&#x26;inline'</span></code></pre><p>If you wish to retrieve the worker as a URL, add the <code>url</code> query:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'vite/client'</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">MyWorker</span></span> <span class="token keyword module">from</span> <span class="token string">'./worker?worker&#x26;url'</span></code></pre><p>See <a href="/config/worker-options.md">Worker Options</a> for details on configuring the bundling of all workers.</section></section><section class="level2"aria-labelledby="content-security-policy-csp"><h2 id="content-security-policy-csp">Content Security Policy (CSP)</h2><p>To deploy CSP, certain directives or configs must be set due to Vite's internals.<section class="level3"aria-labelledby="nonce-random"><h3 id="nonce-random"><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/Sources#nonce-base64-value"><code>'nonce-{RANDOM}'</code></a></h3><p>When <a href="/config/shared-options#html-cspnonce"><code>html.cspNonce</code></a> is set, Vite adds a nonce attribute with the specified value to any <code>&#x3C;script></code> and <code>&#x3C;style></code> tags, as well as <code>&#x3C;link></code> tags for stylesheets and module preloading. Additionally, when this option is set, Vite will inject a meta tag (<code>&#x3C;meta property="csp-nonce" nonce="PLACEHOLDER" /></code>).<p>The nonce value of a meta tag with <code>property="csp-nonce"</code> will be used by Vite whenever necessary during both dev and after build.</p>warning Ensure that you replace the placeholder with a unique value for each request. This is important to prevent bypassing a resource's policy, which can otherwise be easily done.</section><section class="level3"aria-labelledby="data"><h3 id="data"><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/Sources#scheme-source:~:text=schemes%20(not%20recommended).-,data%3A,-Allows%20data%3A"><code>data:</code></a></h3><p>By default, during build, Vite inlines small assets as data URIs. Allowing <code>data:</code> for related directives (e.g. <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/img-src"><code>img-src</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/font-src"><code>font-src</code></a>), or, disabling it by setting <a href="/config/build-options#build-assetsinlinelimit"><code>build.assetsInlineLimit: 0</code></a> is necessary.</p>warning Do not allow `data:` for [`script-src`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src). It will allow injection of arbitrary scripts.</section></section><section class="level2"aria-labelledby="build-optimizations"><h2 id="build-optimizations">Build Optimizations</h2><blockquote><p>Features listed below are automatically applied as part of the build process and there is no need for explicit configuration unless you want to disable them.</blockquote><section class="level3"aria-labelledby="css-code-splitting"><h3 id="css-code-splitting">CSS Code Splitting</h3><p>Vite automatically extracts the CSS used by modules in an async chunk and generates a separate file for it. The CSS file is automatically loaded via a <code>&#x3C;link></code> tag when the associated async chunk is loaded, and the async chunk is guaranteed to only be evaluated after the CSS is loaded to avoid <a href="https://en.wikipedia.org/wiki/Flash_of_unstyled_content#:~:text=A%20flash%20of%20unstyled%20content,before%20all%20information%20is%20retrieved.">FOUC</a>.<p>If you'd rather have all the CSS extracted into a single file, you can disable CSS code splitting by setting <a href="/config/build-options.md#build-csscodesplit"><code>build.cssCodeSplit</code></a> to <code>false</code>.</section><section class="level3"aria-labelledby="preload-directives-generation"><h3 id="preload-directives-generation">Preload Directives Generation</h3><p>Vite automatically generates <code>&#x3C;link rel="modulepreload"></code> directives for entry chunks and their direct imports in the built HTML.</section><section class="level3"aria-labelledby="async-chunk-loading-optimization"><h3 id="async-chunk-loading-optimization">Async Chunk Loading Optimization</h3><p>In real world applications, Rollup often generates "common" chunks - code that is shared between two or more other chunks. Combined with dynamic imports, it is quite common to have the following scenario:</p><script setup="">import graphSvg from"../images/graph.svg?raw"</script><svg-image :svg="graphSvg"><p>In the non-optimized scenarios, when async chunk <code>A</code> is imported, the browser will have to request and parse <code>A</code> before it can figure out that it also needs the common chunk <code>C</code>. This results in an extra network roundtrip:<pre class="language-text"><code class="language-text">Entry ---> A ---> C</code></pre><p>Vite automatically rewrites code-split dynamic import calls with a preload step so that when <code>A</code> is requested, <code>C</code> is fetched <strong>in parallel</strong>:<pre class="language-text"><code class="language-text">Entry ---> (A + C)</code></pre><p>It is possible for <code>C</code> to have further imports, which will result in even more roundtrips in the un-optimized scenario. Vite's optimization will trace all the direct imports to completely eliminate the roundtrips regardless of import depth. <span style="float:footnote"><a href="./index.html#toc">Go to TOC</a></span></p></svg-image></section></section></section>