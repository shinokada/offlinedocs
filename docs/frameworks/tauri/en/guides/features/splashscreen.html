<!doctype html><html lang="en"><meta charset="utf-8"><title>Splashscreen</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="splashscreen"><h1 id="splashscreen">Splashscreen</h1><p>If your webpage could take some time to load, or if you need to run an initialization procedure in Rust before displaying your main window, a splashscreen could improve the loading experience for the user.<section class="level3"aria-labelledby="setup"><h3 id="setup">Setup</h3><p>First, create a <code>splashscreen.html</code> in your <code>distDir</code> that contains the HTML code for a splashscreen. Then, update your <code>tauri.conf.json</code> like so:<pre class="language-diff"><code class="language-diff">windows: [
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> {
</span><span class="token prefix unchanged"> </span><span class="token line">   title: Tauri App,
</span><span class="token prefix unchanged"> </span><span class="token line">   width: 800,
</span><span class="token prefix unchanged"> </span><span class="token line">   height: 600,
</span><span class="token prefix unchanged"> </span><span class="token line">   resizable: true,
</span><span class="token prefix unchanged"> </span><span class="token line">   fullscreen: false,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   visible: false // Hide the main window by default
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> },
</span><span class="token prefix unchanged"> </span><span class="token line"> // Add the splashscreen window
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> {
</span><span class="token prefix inserted">+</span><span class="token line">   width: 400,
</span><span class="token prefix inserted">+</span><span class="token line">   height: 200,
</span><span class="token prefix inserted">+</span><span class="token line">   decorations: false,
</span><span class="token prefix inserted">+</span><span class="token line">   url: splashscreen.html,
</span><span class="token prefix inserted">+</span><span class="token line">   label: splashscreen
</span><span class="token prefix inserted">+</span><span class="token line"> }
</span></span>]</code></pre><p>Now, your main window will be hidden and the splashscreen window will show when your app is launched. Next, you'll need a way to close the splashscreen and show the main window when your app is ready. How you do this depends on what you are waiting for before closing the splashscreen.</section><section class="level3"aria-labelledby="waiting-for-webpage"><h3 id="waiting-for-webpage">Waiting for Webpage</h3><p>If you are waiting for your web code, you'll want to create a <code>close_splashscreen</code> <a href="command">command</a>.<pre class="language-rust"><code class="language-rust"><span class="token keyword">use</span> <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token class-name">Manager</span><span class="token punctuation">;</span>
<span class="token comment">// Create the command:</span>
<span class="token comment">// This command must be async so that it doesn't run on the main thread.</span>
<span class="token attribute attr-name">#[tauri::command]</span>
<span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">close_splashscreen</span><span class="token punctuation">(</span>window<span class="token punctuation">:</span> <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token class-name">Window</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Close splashscreen</span>
  <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>splashscreen<span class="token punctuation">)</span> <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">get_window</span><span class="token punctuation">(</span>splashscreen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    splashscreen<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Show main window</span>
  window<span class="token punctuation">.</span><span class="token function">get_window</span><span class="token punctuation">(</span>main<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Register the command:</span>
<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token class-name">Builder</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// Add this line</span>
    <span class="token punctuation">.</span><span class="token function">invoke_handler</span><span class="token punctuation">(</span><span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token macro property">generate_handler!</span><span class="token punctuation">[</span>close_splashscreen<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token macro property">generate_context!</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>failed to run app<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>You can then import it to your project in one of two ways:<pre class="language-js"><code class="language-js"><span class="token comment">// With the Tauri API npm package:</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> invoke <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@tauri-apps/api/tauri'</span></code></pre><p>or<pre class="language-js"><code class="language-js"><span class="token comment">// With the Tauri global script:</span>
<span class="token keyword">const</span> invoke <span class="token operator">=</span> <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">__TAURI__</span><span class="token punctuation">.</span><span class="token property-access">invoke</span></code></pre><p>And finally, add an Event Listener (or just call <code>invoke()</code> whenever you want):<pre class="language-js"><code class="language-js"><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// This will wait for the window to load, but you could</span>
  <span class="token comment">// run this function on whatever trigger you want</span>
  <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token string">'close_splashscreen'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></section><section class="level3"aria-labelledby="waiting-for-rust"><h3 id="waiting-for-rust">Waiting for Rust</h3><p>If you are waiting for Rust code to run, put it in the <code>setup</code> function handler so you have access to the <code>App</code> instance:<pre class="language-rust"><code class="language-rust"><span class="token keyword">use</span> <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token class-name">Manager</span><span class="token punctuation">;</span>
<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token class-name">Builder</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>app<span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> splashscreen_window <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">get_window</span><span class="token punctuation">(</span>splashscreen<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> main_window <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">get_window</span><span class="token punctuation">(</span>main<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// we perform the initialization code on a new task so the app doesn't freeze</span>
      <span class="token namespace">tauri<span class="token punctuation">::</span>async_runtime<span class="token punctuation">::</span></span><span class="token function">spawn</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">move</span> <span class="token punctuation">{</span>
        <span class="token comment">// initialize your app here instead of sleeping :)</span>
        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token class-name">Initializing</span><span class="token punctuation">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token namespace">std<span class="token punctuation">::</span>thread<span class="token punctuation">::</span></span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token namespace">std<span class="token punctuation">::</span>time<span class="token punctuation">::</span></span><span class="token class-name">Duration</span><span class="token punctuation">::</span><span class="token function">from_secs</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token class-name">Done</span> initializing<span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// After it's done, close the splashscreen and display the main window</span>
        splashscreen_window<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        main_window<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token macro property">generate_context!</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>failed to run app<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p><span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section>