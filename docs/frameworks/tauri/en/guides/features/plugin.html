<!doctype html><html lang="en"><meta charset="utf-8"><title>Tauri Plugins</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="tauri-plugins"class="level1"><h1>Tauri Plugins</h1><p>Plugins allow you to hook into the Tauri application lifecycle and introduce new commands.<section id="using-a-plugin"class="level2"><h2>Using a Plugin</h2><p>To use a plugin, just pass the plugin instance to the App's <code>plugin</code> method:<pre class="language-rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token class-name">Builder</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token namespace">my_awesome_plugin<span class="token punctuation">::</span></span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token macro property">generate_context!</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>failed to run app<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section><section id="writing-a-plugin"class="level2"><h2>Writing a Plugin</h2><p>Plugins are reusable extensions to the Tauri API that solve common problems. They are also a very convenient way to structure your code base!<p>If you intend to share your plugin with others, we provide a ready-made template! With the tauri-cli installed just run:<pre class="language-shell"><code class="language-shell">tauri plugin init --name awesome</code></pre><section id="api-package"class="level3"><h3>API package</h3><p>By default consumers of your plugin can call provided commands like this:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> invoke <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@tauri-apps/api'</span>
<span class="token function">invoke</span><span class="token punctuation">(</span><span class="token string">'plugin:awesome|do_something'</span><span class="token punctuation">)</span></code></pre><p>where <code>awesome</code> will be replaced by your plugin name.<p>This isn't very convenient, however, so it's common for plugins to provide a so-called <em>API package</em>, a JavaScript package that provides convenient access to your commands.<blockquote><p>An example of this is the <a href="https://github.com/tauri-apps/tauri-plugin-store">tauri-plugin-store</a>, which provides a convenient class structure for accessing a store. You can scaffold a tauri plugin with attached javascript API package like this:</blockquote><pre class="language-shell"><code class="language-shell">tauri plugin init --name awesome --api</code></pre></section></section><section id="writing-a-plugin-1"class="level2"><h2>Writing a Plugin</h2><p>Using the <code>tauri::plugin::Builder</code> you can define plugins similar to how you define your app:<pre class="language-rust"><code class="language-rust"><span class="token keyword">use</span> <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token punctuation">{</span>
  <span class="token namespace">plugin<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">Builder</span><span class="token punctuation">,</span> <span class="token class-name">TauriPlugin</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token class-name">Runtime</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// the plugin custom command handlers if you choose to extend the API:</span>

<span class="token attribute attr-name">#[tauri::command]</span>
<span class="token comment">// this will be accessible with `invoke('plugin:awesome|initialize')`.</span>
<span class="token comment">// where `awesome` is the plugin name.</span>
<span class="token keyword">fn</span> <span class="token function-definition function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token attribute attr-name">#[tauri::command]</span>
<span class="token comment">// this will be accessible with `invoke('plugin:awesome|do_something')`.</span>
<span class="token keyword">fn</span> <span class="token function-definition function">do_something</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">init</span><span class="token operator">&#x3C;</span><span class="token class-name">R</span><span class="token punctuation">:</span> <span class="token class-name">Runtime</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">TauriPlugin</span><span class="token operator">&#x3C;</span><span class="token class-name">R</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token class-name">Builder</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>awesome<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">invoke_handler</span><span class="token punctuation">(</span><span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token macro property">generate_handler!</span><span class="token punctuation">[</span>initialize<span class="token punctuation">,</span> do_something<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><p>Plugins can setup and maintain state, just like your app can:<pre class="language-rust"><code class="language-rust"><span class="token keyword">use</span> <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token punctuation">{</span>
  <span class="token namespace">plugin<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">Builder</span><span class="token punctuation">,</span> <span class="token class-name">TauriPlugin</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token class-name">AppHandle</span><span class="token punctuation">,</span> <span class="token class-name">Manager</span><span class="token punctuation">,</span> <span class="token class-name">Runtime</span><span class="token punctuation">,</span> <span class="token class-name">State</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[derive(Default)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">MyState</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token attribute attr-name">#[tauri::command]</span>
<span class="token comment">// this will be accessible with `invoke('plugin:awesome|do_something')`.</span>
<span class="token keyword">fn</span> <span class="token function-definition function">do_something</span><span class="token operator">&#x3C;</span><span class="token class-name">R</span><span class="token punctuation">:</span> <span class="token class-name">Runtime</span><span class="token operator">></span><span class="token punctuation">(</span>_app<span class="token punctuation">:</span> <span class="token class-name">AppHandle</span><span class="token operator">&#x3C;</span><span class="token class-name">R</span><span class="token operator">></span><span class="token punctuation">,</span> state<span class="token punctuation">:</span> <span class="token class-name">State</span><span class="token operator">&#x3C;</span><span class="token lifetime-annotation symbol">'_</span><span class="token punctuation">,</span> <span class="token class-name">MyState</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// you can access `MyState` here!</span>
<span class="token punctuation">}</span>

<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">init</span><span class="token operator">&#x3C;</span><span class="token class-name">R</span><span class="token punctuation">:</span> <span class="token class-name">Runtime</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">TauriPlugin</span><span class="token operator">&#x3C;</span><span class="token class-name">R</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token class-name">Builder</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>awesome<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">invoke_handler</span><span class="token punctuation">(</span><span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token macro property">generate_handler!</span><span class="token punctuation">[</span>do_something<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>app_handle<span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{</span>
      <span class="token comment">// setup plugin specific state here</span>
      app_handle<span class="token punctuation">.</span><span class="token function">manage</span><span class="token punctuation">(</span><span class="token class-name">MyState</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><section id="conventions"class="level3"><h3>Conventions</h3><ul><li>The crate exports an <code>init</code> method to create the plugin.<li>Plugins should have a clear name with <code>tauri-plugin-</code> prefix.<li>Include <code>tauri-plugin</code> keyword in <code>Cargo.toml</code>/<code>package.json</code>.<li>Document your plugin in English.<li>Add an example app showcasing your plugin.</ul></section><section id="advanced"class="level3"><h3>Advanced</h3><p>Instead of relying on the <code>tauri::plugin::TauriPlugin</code> struct returned by <code>tauri::plugin::Builder::build</code>, you can implement the <code>tauri::plugin::Plugin</code> yourself. This allows you to have full control over the associated data.<p>Note that each function on the <code>Plugin</code> trait is optional, except the <code>name</code> function.<pre class="language-rust"><code class="language-rust"><span class="token keyword">use</span> <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token namespace">plugin<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">Plugin</span><span class="token punctuation">,</span> <span class="token class-name">Result</span> <span class="token keyword">as</span> <span class="token class-name">PluginResult</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token class-name">Runtime</span><span class="token punctuation">,</span> <span class="token class-name">PageLoadPayload</span><span class="token punctuation">,</span> <span class="token class-name">Window</span><span class="token punctuation">,</span> <span class="token class-name">Invoke</span><span class="token punctuation">,</span> <span class="token class-name">AppHandle</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token type-definition class-name">MyAwesomePlugin</span><span class="token operator">&#x3C;</span><span class="token class-name">R</span><span class="token punctuation">:</span> <span class="token class-name">Runtime</span><span class="token operator">></span> <span class="token punctuation">{</span>
  invoke_handler<span class="token punctuation">:</span> <span class="token class-name">Box</span><span class="token operator">&#x3C;</span><span class="token keyword">dyn</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token class-name">Invoke</span><span class="token operator">&#x3C;</span><span class="token class-name">R</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token class-name">Send</span> <span class="token operator">+</span> <span class="token class-name">Sync</span><span class="token operator">></span><span class="token punctuation">,</span>
  <span class="token comment">// plugin state, configuration fields</span>
<span class="token punctuation">}</span>

<span class="token comment">// the plugin custom command handlers if you choose to extend the API.</span>
<span class="token attribute attr-name">#[tauri::command]</span>
<span class="token comment">// this will be accessible with `invoke('plugin:awesome|initialize')`.</span>
<span class="token comment">// where `awesome` is the plugin name.</span>
<span class="token keyword">fn</span> <span class="token function-definition function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token attribute attr-name">#[tauri::command]</span>
<span class="token comment">// this will be accessible with `invoke('plugin:awesome|do_something')`.</span>
<span class="token keyword">fn</span> <span class="token function-definition function">do_something</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">impl</span><span class="token operator">&#x3C;</span><span class="token class-name">R</span><span class="token punctuation">:</span> <span class="token class-name">Runtime</span><span class="token operator">></span> <span class="token class-name">MyAwesomePlugin</span><span class="token operator">&#x3C;</span><span class="token class-name">R</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token comment">// you can add configuration fields here,</span>
  <span class="token comment">// see https://doc.rust-lang.org/1.0.0/style/ownership/builders.html</span>
  <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token keyword">Self</span> <span class="token punctuation">{</span>
    <span class="token keyword">Self</span> <span class="token punctuation">{</span>
      invoke_handler<span class="token punctuation">:</span> <span class="token class-name">Box</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token macro property">generate_handler!</span><span class="token punctuation">[</span>initialize<span class="token punctuation">,</span> do_something<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">impl</span><span class="token operator">&#x3C;</span><span class="token class-name">R</span><span class="token punctuation">:</span> <span class="token class-name">Runtime</span><span class="token operator">></span> <span class="token class-name">Plugin</span><span class="token operator">&#x3C;</span><span class="token class-name">R</span><span class="token operator">></span> <span class="token keyword">for</span> <span class="token class-name">MyAwesomePlugin</span><span class="token operator">&#x3C;</span><span class="token class-name">R</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token comment">/// The plugin name. Must be defined and used on the `invoke` calls.</span>
  <span class="token keyword">fn</span> <span class="token function-definition function">name</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">&#x26;</span><span class="token lifetime-annotation symbol">'static</span> <span class="token keyword">str</span> <span class="token punctuation">{</span>
    awesome
  <span class="token punctuation">}</span>

  <span class="token comment">/// The JS script to evaluate on initialization.</span>
  <span class="token comment">/// Useful when your plugin is accessible through `window`</span>
  <span class="token comment">/// or needs to perform a JS task on app initialization</span>
  <span class="token comment">/// e.g. window.awesomePlugin = { ... the plugin interface }</span>
  <span class="token keyword">fn</span> <span class="token function-definition function">initialization_script</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Option</span><span class="token operator">&#x3C;</span><span class="token class-name">String</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token class-name">None</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/// initialize plugin with the config provided on `tauri.conf.json > plugins > $yourPluginName` or the default value.</span>
  <span class="token keyword">fn</span> <span class="token function-definition function">initialize</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">,</span> app<span class="token punctuation">:</span> <span class="token operator">&#x26;</span><span class="token class-name">AppHandle</span><span class="token operator">&#x3C;</span><span class="token class-name">R</span><span class="token operator">></span><span class="token punctuation">,</span> config<span class="token punctuation">:</span> <span class="token namespace">serde_json<span class="token punctuation">::</span></span><span class="token class-name">Value</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">PluginResult</span><span class="token operator">&#x3C;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/// Callback invoked when the Window is created.</span>
  <span class="token keyword">fn</span> <span class="token function-definition function">created</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">,</span> window<span class="token punctuation">:</span> <span class="token class-name">Window</span><span class="token operator">&#x3C;</span><span class="token class-name">R</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token comment">/// Callback invoked when the webview performs navigation.</span>
  <span class="token keyword">fn</span> <span class="token function-definition function">on_page_load</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">,</span> window<span class="token punctuation">:</span> <span class="token class-name">Window</span><span class="token operator">&#x3C;</span><span class="token class-name">R</span><span class="token operator">></span><span class="token punctuation">,</span> payload<span class="token punctuation">:</span> <span class="token class-name">PageLoadPayload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token comment">/// Extend the invoke handler.</span>
  <span class="token keyword">fn</span> <span class="token function-definition function">extend_api</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token class-name">Invoke</span><span class="token operator">&#x3C;</span><span class="token class-name">R</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>invoke_handler<span class="token punctuation">)</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p><span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section></section>