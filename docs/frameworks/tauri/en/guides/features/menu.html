<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Window Menu</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css">
  </head>
  <body>
    <section id="window-menu" class="level1">
      <h1>Window Menu</h1>
      <p>Native application menus can be attached to a window.</p>
      <section id="creating-a-menu" class="level3">
        <h3>Creating a menu</h3>
        <p>
          To create a native window menu, import the <code>Menu</code>, <code>Submenu</code>, <code>MenuItem</code> and <code>CustomMenuItem</code> types.
          The <code>MenuItem</code> enum contains a collection of platform-specific items (currently not implemented on Windows).
          The <code>CustomMenuItem</code> allows you to create your own menu items and add special functionality to them.
        </p>
        <pre class="language-rust"><code class="language-rust"><span class="token keyword">use</span> <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">CustomMenuItem</span><span class="token punctuation">,</span> <span class="token class-name">Menu</span><span class="token punctuation">,</span> <span class="token class-name">MenuItem</span><span class="token punctuation">,</span> <span class="token class-name">Submenu</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
        <p>Create a <code>Menu</code> instance:</p>
        <pre class="language-rust"><code class="language-rust"><span class="token comment">// here `quit.to_string()` defines the menu item id, and the second parameter is the menu item label.</span>
<span class="token keyword">let</span> quit <span class="token operator">=</span> <span class="token class-name">CustomMenuItem</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>quit<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Quit</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> close <span class="token operator">=</span> <span class="token class-name">CustomMenuItem</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>close<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Close</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> submenu <span class="token operator">=</span> <span class="token class-name">Submenu</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token class-name">File</span><span class="token punctuation">,</span> <span class="token class-name">Menu</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add_item</span><span class="token punctuation">(</span>quit<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add_item</span><span class="token punctuation">(</span>close<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> menu <span class="token operator">=</span> <span class="token class-name">Menu</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">add_native_item</span><span class="token punctuation">(</span><span class="token class-name">MenuItem</span><span class="token punctuation">::</span><span class="token class-name">Copy</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">add_item</span><span class="token punctuation">(</span><span class="token class-name">CustomMenuItem</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>hide<span class="token punctuation">,</span> <span class="token class-name">Hide</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">add_submenu</span><span class="token punctuation">(</span>submenu<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </section>
      <section id="adding-the-menu-to-all-windows" class="level3">
        <h3>Adding the menu to all windows</h3>
        <p>The defined menu can be set to all windows using the <code>menu</code> API on the <code>tauri::Builder</code> struct:</p>
        <pre class="language-rust"><code class="language-rust"><span class="token keyword">use</span> <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">CustomMenuItem</span><span class="token punctuation">,</span> <span class="token class-name">Menu</span><span class="token punctuation">,</span> <span class="token class-name">MenuItem</span><span class="token punctuation">,</span> <span class="token class-name">Submenu</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> menu <span class="token operator">=</span> <span class="token class-name">Menu</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// configure the menu</span>
  <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token class-name">Builder</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">menu</span><span class="token punctuation">(</span>menu<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token macro property">generate_context!</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>error <span class="token keyword">while</span> running tauri application<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
      </section>
      <section id="adding-the-menu-to-a-specific-window" class="level3">
        <h3>Adding the menu to a specific window</h3>
        <p>You can create a window and set the menu to be used. This allows defining a specific menu set for each application window.</p>
        <pre class="language-rust"><code class="language-rust"><span class="token keyword">use</span> <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">CustomMenuItem</span><span class="token punctuation">,</span> <span class="token class-name">Menu</span><span class="token punctuation">,</span> <span class="token class-name">MenuItem</span><span class="token punctuation">,</span> <span class="token class-name">Submenu</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token class-name">WindowBuilder</span><span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> menu <span class="token operator">=</span> <span class="token class-name">Menu</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// configure the menu</span>
  <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token class-name">Builder</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>app<span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{</span>
      <span class="token class-name">WindowBuilder</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>
        app<span class="token punctuation">,</span>
        main<span class="token operator">-</span>window<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token class-name">WindowUrl</span><span class="token punctuation">::</span><span class="token class-name">App</span><span class="token punctuation">(</span>index<span class="token punctuation">.</span>html<span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">menu</span><span class="token punctuation">(</span>menu<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
      <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token macro property">generate_context!</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>error <span class="token keyword">while</span> running tauri application<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
      </section>
      <section id="listening-to-events-on-custom-menu-items" class="level3">
        <h3>Listening to events on custom menu items</h3>
        <p>Each <code>CustomMenuItem</code> triggers an event when clicked. Use the <code>on_menu_event</code> API to handle them, either on the global <code>tauri::Builder</code> or on a specific window.</p>
        <section id="listening-to-events-on-global-menus" class="level4">
          <h4>Listening to events on global menus</h4>
          <pre class="language-rust"><code class="language-rust"><span class="token keyword">use</span> <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">CustomMenuItem</span><span class="token punctuation">,</span> <span class="token class-name">Menu</span><span class="token punctuation">,</span> <span class="token class-name">MenuItem</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> menu <span class="token operator">=</span> <span class="token class-name">Menu</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// configure the menu</span>
  <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token class-name">Builder</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">menu</span><span class="token punctuation">(</span>menu<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">on_menu_event</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>event<span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{</span>
      <span class="token keyword">match</span> event<span class="token punctuation">.</span><span class="token function">menu_item_id</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        quit <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token namespace">std<span class="token punctuation">::</span>process<span class="token punctuation">::</span></span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        close <span class="token operator">=></span> <span class="token punctuation">{</span>
          event<span class="token punctuation">.</span><span class="token function">window</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        _ <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token macro property">generate_context!</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>error <span class="token keyword">while</span> running tauri application<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
        </section>
        <section id="listening-to-events-on-window-menus" class="level4">
          <h4>Listening to events on window menus</h4>
          <pre class="language-rust"><code class="language-rust"><span class="token keyword">use</span> <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">CustomMenuItem</span><span class="token punctuation">,</span> <span class="token class-name">Menu</span><span class="token punctuation">,</span> <span class="token class-name">MenuItem</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">Manager</span><span class="token punctuation">,</span> <span class="token class-name">WindowBuilder</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> menu <span class="token operator">=</span> <span class="token class-name">Menu</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// configure the menu</span>
  <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token class-name">Builder</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>app<span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> window <span class="token operator">=</span> <span class="token class-name">WindowBuilder</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>
        app<span class="token punctuation">,</span>
        main<span class="token operator">-</span>window<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token class-name">WindowUrl</span><span class="token punctuation">::</span><span class="token class-name">App</span><span class="token punctuation">(</span>index<span class="token punctuation">.</span>html<span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">menu</span><span class="token punctuation">(</span>menu<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> window_ <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      window<span class="token punctuation">.</span><span class="token function">on_menu_event</span><span class="token punctuation">(</span><span class="token keyword">move</span> <span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>event<span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">match</span> event<span class="token punctuation">.</span><span class="token function">menu_item_id</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          quit <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token namespace">std<span class="token punctuation">::</span>process<span class="token punctuation">::</span></span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          close <span class="token operator">=></span> <span class="token punctuation">{</span>
            window_<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          _ <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token macro property">generate_context!</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>error <span class="token keyword">while</span> running tauri application<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
        </section>
      </section>
      <section id="updating-menu-items" class="level3">
        <h3>Updating menu items</h3>
        <p>The <code>Window</code> struct has a <code>menu_handle</code> method, which allows updating menu items:</p>
        <pre class="language-rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> menu <span class="token operator">=</span> <span class="token class-name">Menu</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// configure the menu</span>
  <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token class-name">Builder</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">menu</span><span class="token punctuation">(</span>menu<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>app<span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> main_window <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">get_window</span><span class="token punctuation">(</span>main<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> menu_handle <span class="token operator">=</span> main_window<span class="token punctuation">.</span><span class="token function">menu_handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token namespace">std<span class="token punctuation">::</span>thread<span class="token punctuation">::</span></span><span class="token function">spawn</span><span class="token punctuation">(</span><span class="token keyword">move</span> <span class="token closure-params"><span class="token closure-punctuation punctuation">|</span><span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{</span>
        <span class="token comment">// you can also `set_selected`, `set_enabled` and `set_native_image` (macOS only).</span>
        menu_handle<span class="token punctuation">.</span><span class="token function">get_item</span><span class="token punctuation">(</span>item_id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set_title</span><span class="token punctuation">(</span><span class="token class-name">New</span> title<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
        <p><span style="float: footnote;"><a href="../../index.html#toc">Go to TOC</a></span></p>
      </section>
    </section>
  </body>
</html>
