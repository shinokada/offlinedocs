<!doctype html><html lang="en"><meta charset="utf-8"><title>Updater</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="sidebar_position"content="5"><link rel="stylesheet"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><p>import Tabs from '@theme/Tabs' import TabItem from '@theme/TabItem' import Command from '@theme/Command' import updaterDialogImage from '/img/guides/distribution/updater/update-available.png'<section class="level1"aria-labelledby="updater"><h1 id="updater">Updater</h1><p>Tauri offers a built-in updater for the NSIS (Windows), MSI (Windows), AppImage (Linux) and App bundle (macOS) distribution formats.<p>Once your Tauri project is ready, you can configure Tauri's updater to enable auto updating for your users.<section class="level2"aria-labelledby="signing-updates"><h2 id="signing-updates">Signing Updates</h2><p>Tauri's updater has a built-in signature mechanism to ensure that updates are safe to be installed.<p>To sign your updates you need two things:<ol><li>The <em>public key</em>, which will be added to your <code>tauri.conf.json</code> file later, to validate update artifacts before the installation.<li>The <em>private key</em>, which is used to sign your update artifacts and should NEVER be shared with anyone. Also, if you lose this key, you will NOT be able to publish new updates to your current user base. It is crucial to store it in a safe place where you can always access it.</ol><p>To generate the keys on Linux and macOS you can use the Tauri CLI:<p>&#x3C;Command name=signer generate -w ~/.tauri/myapp.key /><p>If you are on Windows, you should use <code>$HOME/.tauri/myapp.key</code> or a different path of your choice instead:<p>&#x3C;Command name=signer generate -w $HOME/.tauri/myapp.key /></section><section class="level2"aria-labelledby="tauri-configuration"><h2 id="tauri-configuration">Tauri Configuration</h2><p>Now you need to configure Tauri's updater. To do this, add this to your <a href="../../api/config.md#updaterconfig">Tauri config</a>:<figure class="language-json"><figcaption>tauri.conf.json</figcaption><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  tauri<span class="token operator">:</span> <span class="token punctuation">{</span>
    updater<span class="token operator">:</span> <span class="token punctuation">{</span>
      active<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      endpoints<span class="token operator">:</span> <span class="token punctuation">[</span>
        https<span class="token operator">:</span><span class="token comment">//releases.myapp.com/{{target}}/{{arch}}/{{current_version}}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      dialog<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      pubkey<span class="token operator">:</span> YOUR_UPDATER_SIGNATURE_PUBKEY_HERE
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></figure><p>The required keys are <code>active</code>, <code>endpoints</code> and <code>pubkey</code> to enable the updater. <code>dialog</code> is optional and will default to <code>true</code> if not set.<p><code>active</code> must be a boolean. By default it's set to false.<p><code>endpoints</code> must be an array of updater endpoint URLs as strings. TLS is enforced in production mode.<br>Each updater URL can contain the following variables allowing you to determine <a href="#update-server-json-format">server-side</a> if an update is available:<ul><li><code>{{current_version}}</code>: The version of the app that is requesting the update.<li><code>{{target}}</code>: The operating system name (one of <code>linux</code>, <code>windows</code> or <code>darwin</code>).<li><code>{{arch}}</code>: The architecture of the machine (one of <code>x86_64</code>, <code>i686</code>, <code>aarch64</code> or <code>armv7</code>).</ul><p><code>pubkey</code> must be a valid public key generated with Tauri's CLI <a href="#signing-updates">above</a>.<p><code>dialog</code> if present must be a boolean. By default it's set to true. If enabled, updater <a href="#events">events</a> will be disabled as the built-in dialog handles everything. If you need custom events, you must turn off the built-in dialog.<section class="level3"aria-labelledby="installmode-on-windows"><h3 id="installmode-on-windows"><code>installMode</code> on Windows</h3><p>On Windows there is an additional optional config <a href="../../api/config.md#updaterwindowsconfig.installmode"><code>installMode</code></a> to change how the update is installed.<figure class="language-json"><figcaption>tauri.conf.json</figcaption><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  tauri<span class="token operator">:</span> <span class="token punctuation">{</span>
    updater<span class="token operator">:</span> <span class="token punctuation">{</span>
      windows<span class="token operator">:</span> <span class="token punctuation">{</span>
        installMode<span class="token operator">:</span> passive
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></figure><ul><li><code>passive</code>: There will be a small window with a progress bar. The update will be installed without requiring any user interaction. Generally recommended and the default mode.<li><code>basicUi</code>: There will be a basic user interface shown which requires user interaction to finish the installation.<li><code>quiet</code>: There will be no progress feedback to the user. With this mode the installer cannot request admin privileges by itself so it only works in user-wide installations or when your app itself already runs with admin privileges. Generally not recommended.</ul></section></section><section class="level2"aria-labelledby="update-artifacts"><h2 id="update-artifacts">Update Artifacts</h2><p>Tauri's bundler will automatically generate and sign update artifacts once the updater is correctly configured and enabled.<p>Before building your app, you need to set environment variables for the private key and password:<ul><li><code>TAURI_PRIVATE_KEY</code>: Path or content of your private key<li><code>TAURI_KEY_PASSWORD</code>: Your private key password (optional)</ul><p>If you want to set these variables for the current console session you could execute these commands in the console which you will use to build the app later:</p><tabs groupid="set-env-vars"><tabitem value="Bash"><pre class="language-shell"><code class="language-shell"><span class="token builtin class-name">export</span> <span class="token assign-left variable">TAURI_PRIVATE_KEY</span><span class="token operator">=</span>content of the generated key
<span class="token builtin class-name">export</span> <span class="token assign-left variable">TAURI_KEY_PASSWORD</span><span class="token operator">=</span>password</code></pre></tabitem><tabitem value="PowerShell"><pre class="language-powershell"><code class="language-powershell"><span class="token variable">$env</span>:TAURI_PRIVATE_KEY=content of the generated key
<span class="token variable">$env</span>:TAURI_KEY_PASSWORD=password</code></pre></tabitem></tabs><p>After that, you can run <code>tauri build</code> as usual and Tauri will generate the update bundle and its signature.<ul><li><p><strong>Linux</strong>: On Linux, Tauri will create a <code>.tar.gz</code> archive from the AppImage inside the <code>target/release/bundle/appimage/</code> folder:<ul><li><code>myapp.AppImage</code> - the standard app bundle.<li><code>myapp.AppImage.tar.gz</code> - the updater bundle.<li><code>myapp.AppImage.tar.gz.sig</code> - the signature of the update bundle.</ul><li><p><strong>macOS</strong>: On macOS, Tauri will create a <code>.tar.gz</code> archive from the application bundle inside the <code>target/release/bundle/macos/</code> folder:<ul><li><code>myapp.app</code> - the standard app bundle.<li><code>myapp.app.tar.gz</code> - the updater bundle.<li><code>myapp.app.tar.gz.sig</code> - the signature of the update bundle.</ul><li><p><strong>Windows</strong>: On Windows, Tauri will create <code>.zip</code> archives from the MSI and NSIS installers inside the <code>target/release/bundle/msi/</code> and <code>target/release/bundle/nsis</code> folders:<ul><li><code>myapp-setup.exe</code> - the standard app bundle.<li><code>myapp-setup.nsis.zip</code> - the updater bundle.<li><code>myapp-setup.nsis.zip.sig</code> - the signature of the update bundle.<li><code>myapp.msi</code> - the standard app bundle.<li><code>myapp.msi.zip</code> - the updater bundle.<li><code>myapp.msi.zip.sig</code> - the signature of the update bundle.</ul></ul><p>The signature can be uploaded and shared safely as long as your private key is secure.</section><section class="level2"aria-labelledby="server-support"><h2 id="server-support">Server Support</h2><p>Tauri's updater supports two ways of announcing update data:<ul><li>A static JSON file (to use on services like S3 or GitHub gists)<li>A dynamic update server</ul><p>The static JSON file is easier to use while a dynamic update server will give you finer control over the update mechanism.<section class="level3"aria-labelledby="static-json-file"><h3 id="static-json-file">Static JSON File</h3><p>With this approach, Tauri will always request the same JSON file and determine if the app needs to be updated by comparing the version field of the response with the requesting app's current version. Tauri will expect a response in this format:<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  version<span class="token operator">:</span> v1.<span class="token number">0.0</span><span class="token punctuation">,</span>
  notes<span class="token operator">:</span> Test version<span class="token punctuation">,</span>

  pub_date<span class="token operator">:</span> <span class="token number">2020</span><span class="token number">-06</span>-22T19<span class="token operator">:</span><span class="token number">25</span><span class="token operator">:</span>57Z<span class="token punctuation">,</span>
  platforms<span class="token operator">:</span> <span class="token punctuation">{</span>
    darwin-x86_64<span class="token operator">:</span> <span class="token punctuation">{</span>
      signature<span class="token operator">:</span> Content of app.tar.gz.sig<span class="token punctuation">,</span>
      url<span class="token operator">:</span> https<span class="token operator">:</span><span class="token comment">//github.com/username/reponame/releases/download/v1.0.0/app-x86_64.app.tar.gz</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    darwin-aarch64<span class="token operator">:</span> <span class="token punctuation">{</span>
      signature<span class="token operator">:</span> Content of app.tar.gz.sig<span class="token punctuation">,</span>
      url<span class="token operator">:</span> https<span class="token operator">:</span><span class="token comment">//github.com/username/reponame/releases/download/v1.0.0/app-aarch64.app.tar.gz</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    linux-x86_64<span class="token operator">:</span> <span class="token punctuation">{</span>
      signature<span class="token operator">:</span> Content of app.AppImage.tar.gz.sig<span class="token punctuation">,</span>
      url<span class="token operator">:</span> https<span class="token operator">:</span><span class="token comment">//github.com/username/reponame/releases/download/v1.0.0/app-amd64.AppImage.tar.gz</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    windows-x86_64<span class="token operator">:</span> <span class="token punctuation">{</span>
      signature<span class="token operator">:</span> Content of app-setup.nsis.sig or app.msi.sig<span class="token punctuation">,</span> depending on the chosen format<span class="token punctuation">,</span>
      url<span class="token operator">:</span> https<span class="token operator">:</span><span class="token comment">//github.com/username/reponame/releases/download/v1.0.0/app-x64-setup.nsis.zip</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>The required keys are <code>version</code>, <code>platforms.[target].url</code> and <code>platforms.[target].signature</code>; the others are optional.<ul><li><p><code>version</code> must be a valid semver, with or without a leading <code>v</code>, meaning that both <code>1.0.0</code> and <code>v1.0.0</code> are valid.<li><p><code>platforms</code>: Each platform key is in the <code>OS-ARCH</code> format, where <code>OS</code> is one of <code>linux</code>, <code>darwin</code> or <code>windows</code>, and <code>ARCH</code> is one of <code>x86_64</code>, <code>aarch64</code>, <code>i686</code> or <code>armv7</code>.<li><p><code>url</code> must be a valid url to the update bundle.<li><p><code>signature</code> must be the <strong>content</strong> of the generated <code>.sig</code> file. The signature may change each time you run <code>tauri build</code> so make sure to always update it.<li><p><code>notes</code>: Here you can add notes about the update, like release notes. Tauri's default dialog will present this to the user when it asks if it's allowed to update.<li><p><code>pub_date</code> must be formatted according to <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.8">RFC 3339</a> if present.</ul><p>Note that Tauri will validate the <em>whole</em> file before checking the version field, so make sure all existing platform configurations are valid and complete.</section><section class="level3"aria-labelledby="dynamic-update-server"><h3 id="dynamic-update-server">Dynamic Update Server</h3><p>With this approach, Tauri will follow the update server's instructions. To disable the internal version check you can <a href="https://docs.rs/tauri/latest/tauri/updater/struct.UpdateBuilder.html#method.should_install">overwrite Tauri's version comparison</a> to always install the version sent by the server. This could be useful if you need to roll back your app version quickly.<p>Your server can use variables defined in the <a href="../../api/config.md#updaterconfig.endpoints"><code>endpoint</code></a> url above to determine if an update is required. If you need more data, you can include additional <a href="https://docs.rs/tauri/latest/tauri/updater/struct.UpdateBuilder.html#method.header">request headers in Rust</a> to your liking.<p>Your server should respond with a status code of <a href="http://tools.ietf.org/html/rfc2616#section-10.2.5"><code>204 No Content</code></a> if there is no update available.<p>If an update is required, your server should respond with a status code of <a href="http://tools.ietf.org/html/rfc2616#section-10.2.1"><code>200 OK</code></a> and a JSON response in this format:<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  version<span class="token operator">:</span> <span class="token number">0.2</span>.<span class="token number">0</span><span class="token punctuation">,</span>
  pub_date<span class="token operator">:</span> <span class="token number">2020</span><span class="token number">-09</span>-18T12<span class="token operator">:</span><span class="token number">29</span><span class="token operator">:</span><span class="token number">53</span>+<span class="token number">01</span><span class="token operator">:</span><span class="token number">00</span><span class="token punctuation">,</span>
  url<span class="token operator">:</span> https<span class="token operator">:</span><span class="token comment">//mycompany.example.com/myapp/releases/myrelease.tar.gz,</span>
  signature<span class="token operator">:</span> Content of the relevant .sig file<span class="token punctuation">,</span>
  notes<span class="token operator">:</span> These are some release notes

<span class="token punctuation">}</span></code></pre><p>The required keys are url, version and signature; the others are optional.<ul><li><p><code>version</code> must be a valid semver, with or without a leading <code>v</code>, meaning that both <code>1.0.0</code> and <code>v1.0.0</code> are valid.<li><p><code>url</code> must be a valid url to the update bundle.<li><p><code>signature</code> must be the <strong>content</strong> of the generated <code>.sig</code> file. The signature may change each time you run <code>tauri build</code> so make sure to always update it.<li><p><code>notes</code>: Here you can add notes about the update, like release notes. Tauri's default dialog will present this to the user when it asks if it's allowed to update.<li><p><code>pub_date</code> must be formatted according to <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.8">RFC 3339</a> if present.</ul></section></section><section class="level2"aria-labelledby="checking-for-updates"><h2 id="checking-for-updates">Checking for Updates</h2><section class="level3"aria-labelledby="built-in-dialog"><h3 id="built-in-dialog">Built-In Dialog</h3><p>By default, the updater shows a dialog using Tauri's <a href="../../api/js/dialog.md#ask">dialog.ask</a> API internally. The dialog will only check for a new update when the app was just launched or when you manually <a href="../../api/js/event.md#emit">emit</a> the <code>tauri://update</code> event.<p>&#x3C;img src={updaterDialogImage} alt=Default updater dialog style={{maxHeight: 200px, textAlign: 'center'}} /><p>The dialog release notes are represented by the update <code>notes</code> provided by the <a href="#server-support">server</a>.<p>If the user accepts, the update is downloaded and installed. Afterwards, the user is prompted to restart the application.</section><section class="level3"aria-labelledby="custom-dialog"><h3 id="custom-dialog">Custom Dialog</h3>caution<p>You need to disable the built-in dialog in your <a href="#tauri-configuration">Tauri configuration</a> to enable the JavaScript APIs and updater events!<section class="level4"aria-labelledby="rust"><h4 id="rust">Rust</h4><p>Please see the updater module documentation at <a href="https://docs.rs/tauri/latest/tauri/updater/index.html">docs.rs</a> for the Rust API.</section><section class="level4"aria-labelledby="javascript"><h4 id="javascript">JavaScript</h4><p>For the complete API docs see <a href="../../api/js/updater.html">here</a>. An example using the JavaScript API looks like this:<figure class="language-js"><figcaption>updater.ts</figcaption><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>
  checkUpdate<span class="token punctuation">,</span>
  installUpdate<span class="token punctuation">,</span>
  onUpdaterEvent<span class="token punctuation">,</span>
<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@tauri-apps/api/updater'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> relaunch <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@tauri-apps/api/process'</span>

<span class="token keyword">const</span> unlisten <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">onUpdaterEvent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> error<span class="token punctuation">,</span> status <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// This will log all updater events, including status updates and errors.</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Updater event'</span><span class="token punctuation">,</span> error<span class="token punctuation">,</span> status<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> shouldUpdate<span class="token punctuation">,</span> manifest <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">checkUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>shouldUpdate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// You could show a dialog asking the user if they want to install the update here.</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Installing update </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>manifest<span class="token operator">?.</span>version<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>manifest<span class="token operator">?.</span>date<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>manifest<span class="token operator">?.</span>body<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span>

    <span class="token comment">// Install the update. This will also restart the app on Windows!</span>
    <span class="token keyword control-flow">await</span> <span class="token function">installUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// On macOS and Linux you will need to restart the app manually.</span>
    <span class="token comment">// You could use this step to display another confirmation dialog.</span>
    <span class="token keyword control-flow">await</span> <span class="token function">relaunch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// you need to call unlisten if your handler goes out of scope, for example if the component is unmounted.</span>
<span class="token function">unlisten</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></figure><p><span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section></section></section>