<!doctype html><html lang="en"><meta charset="utf-8"><title>Setup Example</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><p>import HelloTauriWebdriver from '@site/static/img/webdriver/hello-tauri-webdriver.png'<section id="setup-example"class="level1"><h1>Setup Example</h1><p>This example application solely focuses on adding WebDriver testing to an already existing project. To have a project to test in the following two sections, we will set up an extremely minimal Tauri application for use in our testing. We will not use the Tauri CLI, any frontend dependencies or build steps, and not be bundling the application afterward. This is to showcase exactly a minimal suite to show off adding WebDriver testing to an existing application.<p>If you just want to see the finished example project that utilizes what will be shown in this example guide, then you can see <a href="https://github.com/chippers/hello_tauri">https://github.com/chippers/hello_tauri</a>.<section id="initializing-a-cargo-project"class="level2"><h2>Initializing a Cargo Project</h2><p>We want to create a new binary Cargo project to house this example application. We can easily do this from the command line with <code>cargo new hello-tauri-webdriver --bin</code>, which will scaffold a minimal binary Cargo project for us. This directory will serve as the working directory for the rest of this guide, so make sure commands you run are inside this new <code>hello-tauri-webdriver/</code> directory.</section><section id="creating-a-minimal-frontend"class="level2"><h2>Creating a Minimal Frontend</h2><p>We will create a minimal HTML file to act as our example application's front end. We will also be using a few things from this frontend later during our WebDriver tests.<p>First, let's create our Tauri <code>distDir</code> that we know we will need once building the Tauri portion of the application. <code>mkdir dist</code> should create a new directory called <code>dist/</code> in which we will be placing the following <code>index.html</code> file.<p><code>dist/index.html</code>:<pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&#x3C;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>en</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>UTF-8</span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>title</span><span class="token punctuation">></span></span>Hello Tauri!<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
      <span class="token selector">body</span> <span class="token punctuation">{</span>
        <span class="token comment">/* Add a nice colorscheme */</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode color">#222831</span><span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode color">#ececec</span><span class="token punctuation">;</span>

        <span class="token comment">/* Make the body the exact size of the window */</span>
        <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">vh</span><span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">vw</span><span class="token punctuation">;</span>

        <span class="token comment">/* Vertically and horizontally center children of the body tag */</span>
        <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
        <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
        <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>style</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span>Hello, Tauri!<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>html</span><span class="token punctuation">></span></span></code></pre></section><section id="adding-tauri-to-the-cargo-project"class="level2"><h2>Adding Tauri to the Cargo Project</h2><p>Next, we will add necessary items to turn our Cargo project into a Tauri project. First, is adding the dependencies to the Cargo Manifest (<code>Cargo.toml</code>) so that Cargo knows to pull in our dependencies while building.<p><code>Cargo.toml</code>:<pre class="language-toml"><code class="language-toml"><span class="token punctuation">[</span><span class="token table class-name">package</span><span class="token punctuation">]</span>
<span class="token key property">name</span> <span class="token punctuation">=</span> hello-tauri-webdriver
<span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token number">0.1</span><span class="token punctuation">.</span><span class="token number">0</span>
<span class="token key property">edition</span> <span class="token punctuation">=</span> <span class="token number">2021</span>
<span class="token key property">rust-version</span> <span class="token punctuation">=</span> <span class="token number">1.56</span>

<span class="token comment"># Needed to set up some things for Tauri at build time</span>
<span class="token punctuation">[</span><span class="token table class-name">build-dependencies</span><span class="token punctuation">]</span>
<span class="token key property">tauri-build</span> <span class="token punctuation">=</span> <span class="token number">1</span>

<span class="token comment"># The actual Tauri dependency, along with `custom-protocol` to serve the pages.</span>
<span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span>
<span class="token key property">tauri</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token key property">features</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>custom-protocol<span class="token punctuation">]</span> <span class="token punctuation">}</span>

<span class="token comment"># Make --release build a binary that is small (opt-level = s) and fast (lto = true).</span>
<span class="token comment"># This is completely optional, but shows that testing the application as close to the</span>
<span class="token comment"># typical release settings is possible. Note: this will slow down compilation.</span>


<span class="token punctuation">[</span><span class="token table class-name">profile.release</span><span class="token punctuation">]</span>
<span class="token key property">incremental</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>
<span class="token key property">codegen-units</span> <span class="token punctuation">=</span> <span class="token number">1</span>
<span class="token key property">panic</span> <span class="token punctuation">=</span> abort
<span class="token key property">opt-level</span> <span class="token punctuation">=</span> s
<span class="token key property">lto</span> <span class="token punctuation">=</span> <span class="token boolean">true</span></code></pre><p>We added a <code>[build-dependency]</code> as you may have noticed. To use the build dependency, we must use it from a build script. We will create one now at <code>build.rs</code>.<p><code>build.rs</code>:<pre class="language-rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Only watch the `dist/` directory for recompiling, preventing unnecessary</span>
    <span class="token comment">// changes when we change files in other project subdirectories.</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span>cargo<span class="token punctuation">:</span>rerun<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">-</span>changed<span class="token operator">=</span>dist<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Run the Tauri build-time helpers</span>
    <span class="token namespace">tauri_build<span class="token punctuation">::</span></span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><p>Our Cargo Project now knows how to pull in and build our Tauri dependencies with all that setup. Let's finish making this minimal example a Tauri application by setting up Tauri in the actual project code. We will be editing the <code>src/main.rs</code> file to add this Tauri functionality.<p><code>src/main.rs</code>:<pre class="language-rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token class-name">Builder</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token namespace">tauri<span class="token punctuation">::</span></span><span class="token macro property">generate_context!</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>unable to run <span class="token class-name">Tauri</span> application<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Pretty simple, right?</section><section id="tauri-configuration"class="level2"><h2>Tauri Configuration</h2><p>We are going to need 2 things to successfully build the application. First, we need an icon file. You can use any PNG for this next part and copy it into <code>icon.png</code>. Typically, this will be provided as part of the scaffolding when you use the Tauri CLI to create a project. To get the default Tauri icon, we can download the icon used by the Hello Tauri example repository with the command <code>curl -L https://github.com/chippers/hello_tauri/raw/main/icon.png --output icon.png</code>.<p>We will need a <code>tauri.conf.json</code> to set some important configuration values for Tauri. Again, this would typically come from the <code>tauri init</code> scaffolding command, but we will be creating our own minimal config here.<p><code>tauri.conf.json</code>:<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  build<span class="token operator">:</span> <span class="token punctuation">{</span>
    distDir<span class="token operator">:</span> dist
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  tauri<span class="token operator">:</span> <span class="token punctuation">{</span>
    bundle<span class="token operator">:</span> <span class="token punctuation">{</span>
      identifier<span class="token operator">:</span> studio.tauri.hello_tauri_webdriver<span class="token punctuation">,</span>
      icon<span class="token operator">:</span> <span class="token punctuation">[</span>icon.png<span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    allowlist<span class="token operator">:</span> <span class="token punctuation">{</span>
      all<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    windows<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        width<span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span>
        height<span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
        resizable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        fullscreen<span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>I'll go over some of these. You can see the <code>dist/</code> directory we created earlier specified as the <code>distDir</code> property. We set a bundle identifier so that the built application has a unique id and set the <code>icon.png</code> as the only icon. We aren't using any Tauri APIs or features, so we disable them in <code>allowlist</code> by setting <code>all: false</code>. The window values just set a single window to be created with some reasonable default values.<p>At this point, we have a basic Hello World application that should display a simple greeting when run.</section><section id="running-the-example-application"class="level2"><h2>Running the Example Application</h2><p>To make sure we did it right, let's build this application! We will run this as a <code>--release</code> application because we will also run our WebDriver tests with a release profile. Run <code>cargo run --release</code>, and after some compiling, we should see the following application pop up.<div style=""&#x27;center&#x27;}}=""><img src="{HelloTauriWebdriver}/"></div><p>_Note: If you are modifying the application and want to use the Devtools, then run it without <code>--release</code> and Inspect<p>Element should be available in the right-click menu._<p>We should now be ready to start testing this application with some WebDriver frameworks. This guide will go over both <a href="webdriverio">WebdriverIO</a> and <a href="selenium">Selenium</a> in that order. <span style="float:footnote"><a href="../../../../index.html#toc">Go to TOC</a></span></section></section>