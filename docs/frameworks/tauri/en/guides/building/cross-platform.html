<!doctype html><html lang="en"><meta charset="utf-8"><title>Cross-Platform Compilation</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="sidebar_position"content="5"><link rel="stylesheet"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><p>import Command from '@theme/Command'<section class="level1"aria-labelledby="cross-platform-compilation"><h1 id="cross-platform-compilation">Cross-Platform Compilation</h1><p>Tauri relies heavily on native libraries and toolchains, so meaningful cross-compilation is <strong>not possible</strong> at the current moment. The next best option is to compile utilizing a CI/CD pipeline hosted on something like <a href="https://docs.github.com/en/actions">GitHub Actions</a>, Azure Pipelines, GitLab, or other options. The pipeline can run the compilation for each platform simultaneously making the compilation and release process much easier.<p>For an easy setup, we currently provide <a href="https://github.com/tauri-apps/tauri-action">Tauri Action</a>, a GitHub Action that runs on all the supported platforms, compiles your software, generates the necessary artifacts, and uploads them to a new GitHub release.<section class="level2"aria-labelledby="tauri-github-action"><h2 id="tauri-github-action">Tauri GitHub Action</h2><p>Tauri Action leverages GitHub Actions to simultaneously build your application as a Tauri native binary for macOS, Linux, and Windows, and automates creating a GitHub release.<p>This GitHub Action may also be used as a testing pipeline for your Tauri app, guaranteeing compilation runs fine on all platforms for each pull request sent, even if you don't wish to create a new release.<blockquote>Code Signing<p>To setup code signing for both Windows and macOS on your workflow, follow the specific guide for each platform:<ul><li><a href="../distribution/sign-windows.md#bonus-sign-your-application-with-github-actions">Windows Code Signing with GitHub Actions</a><li><a href="../distribution/sign-macos.md#example">macOS Code Signing with GitHub Actions</a></ul></blockquote><section class="level3"aria-labelledby="getting-started"><h3 id="getting-started">Getting Started</h3><p>To set up Tauri Action you must first set up a GitHub repository. You can use this action on a repo that doesn't have Tauri configured since it automatically initializes Tauri before building and configuring it to use your artifacts.<p>Go to the Actions tab on your GitHub project and choose New workflow, then choose Set up a workflow yourself. Replace the file with the <a href="https://github.com/tauri-apps/tauri-action#creating-a-release-and-uploading-the-tauri-bundles">Tauri Action production build workflow example</a>. Alternatively, you may set up the workflow based on the <a href="#example-workflow">example at the bottom of this page</a></section><section class="level3"aria-labelledby="configuration"><h3 id="configuration">Configuration</h3><p>You can configure Tauri with the <code>configPath</code>, <code>distPath</code> and <code>iconPath</code> options. See the actions Readme for details.<p>When your app isn't on the root of the repo, use the <code>projectPath</code> input.<p>You may modify the workflow name, change the triggers, and add more steps such as <code>npm run lint</code> or <code>npm run test</code>. The important part is that you keep the below line at the end of the workflow, since this runs the build script and releases the artifacts:<pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> tauri<span class="token punctuation">-</span>apps/tauri<span class="token punctuation">-</span>action@v0</code></pre></section><section class="level3"aria-labelledby="how-to-trigger"><h3 id="how-to-trigger">How to Trigger</h3><p>The release workflow in the README examples linked above is triggered by pushes on the release branch. The action automatically creates a tag and title for the GitHub release using the application version specified in <code>tauri.config.json</code>.<p>You can also trigger the workflow on the push of a version tag such as app-v0.7.0. For this you can change the start of the release workflow:<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">name</span><span class="token punctuation">:</span> publish
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">tags</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">'app-v*'</span>
  workflow_dispatch<span class="token punctuation">:</span></code></pre></section><section class="level3"aria-labelledby="example-workflow"><h3 id="example-workflow">Example Workflow</h3><p>Below is an example workflow that has been setup to run every time a new version is created on git.<p>This workflow sets up the environment on Windows, Ubuntu, and macOS latest versions. Note under <code>jobs.release.strategy.matrix</code> the platform array which contains <code>macos-latest</code>, <code>ubuntu-20.04</code>, and <code>windows-latest</code>.<p>The steps this workflow takes are:<ol><li>Checkout the repository using <code>actions/checkout@v3</code><li>Set up Node LTS and a cache for global npm/yarn/pnpm package data using <code>actions/setup-node@v3</code>.<li>Set up Rust and a cache for the <code>target/</code> folder using <code>dtolnay/rust-toolchain@stable</code> and <code>swatinem/rust-cache@v2</code>.<li>Installs all the dependencies and run the build script (for the web app).<li>Finally, it uses <code>tauri-apps/tauri-action@v0</code> to run <code>tauri build</code>, generate the artifacts, and create the GitHub release.</ol><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">name</span><span class="token punctuation">:</span> Release
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">tags</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">'v*'</span>
  <span class="token key atrule">workflow_dispatch</span><span class="token punctuation">:</span>

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">release</span><span class="token punctuation">:</span>
    <span class="token key atrule">permissions</span><span class="token punctuation">:</span>
      <span class="token key atrule">contents</span><span class="token punctuation">:</span> write
    <span class="token key atrule">strategy</span><span class="token punctuation">:</span>
      <span class="token key atrule">fail-fast</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token key atrule">matrix</span><span class="token punctuation">:</span>
        <span class="token key atrule">platform</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>macos<span class="token punctuation">-</span>latest<span class="token punctuation">,</span> ubuntu<span class="token punctuation">-</span><span class="token number">20.04</span><span class="token punctuation">,</span> windows<span class="token punctuation">-</span>latest<span class="token punctuation">]</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> matrix.platform <span class="token punctuation">}</span><span class="token punctuation">}</span>

    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout repository
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install dependencies (ubuntu only)
        <span class="token key atrule">if</span><span class="token punctuation">:</span> matrix.platform == 'ubuntu<span class="token punctuation">-</span>20.04'
        <span class="token comment"># You can remove libayatana-appindicator3-dev if you don't use the system tray feature.</span>
        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
          sudo apt-get update
          sudo apt-get install -y libgtk-3-dev libwebkit2gtk-4.0-dev libayatana-appindicator3-dev librsvg2-dev</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Rust setup
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> dtolnay/rust<span class="token punctuation">-</span>toolchain@stable

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Rust cache
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> swatinem/rust<span class="token punctuation">-</span>cache@v2
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">workspaces</span><span class="token punctuation">:</span> <span class="token string">'./src-tauri -> target'</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Sync node version and setup cache
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token string">'lts/*'</span>
          <span class="token key atrule">cache</span><span class="token punctuation">:</span> <span class="token string">'yarn'</span> <span class="token comment"># Set this to npm, yarn or pnpm.</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install frontend dependencies
        <span class="token comment"># If you don't have `beforeBuildCommand` configured you may want to build your frontend here too.</span>
        <span class="token key atrule">run</span><span class="token punctuation">:</span> yarn install <span class="token comment"># Change this to npm, yarn or pnpm.</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build the app
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> tauri<span class="token punctuation">-</span>apps/tauri<span class="token punctuation">-</span>action@v0

        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token key atrule">GITHUB_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITHUB_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">tagName</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> github.ref_name <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token comment"># This only works if your workflow triggers on new tags.</span>
          <span class="token key atrule">releaseName</span><span class="token punctuation">:</span> <span class="token string">'App Name v__VERSION__'</span> <span class="token comment"># tauri-action replaces \_\_VERSION\_\_ with the app version.</span>
          <span class="token key atrule">releaseBody</span><span class="token punctuation">:</span> <span class="token string">'See the assets to download and install this version.'</span>
          <span class="token key atrule">releaseDraft</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">prerelease</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></code></pre></section><section class="level3"aria-labelledby="github-environment-token"><h3 id="github-environment-token">GitHub Environment Token</h3><p>The GitHub Token is automatically issued by GitHub for each workflow run without further configuration, which means there is no risk of secret leakage. This token however only has read permissions by default and you may get a Resource not accessible by integration error when running the workflow. If this happens, you may need to add write permissions to this token. To do this go to your GitHub Project Settings, and then select Actions, scroll down to Workflow permissions and check Read and write permissions.<p>You can see the GitHub Token being passed to the workflow below:<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">env</span><span class="token punctuation">:</span>
  <span class="token key atrule">GITHUB_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITHUB_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="usage-notes"><h3 id="usage-notes">Usage Notes</h3><p>Make sure to check the <a href="https://docs.github.com/en/actions">documentation for GitHub Actions</a> to understand better how this workflow works. Take care to read the <a href="https://docs.github.com/en/actions/learn-github-actions/usage-limits-billing-and-administration">Usage limits, billing, and administration</a> documentation for GitHub Actions. Some project templates may already implement this GitHub action workflow, such as <a href="https://github.com/probablykasper/tauri-svelte-template">tauri-svelte-template</a>. You can use this action on a repo that doesn't have Tauri configured. Tauri automatically initializes before building and configuring it to use your web artifacts.</section></section><section class="level2"aria-labelledby="experimental-build-windows-apps-on-linux-and-macos"><h2 id="experimental-build-windows-apps-on-linux-and-macos">Experimental: Build Windows apps on Linux and macOS</h2><p>Tauri v1.3 added a new Windows installer type based on the <a href="https://nsis.sourceforge.io/Main_Page">NSIS</a> installer framework. In contrast to WiX, NSIS itself can also work on Linux and macOS which makes it possible to build many Tauri apps on non-Windows hosts. Note that this is currently considered highly experimental and may not work on every system or for every project. Therefore it should only be used as a last resort if local VMs or CI solutions like GitHub Actions don't work for you.<p>Since Tauri officially only supports the MSVC Windows target, the setup is a bit more involved.<p>First, make sure all your Tauri dependencies are at least version 1.3, check out the <a href="../development/updating-dependencies">dependency update guide</a> if you're not sure how.<section class="level4"aria-labelledby="install-nsis"><h4 id="install-nsis">Install NSIS</h4><p>Some Linux distributions have NSIS available in their repositories, for example on Ubuntu you can install NSIS by running this command:<figure class="language-sh"><figcaption>Ubuntu</figcaption><pre class="language-sh"><code class="language-sh">sudo apt install nsis</code></pre></figure><p>But on many other distributions you have to compile NSIS yourself or download Stubs and Plugins manually that weren't included in the distro's binary package. Fedora for example only provides the binary but not the Stubs and Plugins:<figure class="language-sh"><figcaption>Fedora</figcaption><pre class="language-sh"><code class="language-sh">sudo dnf in mingw64-nsis
wget https://github.com/tauri-apps/binary-releases/releases/download/nsis-3/nsis-3.zip
unzip nsis-3.zip
sudo cp nsis-3.08/Stubs/* /usr/share/nsis/Stubs/
sudo cp -r nsis-3.08/Plugins/** /usr/share/nsis/Plugins/</code></pre></figure><p>On macOS you will need <a href="https://brew.sh/">Homebrew</a> to install NSIS:<figure class="language-sh"><figcaption>macOS</figcaption><pre class="language-sh"><code class="language-sh">brew install nsis</code></pre></figure></section><section class="level4"aria-labelledby="install-llvm-and-the-lld-linker"><h4 id="install-llvm-and-the-lld-linker">Install LLVM and the LLD Linker</h4><p>Since the default Microsoft linker only works on Windows we will also need to install a new linker. To compile the Windows Resource file which is used for setting the app icon among other things we will also need the <code>llvm-rc</code> binary which is part of the LLVM project.<figure class="language-sh"><figcaption>Ubuntu</figcaption><pre class="language-sh"><code class="language-sh">sudo apt install lld llvm</code></pre></figure><figure class="language-sh"><figcaption>macOS</figcaption><pre class="language-sh"><code class="language-sh">brew install llvm</code></pre></figure><p>On macOS you also have to add <code>/opt/homebrew/opt/llvm/bin</code> to your <code>$PATH</code> as suggested in the install output.</section><section class="level4"aria-labelledby="install-the-windows-rust-target"><h4 id="install-the-windows-rust-target">Install the Windows Rust target</h4><p>Assuming you're building for 64-bit Windows systems:<pre class="language-sh"><code class="language-sh">rustup target add x86_64-pc-windows-msvc</code></pre></section><section class="level4"aria-labelledby="install-the-windows-sdks"><h4 id="install-the-windows-sdks">Install the Windows SDKs</h4><p>To get the Windows SDKs required by the msvc target we will use the <a href="https://github.com/Jake-Shadle/xwin">xwin</a> project:<pre class="language-sh"><code class="language-sh">cargo install xwin</code></pre><p>Then you can use the <code>xwin</code> CLI to install the needed files to a location of your choice. Remember the location, we will need it in the next step. In this guide we will create a <code>.xwin</code> directory in the Home directory.<pre class="language-sh"><code class="language-sh">xwin splat --disable-symlinks --output ~/.xwin</code></pre><p>Now, to make the Rust compiler use these files, you first have to create a <code>.cargo</code> directory in your project and create a <code>config.toml</code> file in it with the following content. Make sure to change the paths accordingly.<figure class="language-toml"><figcaption>.cargo/config.toml</figcaption><pre class="language-toml"><code class="language-toml"><span class="token punctuation">[</span><span class="token table class-name">target.x86_64-pc-windows-msvc</span><span class="token punctuation">]</span>
<span class="token key property">linker</span> <span class="token punctuation">=</span> lld
<span class="token key property">rustflags</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  <span class="token key property">-Lnative</span><span class="token punctuation">=</span>/home/username/<span class="token punctuation">.</span>xwin/crt/lib/x86_64<span class="token punctuation">,</span>
  <span class="token key property">-Lnative</span><span class="token punctuation">=</span>/home/username/<span class="token punctuation">.</span>xwin/sdk/lib/um/x86_64<span class="token punctuation">,</span>
  <span class="token key property">-Lnative</span><span class="token punctuation">=</span>/home/username/<span class="token punctuation">.</span>xwin/sdk/lib/ucrt/x86_64
<span class="token punctuation">]</span></code></pre></figure><p>Keep in mind that this file is specific to your machine so we don't recommend checking it into git if your project is public or will be shared with anyone.</section><section class="level4"aria-labelledby="building-the-app"><h4 id="building-the-app">Building the App</h4><p>Now it should be as simple as adding the target to the <code>tauri build</code> command:<p>&#x3C;Command name=build --target x86_64-pc-windows-msvc /><p>The build output will then be in <code>target/x86_64-pc-windows-msvc/release/bundle/nsis/</code>.<p><span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section></section>