<!doctype html><html lang="en"><meta charset="utf-8"><title>Using the State Hook</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="using-the-state-hook"class="level1"><h1>Using the State Hook</h1><blockquote><p>Try the new React documentation.<p>These new documentation pages teach modern React and include live examples:<ul><li><a href="https://beta.reactjs.org/learn/state-a-components-memory">State: A Component's Memory</a><li><a href="https://beta.reactjs.org/reference/react/useState"><code>useState</code></a></ul><p>The new docs will soon replace this site, which will be archived. <a href="https://github.com/reactjs/reactjs.org/issues/3308">Provide feedback.</a></blockquote><p><em>Hooks</em> are a new addition in React 16.8. They let you use state and other React features without writing a class.<p>The <a href="./hooks-intro.html">introduction page</a> used this example to get familiar with Hooks:<pre class="language-js{4-5}"><code class="language-js{4-5}">import React, { useState } from 'react';

function Example() {
  // Declare a new state variable, which we'll call "count"
  const [count, setCount] = useState(0);

  return (
    &#x3C;div>
      &#x3C;p>You clicked {count} times&#x3C;/p>
      &#x3C;button onClick={() => setCount(count + 1)}>
        Click me
      &#x3C;/button>
    &#x3C;/div>
  );
}</code></pre><p>We'll start learning about Hooks by comparing this code to an equivalent class example.<section id="equivalent-class-example"class="level2"><h2>Equivalent Class Example</h2><p>If you used classes in React before, this code should look familiar:<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Example</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">You</span> clicked <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">count</span><span class="token punctuation">}</span> times<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">count</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token maybe-class-name">Click</span> me
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>The state starts as <code>{ count: 0 }</code>, and we increment <code>state.count</code> when the user clicks a button by calling <code>this.setState()</code>. We'll use snippets from this class throughout the page.<blockquote><p>Note<p>You might be wondering why we're using a counter here instead of a more realistic example. This is to help us focus on the API while we're still making our first steps with Hooks.</blockquote></section><section id="hooks-and-function-components"class="level2"><h2>Hooks and Function Components</h2><p>As a reminder, function components in React look like this:<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function"><span class="token maybe-class-name">Example</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// You can use Hooks here!</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>div <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>or this:<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Example</span></span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// You can use Hooks here!</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>div <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>You might have previously known these as "stateless components". We're now introducing the ability to use React state from these, so we prefer the name "function components".<p>Hooks <strong>don't</strong> work inside classes. But you can use them instead of writing classes.</section><section id="whats-a-hook"class="level2"><h2>What's a Hook?</h2><p>Our new example starts by importing the <code>useState</code> Hook from React:<pre class="language-js{1}"><code class="language-js{1}">import React, { useState } from 'react';

function Example() {
  // ...
}</code></pre><p><strong>What is a Hook?</strong> A Hook is a special function that lets you "hook into" React features. For example, <code>useState</code> is a Hook that lets you add React state to function components. We'll learn other Hooks later.<p><strong>When would I use a Hook?</strong> If you write a function component and realize you need to add some state to it, previously you had to convert it to a class. Now you can use a Hook inside the existing function component. We're going to do that right now!<blockquote><p>Note:<p>There are some special rules about where you can and can't use Hooks within a component. We'll learn them in <a href="./hooks-rules.html">Rules of Hooks</a>.</blockquote></section><section id="declaring-a-state-variable"class="level2"><h2>Declaring a State Variable</h2><p>In a class, we initialize the <code>count</code> state to <code>0</code> by setting <code>this.state</code> to <code>{ count: 0 }</code> in the constructor:<pre class="language-js{4-6}"><code class="language-js{4-6}">class Example extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      count: 0
    };
  }</code></pre><p>In a function component, we have no <code>this</code>, so we can't assign or read <code>this.state</code>. Instead, we call the <code>useState</code> Hook directly inside our component:<pre class="language-js{4,5}"><code class="language-js{4,5}">import React, { useState } from 'react';

function Example() {
  // Declare a new state variable, which we'll call "count"
  const [count, setCount] = useState(0);</code></pre><p><strong>What does calling <code>useState</code> do?</strong> It declares a "state variable". Our variable is called <code>count</code> but we could call it anything else, like <code>banana</code>. This is a way to "preserve" some values between the function calls â€” <code>useState</code> is a new way to use the exact same capabilities that <code>this.state</code> provides in a class. Normally, variables "disappear" when the function exits but state variables are preserved by React.<p><strong>What do we pass to <code>useState</code> as an argument?</strong> The only argument to the <code>useState()</code> Hook is the initial state. Unlike with classes, the state doesn't have to be an object. We can keep a number or a string if that's all we need. In our example, we just want a number for how many times the user clicked, so pass <code>0</code> as initial state for our variable. (If we wanted to store two different values in state, we would call <code>useState()</code> twice.)<p><strong>What does <code>useState</code> return?</strong> It returns a pair of values: the current state and a function that updates it. This is why we write <code>const [count, setCount] = useState()</code>. This is similar to <code>this.state.count</code> and <code>this.setState</code> in a class, except you get them in a pair. If you're not familiar with the syntax we used, we'll come back to it <a href="./hooks-state.html#tip-what-do-square-brackets-mean">at the bottom of this page</a>.<p>Now that we know what the <code>useState</code> Hook does, our example should make more sense:<pre class="language-js{4,5}"><code class="language-js{4,5}">import React, { useState } from 'react';

function Example() {
  // Declare a new state variable, which we'll call "count"
  const [count, setCount] = useState(0);</code></pre><p>We declare a state variable called <code>count</code>, and set it to <code>0</code>. React will remember its current value between re-renders, and provide the most recent one to our function. If we want to update the current <code>count</code>, we can call <code>setCount</code>.<blockquote><p>Note<p>You might be wondering: why is <code>useState</code> not named <code>createState</code> instead?<p>"Create" wouldn't be quite accurate because the state is only created the first time our component renders. During the next renders, <code>useState</code> gives us the current state. Otherwise it wouldn't be "state" at all! There's also a reason why Hook names <em>always</em> start with <code>use</code>. We'll learn why later in the <a href="./hooks-rules.html">Rules of Hooks</a>.</blockquote></section><section id="reading-state"class="level2"><h2>Reading State</h2><p>When we want to display the current count in a class, we read <code>this.state.count</code>:<pre class="language-js"><code class="language-js">  <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">You</span> clicked <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">count</span><span class="token punctuation">}</span> times<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span></code></pre><p>In a function, we can use <code>count</code> directly:<pre class="language-js"><code class="language-js">  <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">You</span> clicked <span class="token punctuation">{</span>count<span class="token punctuation">}</span> times<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span></code></pre></section><section id="updating-state"class="level2"><h2>Updating State</h2><p>In a class, we need to call <code>this.setState()</code> to update the <code>count</code> state:<pre class="language-js{1}"><code class="language-js{1}">  &#x3C;button onClick={() => this.setState({ count: this.state.count + 1 })}>
    Click me
  &#x3C;/button></code></pre><p>In a function, we already have <code>setCount</code> and <code>count</code> as variables so we don't need <code>this</code>:<pre class="language-js{1}"><code class="language-js{1}">  &#x3C;button onClick={() => setCount(count + 1)}>
    Click me
  &#x3C;/button></code></pre></section><section id="recap"class="level2"><h2>Recap</h2><p>Let's now <strong>recap what we learned line by line</strong> and check our understanding.<pre class="language-js{1,4,9}"><code class="language-js{1,4,9}"> 1:  import React, { useState } from 'react';
 2:
 3:  function Example() {
 4:    const [count, setCount] = useState(0);
 5:
 6:    return (
 7:      &#x3C;div>
 8:        &#x3C;p>You clicked {count} times&#x3C;/p>
 9:        &#x3C;button onClick={() => setCount(count + 1)}>
10:         Click me
11:        &#x3C;/button>
12:      &#x3C;/div>
13:    );
14:  }</code></pre><ul><li><strong>Line 1:</strong> We import the <code>useState</code> Hook from React. It lets us keep local state in a function component.<li><strong>Line 4:</strong> Inside the <code>Example</code> component, we declare a new state variable by calling the <code>useState</code> Hook. It returns a pair of values, to which we give names. We're calling our variable <code>count</code> because it holds the number of button clicks. We initialize it to zero by passing <code>0</code> as the only <code>useState</code> argument. The second returned item is itself a function. It lets us update the <code>count</code> so we'll name it <code>setCount</code>.<li><strong>Line 9:</strong> When the user clicks, we call <code>setCount</code> with a new value. React will then re-render the <code>Example</code> component, passing the new <code>count</code> value to it.</ul><p>This might seem like a lot to take in at first. Don't rush it! If you're lost in the explanation, look at the code above again and try to read it from top to bottom. We promise that once you try to "forget" how state works in classes, and look at this code with fresh eyes, it will make sense.<section id="tip-what-do-square-brackets-mean"class="level3"><h3>Tip: What Do Square Brackets Mean?</h3><p>You might have noticed the square brackets when we declare a state variable:<pre class="language-js"><code class="language-js">  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The names on the left aren't a part of the React API. You can name your own state variables:<pre class="language-js"><code class="language-js">  <span class="token keyword">const</span> <span class="token punctuation">[</span>fruit<span class="token punctuation">,</span> setFruit<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'banana'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>This JavaScript syntax is called <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Array_destructuring">"array destructuring"</a>. It means that we're making two new variables <code>fruit</code> and <code>setFruit</code>, where <code>fruit</code> is set to the first value returned by <code>useState</code>, and <code>setFruit</code> is the second. It is equivalent to this code:<pre class="language-js"><code class="language-js">  <span class="token keyword">var</span> fruitStateVariable <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'banana'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Returns a pair</span>
  <span class="token keyword">var</span> fruit <span class="token operator">=</span> fruitStateVariable<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// First item in a pair</span>
  <span class="token keyword">var</span> setFruit <span class="token operator">=</span> fruitStateVariable<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// Second item in a pair</span></code></pre><p>When we declare a state variable with <code>useState</code>, it returns a pair â€” an array with two items. The first item is the current value, and the second is a function that lets us update it. Using <code>[0]</code> and <code>[1]</code> to access them is a bit confusing because they have a specific meaning. This is why we use array destructuring instead.<blockquote><p>Note<p>You might be curious how React knows which component <code>useState</code> corresponds to since we're not passing anything like <code>this</code> back to React. We'll answer <a href="./hooks-faq.html#how-does-react-associate-hook-calls-with-components">this question</a> and many others in the FAQ section.</blockquote></section><section id="tip-using-multiple-state-variables"class="level3"><h3>Tip: Using Multiple State Variables</h3><p>Declaring state variables as a pair of <code>[something, setSomething]</code> is also handy because it lets us give <em>different</em> names to different state variables if we want to use more than one:<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ExampleWithManyStates</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Declare multiple state variables!</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>age<span class="token punctuation">,</span> setAge<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fruit<span class="token punctuation">,</span> setFruit<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'banana'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>todos<span class="token punctuation">,</span> setTodos<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'Learn Hooks'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>In the above component, we have <code>age</code>, <code>fruit</code>, and <code>todos</code> as local variables, and we can update them individually:<pre class="language-js"><code class="language-js">  <span class="token keyword">function</span> <span class="token function">handleOrangeClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Similar to this.setState({ fruit: 'orange' })</span>
    <span class="token function">setFruit</span><span class="token punctuation">(</span><span class="token string">'orange'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre><p>You <strong>don't have to</strong> use many state variables. State variables can hold objects and arrays just fine, so you can still group related data together. However, unlike <code>this.setState</code> in a class, updating a state variable always <em>replaces</em> it instead of merging it.<p>We provide more recommendations on splitting independent state variables <a href="./hooks-faq.html#should-i-use-one-or-many-state-variables">in the FAQ</a>.</section></section><section id="next-steps"class="level2"><h2>Next Steps</h2><p>On this page we've learned about one of the Hooks provided by React, called <code>useState</code>. We're also sometimes going to refer to it as the "State Hook". It lets us add local state to React function components -- which we did for the first time ever!<p>We also learned a little bit more about what Hooks are. Hooks are functions that let you "hook into" React features from function components. Their names always start with <code>use</code>, and there are more Hooks we haven't seen yet.<p><strong>Now let's continue by <a href="./hooks-effect.html">learning the next Hook: <code>useEffect</code>.</a></strong> It lets you perform side effects in components, and is similar to lifecycle methods in classes. <span style="float:footnote"><a href="./index.html#toc">Go to TOC</a></span></section></section>