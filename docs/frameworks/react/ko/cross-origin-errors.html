<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <title>Cross-origin Errors</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css">
  </head>
  <body>
    <section id="cross-origin-errors" class="level1">
      <h1>Cross-origin Errors</h1>
      <blockquote>
        <p>주의:</p>
        <p>해당 부분은 오직 리액트 개발 모드에서만 적용됩니다. 배포 모드에서 오류 처리는 일반 try/catch 구문으로 수행됩니다.</p>
      </blockquote>
      <p><a href="./optimizing-performance.html">개발 모드</a>에서 리액트는 전역 <code>오류</code> 이벤트 핸들러를 사용하여 브라우저 DevTools의 "예외 시 일시 중지" 동작을 유지해줍니다. 또한 개발자 콘솔에 오류를 기록합니다.</p>
      <p><a href="https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy">다른 출처</a>로 인한 오류가 발생한다면 브라우저는 해당 세부 정보를 숨기고 리액트는 오리지널 오류 메시지를 기록할 수가 없습니다. 왜냐하면 민감한 정보가 노출되는 것을 방지하기 위해서 브라우저에서 보안 예방 조치 취하기 때문입니다.</p>
      <p>동일 출처 정책으로 오류가 발생하도록 개발/디버깅 프로세스를 단순화할 수 있습니다. 다음은 교차 출처 오류가 발생하는 일반적인 원인과 해결 방법입니다.</p>
      <section id="cdn" class="level3">
        <h3>CDN</h3>
        <p>CDN에서 리액트(혹은 오류를 발생시킬 수 있는 다른 라이브러리)를 로딩할 때, <code>&#x3C;script></code> 태그에 <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes"><code>crossorigin</code></a> 어트리뷰트를 추가하세요:</p>
        <pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">crossorigin</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>...<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span></code></pre>
        <p>또한 CDN이 <code>Access-Control-Allow-Origin: *</code> HTTP 헤더로 응답하는지 확인합니다.</p>
        <figure>
          <img src="./docs/cdn-cors-header.png" alt="Access-Control-Allow-Origin: *">
          <figcaption aria-hidden="true">Access-Control-Allow-Origin: *</figcaption>
        </figure>
      </section>
      <section id="webpack" class="level3">
        <h3>Webpack</h3>
        <section id="source-maps" class="level4">
          <h4>소스 맵</h4>
          <p>일부 자바스크립트 번들러는 개발 중에 <code>eval</code>문으로 코드로 감싸져 있을 수 있습니다. (예를 들어 웹팩은 <a href="https://webpack.js.org/configuration/devtool/"><code>devtool</code></a>이 "eval"이라는 단어가 포함된 값으로 설정된 경우 이 작업을 수행합니다) 이로 인해 크로스-오리진 오류로 처리될 수 있습니다.</p>
          <p>웹팩을 사용하는 경우, 이러한 문제를 피하고자 개발 시에 <code>cheap-module-source-map</code> 설정하는 것을 추천합니다.</p>
        </section>
        <section id="code-splitting" class="level4">
          <h4>코드 분할</h4>
          <p>애플리케이션이 여러 번들로 분할된 경우 JSONP를 사용하여 로드될 수 있습니다. 이로 인해 번들링 된 코드가 크로스-오리진 오류로 처리될 수도 있습니다.</p>
          <p>이러한 문제를 해결하려면, 개발 시에 <a href="https://webpack.js.org/configuration/output/#output-crossoriginloading"><code>crossOriginLoading</code></a> 설정을 사용하여 JSOPN 요청에 대해 생성된 <code>&#x3C;script></code> 태그에 <code>crossorigin</code> 속성을 추가하세요.<span style="float: footnote;"><a href="./index.html#toc">Go to TOC</a></span></p>
        </section>
      </section>
    </section>
  </body>
</html>
