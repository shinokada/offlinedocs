<!doctype html><html lang="ko"><meta charset="utf-8"><title>"'use client'"</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="use-client"><h1 id="use-client">"'use client'"</h1><p>titleForTitleTag: "'use client' 지시어" canary: true</p><canary><p><code>'use client'</code>는 <a href="/learn/start-a-new-react-project#bleeding-edge-react-frameworks">React 서버 컴포넌트를 사용</a>하거나 그와 호환되는 라이브러리를 만들 때만 사용합니다.</p><intro><p><code>'use client'</code>를 사용하면 클라이언트에서 실행되는 코드를 표시할 수 있습니다.</p></intro><inlinetoc><section class="level2"aria-labelledby="레퍼런스-reference"><h2 id="레퍼런스-reference">레퍼런스 {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="use-client-use-client"><h3 id="use-client-use-client"><code>'use client'</code> {/<em>use-client</em>/}</h3><p>파일의 최상단에 <code>'use client'</code>를 추가하여 모듈과 해당 모듈의 전이적 의존성을 클라이언트 코드로 표시하세요.<pre class="language-js"><code class="language-js"><span class="token string">'use client'</span><span class="token punctuation">;</span>

<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> formatDate <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./formatters'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">Button</span></span> <span class="token keyword module">from</span> <span class="token string">'./button'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RichTextEditor</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> timestamp<span class="token punctuation">,</span> text <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token function">formatDate</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">const</span> editButton <span class="token operator">=</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Button</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p>서버 컴포넌트에서 <code>'use client'</code>라고 표시된 파일을 가져오면 <a href="/learn/start-a-new-react-project#bleeding-edge-react-frameworks">호환되는 번들러</a>는 import를 서버 실행 코드와 클라이언트 실행 코드 사이의 경계로 처리합니다.<p><code>RichTextEditor</code>의 의존성으로 <code>formatDate</code>와 <code>Button</code>도 해당 모듈에 <code>'use client'</code> 지시어가 포함되어 있지 않더라도 클라이언트에서 평가됩니다. 하나의 모듈이 서버 코드에서 가져올 때는 서버에서, 클라이언트 코드에서 가져올 때는 클라이언트에서 평가될 수 있음을 유의해야 합니다.<section class="level4"aria-labelledby="주의사항-caveats"><h4 id="주의사항-caveats">주의사항 {/<em>caveats</em>/}</h4><ul><li><code>'use client'</code>는 파일의 맨 처음에 있어야 하며, 다른 코드나 import 문보다 위에 있어야 합니다(주석은 괜찮습니다). 작은따옴표나 큰따옴표로 작성해야 하며 백틱은 사용할 수 없습니다.<li><code>'use client'</code> 모듈을 다른 클라이언트 렌더링 모듈에서 가져오면 지시어가 동작하지 않습니다.<li>컴포넌트 모듈에 <code>'use client'</code> 지시어가 포함된 경우 해당 컴포넌트의 사용은 클라이언트 컴포넌트임이 보장됩니다. 하지만 컴포넌트에 <code>'use client'</code> 지시어가 없더라도 클라이언트에서 평가될 수 있습니다.<ul><li>컴포넌트 사용은 <code>'use client'</code> 지시어가 포함된 모듈에 정의되어 있거나 <code>'use client'</code> 지시어를 포함한 모듈의 전이적 의존성일 경우 클라이언트 컴포넌트로 간주합니다. 그렇지 않으면 서버 컴포넌트로 간주합니다.</ul><li>클라이언트 평가로 표시된 코드는 컴포넌트에만 국한되지 않습니다. 클라이언트 모듈 하위 트리의 모든 코드는 클라이언트에 전송되어 클라이언트에서 실행됩니다.<li>서버 평가 모듈이 <code>'use client'</code> 모듈에서 값을 가져올 때, 그 값은 React 컴포넌트이거나 클라이언트 컴포넌트에 전달될 수 있는 <a href="#passing-props-from-server-to-client-components">지원되는 직렬화 가능한 prop 값</a>이어야 합니다.</ul></section></section><section class="level3"aria-labelledby="use-client가-클라이언트-코드를-표시하는-방법-how-use-client-marks-client-code"><h3 id="use-client가-클라이언트-코드를-표시하는-방법-how-use-client-marks-client-code"><code>'use client'</code>가 클라이언트 코드를 표시하는 방법 {/<em>how-use-client-marks-client-code</em>/}</h3><p>React 앱에서 컴포넌트는 종종 별도의 파일 또는 <a href="/learn/importing-and-exporting-components#exporting-and-importing-a-component">모듈</a>로 분리됩니다.<p>React 서버 컴포넌트를 사용하는 앱의 경우, 기본적으로 앱은 서버에서 렌더링 됩니다. <code>'use client'</code>는 <a href="/learn/understanding-your-ui-as-a-tree#the-module-dependency-tree">모듈 의존성 트리</a>에 서버-클라이언트 경계를 도입하여 효과적으로 클라이언트 모듈의 하위 트리를 만듭니다.<p>이를 더 잘 설명하기 위해 다음과 같은 React 서버 컴포넌트 앱을 고려해 보세요.</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">FancyText</span></span> <span class="token keyword module">from</span> <span class="token string">'./FancyText'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">InspirationGenerator</span></span> <span class="token keyword module">from</span> <span class="token string">'./InspirationGenerator'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">Copyright</span></span> <span class="token keyword module">from</span> <span class="token string">'./Copyright'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">FancyText</span> title text<span class="token operator">=</span><span class="token string">"Get Inspired App"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">InspirationGenerator</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Copyright</span> year<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">2004</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">InspirationGenerator</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">FancyText</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>title<span class="token punctuation">,</span> text<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> title
    <span class="token operator">?</span> <span class="token operator">&#x3C;</span>h1 className<span class="token operator">=</span><span class="token string">'fancy title'</span><span class="token operator">></span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
    <span class="token operator">:</span> <span class="token operator">&#x3C;</span>h3 className<span class="token operator">=</span><span class="token string">'fancy cursive'</span><span class="token operator">></span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h3<span class="token operator">></span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token string">'use client'</span><span class="token punctuation">;</span>

<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports">inspirations</span> <span class="token keyword module">from</span> <span class="token string">'./inspirations'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">FancyText</span></span> <span class="token keyword module">from</span> <span class="token string">'./FancyText'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">InspirationGenerator</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>index<span class="token punctuation">,</span> setIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> quote <span class="token operator">=</span> inspirations<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">next</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> inspirations<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Your</span> inspirational quote is<span class="token operator">:</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">FancyText</span> text<span class="token operator">=</span><span class="token punctuation">{</span>quote<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>next<span class="token punctuation">}</span><span class="token operator">></span><span class="token maybe-class-name">Inspire</span> me again<span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Copyright</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>year<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>p className<span class="token operator">=</span><span class="token string">'small'</span><span class="token operator">></span>©️ <span class="token punctuation">{</span>year<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">[</span>
  <span class="token string">"Don’t let yesterday take up too much of today.” — Will Rogers"</span><span class="token punctuation">,</span>
  <span class="token string">"Ambition is putting a ladder against the sky."</span><span class="token punctuation">,</span>
  <span class="token string">"A joy that's shared is a joy made double."</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector"><span class="token class">.fancy</span></span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Georgia'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.title</span></span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode color">#007AA3</span><span class="token punctuation">;</span>
  <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.cursive</span></span> <span class="token punctuation">{</span>
  <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.small</span></span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>예시 앱의 모듈 의존성 트리에서 <code>InspirationGenerator.js</code>의 <code>'use client'</code> 지시어는 해당 모듈과 모든 전이적 의존성을 클라이언트 모듈로 표시합니다. 이제 <code>InspirationGenerator.js</code>에서 시작하는 하위 트리는 클라이언트 모듈로 표시됩니다.</p><diagram name="use_client_module_dependency"height="{250}"width="{545}"alt="A tree graph with the top node representing the module &#x27;App.js&#x27;. &#x27;App.js&#x27; has three children: &#x27;Copyright.js&#x27;, &#x27;FancyText.js&#x27;, and &#x27;InspirationGenerator.js&#x27;. &#x27;InspirationGenerator.js&#x27; has two children: &#x27;FancyText.js&#x27; and &#x27;inspirations.js&#x27;. The nodes under and including &#x27;InspirationGenerator.js&#x27; have a yellow background color to signify that this sub-graph is client-rendered due to the &#x27;use client&#x27; directive in &#x27;InspirationGenerator.js&#x27;.">`'use client'`는 React 서버 컴포넌트 앱의 모듈 의존성 트리를 분할하여 `InspirationGenerator.js`와 모든 의존성을 클라이언트-렌더링으로 표시합니다.</diagram><p>렌더링하는 동안 프레임워크는 루트 컴포넌트를 서버-렌더링하고 <a href="/learn/understanding-your-ui-as-a-tree#the-render-tree">렌더 트리</a>를 통해 계속 진행하여 클라이언트에서 가져온 코드를 평가하지 않습니다.<p>그런 다음 서버에서 렌더링한 렌더 트리 부분을 클라이언트로 보냅니다. 클라이언트 코드를 다운로드한 클라이언트는 트리의 나머지 부분 렌더링을 완료합니다.</p><diagram name="use_client_render_tree"height="{250}"width="{500}"alt="A tree graph where each node represents a component and its children as child components. The top-level node is labelled &#x27;App&#x27; and it has two child components &#x27;InspirationGenerator&#x27; and &#x27;FancyText&#x27;. &#x27;InspirationGenerator&#x27; has two child components, &#x27;FancyText&#x27; and &#x27;Copyright&#x27;. Both &#x27;InspirationGenerator&#x27; and its child component &#x27;FancyText&#x27; are marked to be client-rendered.">React 서버 컴포넌트 앱을 위한 렌더 트리에서 `InspirationGenerator`와 그 자식 컴포넌트 `FancyText`는 클라이언트 표시 코드에서 내보낸 컴포넌트이며 클라이언트 컴포넌트로 간주합니다.</diagram><p>다음 정의를 소개합니다.<ul><li><strong>클라이언트 컴포넌트</strong>는 클라이언트에서 렌더링되는 렌더 트리의 컴포넌트입니다.<li><strong>서버 컴포넌트</strong>는 서버에서 렌더링 되는 렌더 트리의 컴포넌트입니다.</ul><p>예시 앱이 실행되는 동안 <code>App</code>, <code>FancyText</code> 및 <code>Copyright</code>는 모두 서버에서 렌더링 되며 서버 컴포넌트로 간주합니다. <code>InspirationGenerator.js</code>와 그 전이적 의존성이 클라이언트 코드로 표시되므로 컴포넌트 <code>InspirationGenerator</code>와 그 자식 컴포넌트 <code>FancyText</code>는 클라이언트 컴포넌트입니다.</p><deepdive>#### 어떻게 `FancyText`는 서버 컴포넌트이면서 클라이언트 컴포넌트인가요? {/*how-is-fancytext-both-a-server-and-a-client-component*/}<p>위 정의에 따르면 <code>FancyText</code> 컴포넌트는 서버 컴포넌트이자 클라이언트 컴포넌트입니다. 어떻게 그럴 수 있을까요?<p>우선, "컴포넌트"라는 용어가 그다지 정확하지 않다는 점을 분명히 해 두겠습니다. "컴포넌트"를 이해할 수 있는 두 가지 방법이 있습니다.<ol><li>"컴포넌트"는 <strong>컴포넌트 정의</strong>를 가리킬 수 있습니다. 대부분의 경우 이것은 함수일 것입니다.</ol><pre class="language-js"><code class="language-js"><span class="token comment">// This is a definition of a component</span>
<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">My</span> <span class="token maybe-class-name">Component</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
<span class="token punctuation">}</span></code></pre><ol start="2"><li>"컴포넌트"는 그 정의의 <strong>컴포넌트 사용</strong>을 참조할 수 있습니다.</ol><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">MyComponent</span></span> <span class="token keyword module">from</span> <span class="token string">'./MyComponent'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// This is a usage of a component</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyComponent</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>개념을 설명할 때 종종 부정확성은 중요하지 않지만, 이 경우에는 중요합니다.<p>서버 또는 클라이언트 컴포넌트에 관해 이야기할 때, 컴포넌트 사용을 언급하고 있습니다.<ul><li>컴포넌트가 <code>'use client'</code> 지시어가 있는 모듈에서 정의되었거나 컴포넌트가 클라이언트에서 가져와 호출된다면 그 컴포넌트 사용은 클라이언트 컴포넌트입니다.<li>그렇지 않은 경우 컴포넌트 사용은 서버 컴포넌트입니다.</ul><p><diagram name="use_client_render_tree"height="{150}"width="{450}"alt="A tree graph where each node represents a component and its children as child components. The top-level node is labelled &#x27;App&#x27; and it has two child components &#x27;InspirationGenerator&#x27; and &#x27;FancyText&#x27;. &#x27;InspirationGenerator&#x27; has two child components, &#x27;FancyText&#x27; and &#x27;Copyright&#x27;. Both &#x27;InspirationGenerator&#x27; and its child component &#x27;FancyText&#x27; are marked to be client-rendered.">렌더 트리는 컴포넌트 사용을 보여줍니다.</diagram><p><code>FancyText</code>에 관한 질문으로 돌아가서 이 컴포넌트 정의에는 <code>'use client'</code> 지시어가 없으며 두 가지 사용 방법이 있습니다.<p><code>FancyText</code>를 <code>App</code>의 자식으로 사용하면 서버 컴포넌트로 사용할 수 있습니다. <code>FancyText</code>를 가져와서 <code>InspirationGenerator</code>에서 호출할 때 <code>InspirationGenerator</code>에 <code>'use client'</code> 지시어가 포함되어 있으므로 <code>FancyText</code>의 사용은 클라이언트 컴포넌트입니다.<p>이는 <code>FancyText</code>에 대한 컴포넌트 정의가 서버에서 평가되고 클라이언트 컴포넌트 사용을 렌더링하기 위해 클라이언트에서 내려받게 된다는 것을 의미합니다.</p></deepdive><deepdive><section class="level4"aria-labelledby="왜-copyright가-서버-컴포넌트인가요-why-is-copyright-a-server-component"><h4 id="왜-copyright가-서버-컴포넌트인가요-why-is-copyright-a-server-component">왜 <code>Copyright</code>가 서버 컴포넌트인가요? {/<em>why-is-copyright-a-server-component</em>/}</h4><p><code>Copyright</code> 컴포넌트가 클라이언트 컴포넌트 <code>InspirationGenerator</code>의 자식으로 렌더링 되지만 이것이 서버 컴포넌트라는 사실에 놀랄 수 있습니다.<p><code>'use client'</code> 지시어는 <em>모듈 의존성 트리</em>(렌더 트리가 아닌)에서 서버와 클라이언트 코드 간의 경계를 정의한다는 점을 기억하세요.</p><diagram name="use_client_module_dependency"height="{200}"width="{500}"alt="A tree graph with the top node representing the module &#x27;App.js&#x27;. &#x27;App.js&#x27; has three children: &#x27;Copyright.js&#x27;, &#x27;FancyText.js&#x27;, and &#x27;InspirationGenerator.js&#x27;. &#x27;InspirationGenerator.js&#x27; has two children: &#x27;FancyText.js&#x27; and &#x27;inspirations.js&#x27;. The nodes under and including &#x27;InspirationGenerator.js&#x27; have a yellow background color to signify that this sub-graph is client-rendered due to the &#x27;use client&#x27; directive in &#x27;InspirationGenerator.js&#x27;.">`'use client'` 지시어는 모듈 의존성 트리에서 서버와 클라이언트 코드의 경계를 정의합니다.</diagram><p>모듈 의존성 트리에서 <code>App.js</code>는 <code>Copyright.js</code> 모듈로부터 <code>Copyright</code>를 가져와 호출합니다. <code>Copyright.js</code>에는 <code>'use client'</code> 지시어가 없기 때문에 컴포넌트 사용이 서버에서 렌더링 됩니다. <code>App</code>은 루트 컴포넌트로 서버에서 렌더링 됩니다.<p>클라이언트 컴포넌트는 JSX를 props로 전달할 수 있기 때문에 서버 컴포넌트를 렌더링할 수 있습니다. 이 경우 <code>InspirationGenerator</code>는 <code>Copyright</code>를 <a href="/learn/passing-props-to-a-component#passing-jsx-as-children">자식</a>으로 받습니다. 그러나 <code>InspirationGenerator</code> 모듈은 <code>Copyright</code> 모듈을 직접 가져오거나 컴포넌트를 호출하지 않으며 이 모든 작업은 <code>App</code>에 의해 실행됩니다. 실제로 <code>InspirationGenerator</code>가 렌더링을 시작하기 전에 <code>Copyright</code> 컴포넌트는 완전히 실행됩니다.<p>중요한 점은 부모-자식 간의 렌더링 관계가 동일한 렌더링 환경을 보장하지 않는다는 것입니다.</section></deepdive></section><section class="level3"aria-labelledby="use-client의-사용-시기-when-to-use-use-client"><h3 id="use-client의-사용-시기-when-to-use-use-client"><code>'use client'</code>의 사용 시기 {/<em>when-to-use-use-client</em>/}</h3><p><code>'use client'</code>를 사용하면 컴포넌트가 클라이언트 컴포넌트인지 확인할 수 있습니다. 서버 컴포넌트가 기본값이므로 클라이언트에서 렌더링할 것을 표시해야 하는 시기를 결정하기 위해 서버 컴포넌트의 장단점을 간단히 살펴보겠습니다.<p>간략화를 위해 서버 컴포넌트에 관해 이야기하지만, 서버에서 실행되는 앱의 모든 코드에는 동일한 원칙이 적용됩니다.<section class="level4"aria-labelledby="서버-컴포넌트의-장점-advantages"><h4 id="서버-컴포넌트의-장점-advantages">서버 컴포넌트의 장점 {/<em>advantages</em>/}</h4><ul><li>서버 컴포넌트는 클라이언트가 전송하고 실행하는 코드양을 줄일 수 있습니다. 클라이언트 모듈만 번들링 되고 클라이언트에서 평가됩니다.<li>서버 컴포넌트는 서버에서 실행할 때 이점이 있습니다. 로컬 파일 시스템에 접근할 수 있으며 데이터 가져오기 및 네트워크 요청에 대한 짧은 지연 시간을 경험할 수 있습니다.</ul></section><section class="level4"aria-labelledby="서버-컴포넌트의-한계-limitations"><h4 id="서버-컴포넌트의-한계-limitations">서버 컴포넌트의 한계 {/<em>limitations</em>/}</h4><ul><li>클라이언트에서 이벤트 핸들러를 등록하고 트리거해야 하므로 서버 컴포넌트는 상호작용을 지원할 수 없습니다.<ul><li>예를 들어 <code>onClick</code>과 같은 이벤트 핸들러는 클라이언트 컴포넌트에서만 정의할 수 있습니다.</ul><li>서버 컴포넌트는 대부분의 Hook을 사용할 수 없습니다.<ul><li>서버 컴포넌트가 렌더링 되면 그 출력은 기본적으로 클라이언트가 렌더링할 컴포넌트 목록입니다. 서버 컴포넌트는 렌더링 후 메모리에 유지되지 않으며 자체 상태를 가질 수 없습니다.</ul></ul></section></section><section class="level3"aria-labelledby="서버-컴포넌트에서-반환되는-직렬화-가능한-유형-serializable-types"><h3 id="서버-컴포넌트에서-반환되는-직렬화-가능한-유형-serializable-types">서버 컴포넌트에서 반환되는 직렬화 가능한 유형 {/<em>serializable-types</em>/}</h3><p>React 앱에서와 같이 부모 컴포넌트는 자식 컴포넌트에 데이터를 전달합니다. 서로 다른 환경에서 렌더링 되므로 서버 컴포넌트에서 클라이언트 컴포넌트로 데이터를 전달하는 것은 추가적인 고려 사항이 필요합니다.<p>서버 컴포넌트에서 클라이언트 컴포넌트로 전달되는 prop 값은 직렬화할 수 있어야 합니다.<p>직렬화할 수 있는 props는 다음과 같습니다.<ul><li>원시 자료형<ul><li><a href="https://developer.mozilla.org/ko/docs/Glossary/String">string</a><li><a href="https://developer.mozilla.org/ko/docs/Glossary/Number">number</a><li><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/BigInt">bigint</a><li><a href="https://developer.mozilla.org/ko/docs/Glossary/Boolean">boolean</a><li><a href="https://developer.mozilla.org/ko/docs/Glossary/Undefined">undefined</a><li><a href="https://developer.mozilla.org/ko/docs/Glossary/Null">null</a><li><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Symbol">symbol</a> ( <a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Symbol/for"><code>Symbol.for</code></a>을 통해 글로벌 심볼 레지스트리에 등록된 심볼만 해당 )</ul><li>직렬화할 수 있는 값을 포함하는 이터러블<ul><li><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/String">String</a><li><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a><li><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Map">Map</a><li><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Set">Set</a><li><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/TypedArray">TypedArray</a> 및 <a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer">ArrayBuffer</a></ul><li><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Date">Date</a><li>일반 <a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object">객체</a> (직렬화할 수 있는 프로퍼티를 사용하여 <a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/Object_initializer">객체 이니셜라이저</a>로 생성된 객체)<li><a href="/reference/react/use-server">서버 액션</a>으로서의 함수<li>클라이언트 또는 서버 컴포넌트 요소(JSX)<li><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promises</a></ul><p>단, 다음은 지원되지 않습니다.<ul><li>클라이언트로 표시된 모듈에서 내보내지 않았거나 <a href="/reference/rsc/use-server"><code>'use server'</code></a>로 표시된 <a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Function">함수</a><li><a href="https://developer.mozilla.org/ko/docs/Learn/JavaScript/Objects/Classes_in_JavaScript">클래스</a><li>위에서 언급한 내장형 클래스의 인스턴스가 아닌 객체 혹은 <a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object#null-prototype_objects">null 프로토타입</a>을 가진 객체<li>글로벌하게 등록되지 않은 symbol (예: <code>Symbol('my new symbol')</code>)</ul></section></section><section class="level2"aria-labelledby="사용법-usage"><h2 id="사용법-usage">사용법 {/<em>usage</em>/}</h2><section class="level3"aria-labelledby="상호작용과-상태를-가진-컴포넌트-구축-building-with-interactivity-and-state"><h3 id="상호작용과-상태를-가진-컴포넌트-구축-building-with-interactivity-and-state">상호작용과 상태를 가진 컴포넌트 구축 {/<em>building-with-interactivity-and-state</em>/}</h3><sandpack><pre class="language-js"><code class="language-js"><span class="token string">'use client'</span><span class="token punctuation">;</span>

<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Counter</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>initialValue <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>countValue<span class="token punctuation">,</span> setCountValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setCountValue</span><span class="token punctuation">(</span>countValue <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">decrement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setCountValue</span><span class="token punctuation">(</span>countValue <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token maybe-class-name">Count</span> <span class="token maybe-class-name">Value</span><span class="token operator">:</span> <span class="token punctuation">{</span>countValue<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>increment<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>decrement<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p><code>Counter</code>에는 값을 증가시키거나 감소시키기 위해 <code>useState</code> Hook과 이벤트 핸들러가 모두 필요하므로 이 컴포넌트는 클라이언트 컴포넌트여야 하며 파일 최상단에 <code>'use client'</code> 지시어가 필요합니다.<p>반면에 상호작용 없이 UI를 렌더링하는 컴포넌트는 클라이언트 컴포넌트일 필요가 없습니다.<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> readFile <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'node:fs/promises'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">Counter</span></span> <span class="token keyword module">from</span> <span class="token string">'./Counter'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">CounterContainer</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> initialValue <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'/path/to/counter_value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Counter</span> initialValue<span class="token operator">=</span><span class="token punctuation">{</span>initialValue<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token punctuation">}</span></code></pre><p>예를 들어, <code>Counter</code>의 상위 컴포넌트인 <code>CounterContainer</code>는 상호작용이 없고 state를 사용하지 않기 때문에 <code>'use client'</code>가 사용할 필요가 없습니다. 또한 <code>CounterContainer</code>는 서버의 로컬 파일 시스템에서 읽어야 하므로 이가 가능한 서버 컴포넌트여야만 합니다.<p>서버나 클라이언트 전용 기능을 사용하지 않고 렌더링 위치에 구애받지 않는 컴포넌트도 있습니다. 앞서 예로 든 <code>FancyText</code>가 그러한 컴포넌트 중 하나입니다.<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">FancyText</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>title<span class="token punctuation">,</span> text<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> title
    <span class="token operator">?</span> <span class="token operator">&#x3C;</span>h1 className<span class="token operator">=</span><span class="token string">'fancy title'</span><span class="token operator">></span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
    <span class="token operator">:</span> <span class="token operator">&#x3C;</span>h3 className<span class="token operator">=</span><span class="token string">'fancy cursive'</span><span class="token operator">></span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h3<span class="token operator">></span>
<span class="token punctuation">}</span></code></pre><p>이 경우 <code>'use client'</code> 지시어를 추가하지 않으면 <code>FancyText</code>의 <em>산출물</em>(소스 코드가 아닌)이 서버 컴포넌트에서 참조될 때 브라우저로 전송됩니다. 앞서 Inspirations 앱 예시에서 보여준 것처럼 <code>FancyText</code>는 가져오고 사용되는 위치에 따라 서버 또는 클라이언트 컴포넌트로 사용됩니다.<p>하지만 <code>FancyText</code>의 HTML 출력이 의존성을 포함한 소스 코드에 비해 크다면, 항상 클라이언트 컴포넌트로 강제하는 것이 더 효율적일 수 있습니다. 한 예로 긴 SVG 경로 문자열을 반환하는 컴포넌트를 클라이언트 컴포넌트로 강제하는 것이 더 효율적일 수 있는 것처럼 말입니다.</section><section class="level3"aria-labelledby="클라이언트-api-사용-using-client-apis"><h3 id="클라이언트-api-사용-using-client-apis">클라이언트 API 사용 {/<em>using-client-apis</em>/}</h3><p>React 앱에서는 웹 스토리지, 오디오 및 비디오 조작, 하드웨어 장치 등과 같은 <a href="https://developer.mozilla.org/ko/docs/Web/API">브라우저의 API</a>를 포함한 클라이언트 특정 API를 사용할 수 있습니다.<p>이 예시에서 컴포넌트는 <a href="https://developer.mozilla.org/ko/docs/Glossary/DOM">DOM API</a>를 사용해 <a href="https://developer.mozilla.org/ko/docs/Web/HTML/Element/canvas"><code>canvas</code></a> 요소를 조작합니다. 이러한 API는 브라우저에서만 사용할 수 있으므로 클라이언트 컴포넌트로 표시되어야 합니다.<pre class="language-js"><code class="language-js"><span class="token string">'use client'</span><span class="token punctuation">;</span>

<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>useRef<span class="token punctuation">,</span> useEffect<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Circle</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">useLayoutEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> canvas <span class="token operator">=</span> ref<span class="token punctuation">.</span><span class="token property-access">current</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token method function property-access">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token method function property-access">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token method function property-access">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token method function property-access">arc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token method function property-access">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>canvas ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="서드파티-라이브러리-사용-using-third-party-libraries"><h3 id="서드파티-라이브러리-사용-using-third-party-libraries">서드파티 라이브러리 사용 {/<em>using-third-party-libraries</em>/}</h3><p>React 앱에서는 서드파티 라이브러리를 활용하여 일반적인 UI 패턴이나 로직을 처리하는 경우가 많습니다.<p>이러한 라이브러리들은 컴포넌트 Hook이나 클라이언트 API에 의존할 수 있습니다. 다음 React API를 사용하는 서드파티 컴포넌트는 클라이언트에서 실행되어야 합니다.<ul><li><a href="/reference/react/createContext">createContext</a><li><a href="/reference/react/use"><code>use</code></a> 및 <a href="/reference/react/useId"><code>useId</code></a>를 제외한 <a href="/reference/react/hooks"><code>react</code></a>와 <a href="/reference/react-dom/hooks"><code>react-dom</code></a>의 Hook<li><a href="/reference/react/forwardRef">forwardRef</a><li><a href="/reference/react/memo">memo</a><li><a href="/reference/react/startTransition">startTransition</a><li>클라이언트 API를 사용하는 경우(예: DOM 삽입 혹은 네이티브 플랫폼 뷰 등)</ul><p>이 라이브러리들이 React 서버 컴포넌트와 호환되도록 업데이트되었다면 이미 <code>'use client'</code>를 포함하고 있어 서버 컴포넌트에서 직접 사용할 수 있습니다. 라이브러리가 업데이트되지 않았거나 컴포넌트가 클라이언트에서만 지정할 수 있는 이벤트 핸들러와 같은 props가 필요한 경우 사용할 서드파티 클라이언트 컴포넌트와 서버 컴포넌트 사이에 자체 클라이언트 컴포넌트 파일을 추가해야 할 수 있습니다.<p>[TODO]: &#x3C;> (Troubleshooting - need use-cases) <span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section></inlinetoc></canary></section>