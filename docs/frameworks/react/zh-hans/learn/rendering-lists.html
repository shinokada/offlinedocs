<!doctype html><html lang="zh-hans"><meta charset="utf-8"><title>渲染列表</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="渲染列表"><h1 id="渲染列表">渲染列表</h1><p>translator:<ul><li>Megrax<li>rottenpen</ul><intro><p>你可能经常需要通过 <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array#">JavaScript 的数组方法</a> 来操作数组中的数据，从而将一个数据集渲染成多个相似的组件。在这篇文章中，你将学会如何在 React 中使用 <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/filter"><code>filter()</code></a> 筛选需要渲染的组件和使用 <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/map"><code>map()</code></a> 把数组转换成组件数组。</p></intro><youwilllearn><ul><li>如何通过 JavaScript 的 <code>map()</code> 方法从数组中生成组件<li>如何通过 JavaScript 的 <code>filter()</code> 筛选需要渲染的组件<li>何时以及为何使用 React 中的 key</ul></youwilllearn><section class="level2"aria-labelledby="从数组中渲染数据-rendering-data-from-arrays"><h2 id="从数组中渲染数据-rendering-data-from-arrays">从数组中渲染数据 {/<em>rendering-data-from-arrays</em>/}</h2><p>这里我们有一个列表。<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>li<span class="token operator">></span>凯瑟琳·约翰逊<span class="token operator">:</span> 数学家<span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>li<span class="token operator">></span>马里奥·莫利纳<span class="token operator">:</span> 化学家<span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>li<span class="token operator">></span>穆罕默德·阿卜杜勒·萨拉姆<span class="token operator">:</span> 物理学家<span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>li<span class="token operator">></span>珀西·莱温·朱利亚<span class="token operator">:</span> 化学家<span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>li<span class="token operator">></span>苏布拉马尼扬·钱德拉塞卡<span class="token operator">:</span> 天体物理学家<span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span></code></pre><p>可以看到，这些列表项之间唯一的区别就是其中的内容/数据。未来你可能会碰到很多类似的情况，在那些场景中，你想基于不同的数据渲染出相似的组件，比如评论列表或者个人资料的图库。在这样的场景下，可以把要用到的数据存入 JavaScript 对象或数组，然后用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map"><code>map()</code></a> 或 <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/filter"><code>filter()</code></a> 这样的方法来渲染出一个组件列表。<p>这里给出一个由数组生成一系列列表项的简单示例：<ol><li>首先，把数据 <strong>存储</strong> 到数组中：</ol><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'凯瑟琳·约翰逊: 数学家'</span><span class="token punctuation">,</span>
  <span class="token string">'马里奥·莫利纳: 化学家'</span><span class="token punctuation">,</span>
  <span class="token string">'穆罕默德·阿卜杜勒·萨拉姆: 物理学家'</span><span class="token punctuation">,</span>
  <span class="token string">'珀西·莱温·朱利亚: 化学家'</span><span class="token punctuation">,</span>
  <span class="token string">'苏布拉马尼扬·钱德拉塞卡: 天体物理学家'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><ol start="2"><li><strong>遍历</strong> <code>people</code> 这个数组中的每一项，并获得一个新的 JSX 节点数组 <code>listItems</code>：</ol><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> listItems <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span> <span class="token operator">&#x3C;</span>li<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><ol start="3"><li>把 <code>listItems</code> 用 <code>&#x3C;ul></code> 包裹起来，然后 <strong>返回</strong> 它：</ol><pre class="language-js"><code class="language-js"><span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>ul<span class="token operator">></span><span class="token punctuation">{</span>listItems<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>来看看运行的结果：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'凯瑟琳·约翰逊: 数学家'</span><span class="token punctuation">,</span>
  <span class="token string">'马里奥·莫利纳: 化学家'</span><span class="token punctuation">,</span>
  <span class="token string">'穆罕默德·阿卜杜勒·萨拉姆: 物理学家'</span><span class="token punctuation">,</span>
  <span class="token string">'珀西·莱温·朱利亚: 化学家'</span><span class="token punctuation">,</span>
  <span class="token string">'苏布拉马尼扬·钱德拉塞卡: 天体物理学家'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">List</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> listItems <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
    <span class="token operator">&#x3C;</span>li<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>ul<span class="token operator">></span><span class="token punctuation">{</span>listItems<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">li</span> <span class="token punctuation">{</span> <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><p>注意上面的沙盒可能会输出这样一个控制台错误：</p><consoleblock level="error"><p>Warning: Each child in a list should have a unique "key" prop.</p></consoleblock><p>等会我们会学到怎么修复它。在此之前，我们先来看看如何把这个数组变得更加结构化。</section><section class="level2"aria-labelledby="对数组项进行过滤-filtering-arrays-of-items"><h2 id="对数组项进行过滤-filtering-arrays-of-items">对数组项进行过滤 {/<em>filtering-arrays-of-items</em>/}</h2><p>让我们把 <code>people</code> 数组变得更加结构化一点。<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'凯瑟琳·约翰逊'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'数学家'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'马里奥·莫利纳'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'化学家'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'穆罕默德·阿卜杜勒·萨拉姆'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'物理学家'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'珀西·莱温·朱利亚'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'化学家'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'苏布拉马尼扬·钱德拉塞卡'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'天体物理学家'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><p>现在，假设你只想在屏幕上显示职业是 <code>化学家</code> 的人。那么你可以使用 JavaScript 的 <code>filter()</code> 方法来返回满足条件的项。这个方法会让数组的子项经过 “过滤器”（一个返回值为 <code>true</code> 或 <code>false</code> 的函数）的筛选，最终返回一个只包含满足条件的项的新数组。<p>既然你只想显示 <code>profession</code> 值是 <code>化学家</code> 的人，那么这里的 “过滤器” 函数应该长这样：<code>(person) => person.profession === '化学家'</code>。下面我们来看看该怎么把它们组合在一起：<ol><li>首先，<strong>创建</strong> 一个用来存化学家们的新数组 <code>chemists</code>，这里用到 <code>filter()</code> 方法过滤 <code>people</code> 数组来得到所有的化学家，过滤的条件应该是 <code>person.profession === '化学家'</code>：</ol><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> chemists <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
  person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">===</span> <span class="token string">'化学家'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><ol start="2"><li>接下来 <strong>用 map 方法遍历</strong> <code>chemists</code> 数组:</ol><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> listItems <span class="token operator">=</span> chemists<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
  <span class="token operator">&#x3C;</span>li<span class="token operator">></span>
     <span class="token operator">&#x3C;</span>img
       src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getImageUrl</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">}</span>
       alt<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
     <span class="token operator">/</span><span class="token operator">></span>
     <span class="token operator">&#x3C;</span>p<span class="token operator">></span>
       <span class="token operator">&#x3C;</span>b<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">:</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>b<span class="token operator">></span>
       <span class="token punctuation">{</span><span class="token string">' '</span> <span class="token operator">+</span> person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">+</span> <span class="token string">' '</span><span class="token punctuation">}</span>
       因<span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">accomplishment</span><span class="token punctuation">}</span>而闻名世界
     <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><ol start="3"><li>最后，<strong>返回</strong> <code>listItems</code>：</ol><pre class="language-js"><code class="language-js"><span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>ul<span class="token operator">></span><span class="token punctuation">{</span>listItems<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span><span class="token punctuation">;</span></code></pre><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> people <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getImageUrl <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./utils.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">List</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> chemists <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
    person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">===</span> <span class="token string">'化学家'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> listItems <span class="token operator">=</span> chemists<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
    <span class="token operator">&#x3C;</span>li<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>img
        src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getImageUrl</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">}</span>
        alt<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>b<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">:</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>b<span class="token operator">></span>
        <span class="token punctuation">{</span><span class="token string">' '</span> <span class="token operator">+</span> person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">+</span> <span class="token string">' '</span><span class="token punctuation">}</span>
        因<span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">accomplishment</span><span class="token punctuation">}</span>而闻名世界
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>ul<span class="token operator">></span><span class="token punctuation">{</span>listItems<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'凯瑟琳·约翰逊'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'数学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'太空飞行相关数值的核算'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'MK3eW3A'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'马里奥·莫利纳'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'化学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'北极臭氧空洞的发现'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'mynHUSa'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'穆罕默德·阿卜杜勒·萨拉姆'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'物理学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'关于基本粒子间弱相互作用和电磁相互作用的统一理论'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'bE7W1ji'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'珀西·莱温·朱利亚'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'化学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'开创性的可的松药物、类固醇和避孕药的研究'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'IOjWm71'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'苏布拉马尼扬·钱德拉塞卡'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'天体物理学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'白矮星质量计算'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'lrWQx8l'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">getImageUrl</span><span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token string">'https://i.imgur.com/'</span> <span class="token operator">+</span>
    person<span class="token punctuation">.</span><span class="token property-access">imageId</span> <span class="token operator">+</span>
    <span class="token string">'s.jpg'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">ul</span> <span class="token punctuation">{</span> <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token unit">px</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">li</span> <span class="token punctuation">{</span> 
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> 
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span> 
  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> auto <span class="token number">1</span><span class="token unit">fr</span><span class="token punctuation">;</span>
  <span class="token property">gap</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">img</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><pitfall><p>因为箭头函数会隐式地返回位于 <code>=></code> 之后的表达式，所以你可以省略 <code>return</code> 语句。<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> listItems <span class="token operator">=</span> chemists<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
  <span class="token operator">&#x3C;</span>li<span class="token operator">></span><span class="token spread operator">...</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span> <span class="token comment">// 隐式地返回！</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>不过，<strong>如果你的 <code>=></code> 后面跟了一对花括号 <code>{</code> ，那你必须使用 <code>return</code> 来指定返回值！</strong><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> listItems <span class="token operator">=</span> chemists<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// 花括号</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>li<span class="token operator">></span><span class="token spread operator">...</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>箭头函数 <code>=> {</code> 后面的部分被称为 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions#function_body">"块函数体"</a>，块函数体支持多行代码的写法，但要用 <code>return</code> 语句才能指定返回值。假如你忘了写 <code>return</code>，那这个函数什么都不会返回！</p></pitfall></section><section class="level2"aria-labelledby="用-key-保持列表项的顺序-keeping-list-items-in-order-with-key"><h2 id="用-key-保持列表项的顺序-keeping-list-items-in-order-with-key">用 <code>key</code> 保持列表项的顺序 {/<em>keeping-list-items-in-order-with-key</em>/}</h2><p>如果把上面任何一个沙盒示例在新标签页打开，你就会发现控制台有这样一个报错：</p><consoleblock level="error"><p>Warning: Each child in a list should have a unique "key" prop.</p></consoleblock><p>这是因为你必须给数组中的每一项都指定一个 <code>key</code>——它可以是字符串或数字的形式，只要能唯一标识出各个数组项就行：<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token spread operator">...</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span></code></pre><note><p>直接放在 <code>map()</code> 方法里的 JSX 元素一般都需要指定 <code>key</code> 值！</p></note><p>这些 key 会告诉 React，每个组件对应着数组里的哪一项，所以 React 可以把它们匹配起来。这在数组项进行移动（例如排序）、插入或删除等操作时非常重要。一个合适的 <code>key</code> 可以帮助 React 推断发生了什么，从而得以正确地更新 DOM 树。<p>用作 key 的值应该在数据中提前就准备好，而不是在运行时才随手生成：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> people <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getImageUrl <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./utils.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">List</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> listItems <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
    <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>img
        src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getImageUrl</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">}</span>
        alt<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>b<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>b<span class="token operator">></span>
          <span class="token punctuation">{</span><span class="token string">' '</span> <span class="token operator">+</span> person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">+</span> <span class="token string">' '</span><span class="token punctuation">}</span>
          因<span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">accomplishment</span><span class="token punctuation">}</span>而闻名世界
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>ul<span class="token operator">></span><span class="token punctuation">{</span>listItems<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'凯瑟琳·约翰逊'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'数学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'太空飞行相关数值的核算'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'MK3eW3A'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'马里奥·莫利纳'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'化学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'北极臭氧空洞的发现'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'mynHUSa'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'穆罕默德·阿卜杜勒·萨拉姆'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'物理学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'关于基本粒子间弱相互作用和电磁相互作用的统一理论'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'bE7W1ji'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'珀西·莱温·朱利亚'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'化学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'开创性的可的松药物、类固醇和避孕药'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'IOjWm71'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'苏布拉马尼扬·钱德拉塞卡'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'天体物理学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'白矮星质量计算'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'lrWQx8l'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">getImageUrl</span><span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token string">'https://i.imgur.com/'</span> <span class="token operator">+</span>
    person<span class="token punctuation">.</span><span class="token property-access">imageId</span> <span class="token operator">+</span>
    <span class="token string">'s.jpg'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">ul</span> <span class="token punctuation">{</span> <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token unit">px</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">li</span> <span class="token punctuation">{</span> 
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> 
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span> 
  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> auto <span class="token number">1</span><span class="token unit">fr</span><span class="token punctuation">;</span>
  <span class="token property">gap</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">img</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><deepdive><section class="level4"aria-labelledby="为每个列表项显示多个-dom-节点-displaying-several-dom-nodes-for-each-list-item"><h4 id="为每个列表项显示多个-dom-节点-displaying-several-dom-nodes-for-each-list-item">为每个列表项显示多个 DOM 节点 {/<em>displaying-several-dom-nodes-for-each-list-item</em>/}</h4><p>如果你想让每个列表项都输出多个 DOM 节点而非一个的话，该怎么做呢？<p>Fragment 语法的简写形式 <code>&#x3C;> &#x3C;/></code> 无法接受 key 值，所以你只能要么把生成的节点用一个 <code>&#x3C;div></code> 标签包裹起来，要么使用长一点但更明确的 <code>&#x3C;Fragment></code> 写法：<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Fragment</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>

<span class="token keyword">const</span> listItems <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Fragment</span> key<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
    <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">bio</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Fragment</span><span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>这里的 Fragment 标签本身并不会出现在 DOM 上，这串代码最终会转换成 <code>&#x3C;h1></code>、<code>&#x3C;p></code>、<code>&#x3C;h1></code>、<code>&#x3C;p></code>…… 的列表。</section></deepdive><section class="level3"aria-labelledby="如何设定-key-值-where-to-get-your-key"><h3 id="如何设定-key-值-where-to-get-your-key">如何设定 <code>key</code> 值 {/<em>where-to-get-your-key</em>/}</h3><p>不同来源的数据往往对应不同的 key 值获取方式：<ul><li><strong>来自数据库的数据：</strong> 如果你的数据是从数据库中获取的，那你可以直接使用数据表中的主键，因为它们天然具有唯一性。<li><strong>本地产生数据：</strong> 如果你数据的产生和保存都在本地（例如笔记软件里的笔记），那么你可以使用一个自增计数器或者一个类似 <a href="https://www.npmjs.com/package/uuid"><code>uuid</code></a> 的库来生成 key。</ul></section><section class="level3"aria-labelledby="key-需要满足的条件-rules-of-keys"><h3 id="key-需要满足的条件-rules-of-keys">key 需要满足的条件 {/<em>rules-of-keys</em>/}</h3><ul><li><strong>key 值在兄弟节点之间必须是唯一的。</strong> 不过不要求全局唯一，在不同的数组中可以使用相同的 key。<li><strong>key 值不能改变</strong>，否则就失去了使用 key 的意义！所以千万不要在渲染时动态地生成 key。</ul></section><section class="level3"aria-labelledby="react-中为什么需要-key-why-does-react-need-keys"><h3 id="react-中为什么需要-key-why-does-react-need-keys">React 中为什么需要 key？ {/<em>why-does-react-need-keys</em>/}</h3><p>设想一下，假如你桌面上的文件都没有文件名，取而代之的是，你需要通过文件的位置顺序来区分它们———第一个文件，第二个文件，以此类推。也许你也不是不能接受这种方式，可是一旦你删除了其中的一个文件，这种组织方式就会变得混乱无比。原来的第二个文件可能会变成第一个文件，第三个文件会成为第二个文件……<p>React 里需要 key 和文件夹里的文件需要有文件名的道理是类似的。它们（key 和文件名）都让我们可以从众多的兄弟元素中唯一标识出某一项（JSX 节点或文件）。而一个精心选择的 key 值所能提供的信息远远不止于这个元素在数组中的位置。即使元素的位置在渲染的过程中发生了改变，它提供的 <code>key</code> 值也能让 React 在整个生命周期中一直认得它。</p><pitfall><p>你可能会想直接把数组项的索引当作 key 值来用，实际上，如果你没有显式地指定 <code>key</code> 值，React 确实默认会这么做。但是数组项的顺序在插入、删除或者重新排序等操作中会发生改变，此时把索引顺序用作 key 值会产生一些微妙且令人困惑的 bug。<p>与之类似，请不要在运行过程中动态地产生 key，像是 <code>key={Math.random()}</code> 这种方式。这会导致每次重新渲染后的 key 值都不一样，从而使得所有的组件和 DOM 元素每次都要重新创建。这不仅会造成运行变慢的问题，更有可能导致用户输入的丢失。所以，使用能从给定数据中稳定取得的值才是明智的选择。<p>有一点需要注意，组件不会把 <code>key</code> 当作 props 的一部分。Key 的存在只对 React 本身起到提示作用。如果你的组件需要一个 ID，那么请把它作为一个单独的 prop 传给组件： <code>&#x3C;Profile key={id} userId={id} /></code>。</p></pitfall><recap><p>在这篇文章中，你学习了：<ul><li>如何从组件中抽离出数据，并把它们放入像数组、对象这样的数据结构中。<li>如何使用 JavaScript 的 <code>map()</code> 方法来生成一组相似的组件。<li>如何使用 JavaScript 的 <code>filter()</code> 方法来筛选数组。<li>为何以及如何给集合中的每个组件设置一个 <code>key</code> 值：它使 React 能追踪这些组件，即便后者的位置或数据发生了变化。</ul></recap><challenges><section class="level4"aria-labelledby="把列表一分为二-splitting-a-list-in-two"><h4 id="把列表一分为二-splitting-a-list-in-two">把列表一分为二 {/<em>splitting-a-list-in-two</em>/}</h4><p>下面的示例中有一个包含所有人员信息的列表。<p>请试着把它分成一前一后的两个列表：分别是 <strong>化学家们</strong> 和 <strong>其余的人</strong>。像之前一样，你可以通过 <code>person.profession === '化学家'</code> 这个条件来判断一个人是不是化学家。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> people <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getImageUrl <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./utils.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">List</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> listItems <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
    <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>img
        src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getImageUrl</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">}</span>
        alt<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>b<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">:</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>b<span class="token operator">></span>
        <span class="token punctuation">{</span><span class="token string">' '</span> <span class="token operator">+</span> person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">+</span> <span class="token string">' '</span><span class="token punctuation">}</span>
        因<span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">accomplishment</span><span class="token punctuation">}</span>而闻名世界
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>article<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span>科学家<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span><span class="token punctuation">{</span>listItems<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>article<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'凯瑟琳·约翰逊'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'数学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'太空飞行相关数值的核算'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'MK3eW3A'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'马里奥·莫利纳'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'化学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'北极臭氧空洞的发现'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'mynHUSa'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'穆罕默德·阿卜杜勒·萨拉姆'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'物理学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'关于基本粒子间弱相互作用和电磁相互作用的统一理论'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'bE7W1ji'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'珀西·莱温·朱利亚'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'化学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'开创性的可的松药物、类固醇和避孕药'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'IOjWm71'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'苏布拉马尼扬·钱德拉塞卡'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'天体物理学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'白矮星质量计算'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'lrWQx8l'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">getImageUrl</span><span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token string">'https://i.imgur.com/'</span> <span class="token operator">+</span>
    person<span class="token punctuation">.</span><span class="token property-access">imageId</span> <span class="token operator">+</span>
    <span class="token string">'s.jpg'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">ul</span> <span class="token punctuation">{</span> <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token unit">px</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">li</span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> auto <span class="token number">1</span><span class="token unit">fr</span><span class="token punctuation">;</span>
  <span class="token property">gap</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">img</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><solution><p>使用两次 <code>filter()</code> 方法来获得两个单独的数组，然后用 <code>map</code> 方法分别遍历它们来得到结果。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> people <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getImageUrl <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./utils.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">List</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> chemists <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
    person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">===</span> <span class="token string">'化学家'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> everyoneElse <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
    person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">!==</span> <span class="token string">'化学家'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>article<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span>科学家<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h2<span class="token operator">></span>化学家<span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token punctuation">{</span>chemists<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
          <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token operator">&#x3C;</span>img
              src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getImageUrl</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">}</span>
              alt<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&#x3C;</span>p<span class="token operator">></span>
              <span class="token operator">&#x3C;</span>b<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">:</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>b<span class="token operator">></span>
              <span class="token punctuation">{</span><span class="token string">' '</span> <span class="token operator">+</span> person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">+</span> <span class="token string">' '</span><span class="token punctuation">}</span>
              因<span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">accomplishment</span><span class="token punctuation">}</span>而闻名世界
            <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
          <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h2<span class="token operator">></span>其余的人<span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token punctuation">{</span>everyoneElse<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
          <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token operator">&#x3C;</span>img
              src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getImageUrl</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">}</span>
              alt<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&#x3C;</span>p<span class="token operator">></span>
              <span class="token operator">&#x3C;</span>b<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">:</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>b<span class="token operator">></span>
              <span class="token punctuation">{</span><span class="token string">' '</span> <span class="token operator">+</span> person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">+</span> <span class="token string">' '</span><span class="token punctuation">}</span>
              因<span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">accomplishment</span><span class="token punctuation">}</span>而闻名世界
            <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
          <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>article<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'凯瑟琳·约翰逊'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'数学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'太空飞行相关数值的核算'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'MK3eW3A'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'马里奥·莫利纳'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'化学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'北极臭氧空洞的发现'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'mynHUSa'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'穆罕默德·阿卜杜勒·萨拉姆'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'物理学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'关于基本粒子间弱相互作用和电磁相互作用的统一理论'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'bE7W1ji'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'珀西·莱温·朱利亚'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'化学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'开创性的可的松药物、类固醇和避孕药'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'IOjWm71'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'苏布拉马尼扬·钱德拉塞卡'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'天体物理学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'白矮星质量计算'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'lrWQx8l'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">getImageUrl</span><span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token string">'https://i.imgur.com/'</span> <span class="token operator">+</span>
    person<span class="token punctuation">.</span><span class="token property-access">imageId</span> <span class="token operator">+</span>
    <span class="token string">'s.jpg'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">ul</span> <span class="token punctuation">{</span> <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token unit">px</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">li</span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> auto <span class="token number">1</span><span class="token unit">fr</span><span class="token punctuation">;</span>
  <span class="token property">gap</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">img</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><p>这个解决方案中，我们直接在父级的 <code>&#x3C;ul></code> 元素里就执行了 <code>map</code> 方法。当然如果你想提高代码的可读性，你也可以先用变量保存一下 <code>map</code> 之后的结果。<p>现在得到的列表中仍然存在一些重复的代码，我们可以更进一步，将这些重复的部分提取成一个 <code>&#x3C;ListSection></code> 组件：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> people <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getImageUrl <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./utils.js'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ListSection</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> title<span class="token punctuation">,</span> people <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token punctuation">{</span>people<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
          <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token operator">&#x3C;</span>img
              src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getImageUrl</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">}</span>
              alt<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&#x3C;</span>p<span class="token operator">></span>
              <span class="token operator">&#x3C;</span>b<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">:</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>b<span class="token operator">></span>
              <span class="token punctuation">{</span><span class="token string">' '</span> <span class="token operator">+</span> person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">+</span> <span class="token string">' '</span><span class="token punctuation">}</span>
              因<span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">accomplishment</span><span class="token punctuation">}</span>而闻名世界
            <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
          <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">List</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> chemists <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
    person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">===</span> <span class="token string">'化学家'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> everyoneElse <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
    person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">!==</span> <span class="token string">'化学家'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>article<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span>科学家<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">ListSection</span>
        title<span class="token operator">=</span><span class="token string">"化学家"</span>
        people<span class="token operator">=</span><span class="token punctuation">{</span>chemists<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">ListSection</span>
      title<span class="token operator">=</span><span class="token string">"其余的人"</span>
      people<span class="token operator">=</span><span class="token punctuation">{</span>everyoneElse<span class="token punctuation">}</span> 
      <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>article<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'凯瑟琳·约翰逊'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'数学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'太空飞行相关数值的核算'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'MK3eW3A'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'马里奥·莫利纳'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'化学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'北极臭氧空洞的发现'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'mynHUSa'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'穆罕默德·阿卜杜勒·萨拉姆'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'物理学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'关于基本粒子间弱相互作用和电磁相互作用的统一理论'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'bE7W1ji'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'珀西·莱温·朱利亚'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'化学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'开创性的可的松药物、类固醇和避孕药'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'IOjWm71'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'苏布拉马尼扬·钱德拉塞卡'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'天体物理学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'白矮星质量计算'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'lrWQx8l'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">getImageUrl</span><span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token string">'https://i.imgur.com/'</span> <span class="token operator">+</span>
    person<span class="token punctuation">.</span><span class="token property-access">imageId</span> <span class="token operator">+</span>
    <span class="token string">'s.jpg'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">ul</span> <span class="token punctuation">{</span> <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token unit">px</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">li</span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> auto <span class="token number">1</span><span class="token unit">fr</span><span class="token punctuation">;</span>
  <span class="token property">gap</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">img</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><p>仔细的读者会发现我们在这写了两个 <code>filter</code>，对于每个人的职业我们都进行了两次过滤。读取一个属性的值花不了多少时间，因此放在这个简单的示例中没什么大问题。但是如果你的代码逻辑比这里复杂和“昂贵”得多，那你可以把两次的 <code>filter</code> 替换成一个只需进行一次检查就能构造两个数组的循环。<p>实际上，如果 <code>people</code> 的数据不会改变，可以直接把这段代码移到组件外面。从 React 的视角来看，它只关心你最后给它的是不是包含 JSX 节点的数组，并不在乎数组是怎么来的：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> people <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getImageUrl <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./utils.js'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> chemists <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> everyoneElse <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
people<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">===</span> <span class="token string">'化学家'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    chemists<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
    everyoneElse<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ListSection</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> title<span class="token punctuation">,</span> people <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token punctuation">{</span>people<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
          <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token operator">&#x3C;</span>img
              src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getImageUrl</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">}</span>
              alt<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&#x3C;</span>p<span class="token operator">></span>
              <span class="token operator">&#x3C;</span>b<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">:</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>b<span class="token operator">></span>
              <span class="token punctuation">{</span><span class="token string">' '</span> <span class="token operator">+</span> person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">+</span> <span class="token string">' '</span><span class="token punctuation">}</span>
              因<span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">accomplishment</span><span class="token punctuation">}</span>而闻名世界
            <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
          <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">List</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>article<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span>科学家<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">ListSection</span>
        title<span class="token operator">=</span><span class="token string">"化学家"</span>
        people<span class="token operator">=</span><span class="token punctuation">{</span>chemists<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">ListSection</span>
        title<span class="token operator">=</span><span class="token string">"其余的人"</span>
        people<span class="token operator">=</span><span class="token punctuation">{</span>everyoneElse<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>article<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'凯瑟琳·约翰逊'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'数学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'太空飞行相关数值的核算'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'MK3eW3A'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'马里奥·莫利纳'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'化学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'北极臭氧空洞的发现'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'mynHUSa'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'穆罕默德·阿卜杜勒·萨拉姆'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'物理学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'关于基本粒子间弱相互作用和电磁相互作用的统一理论'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'bE7W1ji'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'珀西·莱温·朱利亚'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'化学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'开创性的可的松药物、类固醇和避孕药'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'IOjWm71'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'苏布拉马尼扬·钱德拉塞卡'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'天体物理学家'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'白矮星质量计算'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'lrWQx8l'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">getImageUrl</span><span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token string">'https://i.imgur.com/'</span> <span class="token operator">+</span>
    person<span class="token punctuation">.</span><span class="token property-access">imageId</span> <span class="token operator">+</span>
    <span class="token string">'s.jpg'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">ul</span> <span class="token punctuation">{</span> <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token unit">px</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">li</span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> auto <span class="token number">1</span><span class="token unit">fr</span><span class="token punctuation">;</span>
  <span class="token property">gap</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">img</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack></solution></section><section class="level4"aria-labelledby="嵌套列表-nested-lists-in-one-component"><h4 id="嵌套列表-nested-lists-in-one-component">嵌套列表 {/<em>nested-lists-in-one-component</em>/}</h4><p>请根据给你的数组生成菜谱列表！其中每个菜谱，都用 <code>&#x3C;h2></code> 来显示它的名称，并在 <code>&#x3C;ul></code> 里列出它所需的原料。</p><hint><p>这里的写法需要嵌套两层 <code>map</code>。</p></hint><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> recipes <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RecipeList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span>菜谱<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> recipes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'希腊沙拉'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'西红柿'</span><span class="token punctuation">,</span> <span class="token string">'黄瓜'</span><span class="token punctuation">,</span> <span class="token string">'洋葱'</span><span class="token punctuation">,</span> <span class="token string">'油橄榄'</span><span class="token punctuation">,</span> <span class="token string">'羊奶酪'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'夏威夷披萨'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'披萨饼皮'</span><span class="token punctuation">,</span> <span class="token string">'披萨酱'</span><span class="token punctuation">,</span> <span class="token string">'马苏里拉奶酪'</span><span class="token punctuation">,</span> <span class="token string">'火腿'</span><span class="token punctuation">,</span> <span class="token string">'菠萝'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'鹰嘴豆泥'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'鹰嘴豆'</span><span class="token punctuation">,</span> <span class="token string">'橄榄油'</span><span class="token punctuation">,</span> <span class="token string">'蒜瓣'</span><span class="token punctuation">,</span> <span class="token string">'柠檬'</span><span class="token punctuation">,</span> <span class="token string">'芝麻酱'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></sandpack><solution><p>这是一种可能的解法：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> recipes <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RecipeList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span>菜谱<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token punctuation">{</span>recipes<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">recipe</span> <span class="token arrow operator">=></span>
        <span class="token operator">&#x3C;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>recipe<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token punctuation">{</span>recipe<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
          <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
            <span class="token punctuation">{</span>recipe<span class="token punctuation">.</span><span class="token property-access">ingredients</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">ingredient</span> <span class="token arrow operator">=></span>
              <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>ingredient<span class="token punctuation">}</span><span class="token operator">></span>
                <span class="token punctuation">{</span>ingredient<span class="token punctuation">}</span>
              <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
            <span class="token punctuation">)</span><span class="token punctuation">}</span>
          <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> recipes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'希腊沙拉'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'西红柿'</span><span class="token punctuation">,</span> <span class="token string">'黄瓜'</span><span class="token punctuation">,</span> <span class="token string">'洋葱'</span><span class="token punctuation">,</span> <span class="token string">'油橄榄'</span><span class="token punctuation">,</span> <span class="token string">'羊奶酪'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'夏威夷披萨'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'披萨饼皮'</span><span class="token punctuation">,</span> <span class="token string">'披萨酱'</span><span class="token punctuation">,</span> <span class="token string">'马苏里拉奶酪'</span><span class="token punctuation">,</span> <span class="token string">'火腿'</span><span class="token punctuation">,</span> <span class="token string">'菠萝'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'鹰嘴豆泥'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'鹰嘴豆'</span><span class="token punctuation">,</span> <span class="token string">'橄榄油'</span><span class="token punctuation">,</span> <span class="token string">'蒜瓣'</span><span class="token punctuation">,</span> <span class="token string">'柠檬'</span><span class="token punctuation">,</span> <span class="token string">'芝麻酱'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></sandpack><p><code>recipes</code> 数组中每一项都拥有一个 <code>id</code>，所以外层的循环可以直接拿它作为 <code>key</code>。不过，在循环遍历原料的时候就没有现成的 <code>id</code> 可以用了。但是，合理推测一下，一份菜谱里不会罗列多次同一种原料，所以其实原料的名字就适合作为 <code>key</code>。此外，你也可以自行修改原本的数据人为增加一项 <code>id</code>，或是使用索引作为 <code>key</code>（需要注意的是，这么做会使你无法正常地对原料进行排序）。</p></solution></section><section class="level4"aria-labelledby="把列表项提取成一个组件-extracting-a-list-item-component"><h4 id="把列表项提取成一个组件-extracting-a-list-item-component">把列表项提取成一个组件 {/<em>extracting-a-list-item-component</em>/}</h4><p><code>RecipeList</code> 组件的代码里嵌套了两层 <code>map</code>。出于简化代码的考虑，我们提取出一个接受 <code>id</code>、<code>name</code> 和 <code>ingredients</code> 作为 props 的 <code>Recipe</code> 组件。这种情况下，你会把外层的 <code>key</code> 放在哪里呢？原因是什么？</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> recipes <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RecipeList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span>菜谱<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token punctuation">{</span>recipes<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">recipe</span> <span class="token arrow operator">=></span>
        <span class="token operator">&#x3C;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>recipe<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token punctuation">{</span>recipe<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
          <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
            <span class="token punctuation">{</span>recipe<span class="token punctuation">.</span><span class="token property-access">ingredients</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">ingredient</span> <span class="token arrow operator">=></span>
              <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>ingredient<span class="token punctuation">}</span><span class="token operator">></span>
                <span class="token punctuation">{</span>ingredient<span class="token punctuation">}</span>
              <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
            <span class="token punctuation">)</span><span class="token punctuation">}</span>
          <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> recipes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'希腊沙拉'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'西红柿'</span><span class="token punctuation">,</span> <span class="token string">'黄瓜'</span><span class="token punctuation">,</span> <span class="token string">'洋葱'</span><span class="token punctuation">,</span> <span class="token string">'油橄榄'</span><span class="token punctuation">,</span> <span class="token string">'羊奶酪'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'夏威夷披萨'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'披萨饼皮'</span><span class="token punctuation">,</span> <span class="token string">'披萨酱'</span><span class="token punctuation">,</span> <span class="token string">'马苏里拉奶酪'</span><span class="token punctuation">,</span> <span class="token string">'火腿'</span><span class="token punctuation">,</span> <span class="token string">'菠萝'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'鹰嘴豆泥'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'鹰嘴豆'</span><span class="token punctuation">,</span> <span class="token string">'橄榄油'</span><span class="token punctuation">,</span> <span class="token string">'蒜瓣'</span><span class="token punctuation">,</span> <span class="token string">'柠檬'</span><span class="token punctuation">,</span> <span class="token string">'芝麻酱'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></sandpack><solution><p>你可以将外层 <code>map</code> 里的 JSX 复制粘贴到新的 <code>Recipe</code> 组件中，并作为这个新组件的返回值。接着把原先的 <code>recipe.name</code> 改成 <code>name</code>，<code>recipe.id</code> 改成 <code>id</code>，以此类推，最后把它们作为 props 传给 <code>Recipe</code>：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> recipes <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Recipe</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> ingredients <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token punctuation">{</span>ingredients<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">ingredient</span> <span class="token arrow operator">=></span>
          <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>ingredient<span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token punctuation">{</span>ingredient<span class="token punctuation">}</span>
          <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RecipeList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span>菜谱<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token punctuation">{</span>recipes<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">recipe</span> <span class="token arrow operator">=></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Recipe</span> <span class="token punctuation">{</span><span class="token spread operator">...</span>recipe<span class="token punctuation">}</span> key<span class="token operator">=</span><span class="token punctuation">{</span>recipe<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> recipes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'希腊沙拉'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'西红柿'</span><span class="token punctuation">,</span> <span class="token string">'黄瓜'</span><span class="token punctuation">,</span> <span class="token string">'洋葱'</span><span class="token punctuation">,</span> <span class="token string">'油橄榄'</span><span class="token punctuation">,</span> <span class="token string">'羊奶酪'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'夏威夷披萨'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'披萨饼皮'</span><span class="token punctuation">,</span> <span class="token string">'披萨酱'</span><span class="token punctuation">,</span> <span class="token string">'马苏里拉奶酪'</span><span class="token punctuation">,</span> <span class="token string">'火腿'</span><span class="token punctuation">,</span> <span class="token string">'菠萝'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'鹰嘴豆泥'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'鹰嘴豆'</span><span class="token punctuation">,</span> <span class="token string">'橄榄油'</span><span class="token punctuation">,</span> <span class="token string">'蒜瓣'</span><span class="token punctuation">,</span> <span class="token string">'柠檬'</span><span class="token punctuation">,</span> <span class="token string">'芝麻酱'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></sandpack><p>这里的 <code>&#x3C;Recipe {...recipe} key={recipe.id} /></code> 是一种简写方式，它表示“把 <code>recipe</code> 对象里的每个属性都作为 props 传给 <code>Recipe</code> 组件”。这和直接写明每一个 prop 是等价的：<code>&#x3C;Recipe id={recipe.id} name={recipe.name} ingredients={recipe.ingredients} key={recipe.id} /></code>。<p><strong>注意这里的 <code>key</code> 是写在 <code>&#x3C;Recipe></code> 组件本身上的，不要写在 <code>Recipe</code> 内部返回的 <code>&#x3C;div></code> 上。</strong> 这是因为 <code>key</code> 只有在就近的数组上下文中才有意义。之前的写法里，我们生成了一个 <code>&#x3C;div></code> 的数组所以其中的每一项需要一个 <code>key</code>，但是现在的写法里，生成的实际上是 <code>&#x3C;Recipe></code> 的数组。换句话说，在提取组件的时候，<code>key</code> 应该写在复制粘贴的 JSX 的外层组件上。</p></solution></section><section class="level4"aria-labelledby="带有分隔符的列表-list-with-a-separator"><h4 id="带有分隔符的列表-list-with-a-separator">带有分隔符的列表 {/<em>list-with-a-separator</em>/}</h4><p>下面这个示例展示了立花北枝一首著名的俳句，它的每一行都由 <code>&#x3C;p></code> 标签包裹。你需要在段落之间插入分隔符 <code>&#x3C;hr /></code>，最终的结果大概像这样：<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>article<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token constant">I</span> write<span class="token punctuation">,</span> erase<span class="token punctuation">,</span> rewrite<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Erase</span> again<span class="token punctuation">,</span> and then<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token constant">A</span> poppy blooms<span class="token punctuation">.</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span>article<span class="token operator">></span></code></pre><p>一首俳句通常只有三行，但是你的解答应当适用于任何行数。注意，<code>&#x3C;hr /></code> 元素只应该在 <code>&#x3C;p></code> 元素 <strong>之间</strong> 出现，而不是在开头或结尾。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> poem <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">lines</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'I write, erase, rewrite'</span><span class="token punctuation">,</span>
    <span class="token string">'Erase again, and then'</span><span class="token punctuation">,</span>
    <span class="token string">'A poppy blooms.'</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Poem</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>article<span class="token operator">></span>
      <span class="token punctuation">{</span>poem<span class="token punctuation">.</span><span class="token property-access">lines</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">line<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span>
        <span class="token operator">&#x3C;</span>p key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token punctuation">{</span>line<span class="token punctuation">}</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>article<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">p</span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> Georgia<span class="token punctuation">,</span> serif<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">hr</span> <span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">120</span><span class="token unit">px</span> <span class="token number">0</span> <span class="token number">120</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">px</span> dashed <span class="token hexcode color">#45c3d8</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>（这是一个比较少见的可以把数组索引用作 key 的例子，因为诗句之间的顺序必然是固定的。）</p><hint><p>你可以尝试把原本的 <code>map</code> 改造成手动循环，或者试下 Fragment 语法。</p></hint><solution><p>可以写一个循环，在循环的过程中把 <code>&#x3C;hr /></code> 和 <code>&#x3C;p>...&#x3C;/p></code> 插入到输出的数组：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> poem <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">lines</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'I write, erase, rewrite'</span><span class="token punctuation">,</span>
    <span class="token string">'Erase again, and then'</span><span class="token punctuation">,</span>
    <span class="token string">'A poppy blooms.'</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Poem</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> output <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">// 填充输出的数组</span>
  poem<span class="token punctuation">.</span><span class="token property-access">lines</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">line<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    output<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span>hr key<span class="token operator">=</span><span class="token punctuation">{</span>i <span class="token operator">+</span> <span class="token string">'-separator'</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    output<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span>p key<span class="token operator">=</span><span class="token punctuation">{</span>i <span class="token operator">+</span> <span class="token string">'-text'</span><span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token punctuation">{</span>line<span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 移除第一个 &#x3C;hr /></span>
  output<span class="token punctuation">.</span><span class="token method function property-access">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>article<span class="token operator">></span>
      <span class="token punctuation">{</span>output<span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>article<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">p</span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> Georgia<span class="token punctuation">,</span> serif<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">hr</span> <span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">120</span><span class="token unit">px</span> <span class="token number">0</span> <span class="token number">120</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">px</span> dashed <span class="token hexcode color">#45c3d8</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>原本使用诗句顺序索引作为 <code>key</code> 的方法已经行不通了，因为现在数组里同时包含了分隔符和诗句。但是，你可以用添加后缀的形式给它们赋予独一无二的 key 值，比如 <code>key={i + '-text'}</code> 这样。<p>另一种做法是，生成包含 <code>&#x3C;hr /></code> 和 <code>&#x3C;p>...&#x3C;/p></code> 的 Fragment 集合，但因其简写语法 <code>&#x3C;> &#x3C;/></code> 不支持指定 key，所以需要写成 <code>&#x3C;Fragment></code> 的形式。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Fragment</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> poem <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">lines</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'I write, erase, rewrite'</span><span class="token punctuation">,</span>
    <span class="token string">'Erase again, and then'</span><span class="token punctuation">,</span>
    <span class="token string">'A poppy blooms.'</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Poem</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>article<span class="token operator">></span>
      <span class="token punctuation">{</span>poem<span class="token punctuation">.</span><span class="token property-access">lines</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">line<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Fragment</span> key<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token punctuation">{</span>i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&#x26;&#x26;</span> <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span>
          <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token punctuation">{</span>line<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Fragment</span><span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>article<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">p</span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> Georgia<span class="token punctuation">,</span> serif<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">hr</span> <span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">120</span><span class="token unit">px</span> <span class="token number">0</span> <span class="token number">120</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">px</span> dashed <span class="token hexcode color">#45c3d8</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>记住，使用 Fragment 语法（通常写作 <code>&#x3C;> &#x3C;/></code>）来包裹 JSX 节点可以避免引入额外的 <code>&#x3C;div></code> 元素！</p></solution><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></challenges></section></section></section>