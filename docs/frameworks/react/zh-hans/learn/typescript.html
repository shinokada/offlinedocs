<!doctype html><html lang="zh-hans"><meta charset="utf-8"><title>使用 TypeScript</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="使用-typescript"><h1 id="使用-typescript">使用 TypeScript</h1><p>re: <a href="https://github.com/reactjs/react.dev/issues/5960">https://github.com/reactjs/react.dev/issues/5960</a></p><intro><p>TypeScript 是一种向 JavaScript 代码添加类型定义的常用方法。TypeScript 天然支持 JSX——只需在项目中添加 <a href="https://www.npmjs.com/package/@types/react"><code>@types/react</code></a> 和 <a href="https://www.npmjs.com/package/@types/react-dom"><code>@types/react-dom</code></a> 即可获得完整的 React Web 支持。</p></intro><youwilllearn><ul><li><a href="/learn/typescript#typescript-with-react-components">在 React 组件中使用 TypeScript</a><li><a href="/learn/typescript#example-hooks">带有 hooks 的类型示例</a><li><a href="/learn/typescript/#useful-types">来自 <code>@types/react</code> 的常见类型</a><li><a href="/learn/typescript/#further-learning">更多学习资源</a></ul></youwilllearn><section class="level2"aria-labelledby="安装-installation"><h2 id="安装-installation">安装 {/<em>installation</em>/}</h2><p>所有的 <a href="https://react-dev-git-fork-orta-typescriptpage-fbopensource.vercel.app/learn/start-a-new-react-project#production-grade-react-frameworks">生产级 React 框架</a> 都支持使用 TypeScript。请按照框架特定的指南进行安装：<ul><li><a href="https://nextjs.org/docs/pages/building-your-application/configuring/typescript">Next.js</a><li><a href="https://remix.run/docs/en/1.19.2/guides/typescript">Remix</a><li><a href="https://www.gatsbyjs.com/docs/how-to/custom-configuration/typescript/">Gatsby</a><li><a href="https://docs.expo.dev/guides/typescript/">Expo</a></ul><section class="level3"aria-labelledby="在现有-react-项目中添加-typescript-adding-typescript-to-an-existing-react-project"><h3 id="在现有-react-项目中添加-typescript-adding-typescript-to-an-existing-react-project">在现有 React 项目中添加 TypeScript {/<em>adding-typescript-to-an-existing-react-project</em>/}</h3><p>使用下面命令安装最新版本的 React 类型定义：</p><terminalblock>npm install @types/react @types/react-dom</terminalblock><p>然后在 <code>tsconfig.json</code> 中设置以下编译器选项：<ol><li>必须在 <a href="https://www.typescriptlang.org/tsconfig/#lib"><code>lib</code></a> 中包含 <code>dom</code>（注意：如果没有指定 <code>lib</code> 选项，默认情况下会包含 <code>dom</code>）。<li><a href="https://www.typescriptlang.org/tsconfig/#jsx"><code>jsx</code></a> 必须设置为一个有效的选项。对于大多数应用程序，<code>preserve</code> 应该足够了。 如果你正在发布一个库，请查阅 <a href="https://www.typescriptlang.org/tsconfig/#jsx"><code>jsx</code> 文档</a> 以选择合适的值。</ol></section></section><section class="level2"aria-labelledby="在-react-组件中使用-typescript-typescript-with-react-components"><h2 id="在-react-组件中使用-typescript-typescript-with-react-components">在 React 组件中使用 TypeScript {/<em>typescript-with-react-components</em>/}</h2><note><p>每个包含 JSX 的文件都必须使用 <code>.tsx</code> 文件扩展名。这是一个 TypeScript 特定的扩展，告诉 TypeScript 该文件包含 JSX。</p></note><p>使用 TypeScript 编写 React 与使用 JavaScript 编写 React 非常相似。与组件一起工作时的关键区别是，你可以为组件的 props 提供类型。这些类型可用于正确性检查，并在编辑器中提供内联文档。<p>以 <a href="/learn">快速入门</a> 指南中的 <a href="/learn#components"><code>MyButton</code> 组件</a> 为例，我们可以为按钮的 <code>title</code> 添加一个描述类型：</p><sandpack><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyButton</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> title <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> # <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">欢迎来到我的应用</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">MyButton</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>我是一个按钮<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">AppTSX</span></span> <span class="token keyword module">from</span> <span class="token string">"./App.tsx"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">App</span> <span class="token operator">=</span> <span class="token maybe-class-name">AppTSX</span><span class="token punctuation">;</span></code></pre></sandpack><note><p>这些沙盒可以处理 TypeScript 代码，但它们不运行类型检查器。这意味着你可以修改 TypeScript 沙盒以进行学习，但你不会收到任何类型错误或警告。要进行类型检查，你可以使用 <a href="https://www.typescriptlang.org/play">TypeScript Playground</a> 或使用更完整的在线沙盒。</p></note><p>这种内联语法是为组件提供类型的最简单方法，但是一旦你开始描述几个字段，它可能变得难以管理。相反，你可以使用 <code>interface</code> 或 <code>type</code> 来描述组件的 props：</p><sandpack><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">MyButtonProps</span></span> <span class="token punctuation">{</span>
  <span class="token comment">/** 按钮文字 */</span>
  # <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token comment">/** 按钮是否禁用 */</span>
  disabled<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyButton</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token punctuation">,</span> disabled <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token maybe-class-name">MyButtonProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>disabled<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">Welcome to my app</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">MyButton</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>我是一个禁用按钮<span class="token punctuation">"</span></span> <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span><span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">AppTSX</span></span> <span class="token keyword module">from</span> <span class="token string">"./App.tsx"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">App</span> <span class="token operator">=</span> <span class="token maybe-class-name">AppTSX</span><span class="token punctuation">;</span></code></pre></sandpack><p>描述组件 props 的类型可以根据需要变得简单或复杂，但它们应该是使用 <code>type</code> 或 <code>interface</code> 描述的对象类型。你可以在 <a href="https://www.typescriptlang.org/docs/handbook/2/objects.html">对象类型</a> 中了解 TypeScript 如何描述对象，但你可能还对使用 <a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#union-types">联合类型</a> 描述可以是几种不同类型之一的 prop，以及在 <a href="https://www.typescriptlang.org/docs/handbook/2/types-from-types.html">从类型创建类型</a> 指南中参考更高级的用例。</section><section class="level2"aria-labelledby="hooks-示例-example-hooks"><h2 id="hooks-示例-example-hooks">Hooks 示例 {/<em>example-hooks</em>/}</h2><p>来自 <code>@types/react</code> 的类型定义包括内置的 hooks，因此你可以在组件中使用它们，无需任何额外设置。它们是根据你在组件中编写的代码构建的，所以你会得到很多 <a href="https://www.typescriptlang.org/docs/handbook/type-inference.html">类型推断</a>，并且理想情况下不需要处理提供类型的细节。<p>但是，我们可以看一下如何为 hooks 提供类型的几个示例。<section class="level3"aria-labelledby="usestate-typing-usestate"><h3 id="usestate-typing-usestate"><code>useState</code> {/<em>typing-usestate</em>/}</h3><p><a href="/reference/react/useState"><code>useState</code> hook</a> 会重用作为初始 state 传入的值以确定值的类型。例如：<pre class="language-ts"><code class="language-ts"><span class="token comment">// 推断类型为 "boolean"</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>enabled<span class="token punctuation">,</span> setEnabled<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>这将为 <code>enabled</code> 分配 <code>boolean</code> 类型，而 <code>setEnabled</code> 将是一个接受 <code>boolean</code> 参数的函数，或者返回 <code>boolean</code> 的函数。如果你想为 state 显式提供一个类型，你可以通过为 <code>useState</code> 调用提供一个类型参数来实现：<pre class="language-ts"><code class="language-ts"><span class="token comment">// 显式设置类型为 "boolean"</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>enabled<span class="token punctuation">,</span> setEnabled<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token builtin">boolean</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>在这种情况下，这并不是很有用，但是当你有一个联合类型时，你可能想要提供一个 <code>type</code>。例如，这里的 <code>status</code> 可以是几个不同的字符串之一：<pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Status</span></span> <span class="token operator">=</span> <span class="token string">"idle"</span> <span class="token operator">|</span> <span class="token string">"loading"</span> <span class="token operator">|</span> <span class="token string">"success"</span> <span class="token operator">|</span> <span class="token string">"error"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>status<span class="token punctuation">,</span> setStatus<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Status</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">"idle"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>或者，如 <a href="/learn/choosing-the-state-structure#principles-for-structuring-state">选择 state 结构原则</a> 中推荐的，你可以将相关的 state 作为一个对象分组，并通过对象类型描述不同的可能性：<pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">RequestState</span></span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'idle'</span> <span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'loading'</span> <span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span> error<span class="token operator">:</span> <span class="token known-class-name class-name">Error</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>requestState<span class="token punctuation">,</span> setRequestState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">RequestState</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'idle'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section class="level3"aria-labelledby="usereducer-typing-usereducer"><h3 id="usereducer-typing-usereducer"><code>useReducer</code> {/<em>typing-usereducer</em>/}</h3><p><a href="/reference/react/useReducer"><code>useReducer</code></a> 是一个更复杂的 hook，它接受一个 reducer 函数和一个初始 state 作为参数，并将从初始 state 推断出 reducer 函数的类型。你可以选择性地为 <code>useReducer</code> 提供类型参数以为 state 提供类型。但是更高的做法仍然是在初始 state 上添加类型：</p><sandpack><pre class="language-tsx"><code class="language-tsx"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>useReducer<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">State</span></span> <span class="token punctuation">{</span>
   count<span class="token operator">:</span> <span class="token builtin">number</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">CounterAction</span></span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"reset"</span> <span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"setCount"</span><span class="token punctuation">;</span> value<span class="token operator">:</span> <span class="token maybe-class-name">State</span><span class="token punctuation">[</span><span class="token string">"count"</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>

<span class="token keyword">const</span> initialState<span class="token operator">:</span> <span class="token maybe-class-name">State</span> <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">stateReducer</span><span class="token punctuation">(</span>state<span class="token operator">:</span> <span class="token maybe-class-name">State</span><span class="token punctuation">,</span> action<span class="token operator">:</span> <span class="token maybe-class-name">CounterAction</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">State</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">"reset"</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> initialState<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"setCount"</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> <span class="token spread operator">...</span>state<span class="token punctuation">,</span> count<span class="token operator">:</span> action<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword module">default</span><span class="token operator">:</span>
      <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Error</span></span><span class="token punctuation">(</span><span class="token string">"Unknown action"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>stateReducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">addFive</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"setCount"</span><span class="token punctuation">,</span> value<span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">count</span> <span class="token operator">+</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">reset</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"reset"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">欢迎来到我的计数器</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">

      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">计数： </span><span class="token punctuation">{</span>state<span class="token punctuation">.</span><span class="token property-access">count</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>addFive<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">加 5</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>reset<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">重置</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">AppTSX</span></span> <span class="token keyword module">from</span> <span class="token string">"./App.tsx"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">App</span> <span class="token operator">=</span> <span class="token maybe-class-name">AppTSX</span><span class="token punctuation">;</span></code></pre></sandpack><p>我们在几个关键位置使用了 TypeScript：<ul><li><code>interface State</code> 描述了 reducer state 的类型。<li><code>type CounterAction</code> 描述了可以 dispatch 至 reducer 的不同 action。<li><code>const initialState: State</code> 为初始 state 提供类型，并且也将成为 <code>useReducer</code> 默认使用的类型。<li><code>stateReducer(state: State, action: CounterAction): State</code> 设置了 reducer 函数参数和返回值的类型。</ul><p>为 <code>useReducer</code> 提供类型参数的更明确的替代方法是在 <code>initialState</code> 上设置类型：<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> stateReducer<span class="token punctuation">,</span> <span class="token maybe-class-name">State</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./your-reducer-implementation'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useReducer</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">State</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>stateReducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="usecontext-typing-usecontext"><h3 id="usecontext-typing-usecontext"><code>useContext</code> {/<em>typing-usecontext</em>/}</h3><p><a href="/reference/react/useContext"><code>useContext</code></a> 是一种无需通过组件传递 props 而可以直接在组件树中传递数据的技术。它是通过创建 provider 组件使用，通常还会创建一个 hook 以在子组件中使用该值。<p>从传递给 <code>createContext</code> 调用的值推断 context 提供的值的类型：</p><sandpack><pre class="language-tsx"><code class="language-tsx"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> useContext<span class="token punctuation">,</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Theme</span></span> <span class="token operator">=</span> <span class="token string">"light"</span> <span class="token operator">|</span> <span class="token string">"dark"</span> <span class="token operator">|</span> <span class="token string">"system"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">ThemeContext</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createContext</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Theme</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">"system"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">useGetTheme</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">useContext</span><span class="token punctuation">(</span><span class="token maybe-class-name">ThemeContext</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>theme<span class="token punctuation">,</span> setTheme<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Theme</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">'light'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">ThemeContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">MyComponent</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span><span class="token class-name">ThemeContext.Provider</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token function">useGetTheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">当前主题：</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">AppTSX</span></span> <span class="token keyword module">from</span> <span class="token string">"./App.tsx"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">App</span> <span class="token operator">=</span> <span class="token maybe-class-name">AppTSX</span><span class="token punctuation">;</span></code></pre></sandpack><p>当你没有一个合理的默认值时，这种技术是有效的，而在这些情况下，<code>null</code> 作为默认值可能感觉是合理的。但是，为了让类型系统理解你的代码，你需要在 <code>createContext</code> 上显式设置 <code>ContextShape | null</code>。<p>这会导致一个问题，你需要在 context consumer 中消除 <code>| null</code> 的类型。我们建议让 hook 在运行时检查它的存在，并在不存在时抛出一个错误：<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> useContext<span class="token punctuation">,</span> useState<span class="token punctuation">,</span> useMemo <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token comment">// 这是一个简单的示例，但你可以想象一个更复杂的对象</span>
type <span class="token maybe-class-name">ComplexObject</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">kind</span><span class="token operator">:</span> string
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 上下文在类型中创建为 `| null`，以准确反映默认值。</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">Context</span> <span class="token operator">=</span> createContext<span class="token operator">&#x3C;</span><span class="token maybe-class-name">ComplexObject</span> <span class="token operator">|</span> <span class="token keyword null nil">null</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 这个 hook 会在运行时检查 context 是否存在，并在不存在时抛出一个错误。</span>
<span class="token keyword">const</span> <span class="token function-variable function">useGetComplexObject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span><span class="token maybe-class-name">Context</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>object<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"useGetComplexObject must be used within a Provider"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> object<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">kind</span><span class="token operator">:</span> <span class="token string">"complex"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Context</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Provider</span></span> value<span class="token operator">=</span><span class="token punctuation">{</span>object<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyComponent</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Context</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Provider</span></span><span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token function">useGetComplexObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Current</span> object<span class="token operator">:</span> <span class="token punctuation">{</span>object<span class="token punctuation">.</span><span class="token property-access">kind</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="usememo-typing-usememo"><h3 id="usememo-typing-usememo"><code>useMemo</code> {/<em>typing-usememo</em>/}</h3><p><a href="/reference/react/useMemo"><code>useMemo</code></a> 会从函数调用中创建/重新访问记忆化值，只有在第二个参数中传入的依赖项发生变化时，才会重新运行该函数。函数的类型是根据第一个参数中函数的返回值进行推断的，如果希望明确指定，可以为这个钩子提供一个类型参数以指定函数类型。<pre class="language-ts"><code class="language-ts"><span class="token comment">// 从 filterTodos 的返回值推断 visibleTodos 的类型</span>
<span class="token keyword">const</span> visibleTodos <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">filterTodos</span><span class="token punctuation">(</span>todos<span class="token punctuation">,</span> tab<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>todos<span class="token punctuation">,</span> tab<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section class="level3"aria-labelledby="usecallback-typing-usecallback"><h3 id="usecallback-typing-usecallback"><code>useCallback</code> {/<em>typing-usecallback</em>/}</h3><p><a href="/reference/react/useCallback"><code>useCallback</code></a> 会在第二个参数中传入的依赖项保持不变的情况下，为函数提供相同的引用。与 <code>useMemo</code> 类似，函数的类型是根据第一个参数中函数的返回值进行推断的，如果希望明确指定，可以为这个钩子提供一个类型参数以指定函数类型。<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> handleClick <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>todos<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>当在 TypeScript 严格模式下，使用 <code>useCallback</code> 需要为回调函数中的参数添加类型注解。这是因为回调函数的类型是根据函数的返回值进行推断的——如果没有参数，那么类型就不能完全理解。<p>根据自身的代码风格偏好，你可以使用 React 类型中的 <code>*EventHandler</code> 函数以在定义回调函数的同时为事件处理程序提供类型注解：<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useCallback <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Form</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">"Change me"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> handleChange <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useCallback</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ChangeEventHandler</span></span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">HTMLInputElement</span><span class="token operator">>></span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setValue</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">currentTarget</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>setValue<span class="token punctuation">]</span><span class="token punctuation">)</span>
  
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>input value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>值： <span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section></section><section class="level2"aria-labelledby="常用类型-useful-types"><h2 id="常用类型-useful-types">常用类型 {/<em>useful-types</em>/}</h2><p>当逐渐适应 React 和 TypeScript 的搭配使用后, 可以尝试阅读 <code>@types/react</code>，此库提供了一整套类型。你可以在 <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/index.d.ts">DefinitelyTyped 的 React 目录中</a> 找到它们。我们将在这里介绍一些更常见的类型。<section class="level3"aria-labelledby="dom-事件-typing-dom-events"><h3 id="dom-事件-typing-dom-events">DOM 事件 {/<em>typing-dom-events</em>/}</h3><p>在 React 中处理 DOM 事件时，事件的类型通常可以从事件处理程序中推断出来。但是，当你想提取一个函数以传递给事件处理程序时，你需要明确设置事件的类型。</p><sandpack><pre class="language-tsx"><code class="language-tsx"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Form</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">"Change me"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleChange</span><span class="token punctuation">(</span>event<span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ChangeEvent</span></span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">HTMLInputElement</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setValue</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">currentTarget</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>input</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">值： </span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">AppTSX</span></span> <span class="token keyword module">from</span> <span class="token string">"./App.tsx"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">App</span> <span class="token operator">=</span> <span class="token maybe-class-name">AppTSX</span><span class="token punctuation">;</span></code></pre></sandpack><p>React 类型中提供了许多事件类型 —— 完整列表可以在 <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/b580df54c0819ec9df62b0835a315dd48b8594a9/types/react/index.d.ts#L1247C1-L1373">这里</a> 查看，它基于 <a href="https://developer.mozilla.org/zh-CN/docs/Web/Events">DOM 的常用事件</a>。<p>当你需要确定某个类型时，可以先将鼠标悬停在你使用的事件处理器上，这样可以查看到事件的具体类型。<p>当你需要使用不包含在此列表中的事件时，你可以使用 <code>React.SyntheticEvent</code> 类型，这是所有事件的基类型。</section><section class="level3"aria-labelledby="子元素-typing-children"><h3 id="子元素-typing-children">子元素 {/<em>typing-children</em>/}</h3><p>描述组件的子元素有两种常见方法。第一种是使用 <code>React.ReactNode</code> 类型，这是可以在 JSX 中作为子元素传递的所有可能类型的并集：<pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">ModalRendererProps</span></span> <span class="token punctuation">{</span>
  # <span class="token builtin">string</span><span class="token punctuation">;</span>
  children<span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ReactNode</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>这是对子元素的一个非常宽泛的定义。第二种方法是使用 <code>React.ReactElement</code> 类型，它只包括 JSX 元素，而不包括 JavaScript 原始类型，如 string 或 number：<pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">ModalRendererProps</span></span> <span class="token punctuation">{</span>
  # <span class="token builtin">string</span><span class="token punctuation">;</span>
  children<span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ReactElement</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>注意，你不能使用 TypeScript 来描述子元素是某种类型的 JSX 元素，所以你不能使用类型系统来描述一个只接受 <code>&#x3C;li></code> 子元素的组件。<p>你可以在这个 <a href="https://www.typescriptlang.org/play?#code/JYWwDg9gTgLgBAJQKYEMDG8BmUIjgIilQ3wChSB6CxYmAOmXRgDkIATJOdNJMGAZzgwAFpxAR+8YADswAVwGkZMJFEzpOjDKw4AFHGEEBvUnDhphwADZsi0gFw0mDWjqQBuUgF9yaCNMlENzgAXjgACjADfkctFnYkfQhDAEpQgD44AB42YAA3dKMo5P46C2tbJGkvLIpcgt9-QLi3AEEwMFCItJDMrPTTbIQ3dKywdIB5aU4kKyQQKpha8drhhIGzLLWODbNs3b3s8YAxKBQAcwXpAThMaGWDvbH0gFloGbmrgQfBzYpd1YjQZbEYARkB6zMwO2SHSAAlZlYIBCdtCRkZpHIrFYahQYQD8UYYFA5EhcfjyGYqHAXnJAsIUHlOOUbHYhMIIHJzsI0Qk4P9SLUBuRqXEXEwAKKfRZcNA8PiCfxWACecAAUgBlAAacFm80W-CU11U6h4TgwUv11yShjgJjMLMqDnN9Dilq+nh8pD8AXgCHdMrCkWisVoAet0R6fXqhWKhjKllZVVxMcavpd4Zg7U6Qaj+2hmdG4zeRF10uu-Aeq0LBfLMEe-V+T2L7zLVu+FBWLdLeq+lc7DYFf39deFVOotMCACNOCh1dq219a+30uC8YWoZsRyuEdjkevR8uvoVMdjyTWt4WiSSydXD4NqZP4AymeZE072ZzuUeZQKheQgA">TypeScript playground</a> 中查看 <code>React.ReactNode</code> 和 <code>React.ReactElement</code> 的示例，并使用类型检查器进行验证。</section><section class="level3"aria-labelledby="样式属性-typing-style-props"><h3 id="样式属性-typing-style-props">样式属性 {/<em>typing-style-props</em>/}</h3><p>当在 React 中使用内联样式时，你可以使用 <code>React.CSSProperties</code> 来描述传递给 <code>style</code> 属性的对象。这个类型是所有可能的 CSS 属性的并集，它能确保你传递给 <code>style</code> 属性的是有效的 CSS 属性，并且你能在编辑器中获得样式编码提示。<pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">MyComponentProps</span></span> <span class="token punctuation">{</span>
  style<span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">CSSProperties</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section></section><section class="level2"aria-labelledby="更多学习资源-further-learning"><h2 id="更多学习资源-further-learning">更多学习资源 {/<em>further-learning</em>/}</h2><p>本指南已经介绍了如何在 React 中使用 TypeScript 的基础知识，但还有更多内容等待学习。官网中的单个 API 页面或许包含了如何与 TypeScript 一起使用它们的更深入的说明。 文档中的各个 API 页面可能会包含更深入的说明，介绍如何在 TypeScript 中使用它们。<p>我们推荐以下资源：<ul><li><p><a href="https://www.typescriptlang.org/docs/handbook/">TypeScript 官方文档</a>，涵盖了大多数关键的语言特性。<li><p><a href="https://devblogs.microsoft.com/typescript/">The TypeScript 发布笔记</a> 深入介绍了每一个新特性。<li><p><a href="https://react-typescript-cheatsheet.netlify.app/">React TypeScript Cheatsheet</a> 是一个社区维护的速查表，用于使用 TypeScript 与 React，涵盖了许多有用的边缘情况，并提供了比本文更广泛的内容。<li><p><a href="https://discord.com/invite/typescript">TypeScript Community Discord</a> 是一个提问和获取 TypeScript 和 React 问题帮助的好地方。 <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></ul></section></section>