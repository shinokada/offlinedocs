<!doctype html><html lang="zh-hans"><meta charset="utf-8"><title>在网站中添加 React</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="在网站中添加-react"><h1 id="在网站中添加-react">在网站中添加 React</h1><p>translators:<ul><li>Atrist<li>yyyang1996<li>QC-L</ul><intro><p>无需使用 React 重构你的站点。只需花一分钟，将 React 添加到 HTML 中，且无需安装，即可立即开始编写交互式组件。</p></intro><youwilllearn><ul><li>如何 1 分钟内将 React 添加到 HTML 中<li>JSX 语法是什么及其用法<li>如何设置可用于生产环境的 JSX 预处理器</ul></youwilllearn><section class="level2"aria-labelledby="1-分钟拥有-react-add-react-in-one-minute"><h2 id="1-分钟拥有-react-add-react-in-one-minute">1 分钟拥有 React {/<em>add-react-in-one-minute</em>/}</h2><p>React 从一开始就是为渐进式开发而生。大多数网站并没有（也不需要）完全使用 React 进行构建。本小节中，我们将向你展示如何在现有 HTML 页面中添加交互式组件的方法。<p>你可以在你自己的网站上尝试，或者创建一个 <a href="https://gist.github.com/gaearon/edf814aeee85062bc9b9830aeaf27b88/archive/3b31c3cdcea7dfcfd38a81905a0052dd8e5f71ec.zip">空的 HTML 文件</a> 来进行练习。只需将电脑连接到网络并安装一款文本编辑器即可，如 Notepad 或者 VSCode。（如需语法高亮，可以通过 <a href="/learn/editor-setup/">如何配置你的编辑器</a> 章节来实现！)<section class="level3"aria-labelledby="步骤-1添加一个根标签-step-1-add-a-root-html-tag"><h3 id="步骤-1添加一个根标签-step-1-add-a-root-html-tag">步骤 1：添加一个根标签 {/<em>step-1-add-a-root-html-tag</em>/}</h3><p>首先，打开你需要编辑的 HTML 页面。在你想用 React 展示内容的地方添加一个空的 <code>&#x3C;div></code> 标签。并给这个 <code>&#x3C;div></code> 标签一个唯一的 <code>id</code> 属性值。例如：<pre class="language-html"><code class="language-html"><span class="token comment">&#x3C;!-- ... 其它 HTML ... --></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>like-button-root<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>

<span class="token comment">&#x3C;!-- ... 其它 HTML ... --></span></code></pre><p>它被称为"根"，因为这是 React 树开始的地方。你可以在 <code>&#x3C;body></code> 标签中的任何位置放置一个类似的根 HTML 标签。让它为内容留白。因为 React 会用你编写的 React 组件来替换它的内容。<p>你可以根据需要，在一个页面上设置多个根 HTML 标签。</section><section class="level3"aria-labelledby="步骤-2添加-script-标签-step-2-add-the-script-tags"><h3 id="步骤-2添加-script-标签-step-2-add-the-script-tags">步骤 2：添加 script 标签 {/<em>step-2-add-the-script-tags</em>/}</h3><p>在 HTML 页面的 <code>&#x3C;/body></code> 结束标签之前，添加三个 <code>&#x3C;script></code> 标签用于加载以下文件：<ul><li><a href="https://unpkg.com/react@18/umd/react.development.js"><code>react.development.js</code></a> 可以让你定义 React 组件。<li><a href="https://unpkg.com/react-dom@18/umd/react-dom.development.js"><code>react-dom.development.js</code></a> 让 React 可以将 HTML 元素渲染到 <a href="https://developer.mozilla.org/docs/Web/API/Document_Object_Model">DOM</a> 中。<li><strong><code>like-button.js</code></strong> 是你在步骤 3 中编写组件的地方！</ul><p>你的 HTML 文件的结尾处，应该如下所示：<pre class="language-html"><code class="language-html">    <span class="token comment">&#x3C;!-- end of the page --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/react@18/umd/react.development.js<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/react-dom@18/umd/react-dom.development.js<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>like-button.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>html</span><span class="token punctuation">></span></span></code></pre><pitfall><p>部署时，你需要将 “development.js” 替换为 “production.min.js”！React 的 development 版本中内置了很多有用的错误信息，但同时也会降低你网站的访问速度。</p></pitfall></section><section class="level3"aria-labelledby="步骤-3创建一个-react-组件-step-3-create-a-react-component"><h3 id="步骤-3创建一个-react-组件-step-3-create-a-react-component">步骤 3：创建一个 React 组件 {/<em>step-3-create-a-react-component</em>/}</h3><p>在 HTML 页面文件的同级目录下创建一个名为 <strong><code>like_button.js</code></strong> 的文件，并将如下代码片段添加到该文件中。这段代码定义了一个名为 LikeButton 的 React 组件。（在 <a href="/learn">快速入门</a> 中，了解更多关于编写组件的信息。)<pre class="language-js"><code class="language-js"><span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">LikeButton</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>liked<span class="token punctuation">,</span> setLiked<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>liked<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token string">'You liked this!'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span>
    <span class="token string">'button'</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setLiked</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'Like'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="步骤-4把你的-react-组件添加到页面中-step-4-add-your-react-component-to-the-page"><h3 id="步骤-4把你的-react-组件添加到页面中-step-4-add-your-react-component-to-the-page">步骤 4：把你的 React 组件添加到页面中 {/<em>step-4-add-your-react-component-to-the-page</em>/}</h3><p>最后，在 <strong><code>like_button.js</code></strong> 底部添加以下三行代码。这几行代码会找到我们在步骤 1 中添加到 HTML 里的 <code>&#x3C;div></code>，接着创建了一个React 的根，最后在其内部展示了我们的 React 组件 —— "Like" 按钮：<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> rootNode <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'like-button-root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token maybe-class-name">ReactDOM</span><span class="token punctuation">.</span><span class="token method function property-access">createRoot</span><span class="token punctuation">(</span>rootNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token maybe-class-name">LikeButton</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>恭喜！你刚刚已成功将第一个 React 组件添加到你的网站当中</strong>！<ul><li><a href="https://gist.github.com/gaearon/0b535239e7f39c524f9c7dc77c44f09e">查看完整的示例源码</a><li><a href="https://gist.github.com/gaearon/0b535239e7f39c524f9c7dc77c44f09e/archive/651935b26a48ac68b2de032d874526f2d0896848.zip">下载完整示例（2KB 压缩包）</a></ul><section class="level4"aria-labelledby="复用你的组件-you-can-reuse-components"><h4 id="复用你的组件-you-can-reuse-components">复用你的组件 {/<em>you-can-reuse-components</em>/}</h4><p>你可能需要在同一 HTML 页面中的多个位置展示 React 组件。如果页面中由 React 驱动的部分相互独立，那复用就显得非常必要。你可以通过在你的 HTML 中放置多个根标签，然后用 <code>ReactDOM.createRoot()</code> 在每个根标签中渲染 React 组件来实现这一点。例如：<ol><li>在 <strong><code>index.html</code></strong> 中，添加另外一个的容器元素 <code>&#x3C;div id="another-root">&#x3C;/div></code>。<li>在 <strong><code>like-button.js</code></strong> 文件最后，再添加以下三行代码：</ol><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> anotherRootNode <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'another-root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> anotherRoot <span class="token operator">=</span> <span class="token maybe-class-name">ReactDOM</span><span class="token punctuation">.</span><span class="token method function property-access">createRoot</span><span class="token punctuation">(</span>anotherRootNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
anotherRoot<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token maybe-class-name">LikeButton</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>如果你需要在很多地方渲染同一个组件，你可以为每个根的指定一个 <code>class</code>，而不是 <code>id</code>，然后再把它们找出来。这是 <a href="https://gist.github.com/gaearon/779b12e05ffd5f51ffadd50b7ded5bc8">一个显示三个 "Like" 按钮，并向每个按钮内传递了数据的示例</a>。</section></section><section class="level3"aria-labelledby="步骤-5为生产环境压缩-javascript-代码-step-5-minify-javascript-for-production"><h3 id="步骤-5为生产环境压缩-javascript-代码-step-5-minify-javascript-for-production">步骤 5：为生产环境压缩 JavaScript 代码 {/<em>step-5-minify-javascript-for-production</em>/}</h3><p>未经压缩的 JavaScript 可能会极大降低用户的访问速度。在将你的网站部署到生产环境之前，请务必对你的脚本文件进行压缩。<ul><li><strong>如果你不知道如何进行压缩</strong>，<a href="https://gist.github.com/gaearon/ee0201910608f15df3f8cd66aa83f98e">请参考该配置教程</a>。<li>如果你已完成了 <strong>对应用代码的压缩</strong>，并且确保已部署的 HTML 加载的是以 <code>production.min.js</code> 结尾的 React 版本，那么你的网站就已完成生产部署（production-ready）：</ul><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/react@18/umd/react.production.min.js<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/react-dom@18/umd/react-dom.production.min.js<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span></code></pre></section></section><section class="level2"aria-labelledby="尝试使用-jsx-编写-react-try-react-with-jsx"><h2 id="尝试使用-jsx-编写-react-try-react-with-jsx">尝试使用 JSX 编写 React {/<em>try-react-with-jsx</em>/}</h2><p>在上面的示例中，依靠的是浏览器原生就支持的特性。这也就是为什么我们在 <strong><code>like_button.js</code></strong> 中要调用 JavaScript 的函数，用以告知 React 要显示的内容：<pre class="language-js"><code class="language-js"><span class="token keyword control-flow">return</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setLiked</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'Like'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>然而，React 还提供了一种使用 <a href="/learn/writing-markup-with-jsx">JSX</a> 编写界面的方式，一种类似 HTML 的 JavaScript 语法：<pre class="language-jsx"><code class="language-jsx"><span class="token keyword control-flow">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setLiked</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">Like</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span><span class="token punctuation">;</span></code></pre><p>这两段代码是等价的。JSX 是一种在 JavaScript 中描述标签的语法。多数人觉得这样编写 UI 代码更方便 —— 无论是使用 React 还是其它库。<blockquote><p>你可以通过 <a href="https://babeljs.io/en/repl#?babili=false&#x26;browsers=&#x26;build=&#x26;builtIns=false&#x26;spec=false&#x26;loose=false&#x26;code_lz=DwIwrgLhD2B2AEcDCAbAlgYwNYF4DeAFAJTw4B88EAFmgM4B0tAphAMoQCGETBe86WJgBMAXJQBOYJvAC-RGWQBQ8FfAAyaQYuAB6cFDhkgA&#x26;debug=false&#x26;forceAllTransforms=false&#x26;shippedProposals=false&#x26;circleciRepo=&#x26;evaluate=false&#x26;fileSize=false&#x26;timeTravel=false&#x26;sourceType=module&#x26;lineWrap=true&#x26;presets=es2015%2Creact%2Cstage-2&#x26;prettier=false&#x26;targets=&#x26;version=7.17">在线转换器</a> 试用 JSX。</blockquote><section class="level3"aria-labelledby="试用-jsx-try-jsx"><h3 id="试用-jsx-try-jsx">试用 JSX {/<em>try-jsx</em>/}</h3><p>试用 JSX 的最快方法是将 Babel 编译器作为 <code>&#x3C;script></code> 标签引入页面中。把它放置在 <strong><code>like-button.js</code></strong> 之前，然后在 <strong><code>like-button.js</code></strong> 的 <code>script</code> 标签上添加 <code>type="text/babel"</code> 属性：<pre class="language-html"><code class="language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/react@18/umd/react.production.min.js<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/react-dom@18/umd/react-dom.production.min.js<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/@babel/standalone/babel.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>like-button.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/babel<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>body</span><span class="token punctuation">></span></span></code></pre><p>现在你可以编辑 <strong><code>like-button.js</code></strong>，并将<pre class="language-js"><code class="language-js"><span class="token keyword control-flow">return</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span>
  <span class="token string">'button'</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setLiked</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'Like'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>替换为等效的 JSX 代码：<pre class="language-jsx"><code class="language-jsx"><span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setLiked</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
    Like
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>一开始，你可能会觉得将 JS 和标签混合在一起会有些奇怪，但后面你会慢慢爱上它的！欲了解更多，请参阅 <a href="/learn/writing-markup-with-jsx">用 JSX 编写标签</a> 的介绍。这是 <a href="https://raw.githubusercontent.com/reactjs/reactjs.org/main/static/html/single-file-example.html">一个使用了 JSX 的 HTML 文件示例</a>，你可以下载并尝试使用。</p><pitfall><p>引入 Babel 的 <code>&#x3C;script></code> 编译器对于学习和创建简单的示例是很便捷的。但是，<strong>它会使网站变慢，并不适用于生产环境</strong>。当你准备好更进一步时，应该删除 Babel 的 <code>&#x3C;script></code> 标签，并移除在这一步中添加的 <code>type="text/babel"</code> 属性。作为替代方案，在下一小节中，我们将设置一个 JSX 的预处理器，将所有的 <code>&#x3C;script></code> 标签从 JSX 转为 JS。</p></pitfall></section><section class="level3"aria-labelledby="将-jsx-添加到项目-add-jsx-to-a-project"><h3 id="将-jsx-添加到项目-add-jsx-to-a-project">将 JSX 添加到项目 {/<em>add-jsx-to-a-project</em>/}</h3><p>将 JSX 添加到项目中并不需要诸如 <a href="/learn/start-a-new-react-project#custom-toolchains">打包工具</a> 或开发服务器那样复杂的工具。本质上，添加 JSX 就像添加 CSS 预处理器一样。<p>在终端上进入你的项目文件夹，然后执行如下两个命令：(<strong>确保你的计算机安装了 <a href="https://nodejs.org/">Node.js</a>！</strong>)：<ol><li><code>npm init -y</code> (如果失败，请参阅, <a href="https://gist.github.com/gaearon/246f6380610e262f8a648e3e51cad40d">修复方案</a>)<li><code>npm install @babel/cli@7 babel-preset-react-app@10</code></ol><p>此处使用 npm 只是用于安装 JSX 预处理器，之后便不再需要它。React 和应用程序代码都可以继续使用 <code>&#x3C;script></code> 标签而不做任何更改。<p>恭喜！你为你的项目成功添加了 <strong>生产环境（production-ready）的 JSX 配置</strong>。</section><section class="level3"aria-labelledby="运行-jsx-预处理器-run-the-jsx-preprocessor"><h3 id="运行-jsx-预处理器-run-the-jsx-preprocessor">运行 JSX 预处理器 {/<em>run-the-jsx-preprocessor</em>/}</h3><p>你可以对 JSX 文件进行预处理。当你编辑保存带有 JSX 的源文件时，这个转换过程将自动重新执行，并把 JSX 文件转换为一个全新的，浏览器可以识别的普通 JavaScript 文件，以下是设置方式：<ol><li>创建一个名为 <strong><code>src</code></strong> 的文件夹<li>在终端执行这个命令：<code>npx babel --watch src --out-dir . --presets babel-preset-react-app/prod</code>（无需等待运行结果 —— 这个命令会自动启动一个观察器，观察对 <code>src</code> 内 JSX 的编辑。）<li>将已经 JSX 化的 <strong><code>like-button.js</code></strong> (<a href="https://gist.githubusercontent.com/gaearon/be5ae0fbf563d6c5fe5c1563907b13d2/raw/4c0d0b8c7f4fcb341720424c28c72059f8174c62/like-button.js">它看起来应该像这样</a>)！文件移动到新的 <strong><code>src</code></strong> 目录下。</ol><p>监听器会创建一个预处理过的 <strong><code>like_button.js</code></strong> 文件，它包含了适用于浏览器的普通 JavaScript 代码.</p><pitfall><p>如果你看到一个错误消息显示为：“You have mistakenly installed the <code>babel</code> package”，原因可能是未按照 <a href="#add-jsx-to-a-project">上一步骤</a> 进行操作。在同一个文件夹中执行上一步骤中的命令，然后重试。</p></pitfall><p>我们刚才使用的工具叫 Babel，你可以从 <a href="https://babeljs.io/docs/en/babel-cli/">它的文档</a> 中了解更多。除了 JSX 以外，它还可以让你使用最新的 JavaScript 语法特性，而无需担心不适配旧的浏览器。<p>如果你认为你已经习惯了构建工具，并希望它们能为你做更多事，<a href="/learn/start-a-new-react-project">我们在这描述了一些最流行和易上手的工具链</a>。</p><deepdive><section class="level4"aria-labelledby="react-without-jsx-react-without-jsx"><h4 id="react-without-jsx-react-without-jsx">React without JSX {/<em>react-without-jsx</em>/}</h4><p>最初引入 JSX 是为了想让 React 编写组件的感觉就像编写 HTML 一样简单，但总有例外，你不想或者不能使用 JSX，此时可以参考其他两种解决方案：<ul><li>使用像 <a href="https://github.com/developit/htm">htm</a> 这样的 JSX 替代品，它使用 JavaScript 的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Template_literals">模板字符串</a> 来取代编译器。<li>使用 <a href="/reference/react/createElement"><code>React.createElement()</code></a> ，它具有下面解释的特殊结构</ul><p>用 JSX 编写的代码：<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Hello</span></span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">Hello </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span><span class="token property-access">toWhat</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token maybe-class-name">ReactDOM</span><span class="token punctuation">.</span><span class="token method function property-access">createRoot</span><span class="token punctuation">(</span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">Hello</span></span> <span class="token attr-name">toWhat</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>World<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>如果使用 <code>React.createElement()</code>，将会是这样：<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Hello</span></span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token string">'Hello '</span><span class="token punctuation">,</span> props<span class="token punctuation">.</span><span class="token property-access">toWhat</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token maybe-class-name">ReactDOM</span><span class="token punctuation">.</span><span class="token method function property-access">createRoot</span><span class="token punctuation">(</span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span>
  <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">toWhat</span><span class="token operator">:</span> <span class="token string">'World'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><code>React.createElement(component, props, ...children)</code>，它接受三个参数。<p>以下是它的工作原理：<ol><li>一个<strong>组件</strong>，它既可以是一个表示 HTML 标签名的字符串，也可以是一个函数组件。<li>一个对象，包含 <a href="/learn/passing-props-to-a-component">你想传递给组件的 <strong>props</strong></a>。<li>其余的参数代表该组件可能拥有多个子元素，比如文本字符串或其他元素。</ol><p>如果你不想每次都键入 <code>React.createElement</code>，通常的做法是使用简写：<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> e <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access">createElement</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token maybe-class-name">ReactDOM</span><span class="token punctuation">.</span><span class="token method function property-access">createRoot</span><span class="token punctuation">(</span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token string">'Hello World'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>然后，如果你喜欢这种风格，如此编写也可以和 JSX 一样方便。</p><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></deepdive></section></section></section>