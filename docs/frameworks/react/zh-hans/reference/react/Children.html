<!doctype html><html lang="zh-hans"><meta charset="utf-8"><title>Children</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="children"><h1 id="children">Children</h1><pitfall><p>使用 <code>Children</code> 的场景并不常见，使用它可能会削弱代码的健壮性。<a href="#alternatives">查看常见的替代方案</a>。</p></pitfall><intro><p><code>Children</code> 允许你处理和转化作为 <a href="/learn/passing-props-to-a-component#passing-jsx-as-children"><code>children</code></a> 的 JSX。<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> mappedChildren <span class="token operator">=</span> <span class="token maybe-class-name">Children</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> <span class="token parameter">child</span> <span class="token arrow operator">=></span>
  <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"Row"</span><span class="token operator">></span>
    <span class="token punctuation">{</span>child<span class="token punctuation">}</span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></intro><inlinetoc><section class="level2"aria-labelledby="参考-reference"><h2 id="参考-reference">参考 {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="childrencountchildren-children-count"><h3 id="childrencountchildren-children-count"><code>Children.count(children)</code> {/<em>children-count</em>/}</h3><p>调用 <code>Children.count(children)</code> 可以获取 <code>children</code> 中的节点数量。<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Children</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RowList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span>行数<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token maybe-class-name">Children</span><span class="token punctuation">.</span><span class="token method function property-access">count</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token spread operator">...</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p><a href="#counting-children">请参阅下面的更多示例</a>。<section class="level4"aria-labelledby="参数-children-count-parameters"><h4 id="参数-children-count-parameters">参数 {/<em>children-count-parameters</em>/}</h4><ul><li><code>children</code>：组件接收到的 <a href="/learn/passing-props-to-a-component#passing-jsx-as-children"><code>children</code> 参数</a>。</ul></section><section class="level4"aria-labelledby="返回值-children-count-returns"><h4 id="返回值-children-count-returns">返回值 {/<em>children-count-returns</em>/}</h4><p><code>children</code> 中的节点数量。</section><section class="level4"aria-labelledby="注意事项-children-count-caveats"><h4 id="注意事项-children-count-caveats">注意事项 {/<em>children-count-caveats</em>/}</h4><ul><li>空节点（<code>null</code>，<code>undefined</code> 以及布尔值），字符串，数字和 <a href="/reference/react/createElement">React 元素</a> 都会被统计为一个节点。<strong>在遍历统计的过程中，React 元素不会被渲染，所以其子节点不会被统计</strong>。 <a href="/reference/react/Fragment">Fragment</a> 也不会被统计。对于数组，它本身也不会被统计，但其中的元素遵循上述规则。</ul></section></section><section class="level3"aria-labelledby="childrenforeachchildren-fn-thisarg-children-foreach"><h3 id="childrenforeachchildren-fn-thisarg-children-foreach"><code>Children.forEach(children, fn, thisArg?)</code> {/<em>children-foreach</em>/}</h3><p>调用 <code>Children.forEach(children, fn, thisArg?)</code> 可以为每个 <code>children</code> 中的每个子节点执行一段代码。<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Children</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">SeparatorList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token maybe-class-name">Children</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">child<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    result<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>
    result<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span>hr key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span></code></pre><p><a href="#running-some-code-for-each-child">请参阅下面的更多示例</a>。<section class="level4"aria-labelledby="参数-children-foreach-parameters"><h4 id="参数-children-foreach-parameters">参数 {/<em>children-foreach-parameters</em>/}</h4><ul><li><code>children</code>：组件接收到的 <a href="/learn/passing-props-to-a-component#passing-jsx-as-children"><code>children</code> 属性</a>。<li><code>fn</code>：和 <a href="(https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)">数组的 <code>forEach</code> 方法</a> 中的回调类似，是你希望为每个子节点执行的函数。当这个函数执行时，对应的子节点和其下标将分别作为函数的第一、第二个参数，下标从 <code>0</code> 开始自增。<li><strong>可选</strong> <code>thisArg</code>：为 <code>fn</code> 函数绑定 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this"><code>this</code></a>。默认值为 <code>undefined</code>。</ul></section><section class="level4"aria-labelledby="返回值-children-foreach-returns"><h4 id="返回值-children-foreach-returns">返回值 {/<em>children-foreach-returns</em>/}</h4><p><code>Children.forEach</code> 返回值是 <code>undefined</code>。</section><section class="level4"aria-labelledby="注意事项-children-foreach-caveats"><h4 id="注意事项-children-foreach-caveats">注意事项 {/<em>children-foreach-caveats</em>/}</h4><ul><li>空节点（<code>null</code>，<code>undefined</code> 以及布尔值），字符串，数字和 <a href="/reference/react/createElement">React 元素</a> 都会被统计为单个节点。<strong>在遍历统计的过程中，React 元素不会被渲染，所以其子节点不会被统计</strong>。<a href="/reference/react/Fragment">Fragment</a> 也不会被统计。对于数组，它本身也不会被统计，但其中的元素遵循上述规则。</ul></section></section><section class="level3"aria-labelledby="childrenmapchildren-fn-thisarg-children-map"><h3 id="childrenmapchildren-fn-thisarg-children-map"><code>Children.map(children, fn, thisArg?)</code> {/<em>children-map</em>/}</h3><p>调用 <code>Children.map(children, fn, thisArg?)</code> 可以对 <code>children</code> 中的每个子节点进行映射或转换。<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Children</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RowList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"RowList"</span><span class="token operator">></span>
      <span class="token punctuation">{</span><span class="token maybe-class-name">Children</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> <span class="token parameter">child</span> <span class="token arrow operator">=></span>
        <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"Row"</span><span class="token operator">></span>
          <span class="token punctuation">{</span>child<span class="token punctuation">}</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p><a href="#transforming-children">请参阅下面的更多示例</a>。<section class="level4"aria-labelledby="参数-children-map-parameters"><h4 id="参数-children-map-parameters">参数 {/<em>children-map-parameters</em>/}</h4><ul><li><code>children</code>：组件接收到的 <a href="/learn/passing-props-to-a-component#passing-jsx-as-children"><code>children</code> 属性</a>。<li><code>fn</code>：和 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map">数组的 <code>map</code> 方法</a> 中的回调类似，是一个映射函数。当这个函数执行时，对应的子节点和其下标将分别作为函数的第一、第二个参数，下标从 <code>0</code> 开始自增。你需要使这个映射函数返回一个 React 节点，它可以是一个空节点（<code>null</code>，<code>undefined</code>）。<li><strong>可选</strong> <code>thisArg</code>：为 <code>fn</code> 函数绑定 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this"><code>this</code></a>。默认值为 <code>undefined</code>。</ul></section><section class="level4"aria-labelledby="返回值-children-map-returns"><h4 id="返回值-children-map-returns">返回值 {/<em>children-map-returns</em>/}</h4><p>如果 <code>children</code> 是 <code>null</code> 或者 <code>undefined</code>，那么就返回这个值。<p>否则就返回一个由 <code>fn</code> 函数返回节点组成的一维数组。这个数组将包含除 <code>null</code> 和 <code>undefined</code> 以外的所有节点。</section><section class="level4"aria-labelledby="注意事项-children-map-caveats"><h4 id="注意事项-children-map-caveats">注意事项 {/<em>children-map-caveats</em>/}</h4><ul><li><p>空节点（<code>null</code>，<code>undefined</code> 以及布尔值），字符串，数字和 <a href="/reference/react/createElement">React 元素</a> 都会被统计为单个节点。<strong>在遍历统计的过程中，React 元素不会被渲染，所以其子节点不会被统计</strong>。<a href="/reference/react/Fragment">Fragment</a> 也不会被统计。对于数组，它本身也不会被统计，但其中的元素遵循上述规则。<li><p>如果你在 <code>fn</code> 中返回了一个具有 key 的元素或者元素数组，<strong>各个元素的 key 将自动与其在 <code>children</code> 中对应的原始项的 key 绑定</strong>。当你在 <code>fn</code> 中返回了一个包含了多个元素的数组时，其中的每个元素的 key 都需要保证在这个数组中是独一无二的。</ul></section></section><section class="level3"aria-labelledby="childrenonlychildren-children-only"><h3 id="childrenonlychildren-children-only"><code>Children.only(children)</code> {/<em>children-only</em>/}</h3><p>调用 <code>Children.only(children)</code> 能够断言 <code>children</code> 代表一个 React 元素。<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Box</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token maybe-class-name">Children</span><span class="token punctuation">.</span><span class="token method function property-access">only</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span></code></pre><section class="level4"aria-labelledby="参数-children-only-parameters"><h4 id="参数-children-only-parameters">参数 {/<em>children-only-parameters</em>/}</h4><ul><li><code>children</code>：组件接收到的 <a href="/learn/passing-props-to-a-component#passing-jsx-as-children"><code>children</code> 属性</a>。</ul></section><section class="level4"aria-labelledby="返回值-children-only-returns"><h4 id="返回值-children-only-returns">返回值 {/<em>children-only-returns</em>/}</h4><p>如果 <code>children</code> <a href="/reference/react/isValidElement">是一个合法的元素</a>，那么就会返回这个元素。<p>否则会抛出一个异常。</section><section class="level4"aria-labelledby="注意事项-children-only-caveats"><h4 id="注意事项-children-only-caveats">注意事项 {/<em>children-only-caveats</em>/}</h4><ul><li>如果传入一个数组（比如 <code>Children.map</code> 的返回值）作为 <code>children</code>，那么这个方法会抛出异常。也就是说，这个方法强制要求 <code>children</code> 是一个 React 元素，而不是一个元素数组。</ul></section></section><section class="level3"aria-labelledby="childrentoarraychildren-children-toarray"><h3 id="childrentoarraychildren-children-toarray"><code>Children.toArray(children)</code> {/<em>children-toarray</em>/}</h3><p>调用 <code>Children.toArray(children)</code> 能够通过 <code>children</code> 创建一个数组。<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Children</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ReversedList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token maybe-class-name">Children</span><span class="token punctuation">.</span><span class="token method function property-access">toArray</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
  result<span class="token punctuation">.</span><span class="token method function property-access">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span></code></pre><section class="level4"aria-labelledby="参数-children-toarray-parameters"><h4 id="参数-children-toarray-parameters">参数 {/<em>children-toarray-parameters</em>/}</h4><ul><li><code>children</code>：组件接收到的 <a href="/learn/passing-props-to-a-component#passing-jsx-as-children"><code>children</code> 属性</a>。</ul></section><section class="level4"aria-labelledby="返回值-children-toarray-returns"><h4 id="返回值-children-toarray-returns">返回值 {/<em>children-toarray-returns</em>/}</h4><p>返回一个由 <code>children</code> 中的元素构成的一维数组。</section><section class="level4"aria-labelledby="注意事项-children-toarray-caveats"><h4 id="注意事项-children-toarray-caveats">注意事项 {/<em>children-toarray-caveats</em>/}</h4><ul><li>空节点（<code>null</code>，<code>undefined</code> 以及 布尔值）将在返回的数组中被忽略掉。<strong>返回的元素的 key 将根据原始元素的 key 和其嵌套层级与位置进行计算得到</strong>。这保证了扁平化数组时不会更改原本的行为。</ul></section></section></section><section class="level2"aria-labelledby="用法-usage"><h2 id="用法-usage">用法 {/<em>usage</em>/}</h2><section class="level3"aria-labelledby="转化-children-transforming-children"><h3 id="转化-children-transforming-children">转化 children {/<em>transforming-children</em>/}</h3><p>如果想修改组件 <a href="/learn/passing-props-to-a-component#passing-jsx-as-children">接收到的 <code>children</code> 属性</a>，那么可以使用 <code>Children.map</code>：<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Children</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RowList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"RowList"</span><span class="token operator">></span>
      <span class="token punctuation">{</span><span class="token maybe-class-name">Children</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> <span class="token parameter">child</span> <span class="token arrow operator">=></span>
        <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"Row"</span><span class="token operator">></span>
          <span class="token punctuation">{</span>child<span class="token punctuation">}</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>在上述例子中，<code>RowList</code> 用 <code>&#x3C;div className="Row"></code> 包裹了接收到的每一个子元素。举个例子，假设父组件将三个 <code>&#x3C;p></code> 作为 <code>children</code> 属性传递给 <code>RowList</code>：<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">RowList</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第一项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第二项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第三项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">RowList</span><span class="token operator">></span></code></pre><p>然后，使用实现上面的 <code>RowList</code>，最终的渲染结果将是像下面这样：<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"RowList"</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"Row"</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第一项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"Row"</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第二项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"Row"</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第三项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span></code></pre><p><code>Children.map</code> 和 <a href="/learn/rendering-lists">用来转化数组的 <code>map()</code> 类似</a>。区别在于 <code>children</code> 被视为 <strong>不透明的</strong>。这意味着即使有时它真的是一个数组，你也不应该假设它是一个数组或者其他数据类型。这就是为什么如果你要转换<code>children</code>, 应该使用 <code>Children.map</code>。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">RowList</span></span> <span class="token keyword module">from</span> <span class="token string">'./RowList.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">RowList</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第一项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第二项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第三项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">RowList</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Children</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RowList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"RowList"</span><span class="token operator">></span>
      <span class="token punctuation">{</span><span class="token maybe-class-name">Children</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> <span class="token parameter">child</span> <span class="token arrow operator">=></span>
        <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"Row"</span><span class="token operator">></span>
          <span class="token punctuation">{</span>child<span class="token punctuation">}</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector"><span class="token class">.RowList</span></span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token unit">px</span> solid <span class="token color">grey</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.Row</span></span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token unit">px</span> dashed <span class="token color">black</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><deepdive><section class="level4"aria-labelledby="为什么-children-属性并不总是一个数组-why-is-the-children-prop-not-always-an-array"><h4 id="为什么-children-属性并不总是一个数组-why-is-the-children-prop-not-always-an-array">为什么 children 属性并不总是一个数组？ {/<em>why-is-the-children-prop-not-always-an-array</em>/}</h4><p>在 React 中，<code>children</code> 属性是被视为 <strong>不透明的</strong> 数据结构。这意味着你不应该依赖它的结构。如果要转换，过滤，或者统计子节点，你应该使用 <code>Children</code> 方法。<p>实际操作过程中，<code>children</code> 在底层常常被表示为数组。但是如果这里只有一个子节点，那么 React 将不会创建数组，因为这将导致不必要的内存开销。只要你使用 <code>Children</code> 方法而不是直接操作 <code>children</code> 底层结构，即使 React 改变了 <code>children</code> 数据结构的实际实现方式，你的代码也不会被中断。<p>当 <code>children</code> 是一个数组时，<code>Children.map</code> 会有许多有用的特性。比如，<code>Children.map</code> 将被返回元素上的 <a href="/learn/rendering-lists#keeping-list-items-in-order-with-key">key</a> 和 你传递给它的 <code>children</code> 上的 key 绑定。这保证了原本的 JSX 子元素不会“丢失” key，即使它们上面的例子中那样被包裹。</section></deepdive><pitfall><p><code>children</code> 的数据结构中 <strong>不会包括你传递的 JSX 组件的渲染输出结果</strong>。在下面的例子中，<code>RowList</code> 接收到的 <code>children</code> 仅包含两个子项而不是三个：<ol><li><code>&#x3C;p>这是第一项。&#x3C;/p></code><li><code>&#x3C;MoreRows /></code></ol><p>这就是为什么在这个例子中仅产生了两个行级元素容器。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">RowList</span></span> <span class="token keyword module">from</span> <span class="token string">'./RowList.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">RowList</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第一项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MoreRows</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">RowList</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MoreRows</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第二项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第三项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Children</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RowList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"RowList"</span><span class="token operator">></span>
      <span class="token punctuation">{</span><span class="token maybe-class-name">Children</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> <span class="token parameter">child</span> <span class="token arrow operator">=></span>
        <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"Row"</span><span class="token operator">></span>
          <span class="token punctuation">{</span>child<span class="token punctuation">}</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector"><span class="token class">.RowList</span></span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token unit">px</span> solid <span class="token color">grey</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.Row</span></span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token unit">px</span> dashed <span class="token color">black</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>当操作 <code>children</code> 时，我们没办法获取到像 <code>&#x3C;MoreRows /></code> 这样的内部组件的渲染输出结果，这就是为什么 <a href="#alternatives">我们更推荐使用替代方案之一</a>。</p></pitfall></section><section class="level3"aria-labelledby="为每一个子元素执行一段代码-running-some-code-for-each-child"><h3 id="为每一个子元素执行一段代码-running-some-code-for-each-child">为每一个子元素执行一段代码 {/<em>running-some-code-for-each-child</em>/}</h3><p>调用 <code>Children.forEach</code> 能够迭代 <code>children</code> 数据结构中的每一个子节点。它并不会返回任何值，这和 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach">数组的 <code>forEach</code> 方法</a> 类似。你可以使用它来运行自定义逻辑，例如构造自己的数组。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">SeparatorList</span></span> <span class="token keyword module">from</span> <span class="token string">'./SeparatorList.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">SeparatorList</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第一项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第二项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第三项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">SeparatorList</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Children</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">SeparatorList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token maybe-class-name">Children</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">child<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    result<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>
    result<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span>hr key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  result<span class="token punctuation">.</span><span class="token method function property-access">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Remove the last separator</span>
  <span class="token keyword control-flow">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><pitfall><p>就像之前提到过的一样，当操作 <code>children</code> 时，我们没办法获取到内部组件的渲染输出结果。这就是为什么 <a href="#alternatives">我们更推荐使用替代方案之一</a>。</p></pitfall></section><section class="level3"aria-labelledby="统计子节点-counting-children"><h3 id="统计子节点-counting-children">统计子节点 {/<em>counting-children</em>/}</h3><p>调用 <code>Children.count(children)</code> 能够计算子节点的数量。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">RowList</span></span> <span class="token keyword module">from</span> <span class="token string">'./RowList.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">RowList</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第一项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第二项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第三项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">RowList</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Children</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RowList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"RowList"</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1 className<span class="token operator">=</span><span class="token string">"RowListHeader"</span><span class="token operator">></span>
        <span class="token maybe-class-name">Total</span> rows<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token maybe-class-name">Children</span><span class="token punctuation">.</span><span class="token method function property-access">count</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token punctuation">{</span><span class="token maybe-class-name">Children</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> <span class="token parameter">child</span> <span class="token arrow operator">=></span>
        <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"Row"</span><span class="token operator">></span>
          <span class="token punctuation">{</span>child<span class="token punctuation">}</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector"><span class="token class">.RowList</span></span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token unit">px</span> solid <span class="token color">grey</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.RowListHeader</span></span> <span class="token punctuation">{</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">25</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.Row</span></span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token unit">px</span> dashed <span class="token color">black</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><pitfall><p>就像之前提到过的一样，当操作 <code>children</code>时，我们没办法获取到内部组件的渲染输出结果。这就是为什么 <a href="#alternatives">我们更推荐使用替代方案之一</a>。</p></pitfall></section><section class="level3"aria-labelledby="将-children-转化为数组-converting-children-to-an-array"><h3 id="将-children-转化为数组-converting-children-to-an-array">将 children 转化为数组 {/<em>converting-children-to-an-array</em>/}</h3><p>通过调用 <code>Children.toArray(children)</code> 将 <code>children</code> 变为一个常规的 JavaScript 数组。这使得你能够使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/filter"><code>filter</code></a>， <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort"><code>sort</code></a>， 或者 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reverse"><code>reverse</code></a> 等数组内置方法来操作这个数组。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">ReversedList</span></span> <span class="token keyword module">from</span> <span class="token string">'./ReversedList.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">ReversedList</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第一项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第二项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第三项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">ReversedList</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Children</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ReversedList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token maybe-class-name">Children</span><span class="token punctuation">.</span><span class="token method function property-access">toArray</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
  result<span class="token punctuation">.</span><span class="token method function property-access">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><pitfall><p>就像之前提到过的一样，当操作 <code>children</code>时，我们没办法获取到内部组件的渲染输出结果。这就是为什么 <a href="#alternatives">我们更推荐使用替代方案之一</a>。</p></pitfall></section></section><section class="level2"aria-labelledby="替代方案-alternatives"><h2 id="替代方案-alternatives">替代方案 {/<em>alternatives</em>/}</h2><note><p>像下面这样导入的就是（大写字母 <code>C</code> 开头的）<code>Children</code> API，本章节将会介绍它的一些替代方案：<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Children</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span></code></pre><p>不要将它和 (小写字母 <code>c</code> 开头的) <a href="/learn/passing-props-to-a-component#passing-jsx-as-children"><code>children</code> 属性</a> 混淆，后者是我们推荐使用的。</p></note><section class="level3"aria-labelledby="暴露多个组件-exposing-multiple-components"><h3 id="暴露多个组件-exposing-multiple-components">暴露多个组件 {/<em>exposing-multiple-components</em>/}</h3><p>使用 <code>Children</code> 方法操作子节点通常会削弱代码的健壮性。在 JSX 中将子节点传递给组件时，通常不希望操作或转换子节点。<p>如果能够的话，尽量避免使用 <code>Children</code> 方法。例如，如果你希望 <code>RowList</code> 的每一个子节点都被 <code>&#x3C;div className="Row"></code> 包裹，那么可以导出一个 <code>Row</code> 组件，然后像下面这样手动把包裹每一行：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">RowList</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Row</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./RowList.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">RowList</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Row</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第一项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Row</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Row</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第二项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Row</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Row</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第三项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Row</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">RowList</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RowList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"RowList"</span><span class="token operator">></span>
      <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Row</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"Row"</span><span class="token operator">></span>
      <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector"><span class="token class">.RowList</span></span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token unit">px</span> solid <span class="token color">grey</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.Row</span></span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token unit">px</span> dashed <span class="token color">black</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>和使用 <code>Children.map</code> 不同，这种方式不会自动包裹每个子节点。但是，和 <a href="#transforming-children">上文中关于 <code>Children.map</code> 例子</a> 相比，这种方式具有明显的优势，因为即使你继续抽离更多的组件，它也仍然有效。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">RowList</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Row</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./RowList.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">RowList</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Row</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第一项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Row</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MoreRows</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">RowList</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MoreRows</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Row</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第二项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Row</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Row</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第三项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Row</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RowList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"RowList"</span><span class="token operator">></span>
      <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Row</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"Row"</span><span class="token operator">></span>
      <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector"><span class="token class">.RowList</span></span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token unit">px</span> solid <span class="token color">grey</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.Row</span></span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token unit">px</span> dashed <span class="token color">black</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>这里使用 <code>Children.map</code> 得不到一样的结果，因为它会“认为” <code>&#x3C;MoreRows></code> 只是一个单独的子节点（并且只占据了一行）。</section><section class="level3"aria-labelledby="接收对象数组作为参数-accepting-an-array-of-objects-as-a-prop"><h3 id="接收对象数组作为参数-accepting-an-array-of-objects-as-a-prop">接收对象数组作为参数 {/<em>accepting-an-array-of-objects-as-a-prop</em>/}</h3><p>你也可以显示地传递一个数组作为组件的参数。例如，下面的 <code>RowList</code> 接收了一个 <code>rows</code> 数组作为组件的参数：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">RowList</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Row</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./RowList.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">RowList</span> rows<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>
    <span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RowList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> rows <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"RowList"</span><span class="token operator">></span>
      <span class="token punctuation">{</span>rows<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">row</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>
        <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"Row"</span> key<span class="token operator">=</span><span class="token punctuation">{</span>row<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token punctuation">{</span>row<span class="token punctuation">.</span><span class="token property-access">content</span><span class="token punctuation">}</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector"><span class="token class">.RowList</span></span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token unit">px</span> solid <span class="token color">grey</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.Row</span></span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token unit">px</span> dashed <span class="token color">black</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>因为 <code>rows</code> 是一个常规的 JavaScript 数组，<code>RowList</code> 组件可以对其使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map"><code>map</code></a> 等数组内置方法。<p>当你希望能够将更多信息作为结构化数据，与子节点一起传递时，这个方案将会非常有用。在下面的示例中，<code>TabSwitcher</code> 接收了一个对象数组作为 <code>tabs</code> 的属性：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">TabSwitcher</span></span> <span class="token keyword module">from</span> <span class="token string">'./TabSwitcher.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">TabSwitcher</span> tabs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token string">'First'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第一项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token string">'Second'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第二项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token string">'Third'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token operator">&#x3C;</span>p<span class="token operator">></span>这是第三项。<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">TabSwitcher</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> tabs <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>selectedId<span class="token punctuation">,</span> setSelectedId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>tabs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> selectedTab <span class="token operator">=</span> tabs<span class="token punctuation">.</span><span class="token method function property-access">find</span><span class="token punctuation">(</span><span class="token parameter">tab</span> <span class="token arrow operator">=></span> tab<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">===</span> selectedId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token punctuation">{</span>tabs<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">tab</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>
        <span class="token operator">&#x3C;</span>button
          key<span class="token operator">=</span><span class="token punctuation">{</span>tab<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span>
          onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setSelectedId</span><span class="token punctuation">(</span>tab<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">></span>
          <span class="token punctuation">{</span>tab<span class="token punctuation">.</span><span class="token property-access">header</span><span class="token punctuation">}</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>selectedId<span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>h3<span class="token operator">></span><span class="token punctuation">{</span>selectedTab<span class="token punctuation">.</span><span class="token property-access">header</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h3<span class="token operator">></span>
        <span class="token punctuation">{</span>selectedTab<span class="token punctuation">.</span><span class="token property-access">content</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>和将子节点作为 JSX 传递不同，这个方法允许你将一些额外的数据，比如 <code>header</code>，与每个子项关联。因为你直接使用 <code>tabs</code>，并且它是一个数组，所以你并不需要 <code>Children</code> 方法。</section><section class="level3"aria-labelledby="调用渲染属性以自定义渲染-calling-a-render-prop-to-customize-rendering"><h3 id="调用渲染属性以自定义渲染-calling-a-render-prop-to-customize-rendering">调用渲染属性以自定义渲染 {/<em>calling-a-render-prop-to-customize-rendering</em>/}</h3><p>除了为每一个子项生成 JSX，你还可以传递一个返回值类型是 JSX 的函数，并且在必要的时候调用这个函数。在这个示例中，<code>App</code> 组件向 <code>TabSwitcher</code> 组件传递了一个 <code>renderContent</code> 函数。<code>TabSwitcher</code> 组件仅对被选中的 tab 调用 <code>renderContent</code>。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">TabSwitcher</span></span> <span class="token keyword module">from</span> <span class="token string">'./TabSwitcher.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">TabSwitcher</span>
      tabIds<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">'first'</span><span class="token punctuation">,</span> <span class="token string">'second'</span><span class="token punctuation">,</span> <span class="token string">'third'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
      getHeader<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">tabId</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">return</span> tabId<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> tabId<span class="token punctuation">.</span><span class="token method function property-access">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span>
      renderContent<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">tabId</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">This</span> is the <span class="token punctuation">{</span>tabId<span class="token punctuation">}</span> item<span class="token punctuation">.</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">TabSwitcher</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> tabIds<span class="token punctuation">,</span> getHeader<span class="token punctuation">,</span> renderContent <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>selectedId<span class="token punctuation">,</span> setSelectedId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>tabIds<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token punctuation">{</span>tabIds<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tabId</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>
        <span class="token operator">&#x3C;</span>button
          key<span class="token operator">=</span><span class="token punctuation">{</span>tabId<span class="token punctuation">}</span>
          onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setSelectedId</span><span class="token punctuation">(</span>tabId<span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">></span>
          <span class="token punctuation">{</span><span class="token function">getHeader</span><span class="token punctuation">(</span>tabId<span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>selectedId<span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>h3<span class="token operator">></span><span class="token punctuation">{</span><span class="token function">getHeader</span><span class="token punctuation">(</span>selectedId<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h3<span class="token operator">></span>
        <span class="token punctuation">{</span><span class="token function">renderContent</span><span class="token punctuation">(</span>selectedId<span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>像 <code>renderContent</code> 这样的参数会被称为渲染属性，因为它指定了如何渲染一部分用户交互界面。但是，它也并没有什么特别之处，只是一个普通的属性同时恰好又是一个函数。<p>渲染属性是函数，所以你可以向它们传递参数。比如，这里的 <code>RowList</code> 组件向 <code>renderRow</code> 传递了一个 <code>id</code> 和每一行的 <code>index</code>，该属性用 <code>index</code> 来选择偶数行：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">RowList</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Row</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./RowList.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">RowList</span>
      rowIds<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">'first'</span><span class="token punctuation">,</span> <span class="token string">'second'</span><span class="token punctuation">,</span> <span class="token string">'third'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
      renderRow<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
          <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Row</span> isHighlighted<span class="token operator">=</span><span class="token punctuation">{</span>index <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">This</span> is the <span class="token punctuation">{</span>id<span class="token punctuation">}</span> item<span class="token punctuation">.</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
          <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Row</span><span class="token operator">></span> 
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Fragment</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RowList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> rowIds<span class="token punctuation">,</span> renderRow <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"RowList"</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1 className<span class="token operator">=</span><span class="token string">"RowListHeader"</span><span class="token operator">></span>
        <span class="token maybe-class-name">Total</span> rows<span class="token operator">:</span> <span class="token punctuation">{</span>rowIds<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token punctuation">{</span>rowIds<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">rowId<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Fragment</span> key<span class="token operator">=</span><span class="token punctuation">{</span>rowId<span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token punctuation">{</span><span class="token function">renderRow</span><span class="token punctuation">(</span>rowId<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Fragment</span><span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Row</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children<span class="token punctuation">,</span> isHighlighted <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>
      <span class="token string">'Row'</span><span class="token punctuation">,</span>
      isHighlighted <span class="token operator">?</span> <span class="token string">'RowHighlighted'</span> <span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector"><span class="token class">.RowList</span></span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token unit">px</span> solid <span class="token color">grey</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.RowListHeader</span></span> <span class="token punctuation">{</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">25</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.Row</span></span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token unit">px</span> dashed <span class="token color">black</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.RowHighlighted</span></span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token hexcode color">#ffa</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>这是如何在不操纵子组件的情况下，父组件和子组件进行协作的另一个示例。</section></section><section class="level2"aria-labelledby="错误排查-troubleshooting"><h2 id="错误排查-troubleshooting">错误排查 {/<em>troubleshooting</em>/}</h2><section class="level3"aria-labelledby="我传递入了一个自定义组件但是-children-方法没有显示渲染的内容-i-pass-a-custom-component-but-the-children-methods-dont-show-its-render-result"><h3 id="我传递入了一个自定义组件但是-children-方法没有显示渲染的内容-i-pass-a-custom-component-but-the-children-methods-dont-show-its-render-result">我传递入了一个自定义组件，但是 <code>Children</code> 方法没有显示渲染的内容 {/<em>i-pass-a-custom-component-but-the-children-methods-dont-show-its-render-result</em>/}</h3><p>假设你向 <code>RowList</code> 传入了两个子节点，像下面这样：<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">RowList</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span>p<span class="token operator">></span>第一项<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MoreRows</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">RowList</span><span class="token operator">></span></code></pre><p>如果你在 <code>RowList</code> 中执行 <code>Children.count(children)</code>，其返回值将为 <code>2</code>。即使 <code>MoreRows</code> 渲染了 10 个不同的子项，或者返回了 <code>null</code>，<code>Children.count(children)</code> 的返回值仍然是 <code>2</code>。从 <code>RowList</code> 的角度上看，它只能感知到它直接接收到的 JSX，并不能感知到 <code>MoreRows</code> 组件的内部。<p>这导致抽离一个组件变得较为困难，这也是为什么我们更推荐使用 <a href="#alternatives">替代方案</a> 而不是使用 <code>Children</code>。 <span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section></inlinetoc></section>