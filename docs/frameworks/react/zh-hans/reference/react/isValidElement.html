<!doctype html><html lang="zh-hans"><meta charset="utf-8"><title>isValidElement</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="isvalidelement"><h1 id="isvalidelement">isValidElement</h1><intro><p><code>isValidElement</code> 检测参数值是否为 React 元素。<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> isElement <span class="token operator">=</span> <span class="token function">isValidElement</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span></code></pre></intro><inlinetoc><section class="level2"aria-labelledby="参考-reference"><h2 id="参考-reference">参考 {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="isvalidelementvalue-isvalidelement"><h3 id="isvalidelementvalue-isvalidelement"><code>isValidElement(value)</code> {/<em>isvalidelement</em>/}</h3><p>调用 <code>isValidElement(value)</code> 来检测 <code>value</code> 是否是 React 元素。<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> isValidElement<span class="token punctuation">,</span> createElement <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token comment">// ✅ React 元素</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span>p <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token comment">// ❌ 非 React 元素</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span></code></pre><p><a href="#usage">请看下方更多示例</a>。<section class="level4"aria-labelledby="参数-parameters"><h4 id="参数-parameters">参数 {/<em>parameters</em>/}</h4><ul><li><code>value</code>：你想要检测的 <code>value</code> 值。它可以是任何类型的值。</ul></section><section class="level4"aria-labelledby="返回值-returns"><h4 id="返回值-returns">返回值 {/<em>returns</em>/}</h4><p>如果 <code>value</code> 是一个 React 元素，<code>isValidElement</code> 返回 <code>true</code>；否则返回 <code>false</code>。</section><section class="level4"aria-labelledby="注意事项-caveats"><h4 id="注意事项-caveats">注意事项 {/<em>caveats</em>/}</h4><ul><li><strong>只有通过 <a href="/reference/react/createElement"><code>createElement</code></a> 返回的 <a href="/learn/writing-markup-with-jsx">JSX 标签</a> 和对象会被认为是 React 元素</strong>。例如，即使像 <code>42</code> 这样的数字是一个有效的 React <strong>节点</strong>（并且能从一个组件中返回），但它仍然不是有效的 React 元素。使用 <a href="/reference/react-dom/createPortal"><code>createPortal</code></a> 创建的数组和 portal 也 <strong>不被</strong> 认为是 React 元素。</ul></section></section></section><section class="level2"aria-labelledby="用法-usage"><h2 id="用法-usage">用法 {/<em>usage</em>/}</h2><section class="level3"aria-labelledby="检测某些值是否是-react-元素-checking-if-something-is-a-react-element"><h3 id="检测某些值是否是-react-元素-checking-if-something-is-a-react-element">检测某些值是否是 React 元素 {/<em>checking-if-something-is-a-react-element</em>/}</h3><p>调用 <code>isValidElement</code> 来检测某个值是否是一个 <strong>React 元素</strong>。<p>React 元素指的是：<ul><li>通过 <a href="/learn/writing-markup-with-jsx">JSX 标签</a> 产生的值<li>通过调用 <a href="/reference/react/createElement"><code>createElement</code></a> 产生的值</ul><p>对于 React 元素来说，<code>isValidElement</code> 返回 <code>true</code>：<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> isValidElement<span class="token punctuation">,</span> createElement <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token comment">// ✅ JSX 标签是 React 元素</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span>p <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyComponent</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token comment">// ✅ 通过 createElement 返回的值是 React 元素</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token maybe-class-name">MyComponent</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre><p>其他任意值，例如字符串，数字或者任意对象和数组等都不是 React 元素。<p>对于他们来说，<code>isValidElement</code> 返回值为 <code>false</code>：<pre class="language-js"><code class="language-js"><span class="token comment">// ❌ 这些 **不是** React 元素</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">&#x3C;</span>div <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token operator">&#x3C;</span>div <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span><span class="token maybe-class-name">MyComponent</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span></code></pre><p>需要用到 <code>isValidElement</code> 的场景并不常见。如果你调用另外一个 API，它 <strong>只</strong> 接受元素（像 <a href="/reference/react/cloneElement"><code>cloneElement</code></a> 那样），并且你想在参数不是 React 元素时避免报错，则这个方法是最有用的。<p>除非你有某些特定的原因需要添加 <code>isValidElement</code> 检测，否则不需要使用。</p><deepdive><section class="level4"aria-labelledby="react-元素-vs-react-节点-react-elements-vs-react-nodes"><h4 id="react-元素-vs-react-节点-react-elements-vs-react-nodes">React 元素 vs React 节点 {/<em>react-elements-vs-react-nodes</em>/}</h4><p>当你编写组件时，你可以从中返回任意类型的 <strong>React 节点</strong>：<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... 你可以返回任何 React 节点 ...</span>
<span class="token punctuation">}</span></code></pre><p>React 节点可能是：<ul><li>像 <code>&#x3C;div /></code> 或者 <code>createElement('div')</code> 这样被创建的 React 元素<li>使用 <a href="/reference/react-dom/createPortal"><code>createPortal</code></a> 创建的 portal<li>字符串<li>数字<li><code>true</code>、<code>false</code>、<code>null</code> 或者 <code>undefined</code>（不会被展示出来）<li>其他 React 节点的数组</ul><p><strong>注意 <code>isValidElement</code> 只能检测参数是否为 React 元素，而不能检测它是否是 React 节点</strong>。例如 <code>42</code> 不是一个有效的 React 元素，但它是一个有效的 React 节点：<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token number">42</span><span class="token punctuation">;</span> <span class="token comment">// 从组件返回一个数字是没问题的</span>
<span class="token punctuation">}</span></code></pre><p>这就是为什么你不应该用 <code>isValidElement</code> 来检测某些东西是否可以被渲染。</p><span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></deepdive></section></section></inlinetoc></section>