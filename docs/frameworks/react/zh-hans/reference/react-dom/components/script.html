<!doctype html><html lang="zh-hans"><meta charset="utf-8"><title>参考 {/reference/}</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../../../themes/packages/prism-coy-theme/theme_common.css"><p>script: "<script>"
canary: true</script><canary></canary><p>React 对 <code>&#x3C;script></code> 的扩展当前仅在 React Canary 与 experimental 渠道中可用。在 React 的稳定版本中，<code>&#x3C;script></code> 仅作为 <a href="https://react.dev/reference/react-dom/components#all-html-components">浏览器内置 HTML 组件</a> 使用。请在 <a href="/community/versioning-policy#all-release-channels">此处了解更多关于 React 发布渠道的信息</a>。</p><intro><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script">浏览器内置的 <code>&#x3C;script></code> 组件</a> 允许向文档添加脚本。<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>script<span class="token operator">></span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"hi!"</span><span class="token punctuation">)</span> <span class="token operator">&#x3C;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre></intro><inlinetoc><section class="level2"aria-labelledby="参考-reference"><h2 id="参考-reference">参考 {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="-script"><h3 id="-script"><code>&#x3C;script></code> {/<em>script</em>/}</h3><p>渲染 <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script">浏览器内置的 <code>&#x3C;script></code> 组件</a> 以向文档添加内联或外部脚本。可以在任何组件中渲染 <code>&#x3C;script></code>，React 将在某些情况下将相应的 DOM 元素放置在文档头部，并对相同的脚本进行去重。<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>script<span class="token operator">></span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"hi!"</span><span class="token punctuation">)</span> <span class="token operator">&#x3C;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&#x3C;</span>script src<span class="token operator">=</span><span class="token string">"script.js"</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p><a href="#usage">参见下方更多示例</a>。<section class="level4"aria-labelledby="属性-props"><h4 id="属性-props">属性 {/<em>props</em>/}</h4><p><code>&#x3C;script></code> 支持所有 <a href="/reference/react-dom/components/common#props">通用元素属性</a>。<p>它应该要么具有 <code>children</code> 属性，要么具有 <code>src</code> 属性。<ul><li><code>children</code>：字符串，内联脚本的源代码。<li><code>src</code>：字符串，外部脚本的 URL。</ul><p>但也支持其他属性：<ul><li><code>async</code>：布尔值，允许浏览器延迟执行脚本，直到文档的其余部分已经处理完毕——这是性能优化的首选行为。<li><code>crossOrigin</code>：字符串，表示要使用的 <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/crossorigin">CORS 策略</a>，其可能的值为 <code>anonymous</code> 和 <code>use-credentials</code>。<li><code>fetchPriority</code>：字符串，用于指示浏览器在同时获取多个脚本时按优先级对脚本进行排名，可能的值包括 <code>"high"</code>、<code>"low"</code> 与 <code>"auto"</code>（默认值）。<li><code>integrity</code>：字符串，脚本的密码哈希，用于 <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity">验证其真实性</a>。<li><code>noModule</code>：布尔值，表示在支持 ES 模块的浏览器中禁用脚本——用于为不支持的浏览器提供一个后备脚本。<li><code>nonce</code>：字符串，表示使用严格内容安全策略时允许资源的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Global_attributes/nonce">加密随机数</a>。<li><code>referrer</code>：字符串，指定在获取脚本以及脚本依次获取任何资源时发送的 <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script#referrerpolicy">referer 请求头</a>。<li><code>type</code>：字符串，指定脚本是一个 <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script/type">传统脚本、ES 模块还是导入映射</a>。</ul><p>禁用 React 对脚本的 <a href="#special-rendering-behavior">特殊处理</a> 的属性：<ul><li><code>onError</code>：脚本加载失败时调用的函数。<li><code>onLoad</code>：脚本加载完成时调用的函数。</ul><p>不建议与 React 一起使用的属性：<ul><li><code>blocking</code>：字符串。如果其设置为 <code>"render"</code>，指示浏览器在脚本加载完成之前不要渲染页面。React 使用 Suspense 提供了更精细的控制。<li><code>defer</code>：字符串，用于防止浏览器在文档加载完成之前执行脚本。与流式服务器端渲染组件不兼容。请改用 <code>async</code> 属性。</ul></section><section class="level4"aria-labelledby="特殊的渲染行为-special-rendering-behavior"><h4 id="特殊的渲染行为-special-rendering-behavior">特殊的渲染行为 {/<em>special-rendering-behavior</em>/}</h4><p>React 可以将 <code>&#x3C;script></code> 组件移动到文档的 <code>&#x3C;head></code> 中，并对相同脚本进行去重。<p>可以提供 <code>src</code> 和 <code>async={true}</code> 属性以选择行为。如果脚本具有相同的 <code>src</code>，React 将对脚本去重。<code>async</code> 属性必须为 true 才能安全地移动脚本。<p>这种特殊处理带来两个注意事项：<ul><li>在脚本被渲染后，React 将忽略属性的更改（React 在开发环境中会对这种情况发出警告）。<li>即使渲染它的组件已被卸载，React 也可能将脚本保留在 DOM 中（这不会产生影响，因为脚本只在插入到 DOM 中时执行一次）。</ul></section></section></section><section class="level2"aria-labelledby="用法-usage"><h2 id="用法-usage">用法 {/<em>usage</em>/}</h2><section class="level3"aria-labelledby="渲染内部脚本-rendering-an-external-script"><h3 id="渲染内部脚本-rendering-an-external-script">渲染内部脚本 {/<em>rendering-an-external-script</em>/}</h3><p>If a component depends on certain scripts in order to be displayed correctly, you can render a <code>&#x3C;script></code> within the component. However, the component might be committed before the script has finished loading. You can start depending on the script content once the <code>load</code> event is fired e.g. by using the <code>onLoad</code> prop.<p>React will de-duplicate scripts that have the same <code>src</code>, inserting only one of them into the DOM even if multiple components render it.</p><sandpackwithhtmloutput><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">ShowRenderedHTML</span></span> <span class="token keyword module">from</span> <span class="token string">'./ShowRenderedHTML.js'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token known-class-name class-name">Map</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>lat<span class="token punctuation">,</span> long<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>script <span class="token keyword">async</span> src<span class="token operator">=</span><span class="token string">"map-api.js"</span> onLoad<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'script loaded'</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>div id<span class="token operator">=</span><span class="token string">"map"</span> data<span class="token operator">-</span>lat<span class="token operator">=</span><span class="token punctuation">{</span>lat<span class="token punctuation">}</span> data<span class="token operator">-</span>long<span class="token operator">=</span><span class="token punctuation">{</span>long<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Page</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">ShowRenderedHTML</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token known-class-name class-name">Map</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">ShowRenderedHTML</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpackwithhtmloutput><note>想要使用脚本时，调用 [preinit](/reference/react-dom/preinit) 函数可能会有益处。调用此函数可能会使浏览器比仅渲染 `<script>` 组件更早地开始获取脚本，例如通过发送 [HTTP 103 Early Hints 响应](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/103)。
</Note></script><section class="level3"aria-labelledby="渲染内联脚本-rendering-an-inline-script"><h3 id="渲染内联脚本-rendering-an-inline-script">渲染内联脚本 {/<em>rendering-an-inline-script</em>/}</h3><p>如果需要包含内联脚本，请将 <code>&#x3C;script></code> 组件渲染为其子元素的脚本源代码。内联脚本不会被去重或移动到文档 <code>&#x3C;head></code> 中。</p><sandpackwithhtmloutput><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">ShowRenderedHTML</span></span> <span class="token keyword module">from</span> <span class="token string">'./ShowRenderedHTML.js'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Tracking</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>script<span class="token operator">></span>
      <span class="token function">ga</span><span class="token punctuation">(</span><span class="token string">'send'</span><span class="token punctuation">,</span> <span class="token string">'pageview'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>script<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Page</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">ShowRenderedHTML</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">My</span> <span class="token maybe-class-name">Website</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Tracking</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Welcome</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">ShowRenderedHTML</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpackwithhtmloutput><span style="float:footnote"><a href="../../../index.html#toc">Go to TOC</a></span></section></note></section></section></inlinetoc>