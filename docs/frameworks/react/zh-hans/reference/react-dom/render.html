<!doctype html><html lang="zh-hans"><meta charset="utf-8"><title>render</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="render"><h1 id="render">render</h1><p>translators:<ul><li>liu-jin-yi<li>QC-L<li>Neo42</ul><deprecated><p>在未来 React 发布主要版本时，此 API 将被移除。<p>在 React 18 中，<code>render</code> 函数将被 <a href="/reference/react-dom/client/createRoot"><code>createRoot</code></a> 函数替换。在 React 18 中使用 <code>render</code> 函数，React 会抛出警告，你的应用程序的表现将像运行在 React 17 中表现一致。具体详情请参阅 <a href="/blog/2022/03/08/react-18-upgrade-guide#updates-to-client-rendering-apis">博文</a>。</p></deprecated><intro><p><code>render</code> 函数会将一段 <a href="/learn/writing-markup-with-jsx">JSX</a>（“React 节点”）渲染到浏览器 DOM 容器节点中。<pre class="language-js"><code class="language-js"><span class="token function">render</span><span class="token punctuation">(</span>reactNode<span class="token punctuation">,</span> domNode<span class="token punctuation">,</span> callback<span class="token operator">?</span><span class="token punctuation">)</span></code></pre></intro><inlinetoc><section class="level2"aria-labelledby="reference-reference"><h2 id="reference-reference">Reference {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="renderreactnode-domnode-callback-render"><h3 id="renderreactnode-domnode-callback-render"><code>render(reactNode, domNode, callback?)</code> {/<em>render</em>/}</h3><p>通过调用 <code>render</code> 函数，可以在浏览器的 DOM 元素中展示 React 组件。<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> render <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> domNode <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">App</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> domNode<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>React 将在 <code>domNode</code> 中展示 <code>&#x3C;App /></code> 组件，并对该 DOM 中的内容进行管理。<p>一个完全由 React 构建的应用程序通常只会对一个根组件调用 <code>render</code> 函数。如果一个页面中只有部分内容 "零散" 的使用了 React，可以根据实际需求对 <code>render</code> 进行多次调用。<p><a href="#usage">具体参考下方示例</a>。<section class="level4"aria-labelledby="parameters-parameters"><h4 id="parameters-parameters">Parameters {/<em>parameters</em>/}</h4><ul><li><p><code>reactNode</code>：需要展示的 <em>React 节点</em>。这通常是一段 JSX，如 <code>&#x3C;App /></code>，但你也可以传递使用 <a href="/reference/react/createElement"><code>createElement()</code></a> 构建的 React 元素，字符串，数字，<code>null</code> 或是 <code>undefined</code>。<li><p><code>domNode</code>：<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element">DOM 元素</a>。React 会将 <code>reactNode</code> 渲染在该 DOM 元素中。从此刻开始，React 将管理 <code>domNode</code> 中的 DOM，并会在 React 树发生变化时更新它。<li><p><strong>可选</strong> <code>callback</code>：回调函数。如果编写了该函数，React 将在你的组件放入 DOM 后调用该函数。</ul></section><section class="level4"aria-labelledby="returns-returns"><h4 id="returns-returns">Returns {/<em>returns</em>/}</h4><p>通常 <code>render</code> 会返回 <code>null</code>。然后，如果你传递的 <code>reactNode</code> 是一个 <em>class 组件</em>，那么它将返回该组件的实例。</section><section class="level4"aria-labelledby="caveats-caveats"><h4 id="caveats-caveats">Caveats {/<em>caveats</em>/}</h4><ul><li><p>在 React 18 中，<code>render</code> 函数已被 <a href="/reference/react-dom/client/createRoot"><code>createRoot</code></a> 取代。请在 React 18 及后续版本中使用 <code>createRoot</code>。<li><p>当你第一次调用 <code>render</code> 时，React 会在组件渲染到 <code>domNode</code> 中之前，清除掉 <code>domNode</code> 中所有已有的 HTML 内容。如果你的 <code>domNode</code> 中包含了 React 在服务器上或构建过程中生成的 HTML，请使用 <a href="/reference/react-dom/hydrate"><code>hydrate()</code></a> 代替，它会将事件处理程序附加到现有的 HTML 中。<li><p>如果你在同一个 <code>domNode</code> 上多次调用 <code>render</code> 函数，React 会按需更新 DOM 以响应你传递的最新 JSX。React 会通过与之前渲染的树 <a href="/learn/preserving-and-resetting-state">"匹配"</a> 的方式来决定 DOM 的哪些部分可以被重用，哪些需要重新创建。多次在同一个 <code>domNode</code> 上调用 <code>render</code>，类似于在根组件上调用 <a href="/reference/react/useState#setstate"><code>set</code> 函数</a>：React 会避免不必要的 DOM 更新。<li><p>如果你的应用程序是完全基于 React 构建，那么你其实不需要多次使用 <code>render</code> 函数。（如果你使用框架，它可能已帮你完成该调用。）当你想在 DOM 树的不同部分渲染一段 JSX 时，而不是你组件的 children（例如，modal 或者 tooltip），那么请使用 <a href="/reference/react-dom/createPortal"><code>createPortal</code></a> 来代替。</ul></section></section></section><section class="level2"aria-labelledby="usage-usage"><h2 id="usage-usage">Usage {/<em>usage</em>/}</h2><p>通过调用 <code>render</code> 函数在<codestep step="{2}">浏览器 DOM 节点</codestep>中展示<codestep step="{1}">React 组件</codestep>。<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> render <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">App</span></span> <span class="token keyword module">from</span> <span class="token string">'./App.js'</span><span class="token punctuation">;</span>

<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">App</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><section class="level3"aria-labelledby="渲染根组件-rendering-the-root-component"><h3 id="渲染根组件-rendering-the-root-component">渲染根组件 {/<em>rendering-the-root-component</em>/}</h3><p>在完全由 React 构建的应用程序中，<strong>你通常只需在启动时，执行此操作</strong> —— 渲染 “根” 组件。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'./styles.css'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> render <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">App</span></span> <span class="token keyword module">from</span> <span class="token string">'./App.js'</span><span class="token punctuation">;</span>

<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">App</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span>你好，世界！<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>通常你不需要多次调用 <code>render</code> 或在更多地方调用它。从此刻开始，React 将管理你的应用程序的 DOM。如果你想更新 UI，你在组件中通过 <a href="/reference/react/useState">using state</a> 来实现。</section><section class="level3"aria-labelledby="渲染多个根组件-rendering-multiple-roots"><h3 id="渲染多个根组件-rendering-multiple-roots">渲染多个根组件 {/<em>rendering-multiple-roots</em>/}</h3><p>If your page <a href="/learn/add-react-to-an-existing-project#using-react-for-a-part-of-your-existing-page">isn't fully built with React</a>, call <code>render</code> for each top-level piece of UI managed by React.</p><sandpack><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>nav</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navigation<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>nav</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>main</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>这一段没有被 React 渲染（可以查看 index.html 进行验证）。<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>section</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comments<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>section</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>main</span><span class="token punctuation">></span></span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token string">'./styles.css'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> render <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Comments</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Navigation</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./Components.js'</span><span class="token punctuation">;</span>

<span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Navigation</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>
  <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'navigation'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Comments</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>
  <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'comments'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Navigation</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">NavLink</span> href<span class="token operator">=</span><span class="token string">"/"</span><span class="token operator">></span>首页<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">NavLink</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">NavLink</span> href<span class="token operator">=</span><span class="token string">"/about"</span><span class="token operator">></span>关于<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">NavLink</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">NavLink</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> href<span class="token punctuation">,</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>li<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>a href<span class="token operator">=</span><span class="token punctuation">{</span>href<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>a<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Comments</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h2<span class="token operator">></span>评论<span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Comment</span> text<span class="token operator">=</span><span class="token string">"你好！"</span> author<span class="token operator">=</span><span class="token string">"Sophie"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Comment</span> text<span class="token operator">=</span><span class="token string">"你好吗？"</span> author<span class="token operator">=</span><span class="token string">"Sunil"</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Comment</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> text<span class="token punctuation">,</span> author <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token punctuation">{</span>text<span class="token punctuation">}</span> — <span class="token operator">&#x3C;</span>i<span class="token operator">></span><span class="token punctuation">{</span>author<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>i<span class="token operator">></span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">nav ul</span> <span class="token punctuation">{</span> <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">nav ul li</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span> <span class="token property">margin-right</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><p>你可以使用 <a href="/reference/react-dom/unmountComponentAtNode"><code>unmountComponentAtNode()</code></a> 来销毁已被渲染的组件树。</section><section class="level3"aria-labelledby="更新已渲染的组件树-updating-the-rendered-tree"><h3 id="更新已渲染的组件树-updating-the-rendered-tree">更新已渲染的组件树 {/<em>updating-the-rendered-tree</em>/}</h3><p>你可以在同一 DOM 节点上多次调用 <code>render</code>。只要组件树结构与之前渲染的内容一致，React 就会 <a href="/learn/preserving-and-resetting-state">保留 state</a>。请注意观察在输入框中输入内容时的效果，这意味着在此示例中每次重复调用 <code>render</code> 时，并不会造成任何影响：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> render <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token string">'./styles.css'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">App</span></span> <span class="token keyword module">from</span> <span class="token string">'./App.js'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">App</span> counter<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>
    <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  i<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>counter<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span>你好，世界<span class="token operator">!</span> <span class="token punctuation">{</span>counter<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>input placeholder<span class="token operator">=</span><span class="token string">"在这里输入一些东西"</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>多次调用 <code>render</code> 函数并不常见。通常，会通过在组件中 <a href="/reference/react/useState">更新 state</a> 来代替。 <span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section></inlinetoc></section>