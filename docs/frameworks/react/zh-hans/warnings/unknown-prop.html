<!doctype html><html lang="zh-hans"><meta charset="utf-8"><title>未知属性警告</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="未知属性警告"><h1 id="未知属性警告">未知属性警告</h1><p>如果尝试使用 React 不认识的属性来渲染 DOM 元素，将会触发未知属性警告。你应该确保 DOM 元素没有无法识别的冗余属性。<p>出现此警告的可能原因有以下几个：<ol><li><p>你是否正在使用 <code>{...props}</code> 或 <code>cloneElement(element, props)</code>？在将 props 复制到子组件时，你应该确保不会意外地将仅用于父组件的 props 转发给子组件。请参阅下面针对此问题的常见修复方式。<li><p>也许是为了展示自定义数据，你正在将非标准的 DOM 属性应用于 DOM 节点。如果你想将自定义数据附加到标准 DOM 元素上，请考虑使用自定义数据属性，如 <a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/HTML/Using_data_attributes">MDN</a> 中所述。<li><p>React 尚未识别指定的属性。这可能会在未来的 React 版本中修复。如果这样的属性名称为小写，React 将允许你传递它而不会出现警告。<li><p>如果你使用一个首字母小写的 React 组件，如 <code>&#x3C;myButton /></code>，React 会将其解释为 DOM 标签，因为 React JSX 使用大小写约定来区分用户自定义组件与 DOM 标签。对于自定义 React 组件，请使用 PascalCase 命名。例如，<code>&#x3C;myButton /></code> 应该写为 <code>&#x3C;MyButton /></code>。</ol><p>如果你因为传递了类似 <code>{...props}</code> 的 props 而收到此警告，你的父组件需要使用（consume）任何仅用于父组件而不是子组件的 props。这是一个例子：<p><strong>错误的做法</strong>：意外地将 <code>layout</code> props 转发给 <code>div</code> 标签。<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyDiv</span></span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span><span class="token property-access">layout</span> <span class="token operator">===</span> <span class="token string">'horizontal'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 错误！因为 layout 不是 &#x3C;div> 能理解的属性。</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>div <span class="token punctuation">{</span><span class="token spread operator">...</span>props<span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getHorizontalStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 错误！因为 layout 不是 &#x3C;div> 能理解的属性。</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>div <span class="token punctuation">{</span><span class="token spread operator">...</span>props<span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getVerticalStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p><strong>正确的做法</strong>：使用展开运算符获取其他属性，并将这些属性放在一个变量中。<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyDiv</span></span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> layout<span class="token punctuation">,</span> <span class="token spread operator">...</span>rest <span class="token punctuation">}</span> <span class="token operator">=</span> props
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>layout <span class="token operator">===</span> <span class="token string">'horizontal'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>div <span class="token punctuation">{</span><span class="token spread operator">...</span>rest<span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getHorizontalStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>div <span class="token punctuation">{</span><span class="token spread operator">...</span>rest<span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getVerticalStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p><strong>正确的做法</strong>：你也可以将 props 拷贝给一个新对象，并从新对象中删除正在使用的键。但要确保不要从原始的 <code>this.props</code> 对象中删除属性，因为该对象应被视为不可变的。<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyDiv</span></span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> divProps <span class="token operator">=</span> <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> props<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">delete</span> divProps<span class="token punctuation">.</span><span class="token property-access">layout</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span><span class="token property-access">layout</span> <span class="token operator">===</span> <span class="token string">'horizontal'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>div <span class="token punctuation">{</span><span class="token spread operator">...</span>divProps<span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getHorizontalStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>div <span class="token punctuation">{</span><span class="token spread operator">...</span>divProps<span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getVerticalStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section>