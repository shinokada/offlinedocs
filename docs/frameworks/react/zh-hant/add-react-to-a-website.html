<!doctypehtml><html lang="zh-hant"><meta charset="utf-8"><title>將 React 加入到網頁</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css"><section id="將-react-加入到網頁"class="level1"><h1>將 React 加入到網頁</h1><p>按自己所需可多可少的採用 React。<p>React 在剛推出的時候就容許被逐步採用，<strong>你可以按自己所需可多可少的</strong>採用 React。 或許你只想在現存的網頁上增加少量的互動性。採用 React component 會是個非常好的選擇。<p>大部分的網頁不是，也不需要是 single-page 的應用程式。你只需要<strong>幾行的程式碼，並且不需要任何建立工具</strong>，就可以在你一少部分的網頁上嘗試採用 React。你可以選擇逐步擴大它的應用範圍，或是只使用在少部分的可變 widget 上。<ul><li><a href="#add-react-in-one-minute">一分鐘內加入 React</a><li><a href="#optional-try-react-with-jsx">可選：嘗試 React 與 JSX</a>（不需要 bundler！）</ul><section id="add-react-in-one-minute"class="level2"><h2>一分鐘內加入 React</h2><p>在本章節裡，我們會示範如何在 HTML 網頁上加入一個 React component。你可以利用自己的網頁，或建立一個空白的 HTML 文件來跟隨着我們練習。<p>我們不需要任何複雜的工具或安裝需求 —— <strong>你只需要連接到網路和一分鐘的時間，就能完成本章節。</strong><p>可選：<a href="https://gist.github.com/gaearon/6668a1f6986742109c00a581ce704605/archive/87f0b6f34238595b44308acfb86df6ea43669c08.zip">下載完整範例 (2KB zipped)</a><section id="step-1-add-a-dom-container-to-the-html"class="level3"><h3>第一步：在 HTML 上加入一個 DOM Container</h3><p>首先，打開你想編輯的 HTML 網頁。在你想利用 React 來展示內容的位置上，加上一個空白的 <code>&#x3C;div></code> 標籤。例如：<pre class="language-html{3}"><code class="language-html{3}">&#x3C;!-- ... 現存 HTML ... -->

&#x3C;div id="like_button_container">&#x3C;/div>

&#x3C;!-- ... 現存 HTML ... --></code></pre><p>我們給這個 <code>&#x3C;div></code> 加上一個獨一無二的 <code>id</code> HTML attribute。這會容許我們稍後在 JavaScript 程式碼裡找到它，並且在裡面展示一個 React component。<blockquote><p>提示<p>你可以放置像這樣的「container」<code>&#x3C;div></code> 在 <code>&#x3C;body></code> 標籤裡的<strong>任何地方</strong>。你也可以按需要，在一頁裡放置多個獨立的 DOM container。它們通常都是空白的 —— React 會替換 DOM container 裡任何現存的內容。</blockquote></section><section id="step-2-add-the-script-tags"class="level3"><h3>第二步：加上 Script 標籤</h3><p>下一步，在 HTML 網頁的 <code>&#x3C;/body></code> 結束標籤前，加上三個 <code>&#x3C;script></code> 標籤。<pre class="language-html{5,6,9}"><code class="language-html{5,6,9}">  &#x3C;!-- ... 其他 HTML ... -->

  &#x3C;!-- 載入 React。 -->
  &#x3C;!-- 注意：在發佈應用程式前，請把「development.js」替換成「production.min.js」。 -->
  &#x3C;script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin>&#x3C;/script>
  &#x3C;script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin>&#x3C;/script>

  &#x3C;!-- 載入我們的 React component。-->
  &#x3C;script src="like_button.js">&#x3C;/script>

&#x3C;/body></code></pre><p>前兩個的標籤會載入 React。第三個會載入你的 component 程式碼。</section><section id="step-3-create-a-react-component"class="level3"><h3>第三步：建立一個 React Component</h3><p>在你的 HTML 網頁旁邊，建立一個名為 <code>like_button.js</code> 的文件<p>打開<strong><a href="https://gist.github.com/gaearon/0b180827c190fe4fd98b4c7f570ea4a8/raw/b9157ce933c79a4559d2aa9ff3372668cce48de7/LikeButton.js">這個 starter code</a></strong>，然後把它貼上到你剛建立的文件裡。<blockquote><p>提示<p>這程式碼定立了一個名為 <code>LikeButton</code> 的 React component。請別擔心如果你還沒明白它 —— 我們會在<a href="/tutorial/tutorial.html">實用指南</a>和<a href="./hello-world.html">主要概念指南</a>裡解構 React 的基礎。目前，我們就先讓它展示在畫面上吧！</blockquote><p>在 <strong><a href="https://gist.github.com/gaearon/0b180827c190fe4fd98b4c7f570ea4a8/raw/b9157ce933c79a4559d2aa9ff3372668cce48de7/LikeButton.js">starter code</a></strong> 之後，請在 <code>like_button.js</code> 的底部加上以三行的程式碼:<pre class="language-js{3,4,5}"><code class="language-js{3,4,5}">// ... 你貼上的 starter code ...

const domContainer = document.querySelector('#like_button_container');
const root = ReactDOM.createRoot(domContainer);
root.render(e(LikeButton));</code></pre><p>這三行的程式碼會找我們在第一步所加入的 <code>&#x3C;div></code>，用它建立一個 React app 然後在裡面顯示我們的「Like」按鈕 React component。</section><section id="thats-it"class="level3"><h3>大功告成！</h3><p>沒有第四步了。<strong>你剛剛已經將第一個 React component 加入到你的網頁上。</strong><p>查看後續的章節了解更多有關採用 React 的提示。<p><strong><a href="https://gist.github.com/gaearon/6668a1f6986742109c00a581ce704605">按這裡看完整範例的程式碼</a></strong><p><strong><a href="https://gist.github.com/gaearon/6668a1f6986742109c00a581ce704605/archive/87f0b6f34238595b44308acfb86df6ea43669c08.zip">下載完整範例 (2KB zipped)</a></strong></section><section id="tip-reuse-a-component"class="level3"><h3>提示：重用 Component</h3><p>通常，你會想把 React component 展示在 HTML 網頁上的不同地方。以下的範例是展示我們的「Like」按鈕三次，再各自傳送資料給它們：<p><a href="https://gist.github.com/gaearon/faa67b76a6c47adbab04f739cba7ceda">按這裡看完整範例的程式碼</a><p><a href="https://gist.github.com/gaearon/faa67b76a6c47adbab04f739cba7ceda/archive/279839cb9891bd41802ebebc5365e9dec08eeb9f.zip">下載完整範例 (2KB zipped)</a><blockquote><p>注意<p>當網頁上以 React 驅動的部分是互相獨立的時候，這種策略會非常有用。在 React 的程式碼裡，使用 <a href="./components-and-props.html#composing-components">component composition</a> 會反而比較容易。</blockquote></section><section id="tip-minify-javascript-for-production"class="level3"><h3>提示：為線上環境壓縮 JavaScript</h3><p>在部署你的網頁到線上環境之前，要留意沒壓縮的 JavaScript 會明顯的減慢使用者載入網頁的速度。<p>如果你已經壓縮了應用程式的 scripts，而且確保了你發佈的 HTML 是載入了以 <code>production.min.js</code> 結尾的 React 版本，那麼<strong>你的網頁已經發佈就緒</strong>：<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>script src<span class="token operator">=</span><span class="token string">"https://unpkg.com/react@18/umd/react.production.min.js"</span> crossorigin<span class="token operator">></span><span class="token operator">&#x3C;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&#x3C;</span>script src<span class="token operator">=</span><span class="token string">"https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"</span> crossorigin<span class="token operator">></span><span class="token operator">&#x3C;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre><p>如果你沒有一個為你的 scripts 進行壓縮的步驟，<a href="https://gist.github.com/gaearon/42a2ffa41b8319948f9be4076286e1f3">這裡有個方法設定</a>。</section></section><section id="optional-try-react-with-jsx"class="level2"><h2>可選：嘗試 React 與 JSX</h2><p>上面所接觸的範例，我們只倚靠着瀏覽器自身所支援的特性。這就是為什麼我們會用一個 JavaScript function call 來告訴 React 要展示什麼：<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> e <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access">createElement</span><span class="token punctuation">;</span>

<span class="token comment">// 展示一個「Like」&#x3C;button></span>
<span class="token keyword control-flow">return</span> <span class="token function">e</span><span class="token punctuation">(</span>
  <span class="token string">'button'</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">liked</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'Like'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>不過，React 也提供了一個使用 <a href="./introducing-jsx.html">JSX</a> 的選擇：<pre class="language-js"><code class="language-js"><span class="token comment">// 展示一個「Like」&#x3C;button></span>
<span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
  <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">liked</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
    <span class="token maybe-class-name">Like</span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>這兩段的程式碼是等同的。雖然 <strong>JSX 是<a href="./react-without-jsx.html">完全可選的</a></strong>，但許多人也覺得它有助編寫 UI 程式碼 —— 無論是使用 React 或其他函式庫。<p>你可以使用<a href="https://babeljs.io/en/repl#?babili=false&#x26;browsers=&#x26;build=&#x26;builtIns=false&#x26;spec=false&#x26;loose=false&#x26;code_lz=DwIwrgLhD2B2AEcDCAbAlgYwNYF4DeAFAJTw4B88EAFmgM4B0tAphAMoQCGETBe86WJgBMAXJQBOYJvAC-RGWQBQ8FfAAyaQYuAB6cFDhkgA&#x26;debug=false&#x26;forceAllTransforms=false&#x26;shippedProposals=false&#x26;circleciRepo=&#x26;evaluate=false&#x26;fileSize=false&#x26;timeTravel=false&#x26;sourceType=module&#x26;lineWrap=true&#x26;presets=es2015%2Creact%2Cstage-2&#x26;prettier=false&#x26;targets=&#x26;version=7.15.7">這個線上轉換器</a> 來嘗試 JSX。<section id="quickly-try-jsx"class="level3"><h3>快速嘗試 JSX</h3><p>在你的項目中，嘗試 JSX 最快的方法就是將這個 <code>&#x3C;script></code> 標籤加入你的網頁上：<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/babel-standalone@6/babel.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>現在你就可以在任何 <code>&#x3C;script></code> 標籤裡使用 JSX，方法就是為它們加上 <code>type="text/babel"</code> 的 attribute。這裡是個 <a href="https://raw.githubusercontent.com/reactjs/reactjs.org/master/static/html/single-file-example.html">HTML 文件與 JSX 的範例</a>，你可以下載來嘗試一下。<p>現在你可以透過加入 <code>type="text/babel"</code> attribute 在任何 <code>&#x3C;script></code> tag 中使用 JSX。這裡是<a href="https://raw.githubusercontent.com/reactjs/reactjs.org/main/static/html/single-file-example.html">一個帶有 JSX 的 HTML 範例</a>，你可以下載並且試試看。<p>這種方式最適合用來學習和建立簡單的示範。然而，它會令你的網頁變慢，而且並<strong>不適合發佈到線上環境</strong>。當你準備好到下一步，請移除掉你剛加入的 <code>&#x3C;script></code> 標籤和 <code>type="text/babel"</code> attribute。在下一個章節，你會設定一個 JSX preprocessor 來自動轉換所有的 <code>&#x3C;script></code> 標籤。</section><section id="add-jsx-to-a-project"class="level3"><h3>將 JSX 加入到項目</h3><p>將 JSX 加入到項目裡並不需要複雜的工具，例如一個 bundler 或開發伺服器。本質上，加入 JSX <strong>就像加入一個 CSS preprocessor。</strong>這只需要你安裝 <a href="https://nodejs.org/">Node.js</a> 到你的電腦裡。<p>在 terminal 轉到你的項目文件夾裡，再貼上以下的兩行指令：<ol><li><strong>第一步：</strong> 執行 <code>npm init -y</code>（如果失敗了，<a href="https://gist.github.com/gaearon/246f6380610e262f8a648e3e51cad40d">這裡有方法解決</a>）<li><strong>第二步：</strong> 執行 <code>npm install babel-cli@6 babel-preset-react-app@3</code></ol><blockquote><p>提示<p>我們<strong>只使用 npm 來安裝 JSX preprocessor</strong>，之後你並不再需要它。React 和你的應用程式碼都可以留在<code>&#x3C;script></code> 標籤裡，並不需要進行修改。</blockquote><p>恭喜你！你剛剛為你的項目加入了<strong>發佈就緒的 JSX 設定</strong>了。</section><section id="run-jsx-preprocessor"class="level3"><h3>執行 JSX Preprocessor</h3><p>建立一個名為 <code>src</code> 的文件夾，然後執行這個終端指令：<pre class="language-console"><code class="language-console">npx babel --watch src --out-dir . --presets react-app/prod</code></pre><blockquote><p>Note<p><code>npx</code> 不是拼寫錯誤 —— 它是一個 <a href="https://medium.com/@maybekatz/introducing-npx-an-npm-package-runner-55f7d4bd282b">npm 5.2+ 附帶的 package 執行器</a>。<p>如果你看見一個寫着「You have mistakenly installed the <code>babel</code> package」的錯誤訊息，你或許跳過了<a href="#add-jsx-to-a-project">上一步</a>。在同一個文件夾裡執行它，然後再重新嘗試。</blockquote><p>請不要等待它完成 —— 這個指令會啟動一個 JSX 自動監測器。<p>如果你現在利用這個 <strong><a href="https://gist.github.com/gaearon/c8e112dc74ac44aac4f673f2c39d19d1/raw/09b951c86c1bf1116af741fa4664511f2f179f0a/like_button.js">JSX starter code</a></strong> 建立一個名為的 <code>src/like_button.js</code> 文件，監測器會建立一個預先處理過，由普通 JavaScript 程式碼組成，並且適合瀏覽器載入的 <code>like_button.js</code>。當你使用 JSX 來編輯文件時，轉換過程會自動重新執行。<p>再者，這也容許我們在舊瀏覽器上，使用現代 JavaScript 的語法特性，例如 class。我們剛加入的工具叫 Babel，你可以在<a href="https://babeljs.io/docs/en/babel-cli/">它的官方文件</a>裡了解更多。<p>如果你發現自己習慣了使用各種建立工具，而且希望它們為你做更多，<a href="./create-a-new-react-app.html">下一個章節</a>會介紹一些受歡迎和容易上手的 toolchains。不過，只利用 script 標籤也游刃有餘！ <span style="float:footnote"><a href="./index.html#toc">Go to TOC</a></span></section></section></section>