<!doctype html><html lang="zh-hant"><meta charset="utf-8"><title>Rendering 列表</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="rendering-列表"><h1 id="rendering-列表">Rendering 列表</h1><intro><p>你經常會需要用多個相似的 component 來顯示一系列的資料。這個時候你可以在 React 中使用 JavaScript 的 <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/filter"><code>filter()</code></a> 和 <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/map"><code>map()</code></a> 來過濾資料並轉換成包含多個 component 的 array。</p></intro><youwilllearn><ul><li>如何使用 JavaScript 的 <code>map()</code> 方法處理 array 資料 render component<li>如何使用 JavaScript 的 <code>filter()</code> 方法處理 array 資料 render 特定的 component<li>什麼時候使用及為什麼使用 React 中的 key</ul></youwilllearn><section class="level2"aria-labelledby="從-array-中-render-資料-rendering-data-from-arrays"><h2 id="從-array-中-render-資料-rendering-data-from-arrays">從 array 中 render 資料 {/<em>rendering-data-from-arrays</em>/}</h2><p>假設你有一個內容列表。<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>li<span class="token operator">></span><span class="token maybe-class-name">Creola</span> <span class="token maybe-class-name">Katherine</span> <span class="token maybe-class-name">Johnson</span><span class="token operator">:</span> mathematician<span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>li<span class="token operator">></span><span class="token maybe-class-name">Mario</span> <span class="token maybe-class-name">José</span> <span class="token maybe-class-name">Molina</span><span class="token operator">-</span><span class="token maybe-class-name">Pasquel</span> <span class="token maybe-class-name">Henríquez</span><span class="token operator">:</span> chemist<span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>li<span class="token operator">></span><span class="token maybe-class-name">Mohammad</span> <span class="token maybe-class-name">Abdus</span> <span class="token maybe-class-name">Salam</span><span class="token operator">:</span> physicist<span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>li<span class="token operator">></span><span class="token maybe-class-name">Percy</span> <span class="token maybe-class-name">Lavon</span> <span class="token maybe-class-name">Julian</span><span class="token operator">:</span> chemist<span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>li<span class="token operator">></span><span class="token maybe-class-name">Subrahmanyan</span> <span class="token maybe-class-name">Chandrasekhar</span><span class="token operator">:</span> astrophysicist<span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span></code></pre><p>在這個列表唯一的差異就在於各個內容和資料。當你建立介面時，常常需要使用不同資料顯示相同的 component，從評論列表到個人資料圖庫。在這些情況下，你可以將資料儲存在 JavaScript 的 object 和array 中，並使用 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map"><code>map()</code></a> 和 <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/filter"><code>filter()</code></a> 的方法來 render 一個 component 列表。<p>這裡有個使用 array 產生一個列表項目的簡單範例：<ol><li>將資料<strong>移入</strong>陣列：</ol><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'Creola Katherine Johnson: mathematician'</span><span class="token punctuation">,</span>
  <span class="token string">'Mario José Molina-Pasquel Henríquez: chemist'</span><span class="token punctuation">,</span>
  <span class="token string">'Mohammad Abdus Salam: physicist'</span><span class="token punctuation">,</span>
  <span class="token string">'Percy Lavon Julian: chemist'</span><span class="token punctuation">,</span>
  <span class="token string">'Subrahmanyan Chandrasekhar: astrophysicist'</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><ol start="2"><li>對 <code>people</code> 成員進行 <strong>Map</strong>，以建立新的 JSX 節點 array，<code>listItems</code>：</ol><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> listItems <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span> <span class="token operator">&#x3C;</span>li<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><ol start="3"><li>把 <code>listItems</code> 用 <code>&#x3C;ul></code> 包起來，並且<strong>回傳</strong>它：</ol><pre class="language-js"><code class="language-js"><span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>ul<span class="token operator">></span><span class="token punctuation">{</span>listItems<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>來看看運作結果：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'Creola Katherine Johnson: mathematician'</span><span class="token punctuation">,</span>
  <span class="token string">'Mario José Molina-Pasquel Henríquez: chemist'</span><span class="token punctuation">,</span>
  <span class="token string">'Mohammad Abdus Salam: physicist'</span><span class="token punctuation">,</span>
  <span class="token string">'Percy Lavon Julian: chemist'</span><span class="token punctuation">,</span>
  <span class="token string">'Subrahmanyan Chandrasekhar: astrophysicist'</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">List</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> listItems <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
    <span class="token operator">&#x3C;</span>li<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>ul<span class="token operator">></span><span class="token punctuation">{</span>listItems<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">li</span> <span class="token punctuation">{</span> <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><p>請注意上面的範例中 sandbox 顯示了一個錯誤訊息：</p><consoleblock level="error"><p>Warning: Each child in a list should have a unique "key" prop.</p></consoleblock><p>你將會在這個頁面稍後學到如何修正這個錯誤。在這之前，我們先將這個 array 資料更加結構化。</section><section class="level2"aria-labelledby="過濾-array-裡的項目-filtering-arrays-of-items"><h2 id="過濾-array-裡的項目-filtering-arrays-of-items">過濾 array 裡的項目 {/<em>filtering-arrays-of-items</em>/}</h2><p>這讓資料變得更結構化。<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Creola Katherine Johnson'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'mathematician'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Mario José Molina-Pasquel Henríquez'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'chemist'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Mohammad Abdus Salam'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'physicist'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Percy Lavon Julian'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'chemist'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Subrahmanyan Chandrasekhar'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'astrophysicist'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><p>假設你想要一種方法，僅顯示其職業為「chemist」的人。你可以使用 JavaScript 的 <code>filter()</code> 方法來篩選符合條件的項目。這個方法會讓 array 中的每個項目進行「過濾」(一個回傳 <code>true</code> 或 <code>false</code> 的函式)，最後回傳一個滿足篩選條件項目的新 array。<p>你只想要 <code>profession</code> 為 <code>'chemist'</code> 的項目。此「測試」函式看起來像 <code>(person) => person.profession === 'chemist'</code>。以下是如何將它們組合起來的方式：<ol><li>透過在 <code>people</code> 上呼叫 <code>filter()</code> 以 <code>person.profession === 'chemist'</code> 為過濾條件，<strong>建立</strong>一個僅包含「化學家」的新 <code>chemists</code> array：</ol><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> chemists <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
  person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">===</span> <span class="token string">'chemist'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><ol start="2"><li>現在對 <code>chemists</code> 進行 <code>map()</code>：</ol><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> listItems <span class="token operator">=</span> chemists<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
  <span class="token operator">&#x3C;</span>li<span class="token operator">></span>
     <span class="token operator">&#x3C;</span>img
       src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getImageUrl</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">}</span>
       alt<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
     <span class="token operator">/</span><span class="token operator">></span>
     <span class="token operator">&#x3C;</span>p<span class="token operator">></span>
       <span class="token operator">&#x3C;</span>b<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">:</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>b<span class="token operator">></span>
       <span class="token punctuation">{</span><span class="token string">' '</span> <span class="token operator">+</span> person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">+</span> <span class="token string">' '</span><span class="token punctuation">}</span>
       known <span class="token keyword control-flow">for</span> <span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">accomplishment</span><span class="token punctuation">}</span>
     <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><ol start="3"><li>最後，從你的 component 中<strong>回傳</strong> <code>listItems</code>：</ol><pre class="language-js"><code class="language-js"><span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>ul<span class="token operator">></span><span class="token punctuation">{</span>listItems<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span><span class="token punctuation">;</span></code></pre><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> people <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getImageUrl <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./utils.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">List</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> chemists <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
    person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">===</span> <span class="token string">'chemist'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> listItems <span class="token operator">=</span> chemists<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
    <span class="token operator">&#x3C;</span>li<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>img
        src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getImageUrl</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">}</span>
        alt<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>b<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">:</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>b<span class="token operator">></span>
        <span class="token punctuation">{</span><span class="token string">' '</span> <span class="token operator">+</span> person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">+</span> <span class="token string">' '</span><span class="token punctuation">}</span>
        known <span class="token keyword control-flow">for</span> <span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">accomplishment</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>ul<span class="token operator">></span><span class="token punctuation">{</span>listItems<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Creola Katherine Johnson'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'mathematician'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'spaceflight calculations'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'MK3eW3A'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Mario José Molina-Pasquel Henríquez'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'chemist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'discovery of Arctic ozone hole'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'mynHUSa'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Mohammad Abdus Salam'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'physicist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'electromagnetism theory'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'bE7W1ji'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Percy Lavon Julian'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'chemist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'pioneering cortisone drugs, steroids and birth control pills'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'IOjWm71'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Subrahmanyan Chandrasekhar'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'astrophysicist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'white dwarf star mass calculations'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'lrWQx8l'</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">getImageUrl</span><span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token string">'https://i.imgur.com/'</span> <span class="token operator">+</span>
    person<span class="token punctuation">.</span><span class="token property-access">imageId</span> <span class="token operator">+</span>
    <span class="token string">'s.jpg'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">ul</span> <span class="token punctuation">{</span> <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token unit">px</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">li</span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> auto <span class="token number">1</span><span class="token unit">fr</span><span class="token punctuation">;</span>
  <span class="token property">gap</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">img</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><pitfall><p>箭頭函式會隱式的回傳 <code>=></code> 之後的表達式，所以你可以省略 <code>return</code> 陳述式：<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> listItems <span class="token operator">=</span> chemists<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
  <span class="token operator">&#x3C;</span>li<span class="token operator">></span><span class="token spread operator">...</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span> <span class="token comment">// Implicit return!</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>然而，<strong>如果你的 <code>=></code> 後面跟著 <code>{</code> 大括號，那你必須明確地撰寫 <code>return</code> 陳述式！</strong><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> listItems <span class="token operator">=</span> chemists<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// Curly brace</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>li<span class="token operator">></span><span class="token spread operator">...</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>包含 <code>=> {</code> 的箭頭函式被稱為「區塊主體函式」。它們讓你可以撰寫多行程式碼，但你<em>必須</em>自己撰寫 <code>return</code> 陳述式。如果你忘了寫，函式就不會回傳任何值！詳細說明可以參考<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions#function_body">這裡</a>。</p></pitfall></section><section class="level2"aria-labelledby="使用-key-保持列表項目的順序-keeping-list-items-in-order-with-key"><h2 id="使用-key-保持列表項目的順序-keeping-list-items-in-order-with-key">使用 <code>key</code> 保持列表項目的順序 {/<em>keeping-list-items-in-order-with-key</em>/}</h2><p>請注意上面所有的範例，所有的 sandbox 都顯示了一個錯誤訊息：</p><consoleblock level="error"><p>Warning: Each child in a list should have a unique "key" prop.</p></consoleblock><p>你必須給 array 裡的每一個項目指定一個 <code>key</code> -- 它可以是 string 或是 number，可以在 array 的其他項目中唯一的識別它。<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token spread operator">...</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span></code></pre><note><p>在 <code>map()</code> 方法裡呼叫 JSX elements 總是需要指定 key！</p></note><p>這些 key 會告訴 React ，每個 component 對應著 array 裡的哪一項，React 就可以把它們對應起來。這在某些需要被操作的 array 上非常重要，例如排序、新增或是刪除資料等。一個合適的 key 可以幫助 React 推斷發生什麼事，從而正確的更新 DOM Tree。<p>與其即時產生 <code>key</code>，你應該將它們包含在你的資料中：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> people <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getImageUrl <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./utils.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">List</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> listItems <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
    <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>img
        src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getImageUrl</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">}</span>
        alt<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>b<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>b<span class="token operator">></span>
          <span class="token punctuation">{</span><span class="token string">' '</span> <span class="token operator">+</span> person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">+</span> <span class="token string">' '</span><span class="token punctuation">}</span>
          known <span class="token keyword control-flow">for</span> <span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">accomplishment</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>ul<span class="token operator">></span><span class="token punctuation">{</span>listItems<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Creola Katherine Johnson'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'mathematician'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'spaceflight calculations'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'MK3eW3A'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Mario José Molina-Pasquel Henríquez'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'chemist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'discovery of Arctic ozone hole'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'mynHUSa'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Mohammad Abdus Salam'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'physicist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'electromagnetism theory'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'bE7W1ji'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Percy Lavon Julian'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'chemist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'pioneering cortisone drugs, steroids and birth control pills'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'IOjWm71'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Subrahmanyan Chandrasekhar'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'astrophysicist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'white dwarf star mass calculations'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'lrWQx8l'</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">getImageUrl</span><span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token string">'https://i.imgur.com/'</span> <span class="token operator">+</span>
    person<span class="token punctuation">.</span><span class="token property-access">imageId</span> <span class="token operator">+</span>
    <span class="token string">'s.jpg'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">ul</span> <span class="token punctuation">{</span> <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token unit">px</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">li</span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> auto <span class="token number">1</span><span class="token unit">fr</span><span class="token punctuation">;</span>
  <span class="token property">gap</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">img</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><deepdive><section class="level4"aria-labelledby="為每個列表顯示多個-dom-nodes-displaying-several-dom-nodes-for-each-list-item"><h4 id="為每個列表顯示多個-dom-nodes-displaying-several-dom-nodes-for-each-list-item">為每個列表顯示多個 DOM nodes {/<em>displaying-several-dom-nodes-for-each-list-item</em>/}</h4><p>如果你想讓每個列表項目都 render 多個 DOM nodes 而不是一個的話，你該怎麼做？<p><a href="/reference/react/Fragment"><code>&#x3C;>...&#x3C;/></code> Fragment</a> 簡短的語法沒有辦法賦予 key 值，所以你只能使用 <code>&#x3C;div></code> 將內容包起來，或是使用長一點且更明確的 <a href="/reference/react/Fragment#rendering-a-list-of-fragments"><code>&#x3C;Fragment></code></a> 語法<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Fragment</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>

<span class="token keyword">const</span> listItems <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Fragment</span> key<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
    <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">bio</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Fragment</span><span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Fragments 不會顯示在 DOM 上，所以這串程式碼換轉換成 <code>&#x3C;h1></code>、<code>&#x3C;p></code>、<code>&#x3C;h1></code>、<code>&#x3C;p></code> 等扁平列表。</section><section class="level3"aria-labelledby="如何取得你的-key-where-to-get-your-key"><h3 id="如何取得你的-key-where-to-get-your-key">如何取得你的 <code>key</code> {/<em>where-to-get-your-key</em>/}</h3><p>不同的資料來源提供不同的 keys：<ul><li><strong>來自資料庫的資料：</strong>如果你的資料是來自於資料庫，你可以使用資料庫的 keys/IDs ，它們本身就具有唯一性。<li><strong>本機產生的資料：</strong>如果你資料的產生和儲存都在本機 (例如筆記軟體的筆記)，那麼你可使用計數器、<a href="https://developer.mozilla.org/en-US/docs/Web/API/Crypto/randomUUID"><code>crypto.randomUUID()</code></a> 或是像 <a href="https://www.npmjs.com/package/uuid"><code>uuid</code></a> 的套件來產生這些 key 值。</ul></section><section class="level3"aria-labelledby="key-的規則-rules-of-keys"><h3 id="key-的規則-rules-of-keys">Key 的規則 {/<em>rules-of-keys</em>/}</h3><ul><li><strong>Siblings 之間的 key 必須是唯一的。</strong> 然而，在<em>不同</em>的 array 中使用相同的 key，對於 JSX node 是可以的。<li><strong>Key 不能改變</strong>否則就失去使用它的意義！所以不要在 rendering 時動態產生它們。</ul></section><section class="level3"aria-labelledby="為什麼-react-需要-key-why-does-react-need-keys"><h3 id="為什麼-react-需要-key-why-does-react-need-keys">為什麼 React 需要 key？ {/<em>why-does-react-need-keys</em>/}</h3><p>想像你的桌面上沒有檔案名稱。相反的，而是按順序來區分它們 -- 第一個檔案、第二個檔案等等。你可能會慢慢習慣，但一旦刪除了檔案，就會變得很混亂。第二個檔案就會變成第一個檔案，第三個檔案就會變成第二個檔案，以此類推。<p>在資料夾中的檔案名稱和 array 中的 JSX key 有類似的功能。它們讓我們可以在 siblings 之間識別一個項目。一個選擇得當的 key 提供的訊息比array 中的索引來得更好。即使<em>位置</em>由於重新排序而改變，<code>key</code> 也可以讓 React 在其生命週期中識別該項目。</p><pitfall><p>你可能會想用 array 中的索引值來當作 <code>key</code> 值，實際上，當你沒有指定 <code>key</code> 值時，React 會使用它。但是，如果插入、刪除項目或重新排序 array，你 render 項目的順序將會改變。索引作為 key 往往會導致微妙且令人困惑的錯誤。<p>類似的概念還有不要隨機產生 key，例如像是 <code>key={Math.random()}</code>。這會導致 key 在 render 時永遠無法 match，導致所有 component 和 DOM 每次都會被重新建立。不僅速度慢，而且會失去項目列表內使用者的輸入。取而代之的是使用基於資料的穩定 ID。<p>請注意 component 不會將 <code>key</code> 當成 props 的一部分。key 的存在只用於提示 React 本身。如果你的 component 需要一個 ID，那麼請另外傳送 prop 給 component： <code>&#x3C;Profile key={id} userId={id} /></code>。</p></pitfall><recap><p>在這篇文章中，你學會了：<ul><li>如何從 component 抽出資料，並把它們放入像是 array 或是 object 結構中。<li>如何使用 JavaScript 的 <code>map</code> 方法來產生一組相似的 component。<li>如何使用 JavaScript 的 <code>filter</code> 方法來過濾 array。<li>為什麼以及如何在集合中的每個 component 設定 <code>key</code>，使 React 能在資料位置被改變或是發生變化時，能持續追蹤這些 component。</ul></recap><challenges><section class="level4"aria-labelledby="將列表一分為二-splitting-a-list-in-two"><h4 id="將列表一分為二-splitting-a-list-in-two">將列表一分為二 {/<em>splitting-a-list-in-two</em>/}</h4><p>此範例顯示所有人的列表。<p>請試著將列表分為前後兩個列表：分別是<strong>化學家</strong>與<strong>其他科學家</strong>。像剛剛學會的一樣，你可以透過 <code>person.profession === 'chemist'</code> 這項條件來判斷一個人不是化學家。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> people <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getImageUrl <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./utils.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">List</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> listItems <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
    <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>img
        src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getImageUrl</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">}</span>
        alt<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>b<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">:</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>b<span class="token operator">></span>
        <span class="token punctuation">{</span><span class="token string">' '</span> <span class="token operator">+</span> person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">+</span> <span class="token string">' '</span><span class="token punctuation">}</span>
        known <span class="token keyword control-flow">for</span> <span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">accomplishment</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>article<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Scientists</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span><span class="token punctuation">{</span>listItems<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>article<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Creola Katherine Johnson'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'mathematician'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'spaceflight calculations'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'MK3eW3A'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Mario José Molina-Pasquel Henríquez'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'chemist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'discovery of Arctic ozone hole'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'mynHUSa'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Mohammad Abdus Salam'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'physicist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'electromagnetism theory'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'bE7W1ji'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Percy Lavon Julian'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'chemist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'pioneering cortisone drugs, steroids and birth control pills'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'IOjWm71'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Subrahmanyan Chandrasekhar'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'astrophysicist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'white dwarf star mass calculations'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'lrWQx8l'</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">getImageUrl</span><span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token string">'https://i.imgur.com/'</span> <span class="token operator">+</span>
    person<span class="token punctuation">.</span><span class="token property-access">imageId</span> <span class="token operator">+</span>
    <span class="token string">'s.jpg'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">ul</span> <span class="token punctuation">{</span> <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token unit">px</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">li</span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> auto <span class="token number">1</span><span class="token unit">fr</span><span class="token punctuation">;</span>
  <span class="token property">gap</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">img</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><solution><p>你可以使用 <code>filter()</code> 兩次來建立兩個獨立的 array，然後使用 <code>map</code> 方法遍歷它們來得到結果。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> people <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getImageUrl <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./utils.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">List</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> chemists <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
    person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">===</span> <span class="token string">'chemist'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> everyoneElse <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
    person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">!==</span> <span class="token string">'chemist'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>article<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Scientists</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token maybe-class-name">Chemists</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token punctuation">{</span>chemists<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
          <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token operator">&#x3C;</span>img
              src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getImageUrl</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">}</span>
              alt<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&#x3C;</span>p<span class="token operator">></span>
              <span class="token operator">&#x3C;</span>b<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">:</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>b<span class="token operator">></span>
              <span class="token punctuation">{</span><span class="token string">' '</span> <span class="token operator">+</span> person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">+</span> <span class="token string">' '</span><span class="token punctuation">}</span>
              known <span class="token keyword control-flow">for</span> <span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">accomplishment</span><span class="token punctuation">}</span>
            <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
          <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token maybe-class-name">Everyone</span> <span class="token maybe-class-name">Else</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token punctuation">{</span>everyoneElse<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
          <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token operator">&#x3C;</span>img
              src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getImageUrl</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">}</span>
              alt<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&#x3C;</span>p<span class="token operator">></span>
              <span class="token operator">&#x3C;</span>b<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">:</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>b<span class="token operator">></span>
              <span class="token punctuation">{</span><span class="token string">' '</span> <span class="token operator">+</span> person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">+</span> <span class="token string">' '</span><span class="token punctuation">}</span>
              known <span class="token keyword control-flow">for</span> <span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">accomplishment</span><span class="token punctuation">}</span>
            <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
          <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>article<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Creola Katherine Johnson'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'mathematician'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'spaceflight calculations'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'MK3eW3A'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Mario José Molina-Pasquel Henríquez'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'chemist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'discovery of Arctic ozone hole'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'mynHUSa'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Mohammad Abdus Salam'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'physicist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'electromagnetism theory'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'bE7W1ji'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Percy Lavon Julian'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'chemist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'pioneering cortisone drugs, steroids and birth control pills'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'IOjWm71'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Subrahmanyan Chandrasekhar'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'astrophysicist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'white dwarf star mass calculations'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'lrWQx8l'</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">getImageUrl</span><span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token string">'https://i.imgur.com/'</span> <span class="token operator">+</span>
    person<span class="token punctuation">.</span><span class="token property-access">imageId</span> <span class="token operator">+</span>
    <span class="token string">'s.jpg'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">ul</span> <span class="token punctuation">{</span> <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token unit">px</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">li</span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> auto <span class="token number">1</span><span class="token unit">fr</span><span class="token punctuation">;</span>
  <span class="token property">gap</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">img</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><p>這個解決方案中，我們直接在父層 <code>ul</code> element 中執行 <code>map</code> 方法。但如果你想增加程式碼的可讀性，你也可以使用變數保存 <code>map</code> 之後的結果。<p>現在仍有一些重複的部分出現在被 render 的列表中。你可以進一步將重複的部分抽取到一個 <code>&#x3C;ListSection></code> component：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> people <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getImageUrl <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./utils.js'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ListSection</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> title<span class="token punctuation">,</span> people <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token punctuation">{</span>people<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
          <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token operator">&#x3C;</span>img
              src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getImageUrl</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">}</span>
              alt<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&#x3C;</span>p<span class="token operator">></span>
              <span class="token operator">&#x3C;</span>b<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">:</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>b<span class="token operator">></span>
              <span class="token punctuation">{</span><span class="token string">' '</span> <span class="token operator">+</span> person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">+</span> <span class="token string">' '</span><span class="token punctuation">}</span>
              known <span class="token keyword control-flow">for</span> <span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">accomplishment</span><span class="token punctuation">}</span>
            <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
          <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">List</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> chemists <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
    person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">===</span> <span class="token string">'chemist'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> everyoneElse <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
    person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">!==</span> <span class="token string">'chemist'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>article<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Scientists</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">ListSection</span>
        title<span class="token operator">=</span><span class="token string">"Chemists"</span>
        people<span class="token operator">=</span><span class="token punctuation">{</span>chemists<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">ListSection</span>
        title<span class="token operator">=</span><span class="token string">"Everyone Else"</span>
        people<span class="token operator">=</span><span class="token punctuation">{</span>everyoneElse<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>article<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Creola Katherine Johnson'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'mathematician'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'spaceflight calculations'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'MK3eW3A'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Mario José Molina-Pasquel Henríquez'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'chemist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'discovery of Arctic ozone hole'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'mynHUSa'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Mohammad Abdus Salam'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'physicist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'electromagnetism theory'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'bE7W1ji'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Percy Lavon Julian'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'chemist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'pioneering cortisone drugs, steroids and birth control pills'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'IOjWm71'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Subrahmanyan Chandrasekhar'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'astrophysicist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'white dwarf star mass calculations'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'lrWQx8l'</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">getImageUrl</span><span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token string">'https://i.imgur.com/'</span> <span class="token operator">+</span>
    person<span class="token punctuation">.</span><span class="token property-access">imageId</span> <span class="token operator">+</span>
    <span class="token string">'s.jpg'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">ul</span> <span class="token punctuation">{</span> <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token unit">px</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">li</span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> auto <span class="token number">1</span><span class="token unit">fr</span><span class="token punctuation">;</span>
  <span class="token property">gap</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">img</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><p>細心的讀者可能會注意到我們使用兩個 <code>filter</code> 呼叫來檢查每個人的職業兩次。檢查 property 非常快，所以在這個範例中沒問題。如果你的邏輯操作很昂貴，那你可以使用迴圈進行一次檢查來代替兩次的 <code>filter</code>。<p>事實上，如果 <code>people</code> 永遠不會改變，你可以將這段程式碼從你的 component 中移除。從 React 的角度來說，它只關心你最後給他的是不是包含 JSX nodes 的 array ，並不在乎 array 是怎麼來的：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> people <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getImageUrl <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./utils.js'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> chemists <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> everyoneElse <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
people<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">===</span> <span class="token string">'chemist'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    chemists<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
    everyoneElse<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ListSection</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> title<span class="token punctuation">,</span> people <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token punctuation">{</span>people<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span>
          <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token operator">&#x3C;</span>img
              src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getImageUrl</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">}</span>
              alt<span class="token operator">=</span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&#x3C;</span>p<span class="token operator">></span>
              <span class="token operator">&#x3C;</span>b<span class="token operator">></span><span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">:</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>b<span class="token operator">></span>
              <span class="token punctuation">{</span><span class="token string">' '</span> <span class="token operator">+</span> person<span class="token punctuation">.</span><span class="token property-access">profession</span> <span class="token operator">+</span> <span class="token string">' '</span><span class="token punctuation">}</span>
              known <span class="token keyword control-flow">for</span> <span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token property-access">accomplishment</span><span class="token punctuation">}</span>
            <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
          <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">List</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>article<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Scientists</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">ListSection</span>
        title<span class="token operator">=</span><span class="token string">"Chemists"</span>
        people<span class="token operator">=</span><span class="token punctuation">{</span>chemists<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">ListSection</span>
        title<span class="token operator">=</span><span class="token string">"Everyone Else"</span>
        people<span class="token operator">=</span><span class="token punctuation">{</span>everyoneElse<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>article<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Creola Katherine Johnson'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'mathematician'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'spaceflight calculations'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'MK3eW3A'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Mario José Molina-Pasquel Henríquez'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'chemist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'discovery of Arctic ozone hole'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'mynHUSa'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Mohammad Abdus Salam'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'physicist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'electromagnetism theory'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'bE7W1ji'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Percy Lavon Julian'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'chemist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'pioneering cortisone drugs, steroids and birth control pills'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'IOjWm71'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Subrahmanyan Chandrasekhar'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">profession</span><span class="token operator">:</span> <span class="token string">'astrophysicist'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accomplishment</span><span class="token operator">:</span> <span class="token string">'white dwarf star mass calculations'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageId</span><span class="token operator">:</span> <span class="token string">'lrWQx8l'</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">getImageUrl</span><span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token string">'https://i.imgur.com/'</span> <span class="token operator">+</span>
    person<span class="token punctuation">.</span><span class="token property-access">imageId</span> <span class="token operator">+</span>
    <span class="token string">'s.jpg'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">ul</span> <span class="token punctuation">{</span> <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token unit">px</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">li</span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> auto <span class="token number">1</span><span class="token unit">fr</span><span class="token punctuation">;</span>
  <span class="token property">gap</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">img</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack></solution></section><section class="level4"aria-labelledby="在-component-內的巢狀列表-nested-lists-in-one-component"><h4 id="在-component-內的巢狀列表-nested-lists-in-one-component">在 component 內的巢狀列表 {/<em>nested-lists-in-one-component</em>/}</h4><p>請根據你的 array 產生食譜列表！在食譜列表中，請使用 <code>&#x3C;h2></code> 顯示菜色的名稱，並使用 <code>&#x3C;ul></code> 列出它所需的原料。</p><hint><p>這裡會需要使用兩層巢狀的 <code>map</code> 呼叫。</p></hint><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> recipes <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RecipeList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Recipes</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> recipes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Greek Salad'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'tomatoes'</span><span class="token punctuation">,</span> <span class="token string">'cucumber'</span><span class="token punctuation">,</span> <span class="token string">'onion'</span><span class="token punctuation">,</span> <span class="token string">'olives'</span><span class="token punctuation">,</span> <span class="token string">'feta'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Hawaiian Pizza'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'pizza crust'</span><span class="token punctuation">,</span> <span class="token string">'pizza sauce'</span><span class="token punctuation">,</span> <span class="token string">'mozzarella'</span><span class="token punctuation">,</span> <span class="token string">'ham'</span><span class="token punctuation">,</span> <span class="token string">'pineapple'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Hummus'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'chickpeas'</span><span class="token punctuation">,</span> <span class="token string">'olive oil'</span><span class="token punctuation">,</span> <span class="token string">'garlic cloves'</span><span class="token punctuation">,</span> <span class="token string">'lemon'</span><span class="token punctuation">,</span> <span class="token string">'tahini'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></sandpack><solution><p>這是一種可能的解法：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> recipes <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RecipeList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Recipes</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token punctuation">{</span>recipes<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">recipe</span> <span class="token arrow operator">=></span>
        <span class="token operator">&#x3C;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>recipe<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token punctuation">{</span>recipe<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
          <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
            <span class="token punctuation">{</span>recipe<span class="token punctuation">.</span><span class="token property-access">ingredients</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">ingredient</span> <span class="token arrow operator">=></span>
              <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>ingredient<span class="token punctuation">}</span><span class="token operator">></span>
                <span class="token punctuation">{</span>ingredient<span class="token punctuation">}</span>
              <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
            <span class="token punctuation">)</span><span class="token punctuation">}</span>
          <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> recipes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Greek Salad'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'tomatoes'</span><span class="token punctuation">,</span> <span class="token string">'cucumber'</span><span class="token punctuation">,</span> <span class="token string">'onion'</span><span class="token punctuation">,</span> <span class="token string">'olives'</span><span class="token punctuation">,</span> <span class="token string">'feta'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Hawaiian Pizza'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'pizza crust'</span><span class="token punctuation">,</span> <span class="token string">'pizza sauce'</span><span class="token punctuation">,</span> <span class="token string">'mozzarella'</span><span class="token punctuation">,</span> <span class="token string">'ham'</span><span class="token punctuation">,</span> <span class="token string">'pineapple'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Hummus'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'chickpeas'</span><span class="token punctuation">,</span> <span class="token string">'olive oil'</span><span class="token punctuation">,</span> <span class="token string">'garlic cloves'</span><span class="token punctuation">,</span> <span class="token string">'lemon'</span><span class="token punctuation">,</span> <span class="token string">'tahini'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></sandpack><p>每個 <code>recipes</code> 已經包含一個 <code>id</code> 欄位，所以外部迴圈使用它作為 <code>key</code>。沒有可以用於迴圈食材的 ID。但是，可以假設在同一個食譜中不會列出相同的食材，所以它的名字可以用作 <code>key</code>。或者，你可以更改資料結構以加入 ID，或者使用索引作為 <code>key</code>（但注意不能安全地重新排序食材）。</p></solution></section><section class="level4"aria-labelledby="把列表提取成一個-component-extracting-a-list-item-component"><h4 id="把列表提取成一個-component-extracting-a-list-item-component">把列表提取成一個 component {/<em>extracting-a-list-item-component</em>/}</h4><p><code>RecipeList</code> component 的程式碼有兩層巢狀的 <code>map</code>。為了讓程式碼簡化，我們會抽出一個 <code>Recipe</code> component 並接受 <code>id</code>、<code>name</code> 和 <code>ingredients</code> 作為 props，在這種情況下，你會把外層的 <code>key</code> 放在哪裡？原因是什麼？</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> recipes <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RecipeList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Recipes</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token punctuation">{</span>recipes<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">recipe</span> <span class="token arrow operator">=></span>
        <span class="token operator">&#x3C;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>recipe<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token punctuation">{</span>recipe<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
          <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
            <span class="token punctuation">{</span>recipe<span class="token punctuation">.</span><span class="token property-access">ingredients</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">ingredient</span> <span class="token arrow operator">=></span>
              <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>ingredient<span class="token punctuation">}</span><span class="token operator">></span>
                <span class="token punctuation">{</span>ingredient<span class="token punctuation">}</span>
              <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
            <span class="token punctuation">)</span><span class="token punctuation">}</span>
          <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> recipes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Greek Salad'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'tomatoes'</span><span class="token punctuation">,</span> <span class="token string">'cucumber'</span><span class="token punctuation">,</span> <span class="token string">'onion'</span><span class="token punctuation">,</span> <span class="token string">'olives'</span><span class="token punctuation">,</span> <span class="token string">'feta'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Hawaiian Pizza'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'pizza crust'</span><span class="token punctuation">,</span> <span class="token string">'pizza sauce'</span><span class="token punctuation">,</span> <span class="token string">'mozzarella'</span><span class="token punctuation">,</span> <span class="token string">'ham'</span><span class="token punctuation">,</span> <span class="token string">'pineapple'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Hummus'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'chickpeas'</span><span class="token punctuation">,</span> <span class="token string">'olive oil'</span><span class="token punctuation">,</span> <span class="token string">'garlic cloves'</span><span class="token punctuation">,</span> <span class="token string">'lemon'</span><span class="token punctuation">,</span> <span class="token string">'tahini'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></sandpack><solution><p>你可以將外層 <code>map</code> 中的 JSX 複製並貼到一個新的 <code>Recipe</code> component 中，並將其作為該 component 的回傳值。然後，將原先的 <code>recipe.name</code> 更改為 <code>name</code>、<code>recipe.id</code> 更改為 <code>id</code>，依此類推，最後將它們作為 <code>props</code> 傳遞給 <code>Recipe</code> component。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> recipes <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./data.js'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Recipe</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> ingredients <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token punctuation">{</span>ingredients<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">ingredient</span> <span class="token arrow operator">=></span>
          <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>ingredient<span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token punctuation">{</span>ingredient<span class="token punctuation">}</span>
          <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RecipeList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Recipes</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token punctuation">{</span>recipes<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">recipe</span> <span class="token arrow operator">=></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Recipe</span> <span class="token punctuation">{</span><span class="token spread operator">...</span>recipe<span class="token punctuation">}</span> key<span class="token operator">=</span><span class="token punctuation">{</span>recipe<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> recipes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Greek Salad'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'tomatoes'</span><span class="token punctuation">,</span> <span class="token string">'cucumber'</span><span class="token punctuation">,</span> <span class="token string">'onion'</span><span class="token punctuation">,</span> <span class="token string">'olives'</span><span class="token punctuation">,</span> <span class="token string">'feta'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Hawaiian Pizza'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'pizza crust'</span><span class="token punctuation">,</span> <span class="token string">'pizza sauce'</span><span class="token punctuation">,</span> <span class="token string">'mozzarella'</span><span class="token punctuation">,</span> <span class="token string">'ham'</span><span class="token punctuation">,</span> <span class="token string">'pineapple'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Hummus'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ingredients</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'chickpeas'</span><span class="token punctuation">,</span> <span class="token string">'olive oil'</span><span class="token punctuation">,</span> <span class="token string">'garlic cloves'</span><span class="token punctuation">,</span> <span class="token string">'lemon'</span><span class="token punctuation">,</span> <span class="token string">'tahini'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></sandpack><p>這裡使用 <code>&#x3C;Recipe {...recipe} key={recipe.id} /></code> 是一種簡寫方式，它表示將 <code>recipe</code> object 中的每個property 都作為 props 傳遞給 <code>Recipe</code> component。這種簡寫方式與直接明確列出每個 prop 是一樣的，例如 <code>&#x3C;Recipe id={recipe.id} name={recipe.name} ingredients={recipe.ingredients} key={recipe.id} /></code>。<p><strong>注意這裡的 <code>key</code> 是在 <code>&#x3C;Recipe></code> component 本身上的，而不是在 <code>Recipe</code> 內回傳的 <code>&#x3C;div></code> 上。</strong> 這是因為這個 <code>key</code> 只有在 array 上下文中使用才有意義。之前的寫法中，你有一個 <code>&#x3C;div></code> 的 array ，所以每個 <code>&#x3C;div></code> 都需要一個 <code>key</code>，但現在你有了一個 <code>&#x3C;Recipe></code> 的 array 。換句話說，當你提取一個 component 時，不要忘記將 <code>key</code> 放在你複製和貼上的 JSX 外層 component 上。</p></solution></section><section class="level4"aria-labelledby="帶有分隔線的列表-list-with-a-separator"><h4 id="帶有分隔線的列表-list-with-a-separator">帶有分隔線的列表 {/<em>list-with-a-separator</em>/}</h4><p>這個範例展示了葛飾北斎一首著名的俳句，它的每一行都由 <code>&#x3C;p></code> 標籤包覆。你需要在段落之間插入一個 <code>&#x3C;hr /></code> 分隔線。你的結果大概會像這個樣子：<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>article<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token constant">I</span> write<span class="token punctuation">,</span> erase<span class="token punctuation">,</span> rewrite<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Erase</span> again<span class="token punctuation">,</span> and then<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token constant">A</span> poppy blooms<span class="token punctuation">.</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span>article<span class="token operator">></span></code></pre><p>一句俳句通常只有三行，但是你的解答應當適用於任何行數。注意 <code>&#x3C;hr /></code> elements 只會存在於 <code>&#x3C;p></code> <em>之間</em>，而不會出現在開頭或是結尾！</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> poem <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">lines</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'I write, erase, rewrite'</span><span class="token punctuation">,</span>
    <span class="token string">'Erase again, and then'</span><span class="token punctuation">,</span>
    <span class="token string">'A poppy blooms.'</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Poem</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>article<span class="token operator">></span>
      <span class="token punctuation">{</span>poem<span class="token punctuation">.</span><span class="token property-access">lines</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">line<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span>
        <span class="token operator">&#x3C;</span>p key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token punctuation">{</span>line<span class="token punctuation">}</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>article<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">p</span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> Georgia<span class="token punctuation">,</span> serif<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">hr</span> <span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">120</span><span class="token unit">px</span> <span class="token number">0</span> <span class="token number">120</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">px</span> dashed <span class="token hexcode color">#45c3d8</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>(這是一個比較少見可以把索引值當作 <code>key</code> 的範例，因爲詩句之間的順序是固定的。)</p><hint><p>你可以嘗試把原本的 <code>map</code> 改成手動循環，或著嘗試使用 fragment 語法。</p></hint><solution><p>你可以寫一個迴圈把 <code>&#x3C;hr /></code> 和 <code>&#x3C;p>...&#x3C;/p></code> 插入到輸出的 array 中：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> poem <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">lines</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'I write, erase, rewrite'</span><span class="token punctuation">,</span>
    <span class="token string">'Erase again, and then'</span><span class="token punctuation">,</span>
    <span class="token string">'A poppy blooms.'</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Poem</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> output <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">// Fill the output array</span>
  poem<span class="token punctuation">.</span><span class="token property-access">lines</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">line<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    output<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span>hr key<span class="token operator">=</span><span class="token punctuation">{</span>i <span class="token operator">+</span> <span class="token string">'-separator'</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    output<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span>p key<span class="token operator">=</span><span class="token punctuation">{</span>i <span class="token operator">+</span> <span class="token string">'-text'</span><span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token punctuation">{</span>line<span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Remove the first &#x3C;hr /></span>
  output<span class="token punctuation">.</span><span class="token method function property-access">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>article<span class="token operator">></span>
      <span class="token punctuation">{</span>output<span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>article<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">p</span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> Georgia<span class="token punctuation">,</span> serif<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">hr</span> <span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">120</span><span class="token unit">px</span> <span class="token number">0</span> <span class="token number">120</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">px</span> dashed <span class="token hexcode color">#45c3d8</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>原本使用詩句索引值作為 <code>key</code> 的方法已經行不通了，因爲現在 array 裡同時包含了分隔線和詩句。但是，你可以用加入後綴的方式給它們賦予獨一無二的 <code>key</code> 值，像是 <code>key={i + '-text'}</code> 這樣。<p>或著，你可以生產一個 fragment 包含 <code>&#x3C;hr /></code> 和 <code>&#x3C;p>...&#x3C;/p></code>，但因為 fragment 簡寫 <code>&#x3C;>...&#x3C;/></code> 不支援設定 <code>key</code>，所以你需要寫成 <code>&#x3C;Fragment></code> 形式。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Fragment</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> poem <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">lines</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'I write, erase, rewrite'</span><span class="token punctuation">,</span>
    <span class="token string">'Erase again, and then'</span><span class="token punctuation">,</span>
    <span class="token string">'A poppy blooms.'</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Poem</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>article<span class="token operator">></span>
      <span class="token punctuation">{</span>poem<span class="token punctuation">.</span><span class="token property-access">lines</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">line<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Fragment</span> key<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token punctuation">{</span>i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&#x26;&#x26;</span> <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span>
          <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token punctuation">{</span>line<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Fragment</span><span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>article<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">p</span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> Georgia<span class="token punctuation">,</span> serif<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">hr</span> <span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">120</span><span class="token unit">px</span> <span class="token number">0</span> <span class="token number">120</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">px</span> dashed <span class="token hexcode color">#45c3d8</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>記住，使用 fragment 語法 (通常寫作 <code>&#x3C;> &#x3C;/></code>) 來包覆 JSX nodes 可避免引入額外的 <code>div</code>！</p></solution><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></challenges></section></deepdive></section></section>