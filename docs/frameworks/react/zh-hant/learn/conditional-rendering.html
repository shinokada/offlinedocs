<!doctype html><html lang="zh-hant"><meta charset="utf-8"><title>條件 Rendering</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="條件-rendering"><h1 id="條件-rendering">條件 Rendering</h1><intro><p>有時候你的 component 會需要根據不同的條件來顯示不同的內容。在 React 中，你可以使用 JavaScript 中 <code>if</code> 陳述式、<code>&#x26;&#x26;</code> 以及 <code>? :</code> 運算子等語法來根據條件 render 不同的 JSX。</p></intro><youwilllearn><ul><li>如何根據不同條件回傳不同 JSX<li>如何有條件地包含或排除一段 JSX<li>React codebases 中常見的條件式簡短語法</ul></youwilllearn><section class="level2"aria-labelledby="條件性地回傳-jsx-conditionally-returning-jsx"><h2 id="條件性地回傳-jsx-conditionally-returning-jsx">條件性地回傳 JSX {/<em>conditionally-returning-jsx</em>/}</h2><p>舉例來說，你在 <code>PackingList</code> component 中 render 了數個可以被標記為打包完成與否的 <code>Item</code> component：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Item</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> isPacked <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">PackingList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>section<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Sally</span> <span class="token maybe-class-name">Ride</span>'s <span class="token maybe-class-name">Packing</span> <span class="token maybe-class-name">List</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Space suit"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Helmet with a golden leaf"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Photo of Tam"</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>section<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>注意有些 <code>Item</code> component 的 <code>isPacked</code> prop 的值是 <code>true</code> 而非 <code>false</code>。而你想要在 <code>isPacked={true}</code> 的情況下，為已打包的項目加上一個勾號 (✔)。<p>你可以將此情境用以下 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/if...else"><code>if</code>/<code>else</code> 陳述式</a>來表示：<pre class="language-js"><code class="language-js"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>isPacked<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span> ✔<span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>如果 <code>isPacked</code> prop 的值為 <code>true</code>，這段程式碼會<strong>回傳一個不同的 JSX tree</strong>。藉由此更動，部分項目內容的最後會有一個勾號。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Item</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> isPacked <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>isPacked<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span> ✔<span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">PackingList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>section<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Sally</span> <span class="token maybe-class-name">Ride</span>'s <span class="token maybe-class-name">Packing</span> <span class="token maybe-class-name">List</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Space suit"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Helmet with a golden leaf"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Photo of Tam"</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>section<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>請嘗試更改在不同情況下回傳的內容，並觀察結果會有何不同！<p>注意你是如何使用 JavaScript 的 <code>if</code> 和 <code>return</code> 陳述式建立分支邏輯的。在 React 中，控制流程 (例如條件) 是交由 JavaScript 來處理的。<section class="level3"aria-labelledby="條件式地使用-null-代表不回傳任何內容-conditionally-returning-nothing-with-null"><h3 id="條件式地使用-null-代表不回傳任何內容-conditionally-returning-nothing-with-null">條件式地使用 <code>null</code> 代表不回傳任何內容 {/<em>conditionally-returning-nothing-with-null</em>/}</h3><p>在某些情況下，你可能不想 render 任何東西。舉例來說，你不想顯示任何已經打包好的項目，但 component 必須要有個回傳值。在這種情況下，你可以回傳 <code>null</code>：<pre class="language-js"><code class="language-js"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>isPacked<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>如果 <code>isPacked</code> 的值為 <code>true</code>，component 不回傳任何東西 (意即 <code>null</code>)。否則，component 會回傳要 render 的 JSX。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Item</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> isPacked <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>isPacked<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">PackingList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>section<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Sally</span> <span class="token maybe-class-name">Ride</span>'s <span class="token maybe-class-name">Packing</span> <span class="token maybe-class-name">List</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Space suit"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Helmet with a golden leaf"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Photo of Tam"</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>section<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>在實際開發中，component 回傳結果為 <code>null</code> 可能並不在 render 該 component 的開發者的預期之內，所以此方法並不常使用。較為常見的方法是在 parent component 的 JSX 中，條件性地決定是包含或移除此 component。實作方法如下！</section></section><section class="level2"aria-labelledby="條件性地包含-jsx-conditionally-including-jsx"><h2 id="條件性地包含-jsx-conditionally-including-jsx">條件性地包含 JSX {/<em>conditionally-including-jsx</em>/}</h2><p>在先前的範例中，你可以控制哪個 JSX tree 會被 component 回傳 (如果有的話！)。而你可能已經注意到 render 內容中有一些重複的部分：<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span> ✔<span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span></code></pre><p>與下方段落非常相似<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span></code></pre><p>兩個條件分支都會回傳 <code>&#x3C;li className="item">...&#x3C;/li></code>:<pre class="language-js"><code class="language-js"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>isPacked<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span> ✔<span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>雖然這個重複不會造成太大影響，但它可能會讓你的程式碼維護起來較不容易。假如你想要修改 <code>className</code> 的值呢？你會需要修改兩處程式碼！在這種情況下，你可以有條件地包含一些 JSX，讓你的程式碼更符合 <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a> 的原則。<section class="level3"aria-labelledby="條件-三元-運算子---conditional-ternary-operator--"><h3 id="條件-三元-運算子---conditional-ternary-operator--">條件 (三元) 運算子 (<code>? :</code>) {/<em>conditional-ternary-operator--</em>/}</h3><p>JavaScript 有一個簡潔的語法可以用來撰寫條件表達式--<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator">條件運算子</a> 或「三元運算子」。<p>不使用這種寫法：<pre class="language-js"><code class="language-js"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>isPacked<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span> ✔<span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>你可以改為以下寫法：<pre class="language-js"><code class="language-js"><span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
  <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span>
    <span class="token punctuation">{</span>isPacked <span class="token operator">?</span> name <span class="token operator">+</span> <span class="token string">' ✔'</span> <span class="token operator">:</span> name<span class="token punctuation">}</span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>你可以把這段程式碼解讀為：「如果 <code>isPacked</code> 的值為 <code>true</code>，則 (<code>?</code>) render <code>name + ' ✔'</code>；否則 (<code>:</code>)，render <code>name</code> 」。</p><deepdive><section class="level4"aria-labelledby="上述兩個範例是完全等價的嗎-are-these-two-examples-fully-equivalent"><h4 id="上述兩個範例是完全等價的嗎-are-these-two-examples-fully-equivalent">上述兩個範例是完全等價的嗎？ {/<em>are-these-two-examples-fully-equivalent</em>/}</h4><p>如果你有物件導向開發的相關背景，你或許會因為其中一個範例有可能會建立兩個不同的 <code>&#x3C;li></code> instance，從而認為上面的兩個範例略有不同。但 JSX 元素其實並不是 instance，因為它們沒有保存任何內部狀態，也不是真正的 DOM 節點。它們是像藍圖一樣的輕量化描述。所以上述兩個例子事實上 <em>是</em> 全等價的。<a href="/learn/preserving-and-resetting-state">保留與重設狀態</a> 詳細介紹了它的運作原理。<p>現在假設你想將打包完成項目的文字用另一個 HTML 標籤包起來，像是藉由 <code>&#x3C;del></code> 為文字加上刪除線。你可以藉由增加換行和括弧，以方便為兩種情況加入更多 JSX：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Item</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> isPacked <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span>
      <span class="token punctuation">{</span>isPacked <span class="token operator">?</span> <span class="token punctuation">(</span>
        <span class="token operator">&#x3C;</span>del<span class="token operator">></span>
          <span class="token punctuation">{</span>name <span class="token operator">+</span> <span class="token string">' ✔'</span><span class="token punctuation">}</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>del<span class="token operator">></span>
      <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
        name
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">PackingList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>section<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Sally</span> <span class="token maybe-class-name">Ride</span>'s <span class="token maybe-class-name">Packing</span> <span class="token maybe-class-name">List</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Space suit"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Helmet with a golden leaf"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Photo of Tam"</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>section<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>這種寫法適用於條件式簡單的情況，但要適度的使用。如果你的 component 因包含太多巢狀的條件標記而變得雜亂，應該要考慮提取出 child component 以進行程式碼整理。在 React 中，標記是你程式碼的一部分，所以你可以使用像是變數和函式這樣的工具來整理複雜的表達式。</section></deepdive></section><section class="level3"aria-labelledby="邏輯-and-運算子--logical-and-operator-"><h3 id="邏輯-and-運算子--logical-and-operator-">邏輯 AND 運算子 (<code>&#x26;&#x26;</code>) {/<em>logical-and-operator-</em>/}</h3><p>另一個常見的簡短語法是 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_AND#:~:text=The%20logical%20AND%20(%20%26%26%20)%20operator,it%20returns%20a%20Boolean%20value.">JavaScript 邏輯 AND (<code>&#x26;&#x26;</code>) 運算子</a>。在 React component 中，時常會遇到在條件成立時 render 一些 JSX，否則不呈現任何東西的情境。藉由使用 <code>&#x26;&#x26;</code>，你可以只有在 <code>isPacked</code> 的值為 <code>true</code> 時呈現勾號：<pre class="language-js"><code class="language-js"><span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
  <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span>
    <span class="token punctuation">{</span>name<span class="token punctuation">}</span> <span class="token punctuation">{</span>isPacked <span class="token operator">&#x26;&#x26;</span> <span class="token string">'✔'</span><span class="token punctuation">}</span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>你可以把這段程式碼解讀為：「如果 <code>isPacked</code> 為真，就（<code>?</code>）render 勾號；否則（<code>:</code>），什麼都不 render 」。<p>實際用法如下：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Item</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> isPacked <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span>
      <span class="token punctuation">{</span>name<span class="token punctuation">}</span> <span class="token punctuation">{</span>isPacked <span class="token operator">&#x26;&#x26;</span> <span class="token string">'✔'</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">PackingList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>section<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Sally</span> <span class="token maybe-class-name">Ride</span>'s <span class="token maybe-class-name">Packing</span> <span class="token maybe-class-name">List</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Space suit"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Helmet with a golden leaf"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Photo of Tam"</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>section<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_AND">JavaScript &#x26;&#x26; 運算子</a> 會在左側的條件為 <code>true</code> 時回傳它右側的值（在範例中是勾號）。但如果條件為 <code>false</code>，整個表達式的結果就會變成 <code>false</code>。跟 <code>null</code> 或 <code>undefined</code> 一樣，React 會將 <code>false</code> 視為像是 JSX tree 中的一個 「洞」，因此不會 render 任何東西。</p><pitfall><p><strong>不要在 <code>&#x26;&#x26;</code> 左側使用數值。</strong><p>為了判定條件結果，JavaScript 會自動將左側轉換為布林值。但如果左側的值是 <code>0</code>，則整個表達式會取用它的值 (<code>0</code>)，React 也因此會 render <code>0</code>，而不是什麼都不 render。<p>例如，常見的一個錯誤是撰寫像 <code>messageCount &#x26;&#x26; &#x3C;p>New messages&#x3C;/p></code> 這樣的程式碼。人們很容易就誤以為當 <code>messageCount</code> 的值為 <code>0</code> 時，它什麼都不會 render ，但實際上它會呈現出 <code>0</code> 本身！<p>要修正這個問題，可以將左側轉換為回傳布林值： <code>messageCount > 0 &#x26;&#x26; &#x3C;p>New messages&#x3C;/p></code>。</p></pitfall></section><section class="level3"aria-labelledby="有條件地將-jsx-指定給變數-conditionally-assigning-jsx-to-a-variable"><h3 id="有條件地將-jsx-指定給變數-conditionally-assigning-jsx-to-a-variable">有條件地將 JSX 指定給變數 {/<em>conditionally-assigning-jsx-to-a-variable</em>/}</h3><p>當使用簡短語法造成在寫程式碼本身有所不便時，你可以嘗試使用 <code>if</code> 陳述式和一個變數。使用 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let"><code>let</code></a> 宣告的變數的值是允許你修改的, 所以可以先將你預設希望顯示的內容指定給這個變數，也就是 name：<pre class="language-js"><code class="language-js"><span class="token keyword">let</span> itemContent <span class="token operator">=</span> name<span class="token punctuation">;</span></code></pre><p>接著在 <code>isPacked</code> 的值為 <code>true</code> 時，使用 <code>if</code> 陳述式重新將 <code>itemContent</code> 的值指定為一個 JSX 表達式。<pre class="language-js"><code class="language-js"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>isPacked<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  itemContent <span class="token operator">=</span> name <span class="token operator">+</span> <span class="token string">" ✔"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p><a href="/learn/javascript-in-jsx-with-curly-braces#using-curly-braces-a-window-into-the-javascript-world">大括弧打開了引入 JavaScript 的大門。</a> 由大括弧可以將變數嵌入回傳的 JSX tree 中，進而將先前計算的表達式巢狀地嵌在 JSX 中：<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span>
  <span class="token punctuation">{</span>itemContent<span class="token punctuation">}</span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span></code></pre><p>這種寫法是最冗長的，卻也是最靈活的。實際用法如下：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Item</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> isPacked <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> itemContent <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>isPacked<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    itemContent <span class="token operator">=</span> name <span class="token operator">+</span> <span class="token string">" ✔"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span>
      <span class="token punctuation">{</span>itemContent<span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">PackingList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>section<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Sally</span> <span class="token maybe-class-name">Ride</span>'s <span class="token maybe-class-name">Packing</span> <span class="token maybe-class-name">List</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Space suit"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Helmet with a golden leaf"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Photo of Tam"</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>section<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>與前述相同，這寫法不只適用於文字，也同樣適用於任意的 JSX ：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Item</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> isPacked <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> itemContent <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>isPacked<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    itemContent <span class="token operator">=</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span>del<span class="token operator">></span>
        <span class="token punctuation">{</span>name <span class="token operator">+</span> <span class="token string">" ✔"</span><span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>del<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span>
      <span class="token punctuation">{</span>itemContent<span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">PackingList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>section<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Sally</span> <span class="token maybe-class-name">Ride</span>'s <span class="token maybe-class-name">Packing</span> <span class="token maybe-class-name">List</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Space suit"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Helmet with a golden leaf"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Photo of Tam"</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>section<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>如果你不熟悉 JavaScript，一開始可能會對這些不同的寫法感到不知所措。但學會它們有助於你閱讀和撰寫任何 JavaScript 程式碼——而不僅僅是 React component！挑一個你偏好的寫法作為起始，如果忘記了其他的寫法再回來參考即可。</p><recap><ul><li>在 React 中，你透過 JavaScript 控制邏輯的分支。<li>你可以使用 <code>if</code> 表達式有條件地回傳 JSX 表達式。<li>你可以有條件地將一些 JSX 指定到一個變數，然後使用大括弧將它包起來以巢狀地嵌入其他 JSX 中。<li>在 JSX 中， <code>{cond ? &#x3C;A /> : &#x3C;B />}</code> 表示 <em>「如果 <code>cond</code> 為真，則 render <code>&#x3C;A /></code>，否則 render <code>&#x3C;B /></code>」</em>。<li>在 JSX 中， <code>{cond &#x26;&#x26; &#x3C;A />}</code> 表示 <em>「如果 <code>cond</code> 為真，則 render <code>&#x3C;A /></code>，否則什麼都不 render」</em>。<li>簡短寫法很常見，但如果你偏好單純的 <code>if</code> 陳述式，完全可以不使用這些簡短寫法。</ul></recap><challenges><section class="level4"aria-labelledby="使用---為未打包完成的項目加上圖示-show-an-icon-for-incomplete-items-with--"><h4 id="使用---為未打包完成的項目加上圖示-show-an-icon-for-incomplete-items-with--">使用 <code>? :</code> 為未打包完成的項目加上圖示 {/<em>show-an-icon-for-incomplete-items-with--</em>/}</h4><p>使用條件運算子（<code>cond ? a : b</code>）在 <code>isPacked</code> 的值不是 <code>true</code> 時 render 一個 ❌。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Item</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> isPacked <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span>
      <span class="token punctuation">{</span>name<span class="token punctuation">}</span> <span class="token punctuation">{</span>isPacked <span class="token operator">&#x26;&#x26;</span> <span class="token string">'✔'</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">PackingList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>section<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Sally</span> <span class="token maybe-class-name">Ride</span>'s <span class="token maybe-class-name">Packing</span> <span class="token maybe-class-name">List</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Space suit"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Helmet with a golden leaf"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Photo of Tam"</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>section<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><solution><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Item</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> isPacked <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span>
      <span class="token punctuation">{</span>name<span class="token punctuation">}</span> <span class="token punctuation">{</span>isPacked <span class="token operator">?</span> <span class="token string">'✔'</span> <span class="token operator">:</span> <span class="token string">'❌'</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">PackingList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>section<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Sally</span> <span class="token maybe-class-name">Ride</span>'s <span class="token maybe-class-name">Packing</span> <span class="token maybe-class-name">List</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Space suit"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Helmet with a golden leaf"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          isPacked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Photo of Tam"</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>section<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack></solution></section><section class="level4"aria-labelledby="使用--顯示項目的重要性-show-the-item-importance-with-"><h4 id="使用--顯示項目的重要性-show-the-item-importance-with-">使用 <code>&#x26;&#x26;</code> 顯示項目的重要性 {/<em>show-the-item-importance-with-</em>/}</h4><p>在這個範例中，每個 <code>Item</code> 都會收到一個數值型別的 <code>importance</code> prop。使用 <code>&#x26;&#x26;</code> 運算子為重要性不是零的項目 render 斜體的 「<em>(Importance: X)</em>」。你的項目列表最終應該如下所示：<ul><li>Space suit <em>(Importance: 9)</em><li>Helmet with a golden leaf<li>Photo of Tam <em>(Importance: 6)</em></ul><p>不要忘記在兩段標籤之間加上一個空格！</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Item</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> importance <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span>
      <span class="token punctuation">{</span>name<span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">PackingList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>section<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Sally</span> <span class="token maybe-class-name">Ride</span>'s <span class="token maybe-class-name">Packing</span> <span class="token maybe-class-name">List</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          importance<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">9</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Space suit"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          importance<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Helmet with a golden leaf"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          importance<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Photo of Tam"</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>section<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><solution><p>你可以這樣實作：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Item</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> importance <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>li className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">></span>
      <span class="token punctuation">{</span>name<span class="token punctuation">}</span>
      <span class="token punctuation">{</span>importance <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&#x26;&#x26;</span> <span class="token string">' '</span><span class="token punctuation">}</span>
      <span class="token punctuation">{</span>importance <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&#x26;&#x26;</span>
        <span class="token operator">&#x3C;</span>i<span class="token operator">></span><span class="token punctuation">(</span><span class="token maybe-class-name">Importance</span><span class="token operator">:</span> <span class="token punctuation">{</span>importance<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>i<span class="token operator">></span>
      <span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">PackingList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>section<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Sally</span> <span class="token maybe-class-name">Ride</span>'s <span class="token maybe-class-name">Packing</span> <span class="token maybe-class-name">List</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          importance<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">9</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Space suit"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          importance<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Helmet with a golden leaf"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Item</span>
          importance<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"Photo of Tam"</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>section<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>要注意的是你必須寫成 <code>importance > 0 &#x26;&#x26; ...</code> 而不是 <code>importance &#x26;&#x26; ...</code> ，這樣如果 <code>importance</code> 的值為 <code>0</code> 時，才不會把 <code>0</code> 做為結果 render 出來。<p>解答中為了在 name 和 importance 標籤之間插入一個空格，使用了兩段不同的條件。你也可以使用帶有空格前綴的 fragment： <code>importance > 0 &#x26;&#x26; &#x3C;> &#x3C;i>...&#x3C;/i>&#x3C;/></code>，或是直接在 <code>&#x3C;i></code> 內部增加一個空格： <code>importance > 0 &#x26;&#x26; &#x3C;i> ...&#x3C;/i></code>。</p></solution></section><section class="level4"aria-labelledby="將多個---用-if-和變數重構-refactor-a-series-ofto-if-and-variables"><h4 id="將多個---用-if-和變數重構-refactor-a-series-ofto-if-and-variables">將多個 <code>? :</code> 用 <code>if</code> 和變數重構 {/<em>refactor-a-series-ofto-if-and-variables</em>/}</h4><p><code>Drink</code> component 使用了多個 <code>? :</code> 條件式來根據 <code>name</code> prop 的值是 <code>"tea"</code> 或 <code>"coffee"</code>" 顯示不同的資訊。問題在於每種飲料的資訊散落在多個條件式中。將此段程式碼從三個 <code>? :</code> 條件式重構為使用單個 <code>if</code> 陳述式。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Drink</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>section<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>dl<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>dt<span class="token operator">></span><span class="token maybe-class-name">Part</span> <span class="token keyword">of</span> plant<span class="token operator">&#x3C;</span><span class="token operator">/</span>dt<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>dd<span class="token operator">></span><span class="token punctuation">{</span>name <span class="token operator">===</span> <span class="token string">'tea'</span> <span class="token operator">?</span> <span class="token string">'leaf'</span> <span class="token operator">:</span> <span class="token string">'bean'</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>dd<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>dt<span class="token operator">></span><span class="token maybe-class-name">Caffeine</span> content<span class="token operator">&#x3C;</span><span class="token operator">/</span>dt<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>dd<span class="token operator">></span><span class="token punctuation">{</span>name <span class="token operator">===</span> <span class="token string">'tea'</span> <span class="token operator">?</span> <span class="token string">'15–70 mg/cup'</span> <span class="token operator">:</span> <span class="token string">'80–185 mg/cup'</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>dd<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>dt<span class="token operator">></span><span class="token maybe-class-name">Age</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>dt<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>dd<span class="token operator">></span><span class="token punctuation">{</span>name <span class="token operator">===</span> <span class="token string">'tea'</span> <span class="token operator">?</span> <span class="token string">'4,000+ years'</span> <span class="token operator">:</span> <span class="token string">'1,000+ years'</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>dd<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>dl<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>section<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">DrinkList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Drink</span> name<span class="token operator">=</span><span class="token string">"tea"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Drink</span> name<span class="token operator">=</span><span class="token string">"coffee"</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>當你使用 <code>if</code> 完成了程式碼重構後，你是否有想法能進一步簡化程式碼呢？</p><solution><p>要進一步簡化程式碼有不同方式，下方這個做法可以做為一個切入點：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Drink</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> part<span class="token punctuation">,</span> caffeine<span class="token punctuation">,</span> age<span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">'tea'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    part <span class="token operator">=</span> <span class="token string">'leaf'</span><span class="token punctuation">;</span>
    caffeine <span class="token operator">=</span> <span class="token string">'15–70 mg/cup'</span><span class="token punctuation">;</span>
    age <span class="token operator">=</span> <span class="token string">'4,000+ years'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">'coffee'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    part <span class="token operator">=</span> <span class="token string">'bean'</span><span class="token punctuation">;</span>
    caffeine <span class="token operator">=</span> <span class="token string">'80–185 mg/cup'</span><span class="token punctuation">;</span>
    age <span class="token operator">=</span> <span class="token string">'1,000+ years'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>section<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>dl<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>dt<span class="token operator">></span><span class="token maybe-class-name">Part</span> <span class="token keyword">of</span> plant<span class="token operator">&#x3C;</span><span class="token operator">/</span>dt<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>dd<span class="token operator">></span><span class="token punctuation">{</span>part<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>dd<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>dt<span class="token operator">></span><span class="token maybe-class-name">Caffeine</span> content<span class="token operator">&#x3C;</span><span class="token operator">/</span>dt<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>dd<span class="token operator">></span><span class="token punctuation">{</span>caffeine<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>dd<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>dt<span class="token operator">></span><span class="token maybe-class-name">Age</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>dt<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>dd<span class="token operator">></span><span class="token punctuation">{</span>age<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>dd<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>dl<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>section<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">DrinkList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Drink</span> name<span class="token operator">=</span><span class="token string">"tea"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Drink</span> name<span class="token operator">=</span><span class="token string">"coffee"</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>在這個做法中，每個飲料的相關資訊被集中在了一起，而非分散在多個條件語句中。這麼做可以讓未來在增加更多的飲料時較為方便。<p>另一個做法是藉由將資訊移入 object 中來避免條件語句：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> drinks <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">tea</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">part</span><span class="token operator">:</span> <span class="token string">'leaf'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">caffeine</span><span class="token operator">:</span> <span class="token string">'15–70 mg/cup'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token string">'4,000+ years'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">coffee</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">part</span><span class="token operator">:</span> <span class="token string">'bean'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">caffeine</span><span class="token operator">:</span> <span class="token string">'80–185 mg/cup'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token string">'1,000+ years'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Drink</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> info <span class="token operator">=</span> drinks<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>section<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>dl<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>dt<span class="token operator">></span><span class="token maybe-class-name">Part</span> <span class="token keyword">of</span> plant<span class="token operator">&#x3C;</span><span class="token operator">/</span>dt<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>dd<span class="token operator">></span><span class="token punctuation">{</span>info<span class="token punctuation">.</span><span class="token property-access">part</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>dd<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>dt<span class="token operator">></span><span class="token maybe-class-name">Caffeine</span> content<span class="token operator">&#x3C;</span><span class="token operator">/</span>dt<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>dd<span class="token operator">></span><span class="token punctuation">{</span>info<span class="token punctuation">.</span><span class="token property-access">caffeine</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>dd<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>dt<span class="token operator">></span><span class="token maybe-class-name">Age</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>dt<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>dd<span class="token operator">></span><span class="token punctuation">{</span>info<span class="token punctuation">.</span><span class="token property-access">age</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>dd<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>dl<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>section<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">DrinkList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Drink</span> name<span class="token operator">=</span><span class="token string">"tea"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Drink</span> name<span class="token operator">=</span><span class="token string">"coffee"</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack></solution><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></challenges></section></section></section>