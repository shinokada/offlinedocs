<!doctype html><html lang="zh-hant"><meta charset="utf-8"><title>將 React 加入到一個現有的專案</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="將-react-加入到一個現有的專案"><h1 id="將-react-加入到一個現有的專案">將 React 加入到一個現有的專案</h1><intro><p>如果你想要為現有的專案新增一些互動性，你不必重新使用 React 重寫它。將 React 加入到現有技術棧中，並且在任何地方 render 互動的 React component。</p></intro><note><p><strong>你需要在開發環境安裝 <a href="https://nodejs.org/en/">Node.js</a>。</strong> 雖然你可以在線上或是使用簡單的 HTML 頁面<a href="/learn/installation#try-react">嘗試 React</a>，但實際上，大多數你想要用於開發的 JavaScript 工具都需要 Node.js。</p></note><section class="level2"aria-labelledby="將-react-用於你現有網站的整個子路由上-using-react-for-an-entire-subroute-of-your-existing-website"><h2 id="將-react-用於你現有網站的整個子路由上-using-react-for-an-entire-subroute-of-your-existing-website">將 React 用於你現有網站的整個子路由上 {/<em>using-react-for-an-entire-subroute-of-your-existing-website</em>/}</h2><p>假設你有一個現有的網站應用程式在 <code>example.com</code>，使用其他伺服器技術（例如 Rails）建構，你想要在 <code>example.com/some-app/</code> 開頭的所有 route 使用 React。<p>以下是我們推薦的設定方式：<ol><li>使用其中一個<a href="(/learn/start-a-new-react-project)">基於 React 的框架</a>來<strong>建構你的應用程式中的 React 部分</strong>。<li>在你的框架設定中將 <strong><code>/some-app</code> 指定為 <em>基本路徑</em></strong>（這裡是如何設定：<a href="https://nextjs.org/docs/api-reference/next.config.js/basepath">Next.js</a>、<a href="https://www.gatsbyjs.com/docs/how-to/previews-deploys-hosting/path-prefix/">Gatsby</a>)。<li><strong>設定你的伺服器或代理</strong>，讓所有在 <code>/some-app/</code> 下的請求都由 React 應用程式處理。</ol><p>這可以確保你的應用程式中 React 部分能夠<a href="/learn/start-a-new-react-project#can-i-use-react-without-a-framework">受益於這些框架所內建的最佳實踐</a>。<p>許多基於 React 的框架都是 full-stack，可以讓你的 React 應用程式獲得伺服器的優勢。然而，但即使你不能或不想在伺服器上執行 JavaScript，也可以使用相同的方法。在這種情況下，請將 HTML/CSS/JS 匯出（例如 Next.js 的 <a href="https://nextjs.org/docs/advanced-features/static-html-export"><code>next export</code> 輸出</a>、Gatsby 的預設匯出）放在 <code>/some-app/</code> 上。</section><section class="level2"aria-labelledby="在現有的部分頁面使用-react-using-react-for-a-part-of-your-existing-page"><h2 id="在現有的部分頁面使用-react-using-react-for-a-part-of-your-existing-page">在現有的部分頁面使用 React {/<em>using-react-for-a-part-of-your-existing-page</em>/}</h2><p>假設你有一個使用其他技術（例如伺服器像是 Rails 或客戶端像是 Backbone）建立的現有頁面，並且你想在該頁面上某處呈現互動式的 React component。這是整合 React 的常見方式 - 事實上，在 Meta 多年來大部分 React 使用情況都是如此！<p>你可以透過以下兩個步驟：<ol><li><strong>設定一個 JavaScript 環境</strong>，讓你可以使用 <a href="/learn/writing-markup-with-jsx">JSX 語法</a>，並使用 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import"><code>import</code></a> / <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export"><code>export</code></a> 語法將你的程式碼分成模組，同時從 <a href="https://www.npmjs.com/">npm</a> package registry 中使用 package（例如 React）。<li>在頁面上你想要看得的地方 <strong>render 你的 React component</strong>。</ol><p>確切的方法取決於你現有的頁面的設定，讓我們逐步了解一些細節。<section class="level3"aria-labelledby="步驟一建立模組化的-javascript-環境-step-1-set-up-a-modular-javascript-environment"><h3 id="步驟一建立模組化的-javascript-環境-step-1-set-up-a-modular-javascript-environment">步驟一：建立模組化的 JavaScript 環境 {/<em>step-1-set-up-a-modular-javascript-environment</em>/}</h3><p>一個模組化的 JavaScript 環境讓你可以將 React component 寫在單獨的檔案中，而不是全部寫在一個檔案中。它還允許你使用所有其他開發者在 <a href="https://www.npmjs.com/">npm</a> registry 上發佈的 package，包括 React 本身！如何做這取決於你現有的設定：<ul><li><p><strong>如果你的應用程式已經拆分成使用 <code>import</code> 語句的檔案</strong>，請嘗試使用你已經設定好的設定。檢查在你的 JS 程式碼中寫入 <code>&#x3C;div /></code> 是否會導致語法錯誤。如果它導致了語法錯誤，則可能需要<a href="https://babeljs.io/setup">使用 Babel 轉換你的 JavaScript 程式碼</a>，並啟用 <a href="https://babeljs.io/docs/babel-preset-react">Babel React preset</a> 來使用 JSX。<li><p><strong>如果你的應用程式沒有現有的 JavaScript module 的編譯設定</strong>，請使用 <a href="https://vitejs.dev/">Vite</a> 進行設定。Vite 社群維護<a href="https://github.com/vitejs/awesome-vite#integrations-with-backends">與後端框架的多個整合</a>，包括 Rails、Django 和 Laravel。如果你的後端框架未被列出，請按照此指南<a href="https://vitejs.dev/guide/backend-integration.html">手動將 Vite 建構與你的後端整合</a>。</ul><p>為了檢查你的設定是否正常運作，請在你的專案資料夾中執行此命令：</p><terminalblock>npm install react react-dom</terminalblock><p>然後在你的主要 JavaScript 檔案（可能叫做 <code>index.js</code> 或 <code>main.js</code>）的頂部加入這些程式碼：</p><sandpack><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&#x3C;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>title</span><span class="token punctuation">></span></span>My app<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>body</span><span class="token punctuation">></span></span>
    <span class="token comment">&#x3C;!-- Your existing page content (in this example, it gets replaced) --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>html</span><span class="token punctuation">></span></span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createRoot <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span>

<span class="token comment">// Clear the existing HTML content</span>
<span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">body</span><span class="token punctuation">.</span><span class="token property-access">innerHTML</span> <span class="token operator">=</span> <span class="token string">'&#x3C;div id="app">&#x3C;/div>'</span><span class="token punctuation">;</span>

<span class="token comment">// Render your React component instead</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> world<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></sandpack><p>如果你的整個網頁內容都被替換成了「Hello, world!」，那麼一切正常！請繼續閱讀。</p><note><p>將一個模組化的 JavaScript 環境整合到現有專案中，對於第一次嘗試的人來說可能會感到令人生畏，但它是值得的！如果你卡住了，請嘗試使用我們的<a href="/community">社群資源</a>或 <a href="https://chat.vitejs.dev/">Vite Chat</a>。</p></note></section><section class="level3"aria-labelledby="步驟二在頁面上的任何位置-render-react-component-step-2-render-react-components-anywhere-on-the-page"><h3 id="步驟二在頁面上的任何位置-render-react-component-step-2-render-react-components-anywhere-on-the-page">步驟二：在頁面上的任何位置 render React component {/<em>step-2-render-react-components-anywhere-on-the-page</em>/}</h3><p>在前一步驟中，你將此程式碼放在主檔案的頂部：<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createRoot <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span>

<span class="token comment">// Clear the existing HTML content</span>
<span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">body</span><span class="token punctuation">.</span><span class="token property-access">innerHTML</span> <span class="token operator">=</span> <span class="token string">'&#x3C;div id="app">&#x3C;/div>'</span><span class="token punctuation">;</span>

<span class="token comment">// Render your React component instead</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> world<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>當然，你實際上不想清除現有的 HTML 內容！<p>刪除這段程式碼。<p>相反地，你可能想要在 HTML 中的特定位置 render 你的 React component。打開你的 HTML 頁面（或產生它的 server template），並為任何 tag 加入一個唯一的 <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/id"><code>id</code></a> attribute，例如：<pre class="language-html"><code class="language-html"><span class="token comment">&#x3C;!-- ... somewhere in your html ... --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>nav</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navigation<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>nav</span><span class="token punctuation">></span></span>
<span class="token comment">&#x3C;!-- ... more html ... --></span></code></pre><p>這讓你可以使用 <a href="https://developer.mozilla.org/zh-TW/docs/Web/API/Document/getElementById"><code>document.getElementById</code></a> 找到該 HTML 元素，並將其傳遞給 <a href="/reference/react-dom/client/createRoot"><code>createRoot</code></a>，以便你可以在其中 render 自己的 React component：</p><sandpack><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&#x3C;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>title</span><span class="token punctuation">></span></span>My app<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>This paragraph is a part of HTML.<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>nav</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navigation<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>nav</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>This paragraph is also a part of HTML.<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>html</span><span class="token punctuation">></span></span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createRoot <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">NavigationBar</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// TODO: Actually implement a navigation bar</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Hello</span> <span class="token keyword module">from</span> <span class="token maybe-class-name">React</span><span class="token operator">!</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> domNode <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'navigation'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span>domNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">NavigationBar</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></sandpack><p>注意原始的 HTML 內容從 <code>index.html</code> 被保留下來，但是你自己的 <code>NavigationBar</code> React component 現在出現在你 HTML 中的 <code>&#x3C;nav id="navigation"></code> 內。閱讀 <a href="/reference/react-dom/client/createRoot#rendering-a-page-partially-built-with-react"><code>createRoot</code> 使用文件</a>以了解更多關於在現有 HTML 頁面中 render React component 的資訊。<p>當你在現有的專案中採用 React 時，通常會從小的互動式 component（如按鈕）開始，然後逐漸「向上移動」，直到最終整個頁面都是使用 React 建構的。如果你達到了那裡，我們建議立即遷移到<a href="/learn/start-a-new-react-project">一個 React 框架</a> ，以充分利用 React 的優勢。</section></section><section class="level2"aria-labelledby="在現有的原生手機應用程式中使用-react-native-using-react-native-in-an-existing-native-mobile-app"><h2 id="在現有的原生手機應用程式中使用-react-native-using-react-native-in-an-existing-native-mobile-app">在現有的原生手機應用程式中使用 React Native {/<em>using-react-native-in-an-existing-native-mobile-app</em>/}</h2><p><a href="https://reactnative.dev/">React Native</a> 也可以逐步地整合到現有的原生應用程式中。如果你已經有一個 Android（Java 或 Kotlin）或 iOS（Objective-C 或 Swift）的原生應用程式，請<a href="https://reactnative.dev/docs/integration-with-existing-apps">按照此指南</a>將 React Native 畫面加入到其中。 <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>