<!doctypehtml><html lang="zh-hant"><meta charset="utf-8"><title>DOM Elements</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="dom-elements"class="level1"><h1>DOM Elements</h1><p>為了能兼具效能與跨瀏覽器的兼容性，React 實作了一套獨立於瀏覽器的 DOM 系統，我們藉由這個機會解決瀏覽器 DOM 的美中不足之處。<p>在 React 裡，所有 DOM property 和 attribute（包括 event handler）都應該以 camelCase 命名。舉例來說，HTML 的 attribute <code>tabindex</code> 在 React 中對應到 <code>tabIndex</code>。<code>aria-*</code> 和 <code>data-*</code> attribute 則是例外，需要保持全部小寫。舉例來說，<code>aria-label</code> 保持原樣即可。<section id="differences-in-attributes"class="level2"><h2>Attribute 相異之處</h2><p>有些 attribute 在 React 和 HTML 之間運作的方式略為不同：<section id="checked"class="level3"><h3>checked</h3><p>當 <code>&#x3C;input></code> 的 type 是 <code>checkbox</code> 或是 <code>radio</code> 時，可以使用 <code>checked</code> 這個 attribute 來設定 component 是否被選取。這對建立 controlled component 很有幫助。<code>defaultChecked</code> 則是使用在 uncontrolled component，在初始 mount 設定 component 是否被選取。</section><section id="classname"class="level3"><h3>className</h3><p>要指定一個 CSS class 時，使用 <code>className</code> attribute。這在所有標準的 DOM 和 SVG element 像是 <code>&#x3C;div></code>、<code>&#x3C;a></code> 或其他的都能適用。<p>如果你在 React 裡使用 Web Components（這不是常見的狀況），則使用 <code>class</code>。</section><section id="dangerouslysetinnerhtml"class="level3"><h3>dangerouslySetInnerHTML</h3><p><code>dangerouslySetInnerHTML</code> 是 React 用來替代 DOM 的 <code>innerHTML</code>。普遍來說，從程式碼中注入 HTML 是個冒險的行為，你會很輕易地讓使用者暴露在 <a href="https://zh.wikipedia.org/wiki/%E8%B7%A8%E7%B6%B2%E7%AB%99%E6%8C%87%E4%BB%A4%E7%A2%BC">cross-site scripting (XSS)</a> 攻擊風險之下。所以在 React 裡你還是可以直接注入 HTML，但是你必須使用 <code>dangerouslySetInnerHTML</code>，然後傳入一個有 <code>__html</code> 為 key 的 object，藉此來提醒你自己這樣做具有風險。例如：<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">createMarkup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span><span class="token literal-property property">__html</span><span class="token operator">:</span> <span class="token string">'First &#x26;middot; Second'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>div dangerouslySetInnerHTML<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">createMarkup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section><section id="htmlfor"class="level3"><h3>htmlFor</h3><p>React element 使用 <code>htmlFor</code> 來替代 <code>for</code>，因為 <code>for</code> 在 JavaScript 是保留字。</section><section id="onchange"class="level3"><h3>onChange</h3><p><code>onChange</code> event 會表現的跟你預期一樣：每當表格欄位值改變，這個 event 跟著發生。原先的 <code>onChange</code> 是個用詞不夠精確的行為，且 React 依靠這個 event 來處理使用者的即時輸入，所以我們表現出不同於瀏覽器的預設行為。</section><section id="selected"class="level3"><h3>selected</h3><p>如果你想要將 <code>&#x3C;option></code> 標記成已選擇，請在 <code>&#x3C;select></code> 的 <code>value</code> 中引用該選項的值。 更多細節說明請參考<a href="./forms.html#the-select-tag">「The select Tag」</a>。</section><section id="style"class="level3"><h3>style</h3><blockquote><p>注意<p>為了方便在文件裡某些範例會使用 <code>style</code>，但是<strong>基本上不推薦使用 <code>style</code> attribute 作為初步修飾 elements 的手段。</strong>在大部分的情形，應該使用<a href="#classname"><code>className</code></a> 來對應定義在外部 CSS stylesheet 的 class。<code>style</code> 通常在 React 應用中會被用做動態 style 的增加方式。請參考 <a href="./faq-styling.html">FAQ: Styling and CSS</a>。</blockquote><p><code>style</code> attribute 接收一個 JavaScript object 內含以 camelCase 命名的 property，而不是 CSS string。這與 DOM <code>style</code> JavaScript property 一致，但效率更高，並且可以防止 XSS 安全漏洞。例如：<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> divStyle <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'blue'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">backgroundImage</span><span class="token operator">:</span> <span class="token string">'url('</span> <span class="token operator">+</span> imgUrl <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">HelloWorldComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span>divStyle<span class="token punctuation">}</span><span class="token operator">></span><span class="token maybe-class-name">Hello</span> <span class="token maybe-class-name">World</span><span class="token operator">!</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>注意 style 不會自動加上前綴。為了要支援舊的瀏覽器，你必須自行提供相對應的 style property。<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> divStyle <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">WebkitTransition</span><span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span> <span class="token comment">// 注意這裡是大寫的「W」</span>
  <span class="token literal-property property">msTransition</span><span class="token operator">:</span> <span class="token string">'all'</span> <span class="token comment">// 「ms」是唯一需要使用小寫開頭的瀏覽器引擎前綴</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ComponentWithTransition</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span>divStyle<span class="token punctuation">}</span><span class="token operator">></span><span class="token maybe-class-name">This</span> should work cross<span class="token operator">-</span>browser<span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>為了與使用 JavaScript 來存取 DOM node 一致，style key 也以 camelCase 命名 (e.g. <code>node.style.backgroundImage</code>)。瀏覽器引擎前綴除了 <a href="https://www.andismith.com/blogs/2012/02/modernizr-prefixed/"><code>ms</code></a> 都應該以一個大寫字母開頭。這就是 <code>WebkitTransition</code> 為什麼有一個大寫「W」的原因。<p>React 會為某些數字型態的 style property 自動加上「px」。如果你想要使用其他單位，以 string 的形式加上單位。舉例來說：<pre class="language-js"><code class="language-js"><span class="token comment">// 輸出 style: '10px'</span>
<span class="token operator">&#x3C;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>
  <span class="token maybe-class-name">Hello</span> <span class="token maybe-class-name">World</span><span class="token operator">!</span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>

<span class="token comment">// 輸出 style: '10%'</span>
<span class="token operator">&#x3C;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">'10%'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>
  <span class="token maybe-class-name">Hello</span> <span class="token maybe-class-name">World</span><span class="token operator">!</span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span></code></pre><p>注意所有 style property 都會轉換成 pixel string。只有某些會保持沒有單位，如 <code>zoom</code>、<code>order</code>、<code>flex</code>。沒有單位的 property 完整列表可以在<a href="https://github.com/facebook/react/blob/4131af3e4bf52f3a003537ec95a1655147c81270/src/renderers/dom/shared/CSSProperty.js#L15-L59">這裡</a>查看。</section><section id="suppresscontenteditablewarning"class="level3"><h3>suppressContentEditableWarning</h3><p>通常來說，當一個 element 的 children 設定 <code>contentEditable</code> 時，因為不會有作用，所以會有警示訊息。這個 attribute 會抑制警示訊息。除非你在建立一個像是 <a href="https://facebook.github.io/draft-js/">Draft.js</a> 的 library，否則不要使用它。</section><section id="suppresshydrationwarning"class="level3"><h3>suppressHydrationWarning</h3><p>如果你使用 server-side React render 時，通常 server 和 client render 不同時，會有一個警示訊息。然而，在一些少數的案例，很難去保證 server 和 client side 會完全符合。例如，像是 timestamp 就無法在 server 和 client 保持相同。<p>如果你設定了 <code>suppressHydrationWarning</code> 為 <code>true</code>，attribute 以及 element 內容不一樣時，React 就不會有警示訊息。這只作用在一層深度，且需要有計畫性地使用，請勿濫用。你可以在 <a href="./react-dom-client.html#hydrateroot"><code>ReactDOM.hydrateRoot()</code> documentation</a> 讀到更多關於 hydration。</section><section id="value"class="level3"><h3>value</h3><p><code>value</code> attribute 可以使用在 <code>&#x3C;input></code>、<code>&#x3C;select></code> 和 <code>&#x3C;textarea></code> component。你可以使用它來設定 component value。這對建立 controlled component 很有幫助。<code>defaultValue</code> 則是使用在 uncontrolled component，在初始 mount 後設定 component 的 value。</section></section><section id="all-supported-html-attributes"class="level2"><h2>可以使用的 HTML Attribute</h2><p>在 React 16 中，任何標準<a href="/blog/2017/09/08/dom-attributes-in-react-16.html">或是自訂的</a> DOM attribute 都可以使用。<p>React 為 DOM 提供了一套以 JavaScript 為中心的 API。因為 React component 通常會有自訂或跟 DOM 相關的 prop，React 使用像 DOM API 一樣的 <code>camelCase</code>。<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>div tabIndex<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token comment">// 就像 node.tabIndex DOM API</span>
<span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"Button"</span> <span class="token operator">/</span><span class="token operator">></span> <span class="token comment">// 就像 node.className DOM API</span>
<span class="token operator">&#x3C;</span>input readOnly<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>  <span class="token comment">// 就像 node.readOnly DOM API</span></code></pre><p>除了上述文件提到的，這些 prop 跟對應的 HTML attribute 運作方式一樣。<p>React 中可以使用這些 DOM attribute：<pre class="language-text"><code class="language-text">accept acceptCharset accessKey action allowFullScreen alt async autoComplete
autoFocus autoPlay capture cellPadding cellSpacing challenge charSet checked
cite classID className colSpan cols content contentEditable contextMenu controls
controlsList coords crossOrigin data dateTime default defer dir disabled
download draggable encType form formAction formEncType formMethod formNoValidate
formTarget frameBorder headers height hidden high href hrefLang htmlFor
httpEquiv icon id inputMode integrity is keyParams keyType kind label lang list
loop low manifest marginHeight marginWidth max maxLength media mediaGroup method
min minLength multiple muted name noValidate nonce open optimum pattern
placeholder poster preload profile radioGroup readOnly rel required reversed
role rowSpan rows sandbox scope scoped scrolling seamless selected shape size
sizes span spellCheck src srcDoc srcLang srcSet start step style summary
tabIndex target title type useMap value width wmode wrap</code></pre><p>同樣地，所有 SVG attribute 都可以使用：<pre class="language-text"><code class="language-text">accentHeight accumulate additive alignmentBaseline allowReorder alphabetic
amplitude arabicForm ascent attributeName attributeType autoReverse azimuth
baseFrequency baseProfile baselineShift bbox begin bias by calcMode capHeight
clip clipPath clipPathUnits clipRule colorInterpolation
colorInterpolationFilters colorProfile colorRendering contentScriptType
contentStyleType cursor cx cy d decelerate descent diffuseConstant direction
display divisor dominantBaseline dur dx dy edgeMode elevation enableBackground
end exponent externalResourcesRequired fill fillOpacity fillRule filter
filterRes filterUnits floodColor floodOpacity focusable fontFamily fontSize
fontSizeAdjust fontStretch fontStyle fontVariant fontWeight format from fx fy
g1 g2 glyphName glyphOrientationHorizontal glyphOrientationVertical glyphRef
gradientTransform gradientUnits hanging horizAdvX horizOriginX ideographic
imageRendering in in2 intercept k k1 k2 k3 k4 kernelMatrix kernelUnitLength
kerning keyPoints keySplines keyTimes lengthAdjust letterSpacing lightingColor
limitingConeAngle local markerEnd markerHeight markerMid markerStart
markerUnits markerWidth mask maskContentUnits maskUnits mathematical mode
numOctaves offset opacity operator order orient orientation origin overflow
overlinePosition overlineThickness paintOrder panose1 pathLength
patternContentUnits patternTransform patternUnits pointerEvents points
pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits
r radius refX refY renderingIntent repeatCount repeatDur requiredExtensions
requiredFeatures restart result rotate rx ry scale seed shapeRendering slope
spacing specularConstant specularExponent speed spreadMethod startOffset
stdDeviation stemh stemv stitchTiles stopColor stopOpacity
strikethroughPosition strikethroughThickness string stroke strokeDasharray
strokeDashoffset strokeLinecap strokeLinejoin strokeMiterlimit strokeOpacity
strokeWidth surfaceScale systemLanguage tableValues targetX targetY textAnchor
textDecoration textLength textRendering to transform u1 u2 underlinePosition
underlineThickness unicode unicodeBidi unicodeRange unitsPerEm vAlphabetic
vHanging vIdeographic vMathematical values vectorEffect version vertAdvY
vertOriginX vertOriginY viewBox viewTarget visibility widths wordSpacing
writingMode x x1 x2 xChannelSelector xHeight xlinkActuate xlinkArcrole
xlinkHref xlinkRole xlinkShow xlinkTitle xlinkType xmlns xmlnsXlink xmlBase
xmlLang xmlSpace y y1 y2 yChannelSelector z zoomAndPan</code></pre><p>你也可以使用自訂的 attribute，只要它們是完全小寫的。 <span style="float:footnote"><a href="./index.html#toc">Go to TOC</a></span></section></section>