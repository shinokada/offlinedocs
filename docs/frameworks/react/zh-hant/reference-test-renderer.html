<!doctypehtml><html lang="zh-hant"><meta charset="utf-8"><title>Test Renderer</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css"><section id="test-renderer"class="level1"><h1>Test Renderer</h1><p><strong>如何 Import</strong><pre class="language-javascript"><code class="language-javascript"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">TestRenderer</span></span> <span class="token keyword module">from</span> <span class="token string">'react-test-renderer'</span><span class="token punctuation">;</span> <span class="token comment">// ES6</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">TestRenderer</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react-test-renderer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ES5 with npm</span></code></pre><section id="overview"class="level2"><h2>概覽</h2><p>這個 package 提供了一個 React renderer，可以被用於 render React component 成 pure JavaScript object，無需依賴 DOM 或原生的行動裝置環境。<p>基本上，這個 package 提供的主要功能是在不依賴瀏覽器或 <a href="https://github.com/tmpvar/jsdom">jsdom</a> 的情況下，回傳某個時間點由 React DOM 或是 React Native component render 出的 view 結構（類似 DOM tree）snapshot。<p>範例：<pre class="language-javascript"><code class="language-javascript"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">TestRenderer</span></span> <span class="token keyword module">from</span> <span class="token string">'react-test-renderer'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Link</span></span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>a href<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span><span class="token property-access">page</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> testRenderer <span class="token operator">=</span> <span class="token maybe-class-name">TestRenderer</span><span class="token punctuation">.</span><span class="token method function property-access">create</span><span class="token punctuation">(</span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Link</span> page<span class="token operator">=</span><span class="token string">"https://www.facebook.com/"</span><span class="token operator">></span><span class="token maybe-class-name">Facebook</span><span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Link</span><span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>testRenderer<span class="token punctuation">.</span><span class="token method function property-access">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { type: 'a',</span>
<span class="token comment">//   props: { href: 'https://www.facebook.com/' },</span>
<span class="token comment">//   children: [ 'Facebook' ] }</span></code></pre><p>你可以使用 Jest 的 snapshot 測試功能來自動儲存目前 JSON tree 到一個文件中，並在測試中檢查它是否被修改：<a href="https://jestjs.io/docs/en/snapshot-testing">了解更多</a>。<p>你也可以通過遍歷輸出來尋找特定的 node，並對它們進行 assert。<pre class="language-javascript"><code class="language-javascript"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">TestRenderer</span></span> <span class="token keyword module">from</span> <span class="token string">'react-test-renderer'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">SubComponent</span> foo<span class="token operator">=</span><span class="token string">"bar"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p className<span class="token operator">=</span><span class="token string">"my"</span><span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">SubComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>p className<span class="token operator">=</span><span class="token string">"sub"</span><span class="token operator">></span><span class="token maybe-class-name">Sub</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> testRenderer <span class="token operator">=</span> <span class="token maybe-class-name">TestRenderer</span><span class="token punctuation">.</span><span class="token method function property-access">create</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyComponent</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> testInstance <span class="token operator">=</span> testRenderer<span class="token punctuation">.</span><span class="token property-access">root</span><span class="token punctuation">;</span>

<span class="token function">expect</span><span class="token punctuation">(</span>testInstance<span class="token punctuation">.</span><span class="token method function property-access">findByType</span><span class="token punctuation">(</span><span class="token maybe-class-name">SubComponent</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">foo</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span>testInstance<span class="token punctuation">.</span><span class="token method function property-access">findByProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">"sub"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Sub'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><section id="testrenderer"class="level3"><h3>TestRenderer</h3><ul><li><a href="#testrenderercreate"><code>TestRenderer.create()</code></a><li><a href="#testrendereract"><code>TestRenderer.act()</code></a></ul></section><section id="testrenderer-instance"class="level3"><h3>TestRenderer instance</h3><ul><li><a href="#testrenderertojson"><code>testRenderer.toJSON()</code></a><li><a href="#testrenderertotree"><code>testRenderer.toTree()</code></a><li><a href="#testrendererupdate"><code>testRenderer.update()</code></a><li><a href="#testrendererunmount"><code>testRenderer.unmount()</code></a><li><a href="#testrenderergetinstance"><code>testRenderer.getInstance()</code></a><li><a href="#testrendererroot"><code>testRenderer.root</code></a></ul></section><section id="testinstance"class="level3"><h3>TestInstance</h3><ul><li><a href="#testinstancefind"><code>testInstance.find()</code></a><li><a href="#testinstancefindbytype"><code>testInstance.findByType()</code></a><li><a href="#testinstancefindbyprops"><code>testInstance.findByProps()</code></a><li><a href="#testinstancefindall"><code>testInstance.findAll()</code></a><li><a href="#testinstancefindallbytype"><code>testInstance.findAllByType()</code></a><li><a href="#testinstancefindallbyprops"><code>testInstance.findAllByProps()</code></a><li><a href="#testinstanceinstance"><code>testInstance.instance</code></a><li><a href="#testinstancetype"><code>testInstance.type</code></a><li><a href="#testinstanceprops"><code>testInstance.props</code></a><li><a href="#testinstanceparent"><code>testInstance.parent</code></a><li><a href="#testinstancechildren"><code>testInstance.children</code></a></ul></section></section><section id="reference"class="level2"><h2>Reference</h2><section id="testrenderercreate-testrenderercreate"class="level3"><h3><code>TestRenderer.create()</code> {#testrenderercreate}</h3><pre class="language-javascript"><code class="language-javascript"><span class="token maybe-class-name">TestRenderer</span><span class="token punctuation">.</span><span class="token method function property-access">create</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>透過傳來的 React element 建立一個 <code>TestRenderer</code> instance。它不使用真實的 DOM，但是它依然將 component tree 完整地 render 到記憶體中，以便於你對它進行 assert。回傳為一個 <a href="#testrenderer-instance"><code>TestRenderer</code> instance</a>。</section><section id="testrendereract-testrendereract"class="level3"><h3><code>TestRenderer.act()</code> {#testrendereract}</h3><pre class="language-javascript"><code class="language-javascript"><span class="token maybe-class-name">TestRenderer</span><span class="token punctuation">.</span><span class="token method function property-access">act</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>近似於 <a href="./test-utils.html#act"><code>測試工具</code> 中的 <code>act()</code> helper</a>，<code>TestRenderer.act</code> 會為了 assertions 準備一個 component。使用這個版本的 <code>act()</code> 來統合 <code>TestRenderer.create</code> 和 <code>testRenderer.update</code> 的使用。<pre class="language-javascript"><code class="language-javascript"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>create<span class="token punctuation">,</span> act<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-test-renderer'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">App</span></span> <span class="token keyword module">from</span> <span class="token string">'./app.js'</span><span class="token punctuation">;</span> <span class="token comment">// The component being tested</span>

<span class="token comment">// render the component</span>
<span class="token keyword">let</span> root<span class="token punctuation">;</span> 
<span class="token function">act</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  root <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">App</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// make assertions on root </span>
<span class="token function">expect</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span><span class="token method function property-access">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// update with some different props</span>
<span class="token function">act</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  root<span class="token punctuation">.</span><span class="token method function property-access">update</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">App</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// make assertions on root </span>
<span class="token function">expect</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span><span class="token method function property-access">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="testrenderertojson-testrenderertojson"class="level3"><h3><code>testRenderer.toJSON()</code> {#testrenderertojson}</h3><pre class="language-javascript"><code class="language-javascript">testRenderer<span class="token punctuation">.</span><span class="token method function property-access">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>回傳一個被 render 的 tree object。該 tree 僅包含特定平台的 node，例如 <code>&#x3C;div></code> 或 <code>&#x3C;View></code> 和它們的 props，但並不包含任何人員撰寫的 component。這對於 <a href="https://facebook.github.io/jest/docs/en/snapshot-testing.html#snapshot-testing-with-jest">snapshot 測試</a>非常方便。</section><section id="testrenderertotree-testrenderertotree"class="level3"><h3><code>testRenderer.toTree()</code> {#testrenderertotree}</h3><pre class="language-javascript"><code class="language-javascript">testRenderer<span class="token punctuation">.</span><span class="token method function property-access">toTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>回傳一個被 render 的 tree object。它表示的內容比 <code>toJSON()</code> 提供的內容更加詳細，並且包含人員撰寫的 component。除非你要在 test renderer 之上撰寫自己的 assertion library，否則你可能不需要這個方法。</section><section id="testrendererupdate-testrendererupdate"class="level3"><h3><code>testRenderer.update()</code> {#testrendererupdate}</h3><pre class="language-javascript"><code class="language-javascript">testRenderer<span class="token punctuation">.</span><span class="token method function property-access">update</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span></code></pre><p>透過新的 root element 去重新 render 記憶體中的 tree。它模擬在 root 的 React 更新。 如果新的 element 和之前的 element 有相同的 type 和 key，該 tree 將會被更新；否則，它將重新 mount 一個新的 tree。</section><section id="testrendererunmount-testrendererunmount"class="level3"><h3><code>testRenderer.unmount()</code> {#testrendererunmount}</h3><pre class="language-javascript"><code class="language-javascript">testRenderer<span class="token punctuation">.</span><span class="token method function property-access">unmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>Unmount 記憶體中的 tree，並觸發相對應的生命週期事件。</section><section id="testrenderergetinstance-testrenderergetinstance"class="level3"><h3><code>testRenderer.getInstance()</code> {#testrenderergetinstance}</h3><pre class="language-javascript"><code class="language-javascript">testRenderer<span class="token punctuation">.</span><span class="token method function property-access">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>如果可以的話，回傳與 root element 相對應的 instance。如果 root element 是 function component，該方法無效，因為 function component 沒有 instance。</section><section id="testrendererroot-testrendererroot"class="level3"><h3><code>testRenderer.root</code> {#testrendererroot}</h3><pre class="language-javascript"><code class="language-javascript">testRenderer<span class="token punctuation">.</span><span class="token property-access">root</span></code></pre><p>回傳 root 「測試 instance」object，它對於 assert tree 中的特定 node 十分有用。你可以利用它來尋找其他更深層的「測試 instance」。</section><section id="testinstancefind-testinstancefind"class="level3"><h3><code>testInstance.find()</code> {#testinstancefind}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token method function property-access">find</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span></code></pre><p>找到一個 descendant 測試 instance，其 <code>test(testInstance)</code> 回傳 true。如果找到不只一個測試 instance，將會拋出錯誤。</section><section id="testinstancefindbytype-testinstancefindbytype"class="level3"><h3><code>testInstance.findByType()</code> {#testinstancefindbytype}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token method function property-access">findByType</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span></code></pre><p>找到一個與指定 <code>type</code> 匹配的 descendant 測試 instance。如果不只有一個測試 instance 匹配指定的 <code>type</code>，將會拋出錯誤。</section><section id="testinstancefindbyprops-testinstancefindbyprops"class="level3"><h3><code>testInstance.findByProps()</code> {#testinstancefindbyprops}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token method function property-access">findByProps</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span></code></pre><p>找到一個與指定 <code>props</code> 匹配的 descendant 測試 instance。如果不只有一個測試 instance 匹配指定的 <code>props</code>，將會拋出錯誤。</section><section id="testinstancefindall-testinstancefindall"class="level3"><h3><code>testInstance.findAll()</code> {#testinstancefindall}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token method function property-access">findAll</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span></code></pre><p>找到所有的 descendant 測試 instance，其 <code>test(testInstance)</code> 回傳 true。</section><section id="testinstancefindallbytype-testinstancefindallbytype"class="level3"><h3><code>testInstance.findAllByType()</code> {#testinstancefindallbytype}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token method function property-access">findAllByType</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span></code></pre><p>找到所有與指定 <code>type</code> 匹配的 descendant 測試 instance。</section><section id="testinstancefindallbyprops-testinstancefindallbyprops"class="level3"><h3><code>testInstance.findAllByProps()</code> {#testinstancefindallbyprops}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token method function property-access">findAllByProps</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span></code></pre><p>找到所有與指定 <code>props</code> 匹配的 descendant 測試 instance。</section><section id="testinstanceinstance-testinstanceinstance"class="level3"><h3><code>testInstance.instance</code> {#testinstanceinstance}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token property-access">instance</span></code></pre><p>該測試 instance 相對應的 component instance。它只能用於 class component，因為 function component 沒有 instance。它與 component 內部的 <code>this</code> 值匹配。</section><section id="testinstancetype-testinstancetype"class="level3"><h3><code>testInstance.type</code> {#testinstancetype}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token property-access">type</span></code></pre><p>該測試 instance 相對應的 component 類型。例如，一個 <code>&#x3C;Button /></code> component 的類型為 <code>Button</code>。</section><section id="testinstanceprops-testinstanceprops"class="level3"><h3><code>testInstance.props</code> {#testinstanceprops}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token property-access">props</span></code></pre><p>該測試 instance 相對應的 component props。例如，一個 <code>&#x3C;Button size="small" /></code> component 的 props 為 <code>{size: 'small'}</code>。</section><section id="testinstanceparent-testinstanceparent"class="level3"><h3><code>testInstance.parent</code> {#testinstanceparent}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token property-access">parent</span></code></pre><p>該測試 instance 的 parent 測試 instance。</section><section id="testinstancechildren-testinstancechildren"class="level3"><h3><code>testInstance.children</code> {#testinstancechildren}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token property-access">children</span></code></pre><p>該測試 instance 的 children 測試 instance。</section></section><section id="ideas"class="level2"><h2>概念</h2><p>你可以把 <code>createNodeMock</code> function 當作第二個參數傳給 <code>TestRenderer.create</code>，做為自訂 mock 的 refs。 <code>createNodeMock</code> 接受目前 element 作為參數，並且回傳一個 mock 的 ref object。這十分有利於依賴 refs component 的測試。<pre class="language-javascript"><code class="language-javascript"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">TestRenderer</span></span> <span class="token keyword module">from</span> <span class="token string">'react-test-renderer'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">input</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">input</span><span class="token punctuation">.</span><span class="token method function property-access">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">el</span> <span class="token arrow operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">input</span> <span class="token operator">=</span> el<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> focused <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">TestRenderer</span><span class="token punctuation">.</span><span class="token method function property-access">create</span><span class="token punctuation">(</span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyComponent</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token function-variable function">createNodeMock</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">===</span> <span class="token string">'input'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// mock a focus function</span>
        <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
          <span class="token function-variable function">focus</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
            focused <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword control-flow">return</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span>focused<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><span style="float:footnote"><a href="./index.html#toc">Go to TOC</a></span></section></section>