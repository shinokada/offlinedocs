<!doctype html><html lang="zh-hant"><meta charset="utf-8"><title>Render Element</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="render-element"class="level1"><h1>Render Element</h1><p>建立 React 應用程式最小的單位是 element。<p>一個 element 描述你想要在螢幕上所看到的：<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> world<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>與瀏覽器的 DOM element 不同，React element 是單純的 object，而且很容易被建立。React DOM 負責更新 DOM 來符合 React element。<blockquote><p><strong>注意：</strong><p>大家可能會將 element 與更廣為人知的「component」概念混淆。我們將會在<a href="./components-and-props.html">下一個章節</a>介紹 component。Component 是由 element 所「組成」的，我們建議你在開始之前閱讀本章節。</blockquote><section id="rendering-an-element-into-the-dom"class="level2"><h2>Render Element 到 DOM 內</h2><p>假設你的 HTML 檔案內有一個 <code>&#x3C;div></code>：<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span></code></pre><p>我們稱為這是一個「root」DOM node，因為所有在內的 element 都會透過 React DOM 做管理。<p>使用 React 建立應用程式時，通常會有一個單一的 root DOM node。如果你想要整合 React 到現有的應用程式時，你可以根據你的需求獨立出多個 root DOM node。<p>如果要 render 一個 React element 到 root DOM node，傳入兩者到 <a href="./react-dom-client.html#createroot"><code>ReactDOM.createRoot()</code></a>，接著傳入 React element 到 <code>root.render()</code>：<p><code>embed:rendering-elements/render-an-element.js</code><p><a href="https://codepen.io/gaearon/pen/ZpvBNJ?editors=1010">在 CodePen 上試試看吧！</a><p>在網頁上你會看見顯示「Hello, world」。</section><section id="updating-the-rendered-element"class="level2"><h2>更新被 Render 的 Element</h2><p>React element 是 <a href="https://en.wikipedia.org/wiki/Immutable_object">immutable</a> 的。一旦你建立一個 element，你不能改變它的 children 或是 attribute。Element 就像是電影中的一個幀：它代表特定時間點的 UI。<p>憑藉我們迄今為止對 React 的認識，更新 UI 唯一的方式是建立一個新的 element，並且將它傳入到 <code>root.render</code>。<p>思考以下這個 ticking clock 的範例：<p><code>embed:rendering-elements/update-rendered-element.js</code><p><a href="https://codepen.io/gaearon/pen/gwoJZk?editors=1010">在 CodePen 上試試看吧！</a><p>它從 <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setInterval"><code>setInterval()</code></a> callback 每秒呼叫 <a href="./react-dom.html#render"><code>root.render()</code></a>。<blockquote><p><strong>注意：</strong><p>在實踐中，大部分 React 應用程式只呼叫 <code>root.render()</code> 一次。在下一個章節中，我們將會學習如何將這些程式碼封裝到 <a href="./state-and-lifecycle.html">stateful component</a>。<p>我們建議你不要跳著主題看，因為它們彼此間是環環相扣的。</blockquote></section><section id="react-only-updates-whats-necessary"class="level2"><h2>React 只更新必要的 Element</h2><p>React DOM 會將 element 和它的 children 與先前的狀態做比較，並且只更新必要的 DOM 達到理想的狀態。<p>你可以透過瀏覽器工具來檢測<a href="https://codepen.io/gaearon/pen/gwoJZk?editors=1010">最後一個範例</a>做驗證：<figure><img src="./docs/granular-dom-updates.gif"alt="DOM inspector showing granular updates"><figcaption aria-hidden="true">DOM inspector showing granular updates</figcaption></figure><p>即使我們在每秒建立一個 element 描述整個 UI tree，只有內容更改的 text node 才會被 React DOM 更新。<p>根據我們的經驗，應該思考 UI 在任何時候應該如何呈現，而不是隨著時間的推移改變它，就可以去所有消除錯誤。 <span style="float:footnote"><a href="./index.html#toc">Go to TOC</a></span></section></section>