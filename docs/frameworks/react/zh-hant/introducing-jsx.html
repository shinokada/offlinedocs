<!doctypehtml><html lang="zh-hant"><meta charset="utf-8"><title>介紹 JSX</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="介紹-jsx"class="level1"><h1>介紹 JSX</h1><p>考慮下面這個變數宣告：<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span>你好，世界！<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>這個有趣的標籤語法不是一個字串也不是 HTML。<p>這個語法叫做 JSX，是一個 JavaScript 的語法擴充。我們推薦你在寫 React 的時候透過這個語法來描述使用者介面的外觀。 JSX 可能為讓你想到一些樣板語言，但不一樣的地方是 JSX 允許你使用 JavaScript 所有的功能。<p>執行 JSX 會產生 React「element」。我們會在<a href="./rendering-elements.html">下一個章節</a>深入如何將這些輸出 render 到 DOM 裡頭。接下來，我們將帶您了解 JSX 的基礎。<section id="why-jsx"class="level3"><h3>為什麼要用 JSX?</h3><p>React 擁抱了 render 邏輯從根本上就得跟其他 UI 邏輯綁在一起的事實：事件要怎麼處理？隨著時間經過 state 會如何變化？以及要怎麼將資料準備好用於顯示？<p>與其刻意的將<em>技術</em>拆開，把標籤語法跟邏輯拆放於不同檔案之中，React <a href="https://en.wikipedia.org/wiki/Separation_of_concerns"><em>關注點分離</em></a>的方法是將其拆分為很多同時包含 UI 與邏輯的 component，而彼此之間很少互相依賴。我們會在<a href="./components-and-props.html">之後的章節</a>中回來探討 component 這個主題，但如果你還沒被說服接受將標籤語法寫在 JS 裡頭，<a href="https://www.youtube.com/watch?v=x7cQ3mrcKaY">這個演講</a>或許會說服你。<p>React <a href="./react-without-jsx.html">並不要求</a>使用 JSX，但大部分人覺得在 JavaScript 程式碼中撰寫使用者介面的同時，這是一個很好的視覺輔助。這也允許 React 顯示更有用的錯誤及警告訊息。<p>好，說完這個了，讓我們開始吧！</section><section id="embedding-expressions-in-jsx"class="level3"><h3>在 JSX 中嵌入 Expression</h3><p>在下面這個範例中，我們宣告一個名為 <code>name</code> 的變數，並在 JSX 中透過將其名稱包在大括號中使用：<pre class="language-js{1,2}"><code class="language-js{1,2}">const name = 'Josh Perez';
const element = &#x3C;h1>Hello, {name}&#x3C;/h1>;</code></pre><p>你可以在 JSX 的大括號中寫入任何合法的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators#Expressions">JavaScript expression</a>。舉例來說，<code>2 + 2</code>、<code>user.firstName</code> 以及 <code>formatName(user)</code> 都是合法的 JavaScript expression。<p>接下來的範例中，我們將嵌入呼叫 JavaScript function (<code>formatName(user)</code>) 的回傳值到一個 <code>&#x3C;h1></code> element 中。<pre class="language-js{12}"><code class="language-js{12}">function formatName(user) {
  return user.firstName+ ' ' + user.lastName;
}

const user = {
  firstName: 'Harper',
  lastName: 'Perez'
};

const element = (
  &#x3C;h1>
    Hello, {formatName(user)}!
  &#x3C;/h1>
);</code></pre><p><a href="https://codepen.io/gaearon/pen/PGEjdG?editors=1010">在 CodePen 上試試看吧！</a><p>為了方便閱讀，我們將 JSX 拆成很多行表達。雖然這並不需要，我們建議將多行 JSX 包在括號中來避免遇到<a href="http://stackoverflow.com/q/2846283">自動分號補足</a>的麻煩。</section><section id="jsx-is-an-expression-too"class="level3"><h3>JSX 本身也是 Expression</h3><p>在編譯之後，JSX expressions 就變成了一般的 JavaScript function 呼叫並回傳 JavaScript 物件。 這表示你也可以在 <code>if</code> 跟 <code>for</code> 迴圈中使用 JSX，將其指定到一個變數，使用 JSX 作為參數並由 function 中回傳。<pre class="language-js{3,5}"><code class="language-js{3,5}">function getGreeting(user) {
  if (user) {
    return &#x3C;h1>Hello, {formatName(user)}!&#x3C;/h1>;
  }
  return &#x3C;h1>Hello, Stranger.&#x3C;/h1>;
}</code></pre></section><section id="specifying-attributes-with-jsx"class="level3"><h3>在 JSX 中指定屬性</h3><p>你可以使用引號將字串設定為屬性：<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&#x3C;</span>a href<span class="token operator">=</span><span class="token string">"https://www.reactjs.org"</span><span class="token operator">></span> link <span class="token operator">&#x3C;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>你也可以在屬性中使用大括號來嵌入一個 JavaScript expression：<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&#x3C;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">avatarUrl</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&#x3C;</span><span class="token operator">/</span>img<span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>不要在嵌入 JavaScript expression 作為屬性的時候同時使用引號或是大括號。你應該要在使用字串屬性的時候使用引號，使用 expressions 的時候使用大括號，但不要同時使用。<blockquote><p><strong>注意：</strong><p>由於 JSX 比較接近 JavaScript 而不是 HTML，React DOM 使用 <code>camelCase</code> 來命名屬性而不是使用慣有的 HTML 屬性名稱。<p>舉例來說：在 JSX 之中，<code>class</code> 變成了 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/className"><code>className</code></a> 而 <code>tabindex</code> 變成了 <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/tabIndex"><code>tabIndex</code></a>。</blockquote></section><section id="specifying-children-with-jsx"class="level3"><h3>在 JSX 中指定 Children</h3><p>就像是在 XML 之中，如果一個標籤是空白的，你可以用 <code>/></code> 立刻關閉這個標籤：<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&#x3C;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">avatarUrl</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>JSX 標籤也可以包含 children：<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
    <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token operator">!</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
    <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token maybe-class-name">Good</span> to see you here<span class="token punctuation">.</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="jsx-prevents-injection-attacks"class="level3"><h3>JSX 防範注入攻擊</h3><p>在 JSX 之中可以安全的直接嵌入使用者輸入：<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> title <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token property-access">potentiallyMaliciousInput</span><span class="token punctuation">;</span>
<span class="token comment">// 這是安全的：</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>React DOM 預設會在 render 之前 <a href="http://stackoverflow.com/questions/7381974/which-characters-need-to-be-escaped-on-html">escape</a> 所有嵌入在 JSX 中的變數。這保證你永遠不會不小心注入任何不是直接寫在你的應用程式中的東西。所有變數都會在 render 之前轉為字串，這可以避免 <a href="https://en.wikipedia.org/wiki/Cross-site_scripting">XSS（跨網站指令碼）</a>攻擊。</section><section id="jsx-represents-objects"class="level3"><h3>JSX 表示物件</h3><p>Babel 將 JSX 編譯為呼叫 <code>React.createElement()</code> 的程式。<p>下面這兩個例子完全相同：<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token operator">&#x3C;</span>h1 className<span class="token operator">=</span><span class="token string">"greeting"</span><span class="token operator">></span>
    <span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> <span class="token maybe-class-name">World</span><span class="token operator">!</span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span>
  <span class="token string">'h1'</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">'greeting'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'Hello, World!'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><code>React.createElement()</code> 會進行一些檢查以幫助你寫出沒有 bug 的程式，但基本上它會產生類似下面的物件：<pre class="language-js"><code class="language-js"><span class="token comment">// 注意：這是簡化過的結構</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'h1'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">'greeting'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token string">'Hello, world!'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>這種物件被稱呼為「React element」。你可以想像他們描述的是你想要在螢幕上看到的東西，React 會讀取這些物件並用這些描述來產生 DOM 並保持他們在最新狀態。<p>我們會在<a href="./rendering-elements.html">下一個章節</a>探討如何把 React element render 到 DOM 之中。<blockquote><p><strong>提示：</strong><p>我們推薦你在編輯器中使用 <a href="https://babeljs.io/docs/en/next/editors">「Babel」語法</a>，這樣可以確保 ES6 跟 JSX 都能夠正確的被語法突顯。 <span style="float:footnote"><a href="./index.html#toc">Go to TOC</a></span></blockquote></section></section>