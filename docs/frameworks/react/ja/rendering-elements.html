<!doctypehtml><html lang="ja"><meta charset="utf-8"><title>要素のレンダー</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="要素のレンダー"class="level1"><h1>要素のレンダー</h1><p>要素とは React アプリケーションの最小単位の構成ブロックです。<p>要素は画面上に表示したいものの説明書きです：<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> world<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>ブラウザの DOM 要素とは異なり、React 要素はプレーンなオブジェクトであり、安価に作成できます。React DOM が React 要素に合致するように DOM を更新する作業を担当します。<blockquote><p><strong>補足:</strong><p>要素のことを、より広く知られている概念である "コンポーネント" と混同する人もいるかもしれません。コンポーネントについては<a href="./components-and-props.html">次の章</a>で説明します。要素とはコンポーネントを "構成する" ものです。次に進む前にこの章を読んでいくことをお勧めします。</blockquote><section id="rendering-an-element-into-the-dom"class="level2"><h2>要素を DOM として描画する</h2><p>HTML ファイルの中に <code>&#x3C;div></code> 要素があったとしましょう：<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span></code></pre><p>この中にあるもの全てが React DOM によって管理されることになるので、"ルート" DOM ノードと呼ぶことにしましょう。<p>React だけで構築されたアプリケーションは、通常ルート DOM ノードをひとつだけ持ちます。既存のアプリに React を統合しようとしている場合は、独立したルート DOM ノードを好きなだけ持つことができます。<p>React 要素をルート DOM ノードにレンダーするには、まず <a href="./react-dom-client.html#createroot"><code>ReactDOM.createRoot()</code></a> に DOM 要素を渡し、<code>root.render()</code> に React 要素を渡します：<p><code>embed:rendering-elements/render-an-element.js</code><p><strong><a href="https://codepen.io/gaearon/pen/ZpvBNJ?editors=1010">Try it on CodePen</a></strong><p>このコードはページに "Hello, world" を表示します。</section><section id="updating-the-rendered-element"class="level2"><h2>レンダーされた要素の更新</h2><p>React 要素は<a href="https://en.wikipedia.org/wiki/Immutable_object">イミュータブル</a>です。一度要素を作成すると、その子要素もしくは属性を変更することはできません。要素は映画の中のひとつのフレームのようなものであり、それは特定のある時点の UI を表します。<p>今のところ我々が学んだ UI を更新する唯一の方法は、新しい要素を作成して <code>root.render()</code> に渡すことだけです。<p>以下の秒刻みで動く時計の例について考えます：<p><code>embed:rendering-elements/update-rendered-element.js</code><p><strong><a href="https://codepen.io/gaearon/pen/gwoJZk?editors=1010">Try it on CodePen</a></strong><p>上記のコードでは <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setInterval"><code>setInterval()</code></a> のコールバックから <a href="./react-dom.html#render"><code>root.render()</code></a> を毎秒呼び出しています。<blockquote><p><strong>補足:</strong><p>実際には大抵の React アプリケーションは <code>root.render()</code> を一度しか呼び出しません。次の章では上記のようなコードをどのように <a href="./state-and-lifecycle.html">state 付きコンポーネント</a>へとカプセル化するのかを学びます。<p>トピックはお互いを基礎として構成されているため、読み飛ばさないことをお勧めします。</blockquote></section><section id="react-only-updates-whats-necessary"class="level2"><h2>React は必要な箇所のみを更新する</h2><p>React DOM は要素とその子要素を以前のものと比較し、DOM を望ましい状態へと変えるのに必要なだけの DOM の更新を行います。<p>このことは、<a href="https://codepen.io/gaearon/pen/gwoJZk?editors=1010">最後の例</a>をブラウザツールで調査すれば確認できます：<figure><img src="./docs/granular-dom-updates.gif"alt="DOM inspector showing granular updates"><figcaption aria-hidden="true">DOM inspector showing granular updates</figcaption></figure><p>毎秒ごとに UI ツリー全体を表す要素を作成しているにも関わらず、内容が変更されたテキストノードのみが React DOM により更新されます。<p>私達の経験上、時間の経過によりどのように UI が変更されるかを考えるよりも、任意の時点において UI がどのように見えるべきかを考えることで、あらゆる類のバグを排除することができます。 <span style="float:footnote"><a href="./index.html#toc">Go to TOC</a></span></section></section>