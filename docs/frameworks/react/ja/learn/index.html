<!doctype html><html lang="ja"><meta charset="utf-8"><title>クイックスタート</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="クイックスタート"><h1 id="クイックスタート">クイックスタート</h1><intro><p>React ドキュメントへようこそ！ このページでは、日々の開発で使用する React のコンセプトのうち 80％ の部分を紹介します。</p></intro><youwilllearn><ul><li>コンポーネントの作成とネスト<li>マークアップとスタイルの追加<li>データの表示<li>条件分岐とリストのレンダー<li>イベントへの応答と画面の更新<li>コンポーネント間でのデータの共有</ul></youwilllearn><section class="level2"aria-labelledby="コンポーネントの作成とネスト-components"><h2 id="コンポーネントの作成とネスト-components">コンポーネントの作成とネスト {/<em>components</em>/}</h2><p>React アプリは<em>コンポーネント</em>で構成されています。コンポーネントとは、独自のロジックと外見を持つ UI（ユーザインターフェース）の部品のことです。コンポーネントは、ボタンのような小さなものである場合も、ページ全体を表す大きなものである場合もあります。<p>React におけるコンポーネントとは、マークアップを返す JavaScript 関数です。<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyButton</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>button<span class="token operator">></span><span class="token constant">I</span>'m a button<span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p><code>MyButton</code> を宣言したら、別のコンポーネントにネストできます。<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Welcome</span> to my app<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyButton</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p><code>&#x3C;MyButton /></code> が大文字で始まっていることに注意してください。こうすることで、React のコンポーネントであるということを示しています。React のコンポーネント名は常に大文字で始める必要があり、HTML タグは小文字でなければなりません。<p>結果を見てみましょう。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyButton</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>button<span class="token operator">></span>
      <span class="token constant">I</span>'m a button
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Welcome</span> to my app<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyButton</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p><code>export default</code> キーワードは、ファイル内のメインコンポーネントを指定しています。このような JavaScript の構文に関して分からない部分があれば、<a href="https://developer.mozilla.org/en-US/docs/web/javascript/reference/statements/export">MDN</a> や <a href="https://javascript.info/import-export">javascript.info</a> に素晴らしいリファレンスがあります。</section><section class="level2"aria-labelledby="jsx-でマークアップを書く-writing-markup-with-jsx"><h2 id="jsx-でマークアップを書く-writing-markup-with-jsx">JSX でマークアップを書く {/<em>writing-markup-with-jsx</em>/}</h2><p>上で見たマークアップ構文は、<em>JSX</em> と呼ばれるものです。使用は任意ですが、その便利さゆえにほとんどの React プロジェクトでは JSX が使用されています。<a href="/learn/installation">ローカル開発におすすめのツール</a>は、すべて JSX に対応しています。<p>JSX は HTML より構文が厳格です。<code>&#x3C;br /></code> のようにタグは閉じる必要があります。また、コンポーネントは複数の JSX タグを return することはできません。<code>&#x3C;div>...&#x3C;/div></code> や空の <code>&#x3C;>...&#x3C;/></code> ラッパのような共通の親要素で囲む必要があります。<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">AboutPage</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">About</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Hello</span> there<span class="token punctuation">.</span><span class="token operator">&#x3C;</span>br <span class="token operator">/</span><span class="token operator">></span><span class="token maybe-class-name">How</span> <span class="token keyword control-flow">do</span> you <span class="token keyword control-flow">do</span><span class="token operator">?</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>JSX に変換しないといけない HTML がたくさんある場合は、<a href="https://transform.tools/html-to-jsx">オンラインコンバータ</a>を使うことができます。</section><section class="level2"aria-labelledby="スタイルの追加-adding-styles"><h2 id="スタイルの追加-adding-styles">スタイルの追加 {/<em>adding-styles</em>/}</h2><p>React では、CSS クラスを <code>className</code> で指定します。HTML の <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/class"><code>class</code></a> 属性と同じ方法で動作します。<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>img className<span class="token operator">=</span><span class="token string">"avatar"</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p>そして、別の CSS ファイルに対応する CSS ルールを記述します：<pre class="language-css"><code class="language-css"><span class="token comment">/* In your CSS */</span>
<span class="token selector"><span class="token class">.avatar</span></span> <span class="token punctuation">{</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>React には CSS ファイルの追加方法に関する規則はありません。最も単純なケースでは、HTML に <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link"><code>&#x3C;link></code></a> タグを追加します。ビルドツールやフレームワークを使っている場合は、そちらのドキュメントを参照して、プロジェクトに CSS ファイルを追加する方法を確認してください。</section><section class="level2"aria-labelledby="データの表示-displaying-data"><h2 id="データの表示-displaying-data">データの表示 {/<em>displaying-data</em>/}</h2><p>JSX を使うことで、JavaScript 内にマークアップを入れることができます。波括弧を使うことで、逆に JSX の中から JavaScript に「戻る」ことができ、コード内の変数を埋め込んでユーザに表示することができます。たとえば、以下は <code>user.name</code> を表示します：<pre class="language-js"><code class="language-js"><span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
  <span class="token operator">&#x3C;</span>h1<span class="token operator">></span>
    <span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>JSX の属性 (attribute) の部分から JavaScript に「戻る」こともでき、その場合引用符の<em>代わりに</em>波括弧を使う必要があります。例えば、<code>className="avatar"</code> は CSS クラスとして <code>"avatar"</code> 文字列を渡すものですが、<code>src={user.imageUrl}</code> は JavaScript の <code>user.imageUrl</code> 変数の値を読み込み、その値を <code>src</code> 属性として渡します：<pre class="language-js"><code class="language-js"><span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
  <span class="token operator">&#x3C;</span>img
    className<span class="token operator">=</span><span class="token string">"avatar"</span>
    src<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">imageUrl</span><span class="token punctuation">}</span>
  <span class="token operator">/</span><span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>JSX の波括弧の中にもっと複雑な式を入れることもできます。例えば、<a href="https://javascript.info/operators#string-concatenation-with-binary">文字列の連結</a>ができます：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Hedy Lamarr'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageUrl</span><span class="token operator">:</span> <span class="token string">'https://i.imgur.com/yXOvdOSs.jpg'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imageSize</span><span class="token operator">:</span> <span class="token number">90</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Profile</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>img
        className<span class="token operator">=</span><span class="token string">"avatar"</span>
        src<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">imageUrl</span><span class="token punctuation">}</span>
        alt<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'Photo of '</span> <span class="token operator">+</span> user<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span>
        style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          <span class="token literal-property property">width</span><span class="token operator">:</span> user<span class="token punctuation">.</span><span class="token property-access">imageSize</span><span class="token punctuation">,</span>
          <span class="token literal-property property">height</span><span class="token operator">:</span> user<span class="token punctuation">.</span><span class="token property-access">imageSize</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector"><span class="token class">.avatar</span></span> <span class="token punctuation">{</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.large</span></span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token unit">px</span> solid <span class="token color">gold</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>上記の例では、<code>style={{}}</code> は特別な構文ではなく、<code>style={ }</code> という JSX の波括弧内にある通常の <code>{}</code> オブジェクトです。スタイルが JavaScript 変数に依存する場合は、<code>style</code> 属性を使うことができます。</section><section class="level2"aria-labelledby="条件付きレンダー-conditional-rendering"><h2 id="条件付きレンダー-conditional-rendering">条件付きレンダー {/<em>conditional-rendering</em>/}</h2><p>React には、条件分岐を書くための特別な構文は存在しません。代わりに、通常の JavaScript コードを書くときに使うのと同じ手法を使います。例えば、<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/if...else"><code>if</code></a> ステートメントを使って条件付きで JSX を含めることができます：<pre class="language-js"><code class="language-js"><span class="token keyword">let</span> content<span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>isLoggedIn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  content <span class="token operator">=</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">AdminPanel</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
  content <span class="token operator">=</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">LoginForm</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
  <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
    <span class="token punctuation">{</span>content<span class="token punctuation">}</span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>コンパクトなコードをお望みの場合は、<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator">条件 <code>?</code> 演算子</a>を使用できます。<code>if</code> とは異なり、JSX の中で動作します。<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>div<span class="token operator">></span>
  <span class="token punctuation">{</span>isLoggedIn <span class="token operator">?</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">AdminPanel</span> <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">LoginForm</span> <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span></code></pre><p><code>else</code> 側の分岐が不要な場合は、短い<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_AND#short-circuit_evaluation">論理 <code>&#x26;&#x26;</code> 構文</a>を使用することもできます。<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>div<span class="token operator">></span>
  <span class="token punctuation">{</span>isLoggedIn <span class="token operator">&#x26;&#x26;</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">AdminPanel</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span></code></pre><p>これらのアプローチはすべて、属性を条件付きで指定する場合にも機能します。このような JavaScript 構文の一部に慣れていないという場合、最初は常に <code>if...else</code> を使用することにしても構いません。</section><section class="level2"aria-labelledby="リストのレンダー-rendering-lists"><h2 id="リストのレンダー-rendering-lists">リストのレンダー {/<em>rendering-lists</em>/}</h2><p>コンポーネントのリストをレンダーする場合は、<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for"><code>for</code> ループ</a> や <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map">配列の <code>map()</code> 関数</a> といった JavaScript の機能を使って行います。<p>例えばこのような商品の配列があるとします：<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> products <span class="token operator">=</span> <span class="token punctuation">[</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><p>コンポーネント内で、<code>map()</code> 関数を使って商品の配列を <code>&#x3C;li></code> 要素の配列に変換します：<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> listItems <span class="token operator">=</span> products<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">product</span> <span class="token arrow operator">=></span>
  <span class="token operator">&#x3C;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span><span class="token operator">></span>
    <span class="token punctuation">{</span>product<span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">}</span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
  <span class="token operator">&#x3C;</span>ul<span class="token operator">></span><span class="token punctuation">{</span>listItems<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><code>&#x3C;li></code> に <code>key</code> 属性があることに注意してください。リスト内の各項目には、兄弟の中でそれを一意に識別するための文字列または数値を渡す必要があります。通常、key はデータから来るはずで、データベース上の ID などが該当します。React は、後でアイテムを挿入、削除、並べ替えることがあった際に、何が起こったかを key を使って把握します。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> products <span class="token operator">=</span> <span class="token punctuation">[</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ShoppingList</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> listItems <span class="token operator">=</span> products<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">product</span> <span class="token arrow operator">=></span>
    <span class="token operator">&#x3C;</span>li
      key<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span>
      style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
        <span class="token literal-property property">color</span><span class="token operator">:</span> product<span class="token punctuation">.</span><span class="token property-access">isFruit</span> <span class="token operator">?</span> <span class="token string">'magenta'</span> <span class="token operator">:</span> <span class="token string">'darkgreen'</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">></span>
      <span class="token punctuation">{</span>product<span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>ul<span class="token operator">></span><span class="token punctuation">{</span>listItems<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack></section><section class="level2"aria-labelledby="イベントに応答する-responding-to-events"><h2 id="イベントに応答する-responding-to-events">イベントに応答する {/<em>responding-to-events</em>/}</h2><p>コンポーネントの中で<em>イベントハンドラ</em>関数を宣言することで、イベントに応答できます：<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyButton</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'You clicked me!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token maybe-class-name">Click</span> me
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p><code>onClick={handleClick}</code> の末尾に括弧がないことに注意してください！ そこでイベントハンドラ関数を<em>呼び出す</em>わけではありません。<em>渡すだけ</em>です。ユーザがボタンをクリックしたときに、React がイベントハンドラを呼び出します。</section><section class="level2"aria-labelledby="画面の更新-updating-the-screen"><h2 id="画面の更新-updating-the-screen">画面の更新 {/<em>updating-the-screen</em>/}</h2><p>しばしば、コンポーネントに情報を「記憶」させて表示したいことがあります。例えば、ボタンがクリックされた回数を数えて覚えておきたい場合です。これを行うには、コンポーネントに <em>state</em> を追加します。<p>まず、React から <a href="/reference/react/useState"><code>useState</code></a> をインポートします。<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span></code></pre><p>これで、コンポーネント内に <em>state 変数</em>を宣言できます：<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyButton</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span></code></pre><p><code>useState</code> からは 2 つのものが得られます。現在の state (<code>count</code>) と、それを更新するための関数 (<code>setCount</code>) です。名前は何でも構いませんが、慣習的には <code>[something, setSomething]</code> のように記述します。<p>ボタンが初めて表示されるとき、<code>count</code> は <code>0</code> になります。これは <code>useState()</code> に <code>0</code> を渡したからです。state を変更したいときは、<code>setCount()</code> を呼び出し、新しい値を渡します。このボタンをクリックすると、カウンタが増加します：<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyButton</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token maybe-class-name">Clicked</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span> times
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>React は、再度コンポーネントの関数を呼び出します。今度は <code>count</code> が <code>1</code> になっています。次の呼び出しでは <code>2</code> になっています。次々と増えていきます。<p>同じコンポーネントを複数の場所でレンダーした場合、それぞれが独自の state を持ちます。それぞれのボタンを個別にクリックしてみてください：</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Counters</span> that update separately<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyButton</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyButton</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyButton</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token maybe-class-name">Clicked</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span> times
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>各ボタンがそれぞれ <code>count</code> という state を「記憶」し、他のボタンに影響を与えないことに注意してください。</section><section class="level2"aria-labelledby="フックの使用-using-hooks"><h2 id="フックの使用-using-hooks">フックの使用 {/<em>using-hooks</em>/}</h2><p><code>use</code> で始まる関数は、<em>フック</em> (Hook) と呼ばれます。<code>useState</code> は React が提供する組み込みのフックです。<a href="/reference/react">API リファレンス</a>で他の組み込みフックを見ることができます。また、既存のフックを組み合わせて独自のフックを作成することもできます。<p>フックには通常の関数より多くの制限があります。フックはコンポーネントの<em>トップレベル</em>（または他のフック内）でのみ呼び出すことができます。条件分岐やループの中で <code>useState</code> を使いたい場合は、新しいコンポーネントを抽出してそこに配置します。</section><section class="level2"aria-labelledby="コンポーネント間でデータを共有する-sharing-data-between-components"><h2 id="コンポーネント間でデータを共有する-sharing-data-between-components">コンポーネント間でデータを共有する {/<em>sharing-data-between-components</em>/}</h2><p>前述の例では、それぞれの <code>MyButton</code> が独立した <code>count</code> を持っており、ボタンがクリックされるたびにクリックされたボタンの <code>count</code> だけが変更されました。</p><diagramgroup><diagram name="sharing_data_child"height="{367}"width="{407}"alt="MyApp という名前の親コンポーネントと MyButton という名前の 2 つの子コンポーネントを持つツリーを示す図。どちらの MyButton コンポーネントも、カウントの値は 0。"><p>最初、それぞれの <code>MyButton</code> の <code>count</code> は <code>0</code></p></diagram><diagram name="sharing_data_child_clicked"height="{367}"width="{407}"alt="前の図と同じだが、1 番目の MyButton コンポーネントのカウントがクリックされ、カウント値が 1 に増えている。2 番目の MyButton コンポーネントの値は 0 のまま。"><p>1 番目の <code>MyButton</code> が <code>count</code> を <code>1</code> に更新</p></diagram></diagramgroup><p>ただし、コンポーネント間で<em>データを共有し、常に一緒に更新したい</em>ということもよくあります。<p>両方の <code>MyButton</code> コンポーネントが同じ <code>count</code> を表示し、一緒に更新されるようにするには、状態を個々のボタンから「上に」移動して、それらすべてを含む最も近いコンポーネントに入れます。<p>この例では、<code>MyApp</code> がそれです：</p><diagramgroup><diagram name="sharing_data_parent"height="{385}"width="{410}"alt="MyApp という名前の親コンポーネントと、MyButton という名前の 2 つの子コンポーネントを持つツリーを示す図。MyApp には値が 0 のカウントが含まれ、それが両方の MyButton コンポーネントに渡される。値は 0。"><p>最初、<code>MyApp</code> の <code>count</code> は <code>0</code> で、どちらの子もそれを受け取っている。</p></diagram><diagram name="sharing_data_parent_clicked"height="{385}"width="{410}"alt="前の図と同じだが、親 MyApp コンポーネントのカウントがクリックによりハイライトされ、値が 1 になっている。子 MyButton コンポーネントも両方ハイライトされ、それぞれの子のカウント値が 1 になっている。値が下に渡されたことを示している。"><p>クリック時に <code>MyApp</code> が <code>count</code> を <code>1</code> に更新し、それが両方の子に渡される</p></diagram></diagramgroup><p>こうすれば、どちらのボタンをクリックしても、<code>MyApp</code> の <code>count</code> が更新され、連動して <code>MyButton</code> の両方のカウントが更新されるでしょう。以下は、コードでこれを表現する方法です。<p>まず、<code>MyButton</code> から <code>MyApp</code> に、<em>state の移動</em>を行います。<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Counters</span> that update separately<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyButton</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyButton</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyButton</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... we're moving code from here ...</span>
<span class="token punctuation">}</span>
</code></pre><p>次に、<code>MyApp</code> から各 <code>MyButton</code> に <em>state を渡し</em>、共有のクリックハンドラも一緒に渡します。以前に <code>&#x3C;img></code> のような組み込みタグで行ったときと同様、JSX の波括弧を使うことで <code>MyButton</code> に情報を渡すことができます。<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Counters</span> that update together<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyButton</span> count<span class="token operator">=</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyButton</span> count<span class="token operator">=</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>このように渡される情報は <em>props</em> と呼ばれます。<code>MyApp</code> コンポーネントは <code>count</code> 状態と <code>handleClick</code> イベントハンドラを保持しており、それらを<em>どちらも props として</em>各ボタンに渡します。<p>最後に、<code>MyButton</code> を変更して、親コンポーネントから渡された props を<em>読み込む</em>ようにします。<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyButton</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> count<span class="token punctuation">,</span> onClick <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>onClick<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token maybe-class-name">Clicked</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span> times
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>ボタンをクリックすると、<code>onClick</code> ハンドラが発火します。各ボタンの <code>onClick</code> プロパティは <code>MyApp</code> 内の <code>handleClick</code> 関数となっているので、その中のコードが実行されます。そのコードは <code>setCount(count + 1)</code> を呼び出し、<code>count</code> という state 変数をインクリメントします。新しい <code>count</code> の値が各ボタンに props として渡されるため、すべてのボタンに新しい値が表示されます。この手法は「state のリフトアップ（持ち上げ）」と呼ばれています。リフトアップすることで、state をコンポーネント間で共有できました。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Counters</span> that update together<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyButton</span> count<span class="token operator">=</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyButton</span> count<span class="token operator">=</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyButton</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> count<span class="token punctuation">,</span> onClick <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>onClick<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token maybe-class-name">Clicked</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span> times
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack></section><section class="level2"aria-labelledby="次のステップ-next-steps"><h2 id="次のステップ-next-steps">次のステップ {/<em>next-steps</em>/}</h2><p>これで、React のコードを書く基本が分かったことになります！<p><a href="/learn/tutorial-tic-tac-toe">チュートリアル</a>をチェックして、これらの概念を実践し、React を使った最初のミニアプリを作成しましょう。 <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>