<!doctype html><html lang="ja"><meta charset="utf-8"><title>TypeScript の使用</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="typescript-の使用"><h1 id="typescript-の使用">TypeScript の使用</h1><p>re: <a href="https://github.com/reactjs/react.dev/issues/5960">https://github.com/reactjs/react.dev/issues/5960</a></p><intro><p>TypeScript は JavaScript コードベースに型定義を追加するための人気の方法です。TypeScript は標準で <a href="/learn/writing-markup-with-jsx">JSX をサポート</a>しており、プロジェクトに <a href="https://www.npmjs.com/package/@types/react"><code>@types/react</code></a> と <a href="https://www.npmjs.com/package/@types/react-dom"><code>@types/react-dom</code></a> を追加することで、React Web に対する完全なサポートを得ることができます。</p></intro><youwilllearn><ul><li><a href="/learn/typescript#typescript-with-react-components">TypeScript で React コンポーネントを書く方法</a><li><a href="/learn/typescript#example-hooks">フックの型付けの例</a><li><a href="/learn/typescript/#useful-types"><code>@types/react</code> にある一般的な型</a><li><a href="/learn/typescript/#further-learning">さらに学習するためのリソース</a></ul></youwilllearn><section class="level2"aria-labelledby="インストール-installation"><h2 id="インストール-installation">インストール {/<em>installation</em>/}</h2><p>すべての<a href="/learn/start-a-new-react-project#production-grade-react-frameworks">本番環境向け React フレームワーク</a>は TypeScript の使用をサポートしています。フレームワーク個別のガイドに従ってインストールを行ってください。<ul><li><a href="https://nextjs.org/docs/app/building-your-application/configuring/typescript">Next.js</a><li><a href="https://remix.run/docs/en/1.19.2/guides/typescript">Remix</a><li><a href="https://www.gatsbyjs.com/docs/how-to/custom-configuration/typescript/">Gatsby</a><li><a href="https://docs.expo.dev/guides/typescript/">Expo</a></ul><section class="level3"aria-labelledby="既存の-react-プロジェクトに-typescript-を追加する-adding-typescript-to-an-existing-react-project"><h3 id="既存の-react-プロジェクトに-typescript-を追加する-adding-typescript-to-an-existing-react-project">既存の React プロジェクトに TypeScript を追加する {/<em>adding-typescript-to-an-existing-react-project</em>/}</h3><p>React の型定義の最新バージョンをインストールするには以下のようにします。</p><terminalblock>npm install @types/react @types/react-dom</terminalblock><p><code>tsconfig.json</code> で以下のコンパイラオプションを設定する必要があります。<ol><li><a href="https://www.typescriptlang.org/tsconfig/#lib"><code>lib</code></a> に <code>dom</code> が含まれていなければなりません（注：<code>lib</code> オプションが指定されない場合、<code>dom</code> はデフォルトで含まれます）。<li><a href="https://www.typescriptlang.org/tsconfig/#jsx"><code>jsx</code></a> を有効なオプションのいずれかに設定する必要があります。ほとんどのアプリケーションでは <code>preserve</code> で上手くいきます。 ライブラリを公開する場合は、選択すべき値について <a href="https://www.typescriptlang.org/tsconfig/#jsx"><code>jsx</code> のドキュメンテーション</a>を参照してください。</ol></section></section><section class="level2"aria-labelledby="typescript-で-react-コンポーネントを書く方法-typescript-with-react-components"><h2 id="typescript-で-react-コンポーネントを書く方法-typescript-with-react-components">TypeScript で React コンポーネントを書く方法 {/<em>typescript-with-react-components</em>/}</h2><note><p>JSX を含むファイルはすべて <code>.tsx</code> というファイル拡張子を使用しなければなりません。これは TypeScript 固有の拡張子であり、ファイルに JSX が含まれていることを TypeScript に伝えるためのものです。</p></note><p>TypeScript で React を書くことは、JavaScript で React を書くことに非常に似ています。コンポーネントを扱う際の主な違いは、コンポーネントの props に対して型が指定できることです。これらの型は、正確性チェックと、エディタ内でのインラインドキュメンテーションの表示に使用できます。<p><a href="/learn">クイックスタート</a>ガイドの <a href="/learn#components"><code>MyButton</code> コンポーネント</a>を例にすると、ボタンの <code>title</code> に型を追加する方法は以下のようになります。</p><sandpack><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyButton</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> title <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> # <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">Welcome to my app</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">MyButton</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>I<span class="token punctuation">'</span>m a button<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">AppTSX</span></span> <span class="token keyword module">from</span> <span class="token string">"./App.tsx"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">App</span> <span class="token operator">=</span> <span class="token maybe-class-name">AppTSX</span><span class="token punctuation">;</span></code></pre></sandpack><note><p>上記のサンドボックスは TypeScript のコードを扱うことができますが、型チェッカは実行されません。つまりこの TypeScript サンドボックスを書き換えて学習することはできますが、型エラーや警告は得られないということです。型チェックが必要な場合は、<a href="https://www.typescriptlang.org/play">TypeScript Playground</a> を使用するか、より完全な機能を備えたオンラインサンドボックスを使用してください。</p></note><p>このインライン形式の構文は、コンポーネントに対して型を指定する最も簡単な方法ですが、記述するフィールドが複数あるときには扱いにくくなることがあります。代わりに、コンポーネントの props を記述するために <code>interface</code> または <code>type</code> を使用することができます。</p><sandpack><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">MyButtonProps</span></span> <span class="token punctuation">{</span>
  <span class="token comment">/** The text to display inside the button */</span>
  # <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token comment">/** Whether the button can be interacted with */</span>
  disabled<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyButton</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token punctuation">,</span> disabled <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token maybe-class-name">MyButtonProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>disabled<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">Welcome to my app</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">MyButton</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>I<span class="token punctuation">'</span>m a disabled button<span class="token punctuation">"</span></span> <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span><span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">AppTSX</span></span> <span class="token keyword module">from</span> <span class="token string">"./App.tsx"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">App</span> <span class="token operator">=</span> <span class="token maybe-class-name">AppTSX</span><span class="token punctuation">;</span></code></pre></sandpack><p>コンポーネントの props を記述する型は、必要に応じて単純なものでも複雑なものでも構いませんが、<code>type</code> または <code>interface</code> で記述されたオブジェクト型であるべきです。TypeScript でのオブジェクトの記述方法については<a href="https://www.typescriptlang.org/docs/handbook/2/objects.html">オブジェクト型</a>で学ぶことができます。いくつかの異なる型のうちの 1 つの型になる props を記述するための<a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#union-types">ユニオン型</a>や、より高度な使用例である <a href="https://www.typescriptlang.org/docs/handbook/2/types-from-types.html">Creating Types from Types</a> ガイドも参照してください。</section><section class="level2"aria-labelledby="例フック-example-hooks"><h2 id="例フック-example-hooks">例：フック {/<em>example-hooks</em>/}</h2><p><code>@types/react</code> にある型定義には、組み込みのフックに対する型が含まれており、追加のセットアップなしにあなたのコンポーネント内で使用することができます。これらはあなたがコンポーネントに書くコードを考慮できるように作られており、多くの場合は<a href="https://www.typescriptlang.org/docs/handbook/type-inference.html">型の推論</a>が働くため、理想的にはこまごまと型の指定を行う必要がないようになっています。<p>とはいえ、フックの型をどのように指定するかについて、ここでいくつかの例を見ておきましょう。<section class="level3"aria-labelledby="usestate-typing-usestate"><h3 id="usestate-typing-usestate"><code>useState</code> {/<em>typing-usestate</em>/}</h3><p><a href="/reference/react/useState"><code>useState</code> フック</a>は、初期 state として渡された値を利用して、その値の型が何であるべきかを決定します。例えば：<pre class="language-ts"><code class="language-ts"><span class="token comment">// Infer the type as "boolean"</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>enabled<span class="token punctuation">,</span> setEnabled<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>これで <code>enabled</code> に <code>boolean</code> 型が割り当てられ、また <code>setEnabled</code> は引数として <code>boolean</code> 値または <code>boolean</code> を返す関数を受け取る関数になります。state の型を明示的に指定したい場合は、<code>useState</code> の呼び出しに型引数を渡すことで行えます。<pre class="language-ts"><code class="language-ts"><span class="token comment">// Explicitly set the type to "boolean"</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>enabled<span class="token punctuation">,</span> setEnabled<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token builtin">boolean</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>上記の例ではあまりこうする意義はありませんが、明示的に型を指定したい一般的なケースとして、ユニオン型を持たせたい場合があります。例えば、以下では <code>status</code> はいくつかの異なる文字列のいずれかになります。<pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Status</span></span> <span class="token operator">=</span> <span class="token string">"idle"</span> <span class="token operator">|</span> <span class="token string">"loading"</span> <span class="token operator">|</span> <span class="token string">"success"</span> <span class="token operator">|</span> <span class="token string">"error"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>status<span class="token punctuation">,</span> setStatus<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Status</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">"idle"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>または、<a href="/learn/choosing-the-state-structure#principles-for-structuring-state">state の構造化の原則</a>で推奨されているように、関連する state をオブジェクトとしてグループ化し、オブジェクト型を介して可能性のある状態を記述することができます。<pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">RequestState</span></span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'idle'</span> <span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'loading'</span> <span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span> error<span class="token operator">:</span> <span class="token known-class-name class-name">Error</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>requestState<span class="token punctuation">,</span> setRequestState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">RequestState</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'idle'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section class="level3"aria-labelledby="usereducer-typing-usereducer"><h3 id="usereducer-typing-usereducer"><code>useReducer</code> {/<em>typing-usereducer</em>/}</h3><p><a href="/reference/react/useReducer"><code>useReducer</code> フック</a> は、リデューサ関数と初期 state を受け取る、より複雑なフックです。リデューサ関数の型は初期 state から推論されます。<code>useReducer</code> の呼び出しに型引数を含めることで state の型を指定することもできますが、通常は代わりに初期 state 自体に型を指定する方が良いでしょう。</p><sandpack><pre class="language-tsx"><code class="language-tsx"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>useReducer<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">State</span></span> <span class="token punctuation">{</span>
   count<span class="token operator">:</span> <span class="token builtin">number</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">CounterAction</span></span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"reset"</span> <span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"setCount"</span><span class="token punctuation">;</span> value<span class="token operator">:</span> <span class="token maybe-class-name">State</span><span class="token punctuation">[</span><span class="token string">"count"</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>

<span class="token keyword">const</span> initialState<span class="token operator">:</span> <span class="token maybe-class-name">State</span> <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">stateReducer</span><span class="token punctuation">(</span>state<span class="token operator">:</span> <span class="token maybe-class-name">State</span><span class="token punctuation">,</span> action<span class="token operator">:</span> <span class="token maybe-class-name">CounterAction</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">State</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">"reset"</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> initialState<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"setCount"</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> <span class="token spread operator">...</span>state<span class="token punctuation">,</span> count<span class="token operator">:</span> action<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword module">default</span><span class="token operator">:</span>
      <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Error</span></span><span class="token punctuation">(</span><span class="token string">"Unknown action"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>stateReducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">addFive</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"setCount"</span><span class="token punctuation">,</span> value<span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">count</span> <span class="token operator">+</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">reset</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"reset"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">Welcome to my counter</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">

      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Count: </span><span class="token punctuation">{</span>state<span class="token punctuation">.</span><span class="token property-access">count</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>addFive<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">Add 5</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>reset<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">Reset</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">AppTSX</span></span> <span class="token keyword module">from</span> <span class="token string">"./App.tsx"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">App</span> <span class="token operator">=</span> <span class="token maybe-class-name">AppTSX</span><span class="token punctuation">;</span></code></pre></sandpack><p>ここではいくつかの重要な場所で TypeScript が使用されています。<ul><li><code>interface State</code> でリデューサの state の型を指定する。<li><code>type CounterAction</code> でリデューサにディスパッチできる各種のアクションを記述する。<li><code>const initialState: State</code> で初期 state の型、およびデフォルトで <code>useReducer</code> によって使用される型を指定する。<li><code>stateReducer(state: State, action: CounterAction): State</code> でリデューサ関数の引数と返り値の型を指定する。</ul><p><code>initialState</code> に型を指定するよりも明示的な代替手段として、<code>useReducer</code> に型引数を渡すこともできます。<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> stateReducer<span class="token punctuation">,</span> <span class="token maybe-class-name">State</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./your-reducer-implementation'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useReducer</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">State</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>stateReducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="usecontext-typing-usecontext"><h3 id="usecontext-typing-usecontext"><code>useContext</code> {/<em>typing-usecontext</em>/}</h3><p><a href="/reference/react/useContext"><code>useContext</code> フック</a>は、props を使って多数のコンポーネントを経由させることなく、コンポーネントツリーを通じてデータを下に渡すための技術です。使用するにはプロバイダコンポーネントを作成し、多くの場合は子コンポーネントで値を受け取るためのフックを用います。<p>コンテクストが提供する値の型は、<code>createContext</code> の呼び出しに渡す値から推論されます。</p><sandpack><pre class="language-tsx"><code class="language-tsx"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> useContext<span class="token punctuation">,</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Theme</span></span> <span class="token operator">=</span> <span class="token string">"light"</span> <span class="token operator">|</span> <span class="token string">"dark"</span> <span class="token operator">|</span> <span class="token string">"system"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">ThemeContext</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createContext</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Theme</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">"system"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">useGetTheme</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">useContext</span><span class="token punctuation">(</span><span class="token maybe-class-name">ThemeContext</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>theme<span class="token punctuation">,</span> setTheme<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Theme</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">'light'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">ThemeContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">MyComponent</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span><span class="token class-name">ThemeContext.Provider</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token function">useGetTheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Current theme: </span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">AppTSX</span></span> <span class="token keyword module">from</span> <span class="token string">"./App.tsx"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">App</span> <span class="token operator">=</span> <span class="token maybe-class-name">AppTSX</span><span class="token punctuation">;</span></code></pre></sandpack><p>意味のあるデフォルト値が存在する場合にはこれでうまくいきます。しかし時にはそうではない場合もあり、デフォルト値として <code>null</code> が適切に感じられることもあるでしょう。型システムにあなたのコードを理解させるため、<code>createContext</code> 呼び出しで <code>ContextShape | null</code> と明示的に指定する必要があります。<p>これにより、コンテクストを利用する側で <code>| null</code> の可能性を排除する必要が生じます。お勧めの方法は、値が存在することをフックで実行時にチェックし、存在しない場合にエラーをスローするようにすることです。<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> useContext<span class="token punctuation">,</span> useState<span class="token punctuation">,</span> useMemo <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token comment">// This is a simpler example, but you can imagine a more complex object here</span>
type <span class="token maybe-class-name">ComplexObject</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">kind</span><span class="token operator">:</span> string
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// The context is created with `| null` in the type, to accurately reflect the default value.</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">Context</span> <span class="token operator">=</span> createContext<span class="token operator">&#x3C;</span><span class="token maybe-class-name">ComplexObject</span> <span class="token operator">|</span> <span class="token keyword null nil">null</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// The `| null` will be removed via the check in the Hook.</span>
<span class="token keyword">const</span> <span class="token function-variable function">useGetComplexObject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span><span class="token maybe-class-name">Context</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>object<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"useGetComplexObject must be used within a Provider"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> object<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">kind</span><span class="token operator">:</span> <span class="token string">"complex"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Context</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Provider</span></span> value<span class="token operator">=</span><span class="token punctuation">{</span>object<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyComponent</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Context</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Provider</span></span><span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token function">useGetComplexObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Current</span> object<span class="token operator">:</span> <span class="token punctuation">{</span>object<span class="token punctuation">.</span><span class="token property-access">kind</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="usememo-typing-usememo"><h3 id="usememo-typing-usememo"><code>useMemo</code> {/<em>typing-usememo</em>/}</h3><p><a href="/reference/react/useMemo"><code>useMemo</code></a> フックは、関数呼び出しからの値の作成/再アクセスを行い、2 番目の引数として渡された依存配列が変更されたときにのみ関数を再実行します。フックの呼び出し結果の型は、1 番目の引数として指定した関数の返り値の型から推論されます。フックに型引数を指定することで明示的にすることができます。<pre class="language-ts"><code class="language-ts"><span class="token comment">// The type of visibleTodos is inferred from the return value of filterTodos</span>
<span class="token keyword">const</span> visibleTodos <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">filterTodos</span><span class="token punctuation">(</span>todos<span class="token punctuation">,</span> tab<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>todos<span class="token punctuation">,</span> tab<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section class="level3"aria-labelledby="usecallback-typing-usecallback"><h3 id="usecallback-typing-usecallback"><code>useCallback</code> {/<em>typing-usecallback</em>/}</h3><p><a href="/reference/react/useCallback"><code>useCallback</code></a> は、第 2 引数に渡される依存配列が同じである限り、関数への安定した参照を提供するものです。<code>useMemo</code> と同様に、関数の型は 1 番目の引数として指定した関数から推論され、フックに型引数を指定することでより明示的にすることができます。<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> handleClick <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>todos<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>TypeScript の strict モードで作業している場合、<code>useCallback</code> ではコールバックの引数に型を追加する必要があります。これは、コールバックの型が関数から推論されるため、引数がないと型を完全に決定できないからです。<p>好みのコードスタイルによっては、React が提供する <code>*EventHandler</code> 関数型を使用して、コールバックを定義しながらイベントハンドラの型を提供することができます：<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useCallback <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Form</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">"Change me"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> handleChange <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useCallback</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ChangeEventHandler</span></span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">HTMLInputElement</span><span class="token operator">>></span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setValue</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">currentTarget</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>setValue<span class="token punctuation">]</span><span class="token punctuation">)</span>
  
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>input value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Value</span><span class="token operator">:</span> <span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section></section><section class="level2"aria-labelledby="便利な型-useful-types"><h2 id="便利な型-useful-types">便利な型 {/<em>useful-types</em>/}</h2><p><code>@types/react</code> パッケージには非常に様々な型が存在しており、React と TypeScript の扱いに慣れたら目を通す価値があります。これらは <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/index.d.ts">DefinitelyTyped 内の React のフォルダ</a>で見ることができます。ここでは一般的な型をいくつか紹介します。<section class="level3"aria-labelledby="dom-イベント-typing-dom-events"><h3 id="dom-イベント-typing-dom-events">DOM イベント {/<em>typing-dom-events</em>/}</h3><p>React で DOM イベントを扱うとき、イベントの型はイベントハンドラから推論できることもあります。しかし、イベントハンドラに渡すための関数を抽出して別に定義したい場合は、イベントの型を明示的に設定する必要があります。</p><sandpack><pre class="language-tsx"><code class="language-tsx"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Form</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">"Change me"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleChange</span><span class="token punctuation">(</span>event<span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ChangeEvent</span></span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">HTMLInputElement</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setValue</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">currentTarget</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>input</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Value: </span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">AppTSX</span></span> <span class="token keyword module">from</span> <span class="token string">"./App.tsx"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">App</span> <span class="token operator">=</span> <span class="token maybe-class-name">AppTSX</span><span class="token punctuation">;</span></code></pre></sandpack><p>React 型定義には多くの種類のイベントが提供されています。完全なリストは<a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/b580df54c0819ec9df62b0835a315dd48b8594a9/types/react/index.d.ts#L1247C1-L1373">こちら</a>にあり、<a href="https://developer.mozilla.org/en-US/docs/Web/Events">DOM で最も使われるイベント</a>に基づいています。<p>必要なイベント型を見つけたい場合は、まず使用しているイベントハンドラのホバー情報を見てみると、イベントの型が表示されます。<p>このリストに含まれていないイベントを使用する必要がある場合は、すべてのイベントの基本型である <code>React.SyntheticEvent</code> 型を使用することができます。</section><section class="level3"aria-labelledby="子要素-typing-children"><h3 id="子要素-typing-children">子要素 {/<em>typing-children</em>/}</h3><p>コンポーネントの子要素を型として記述する一般的な方法は 2 つあります。1 つ目は <code>React.ReactNode</code> 型を使用する方法であり、これは JSX で子要素として渡すことが可能なすべての型のユニオン型です。<pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">ModalRendererProps</span></span> <span class="token punctuation">{</span>
  # <span class="token builtin">string</span><span class="token punctuation">;</span>
  children<span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ReactNode</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>これは子要素の非常に包括的な定義です。2 つ目は <code>React.ReactElement</code> 型を使用する方法です。こちらは JSX 要素のみを指し、文字列や数値のような JavaScript のプリミティブは含まれません。<pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">ModalRendererProps</span></span> <span class="token punctuation">{</span>
  # <span class="token builtin">string</span><span class="token punctuation">;</span>
  children<span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ReactElement</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>子要素が特定の JSX 要素の型であることを TypeScript で記述することはできないことに注意してください。子要素として <code>&#x3C;li></code> のみを受け入れるコンポーネントを型システムで記述することはできません。<p><a href="https://www.typescriptlang.org/play?#code/JYWwDg9gTgLgBAJQKYEMDG8BmUIjgIilQ3wChSB6CxYmAOmXRgDkIATJOdNJMGAZzgwAFpxAR+8YADswAVwGkZMJFEzpOjDKw4AFHGEEBvUnDhphwADZsi0gFw0mDWjqQBuUgF9yaCNMlENzgAXjgACjADfkctFnYkfQhDAEpQgD44AB42YAA3dKMo5P46C2tbJGkvLIpcgt9-QLi3AEEwMFCItJDMrPTTbIQ3dKywdIB5aU4kKyQQKpha8drhhIGzLLWODbNs3b3s8YAxKBQAcwXpAThMaGWDvbH0gFloGbmrgQfBzYpd1YjQZbEYARkB6zMwO2SHSAAlZlYIBCdtCRkZpHIrFYahQYQD8UYYFA5EhcfjyGYqHAXnJAsIUHlOOUbHYhMIIHJzsI0Qk4P9SLUBuRqXEXEwAKKfRZcNA8PiCfxWACecAAUgBlAAacFm80W-CU11U6h4TgwUv11yShjgJjMLMqDnN9Dilq+nh8pD8AXgCHdMrCkWisVoAet0R6fXqhWKhjKllZVVxMcavpd4Zg7U6Qaj+2hmdG4zeRF10uu-Aeq0LBfLMEe-V+T2L7zLVu+FBWLdLeq+lc7DYFf39deFVOotMCACNOCh1dq219a+30uC8YWoZsRyuEdjkevR8uvoVMdjyTWt4WiSSydXD4NqZP4AymeZE072ZzuUeZQKheQgA">こちらの TypeScript プレイグラウンド</a>で、<code>React.ReactNode</code> と <code>React.ReactElement</code> の両方の例を型チェッカ付きで確認することができます。</section><section class="level3"aria-labelledby="スタイル-props-typing-style-props"><h3 id="スタイル-props-typing-style-props">スタイル props {/<em>typing-style-props</em>/}</h3><p>React でインラインスタイルを使用する際には、<code>style</code> プロパティに渡されるオブジェクト型を記述するために <code>React.CSSProperties</code> を使用することができます。この型は可能な CSS プロパティすべてのユニオンであり、有効な CSS プロパティを props として <code>style</code> に渡していることを保証し、エディタで自動補完を得るための良い方法です。<pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">MyComponentProps</span></span> <span class="token punctuation">{</span>
  style<span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">CSSProperties</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section></section><section class="level2"aria-labelledby="さらに学ぶ-further-learning"><h2 id="さらに学ぶ-further-learning">さらに学ぶ {/<em>further-learning</em>/}</h2><p>このガイドでは React で TypeScript を使用するための基本的な方法を紹介しましたが、まだ学ぶべきことはたくさんあります。 ドキュメントの個々の API ページには、TypeScript とともに使用する方法についてのより詳細な説明がある場合があります。<p>以下のリソースがお勧めです。<ul><li><p><a href="https://www.typescriptlang.org/docs/handbook/">The TypeScript handbook</a> は TypeScript の公式ドキュメントであり、ほとんどの主要な言語機能をカバーしています。<li><p><a href="https://devblogs.microsoft.com/typescript/">TypeScript のリリースノート</a>では新機能が詳細に解説されています。<li><p><a href="https://react-typescript-cheatsheet.netlify.app/">React TypeScript Cheatsheet</a> はコミュニティによってメンテナンスされている、React で TypeScript を使用するためのチートシートです。多くの有用なエッジケースをカバーしており、このドキュメントよりも広範な解説が得られます。<li><p><a href="https://discord.com/invite/typescript">TypeScript コミュニティ Discord</a> は、TypeScript と React の問題について質問したり、助けを得たりするための素晴らしい場所です。 <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></ul></section></section>