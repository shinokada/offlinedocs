<!doctype html><html lang="ja"><meta charset="utf-8"><title>既存プロジェクトに React を追加する</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="既存プロジェクトに-react-を追加する"><h1 id="既存プロジェクトに-react-を追加する">既存プロジェクトに React を追加する</h1><intro><p>既存のプロジェクトにインタラクティブな要素を加えたい場合、プロジェクトを React で書き直す必要はありません。React を既存のスタックに追加することで、どこにでもインタラクティブな React コンポーネントをレンダーできます。</p></intro><note><p><strong>ローカル環境で開発するには <a href="https://nodejs.org/en/">Node.js</a> をインストールする必要があります</strong>。React を<a href="/learn/installation#try-react">オンライン</a>や単純な HTML ページで試すことも可能ですが、現実的には開発時に利用する大抵の JavaScript ツールには Node.js が必要です。</p></note><section class="level2"aria-labelledby="既存のウェブサイトの一部に-react-を使う-using-react-for-an-entire-subroute-of-your-existing-website"><h2 id="既存のウェブサイトの一部に-react-を使う-using-react-for-an-entire-subroute-of-your-existing-website">既存のウェブサイトの一部に React を使う {/<em>using-react-for-an-entire-subroute-of-your-existing-website</em>/}</h2><p>例えば Rails などの他のサーバテクノロジで構築されている <code>example.com</code> というウェブアプリがあり、<code>example.com/some-app/</code> から始まる全ルートを React で完全に実装したいとします。<p>以下の手順に従って設定することをお勧めします。<ol><li><a href="/learn/start-a-new-react-project">React ベースのフレームワーク</a>のうちひとつを使い、アプリの <strong>React 部分をビルド</strong>します。<li>フレームワークの設定で <code>/some-app</code> を <strong><em>base path</em> に指定</strong>します（方法：<a href="https://nextjs.org/docs/api-reference/next.config.js/basepath">Next.js</a>、<a href="https://www.gatsbyjs.com/docs/how-to/previews-deploys-hosting/path-prefix/">Gatsby</a>）。<li><strong>サーバーまたはプロキシを設定</strong>して、<code>/some-app/</code> 以下のすべてのリクエストを React アプリで処理するようにします。</ol><p>こうすることで、アプリの React 部分がこれらのフレームワークに組み込まれた<a href="/learn/start-a-new-react-project#can-i-use-react-without-a-framework">ベストプラクティスを最大限に取り入れる</a>ことができます。<p>多くの React ベースのフレームワークはフルスタックであり、React アプリがサーバ機能を活用できるようになっています。ただし、サーバで JavaScript を実行できない場合や実行したくない場合でも、同じアプローチが使用できます。この場合、エクスポートされた HTML/CSS/JS（Next.js の場合は <a href="https://nextjs.org/docs/advanced-features/static-html-export"><code>next export</code> 出力</a>、Gatsby の場合はデフォルト）を <code>/some-app</code> としてサーブします。</section><section class="level2"aria-labelledby="既存ページの一部に-react-を使う-using-react-for-a-part-of-your-existing-page"><h2 id="既存ページの一部に-react-を使う-using-react-for-a-part-of-your-existing-page">既存ページの一部に React を使う {/<em>using-react-for-a-part-of-your-existing-page</em>/}</h2><p>他のテクノロジ（Rails のようなサーバ側のものでも Backbone のようなクライアント側のものでも）で構築された既存のページがあり、そのページのどこかにインタラクティブな React コンポーネントをレンダーしたいとします。これは React を結合する一般的な方法です。実際、Meta では何年もの間、ほとんどの React 使用法がこうでした！<p>これを行うには、2 つのステップが必要です。<ol><li><strong>JavaScript 開発環境を設定</strong>して、<a href="/learn/writing-markup-with-jsx">JSX 構文</a>の使用、<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import"><code>import</code></a> / <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export"><code>export</code></a> 構文を使ったコードのモジュール分割、<a href="https://www.npmjs.com/">npm</a> パッケージレジストリからのパッケージ（例えば React）の使用ができるようにする。<li>ページ上の表示させたい場所に <strong>React コンポーネントをレンダー</strong>する。</ol><p>具体的なアプローチはあなたの既存ページのセットアップによって異なりますが、一部の詳細について見ていきましょう。<section class="level3"aria-labelledby="ステップ-1-モジュラーな-javascript-環境を設定する-step-1-set-up-a-modular-javascript-environment"><h3 id="ステップ-1-モジュラーな-javascript-環境を設定する-step-1-set-up-a-modular-javascript-environment">ステップ 1: モジュラーな JavaScript 環境を設定する {/<em>step-1-set-up-a-modular-javascript-environment</em>/}</h3><p>モジュラーな JavaScript 環境を使用すると、すべてのコードを単一のファイルに書くのではなく、React コンポーネントを別々のファイルに記述できるようになります。また、他の開発者によって <a href="https://www.npmjs.com/">npm</a> パッケージレジストリに公開されている、素晴らしいパッケージ群（React 自身も含む）を使えるようにもなります。具体的なやり方はあなたの既存のセットアップ方法によって異なります：<ul><li><p><strong>アプリが既に <code>import</code> 文を使ってファイル分割するよう設定されている場合</strong>、その既存の設定を使用するようにしてみてください。JS コードで <code>&#x3C;div /></code> と記述すると、構文エラーが発生するかどうかを確認してください。構文エラーが発生する場合は、<a href="https://babeljs.io/setup">Babel を使用して JavaScript を変換</a>するようにし、JSX を使うために <a href="https://babeljs.io/docs/babel-preset-react">Babel React プリセット</a> を有効にしてください。<li><p><strong>JavaScript モジュールをコンパイルする既存のセットアップがない場合</strong>は、<a href="https://vitejs.dev/">Vite</a> を使ってセットアップします。Vite コミュニティは、Rails、Django、Laravel をはじめ、<a href="https://github.com/vitejs/awesome-vite#integrations-with-backends">多くのバックエンドフレームワークとのインテグレーション</a>をメンテナンスしています。あなたのバックエンドフレームワークがリストされていない場合は、<a href="https://vitejs.dev/guide/backend-integration.html">このガイドに従って</a>手動で Vite ビルドをバックエンドと統合してください。</ul><p>セットアップがうまくいっているかどうかを確認するには、プロジェクトフォルダーで次のコマンドを実行します。</p><terminalblock>npm install react react-dom</terminalblock><p>そして、あなたのメインの JavaScript ファイル（おそらく <code>index.js</code> や <code>main.js</code> といった名前のもの）の先頭に、以下のコードを追加します。:</p><sandpack><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&#x3C;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>title</span><span class="token punctuation">></span></span>My app<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>body</span><span class="token punctuation">></span></span>
    <span class="token comment">&#x3C;!-- Your existing page content (in this example, it gets replaced) --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>html</span><span class="token punctuation">></span></span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createRoot <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span>

<span class="token comment">// Clear the existing HTML content</span>
<span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">body</span><span class="token punctuation">.</span><span class="token property-access">innerHTML</span> <span class="token operator">=</span> <span class="token string">'&#x3C;div id="app">&#x3C;/div>'</span><span class="token punctuation">;</span>

<span class="token comment">// Render your React component instead</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> world<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></sandpack><p>ページ全体が「Hello, world!」に置き換わった場合は、すべてがうまくいったことになります。このまま読み進めてください。</p><note><p>既存のプロジェクトにモジュラーな JavaScript 環境を組み込むことを最初は不安に感じるかもしれませんが、その価値はあると思います！ 行き詰まったら、<a href="/community">コミュニティのリソース</a>または <a href="https://chat.vitejs.dev/">Vite Chat</a> を試してみてください。</p></note></section><section class="level3"aria-labelledby="ステップ-2-ページに-react-コンポーネントをレンダーする-step-2-render-react-components-anywhere-on-the-page"><h3 id="ステップ-2-ページに-react-コンポーネントをレンダーする-step-2-render-react-components-anywhere-on-the-page">ステップ 2: ページに React コンポーネントをレンダーする {/<em>step-2-render-react-components-anywhere-on-the-page</em>/}</h3><p>前のステップでは、以下のコードをメインファイルのトップに置きました：<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createRoot <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span>

<span class="token comment">// Clear the existing HTML content</span>
<span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">body</span><span class="token punctuation">.</span><span class="token property-access">innerHTML</span> <span class="token operator">=</span> <span class="token string">'&#x3C;div id="app">&#x3C;/div>'</span><span class="token punctuation">;</span>

<span class="token comment">// Render your React component instead</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Hello</span><span class="token punctuation">,</span> world<span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>もちろん、実際には既存の HTML コンテンツを削除したい訳ではありません！<p>なので上記のコードは削除してください。<p>代わりに、あなたの HTML 内の特定の場所に React コンポーネントをレンダーしたいはずです。HTML ページ（またはそれを生成しているサーバテンプレート）を開き、次のようにして、任意のタグに一意の <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/id"><code>id</code></a> 属性を追加します：<pre class="language-html"><code class="language-html"><span class="token comment">&#x3C;!-- ... somewhere in your html ... --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>nav</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navigation<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>nav</span><span class="token punctuation">></span></span>
<span class="token comment">&#x3C;!-- ... more html ... --></span></code></pre><p>これにより、<a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById"><code>document.getElementById</code></a> で HTML 要素を検索して <a href="/reference/react-dom/client/createRoot"><code>createRoot</code></a> に渡すことができ、その内部にあなたの React コンポーネントをレンダーできるようになります：</p><sandpack><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&#x3C;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>title</span><span class="token punctuation">></span></span>My app<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>This paragraph is a part of HTML.<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>nav</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navigation<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>nav</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>This paragraph is also a part of HTML.<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>html</span><span class="token punctuation">></span></span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createRoot <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">NavigationBar</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// TODO: Actually implement a navigation bar</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Hello</span> <span class="token keyword module">from</span> <span class="token maybe-class-name">React</span><span class="token operator">!</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> domNode <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'navigation'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span>domNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">NavigationBar</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></sandpack><p><code>index.html</code> にあるオリジナルの HTML コンテンツはそのままに、自分の <code>NavigationBar</code> という React コンポーネントが、HTML の <code>&#x3C;nav id="navigation"></code> 内に表示されるようになりました。React コンポーネントを既存の HTML ページの内部にレンダーする方法の詳細については、<a href="/reference/react-dom/client/createRoot#rendering-a-page-partially-built-with-react"><code>createRoot</code> 使用方法のドキュメント</a> を参照してください。<p>既存のプロジェクトで React を使用する場合、まずはボタンのような小さなインタラクティブなコンポーネントから始め、その後、徐々に「上向きに」進んでいき、最終的にはページ全体が React で構築されるようにすることが一般的です。もしもそのような段階に到達した場合は、React の効果が最大限に得られるように、<a href="/learn/start-a-new-react-project">React フレームワーク</a>に移行することをお勧めします。</section></section><section class="level2"aria-labelledby="既存のネイティブモバイルアプリ内で-react-native-を使用する-using-react-native-in-an-existing-native-mobile-app"><h2 id="既存のネイティブモバイルアプリ内で-react-native-を使用する-using-react-native-in-an-existing-native-mobile-app">既存のネイティブモバイルアプリ内で React Native を使用する {/<em>using-react-native-in-an-existing-native-mobile-app</em>/}</h2><p><a href="https://reactnative.dev/">React Native</a> もまた、既存のネイティブアプリに段階的に統合することができます。Android（Java または Kotlin）用または iOS（Objective-C または Swift）用の既存のネイティブアプリがある場合は、<a href="https://reactnative.dev/docs/integration-with-existing-apps">このガイド</a>に従って React Native 画面を追加できます。 <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>