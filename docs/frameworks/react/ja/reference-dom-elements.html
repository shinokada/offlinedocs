<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>DOM 要素</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css">
  </head>
  <body>
    <section id="dom-要素" class="level1">
      <h1>DOM 要素</h1>
      <p>React はパフォーマンスとブラウザ間での互換性のために、ブラウザから独立した DOM システムを実装しています。このことを機に、ブラウザの DOM 実装にあるいくつかの粗削りな部分が取り払われました。</p>
      <p>React では、DOM のプロパティと属性（イベントハンドラを含む）全てがキャメルケースで名前付けされる必要があります。例えば、HTML 属性 <code>tabindex</code> に React で対応する属性は <code>tabIndex</code> です。例外は <code>aria-*</code> と <code>data-*</code> 属性であり、これらは全て小文字に揃える必要があります。例えば、<code>aria-label</code> は <code>aria-label</code> のままにできます。</p>
      <section id="differences-in-attributes" class="level2">
        <h2>属性についての差異</h2>
        <p>React と HTML で挙動が異なる属性がいくつか存在します。</p>
        <section id="checked" class="level3">
          <h3>checked</h3>
          <p><code>checked</code> 属性はインプットタイプが <code>checkbox</code> または <code>radio</code> の <code>&#x3C;input></code> コンポーネントでサポートされています。コンポーネントがチェックされた状態かどうかの設定に、この属性を使うことができます。これは制御されたコンポーネント (controlled component) を構築する際に役立ちます。<code>defaultChecked</code> は非制御コンポーネント (uncontrolled component) において同様の働きをする属性で、そのコンポーネントが最初にマウントされた時に、チェックされた状態かどうかを設定します。</p>
        </section>
        <section id="classname" class="level3">
          <h3>className</h3>
          <p>CSS クラスを指定するには、<code>className</code> 属性を使用してください。このことは <code>&#x3C;div></code>、<code>&#x3C;a></code> など全ての標準 DOM 要素と SVG 要素に当てはまります。</p>
          <p>React を（一般的ではありませんが）Web Components とともに使用する場合は、代わりに class 属性を使用してください。</p>
        </section>
        <section id="dangerouslysetinnerhtml" class="level3">
          <h3>dangerouslySetInnerHTML</h3>
          <p><code>dangerouslySetInnerHTML</code> は、ブラウザ DOM における <code>innerHTML</code> の React での代替です。一般に、コードから HTML を設定することは、誤ってあなたのユーザを<a href="https://en.wikipedia.org/wiki/Cross-site_scripting">クロスサイトスクリプティング (XSS) </a>攻撃に晒してしまいやすいため、危険です。そのため、React では直接 HTML を設定することはできますが、それは危険であることを自覚するために <code>dangerouslySetInnerHTML</code> と入力し <code>__html</code> というキーを持つオブジェクトを渡す必要があります。例えば：</p>
          <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">createMarkup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span><span class="token literal-property property">__html</span><span class="token operator">:</span> <span class="token string">'First &#x26;middot; Second'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>div dangerouslySetInnerHTML<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">createMarkup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
        </section>
        <section id="htmlfor" class="level3">
          <h3>htmlFor</h3>
          <p><code>for</code> は JavaScript での予約語であるため、React 要素では代わりに <code>htmlFor</code> を使用します。</p>
        </section>
        <section id="onchange" class="level3">
          <h3>onChange</h3>
          <p><code>onChange</code> イベントはあなたが期待しているような挙動をします。フォームフィールドに変更があるたび、このイベントが発生します。React の <code>onChange</code> という名前は既存のブラウザの挙動に対しては適切な名前では無く、React はリアルタイムでのユーザ入力を扱うためにこのイベントに依存しているため、React では意図的に既存のブラウザの挙動は使用していません。</p>
        </section>
        <section id="selected" class="level3">
          <h3>selected</h3>
          <p>
            <code>&#x3C;option></code> 要素を選択済みとしてマークしたい場合、その option の value を対応する <code>&#x3C;select></code> の <code>value</code> として参照してください。
            詳細は <a href="./forms.html#the-select-tag">select タグ</a> を確認してください。
          </p>
        </section>
        <section id="style" class="level3">
          <h3>style</h3>
          <blockquote>
            <p>補足</p>
            <p>このドキュメンテーションにあるいくつかの例では <code>style</code> を便宜上使用していますが、<strong><code>style</code> 属性を要素のスタイリングの主要な手段として使うことは一般的に推奨されません。</strong>多くの場合、<a href="#classname"><code>className</code></a> を使って外部の CSS スタイルシートに定義された CSS クラスを参照するべきです。React アプリケーションの中では、<code>style</code> は動的に計算されたスタイルをレンダー中に追加するために最もよく使われます。<a href="./faq-styling.html">FAQ: Styling and CSS</a> も参照してください。</p>
          </blockquote>
          <p><code>style</code> 属性は CSS 文字列ではなく、キャメルケースのプロパティを持った JavaScript オブジェクトを受け取ります。これは JavaScript での DOM の <code>style</code> プロパティとの一貫性があり、より効率的で、XSS 攻撃の対象となるセキュリティホールを防ぎます。例えば：</p>
          <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> divStyle <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'blue'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">backgroundImage</span><span class="token operator">:</span> <span class="token string">'url('</span> <span class="token operator">+</span> imgUrl <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">HelloWorldComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span>divStyle<span class="token punctuation">}</span><span class="token operator">></span><span class="token maybe-class-name">Hello</span> <span class="token maybe-class-name">World</span><span class="token operator">!</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
          <p>ベンダープレフィックスの自動追加は行われないことに注意してください。古いブラウザをサポートするには、対応するスタイルのプロパティを与える必要があります：</p>
          <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> divStyle <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">WebkitTransition</span><span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span> <span class="token comment">// ここでは大文字の 'W' です</span>
  <span class="token literal-property property">msTransition</span><span class="token operator">:</span> <span class="token string">'all'</span> <span class="token comment">// 'ms' は小文字である必要がある唯一のベンダープレフィックスです</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ComponentWithTransition</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span>divStyle<span class="token punctuation">}</span><span class="token operator">></span><span class="token maybe-class-name">This</span> should work cross<span class="token operator">-</span>browser<span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
          <p>JavaScript から DOM ノードのプロパティにアクセスする場合（例えば <code>node.style.backgroundImage</code>）と一致させるために、スタイルのキー名はキャメルケースです。<a href="https://www.andismith.com/blogs/2012/02/modernizr-prefixed/"><code>ms</code> 以外</a>のベンダープレフィックスは先頭を大文字にしてください。<code>WebkitTransition</code> に大文字 "W" があるのはこのためです。</p>
          <p>React はインラインスタイルでの特定の数値プロパティに対して自動的に "px" サフィックスを付け加えます。"px" 以外の単位を使用したい場合は、その単位を付け加えた文字列で値を指定してください。例えば：</p>
          <pre class="language-js"><code class="language-js"><span class="token comment">// 最終的なスタイルは '10px'</span>
<span class="token operator">&#x3C;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>
  <span class="token maybe-class-name">Hello</span> <span class="token maybe-class-name">World</span><span class="token operator">!</span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>

<span class="token comment">// 最終的なスタイルは '10%'</span>
<span class="token operator">&#x3C;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">'10%'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>
  <span class="token maybe-class-name">Hello</span> <span class="token maybe-class-name">World</span><span class="token operator">!</span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span></code></pre>
          <p>全てのスタイルプロパティがピクセル指定に変換されるわけではありません。特定のプロパティ（例えば <code>zoom</code>、<code>order</code>、<code>flex</code>）は単位が無いままとなります。単位の無いプロパティの完全なリストは<a href="https://github.com/facebook/react/blob/4131af3e4bf52f3a003537ec95a1655147c81270/src/renderers/dom/shared/CSSProperty.js#L15-L59">こちら</a>で確認できます。</p>
        </section>
        <section id="suppresscontenteditablewarning" class="level3">
          <h3>suppressContentEditableWarning</h3>
          <p>子要素を持つ要素に <code>contentEditable</code> 属性が付与されている場合、それは動作しないため通常は警告が出力されます。この属性は、その警告が出力されないようにします。<code>contentEditable</code> を自身で管理している <a href="https://facebook.github.io/draft-js/">Draft.js</a> のようなライブラリを開発するときでもない限り、この属性は使用しないでください。</p>
        </section>
        <section id="suppresshydrationwarning" class="level3">
          <h3>suppressHydrationWarning</h3>
          <p>サーバサイドの React レンダリングを使用している場合、サーバとクライアントが違う内容をレンダーする時に通常は警告が出力されます。しかし、まれに両者の内容が完全に一致することの保証が非常に困難あるいは不可能な場合があります。例えば、サーバとクライアントでは、タイムスタンプは異なることが予想されます。</p>
          <p><code>suppressHydrationWarning</code> を <code>true</code> に設定した場合、その要素の属性と内容の、サーバとクライアントでの差異について React は警告しません。この機能は単一レベルの深さでのみ動作し、避難ハッチとして使われることが想定されています。そのため、むやみに使用しないでください。ハイドレーション機能の詳細については <a href="./react-dom-client.html#hydrateroot"><code>ReactDOM.hydrateRoot()</code></a> のドキュメントで読むことができます。</p>
        </section>
        <section id="value" class="level3">
          <h3>value</h3>
          <p><code>value</code> 属性は <code>&#x3C;input></code>、<code>&#x3C;select></code> および <code>&#x3C;textarea></code> コンポーネントでサポートされています。コンポーネントの値を設定することに使用できます。これは制御されたコンポーネントを構築する際に役立ちます。<code>defaultValue</code> は非制御コンポーネントにおいて同様の働きをする属性で、コンポーネントが最初にマウントされた時の値を設定します。</p>
        </section>
      </section>
      <section id="all-supported-html-attributes" class="level2">
        <h2>サポートされている全ての HTML 属性</h2>
        <p>React 16 では、標準<a href="/blog/2017/09/08/dom-attributes-in-react-16.html">あるいは独自の</a> DOM 属性全てが完全にサポートされます。</p>
        <p>React は DOM に対して JavaScript 中心に設計された API を常に提供してきました。React コンポーネントは、独自および DOM に関連した props を頻繁に受け取るため、React は DOM API と同様にキャメルケース (<code>camelCase</code>) の命名規則を属性の名前付けに使用します。</p>
        <pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>div tabIndex<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token comment">// DOM API の node.tabIndex と同様に</span>
<span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"Button"</span> <span class="token operator">/</span><span class="token operator">></span> <span class="token comment">// DOM API の node.className と同様に</span>
<span class="token operator">&#x3C;</span>input readOnly<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>  <span class="token comment">// DOM API の node.readOnly と同様に</span></code></pre>
        <p>このような props は、これまでドキュメントで述べられてきた特殊な例外を除き、対応する HTML 属性と同様に機能します。</p>
        <p>React でサポートされている DOM 属性には、以下が含まれます：</p>
        <pre class="language-text"><code class="language-text">accept acceptCharset accessKey action allowFullScreen alt async autoComplete
autoFocus autoPlay capture cellPadding cellSpacing challenge charSet checked
cite classID className colSpan cols content contentEditable contextMenu controls
controlsList coords crossOrigin data dateTime default defer dir disabled
download draggable encType form formAction formEncType formMethod formNoValidate
formTarget frameBorder headers height hidden high href hrefLang htmlFor
httpEquiv icon id inputMode integrity is keyParams keyType kind label lang list
loop low manifest marginHeight marginWidth max maxLength media mediaGroup method
min minLength multiple muted name noValidate nonce open optimum pattern
placeholder poster preload profile radioGroup readOnly rel required reversed
role rowSpan rows sandbox scope scoped scrolling seamless selected shape size
sizes span spellCheck src srcDoc srcLang srcSet start step style summary
tabIndex target title type useMap value width wmode wrap</code></pre>
        <p>同様に、全ての SVG 属性を完全にサポートしています：</p>
        <pre class="language-text"><code class="language-text">accentHeight accumulate additive alignmentBaseline allowReorder alphabetic
amplitude arabicForm ascent attributeName attributeType autoReverse azimuth
baseFrequency baseProfile baselineShift bbox begin bias by calcMode capHeight
clip clipPath clipPathUnits clipRule colorInterpolation
colorInterpolationFilters colorProfile colorRendering contentScriptType
contentStyleType cursor cx cy d decelerate descent diffuseConstant direction
display divisor dominantBaseline dur dx dy edgeMode elevation enableBackground
end exponent externalResourcesRequired fill fillOpacity fillRule filter
filterRes filterUnits floodColor floodOpacity focusable fontFamily fontSize
fontSizeAdjust fontStretch fontStyle fontVariant fontWeight format from fx fy
g1 g2 glyphName glyphOrientationHorizontal glyphOrientationVertical glyphRef
gradientTransform gradientUnits hanging horizAdvX horizOriginX ideographic
imageRendering in in2 intercept k k1 k2 k3 k4 kernelMatrix kernelUnitLength
kerning keyPoints keySplines keyTimes lengthAdjust letterSpacing lightingColor
limitingConeAngle local markerEnd markerHeight markerMid markerStart
markerUnits markerWidth mask maskContentUnits maskUnits mathematical mode
numOctaves offset opacity operator order orient orientation origin overflow
overlinePosition overlineThickness paintOrder panose1 pathLength
patternContentUnits patternTransform patternUnits pointerEvents points
pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits
r radius refX refY renderingIntent repeatCount repeatDur requiredExtensions
requiredFeatures restart result rotate rx ry scale seed shapeRendering slope
spacing specularConstant specularExponent speed spreadMethod startOffset
stdDeviation stemh stemv stitchTiles stopColor stopOpacity
strikethroughPosition strikethroughThickness string stroke strokeDasharray
strokeDashoffset strokeLinecap strokeLinejoin strokeMiterlimit strokeOpacity
strokeWidth surfaceScale systemLanguage tableValues targetX targetY textAnchor
textDecoration textLength textRendering to transform u1 u2 underlinePosition
underlineThickness unicode unicodeBidi unicodeRange unitsPerEm vAlphabetic
vHanging vIdeographic vMathematical values vectorEffect version vertAdvY
vertOriginX vertOriginY viewBox viewTarget visibility widths wordSpacing
writingMode x x1 x2 xChannelSelector xHeight xlinkActuate xlinkArcrole
xlinkHref xlinkRole xlinkShow xlinkTitle xlinkType xmlns xmlnsXlink xmlBase
xmlLang xmlSpace y y1 y2 yChannelSelector z zoomAndPan</code></pre>
        <p>
          独自の属性も、その名前が全て小文字であれば使用できます。
          <span style="float: footnote;"><a href="./index.html#toc">Go to TOC</a></span>
        </p>
      </section>
    </section>
  </body>
</html>
