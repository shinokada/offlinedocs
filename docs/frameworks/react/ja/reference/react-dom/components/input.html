<!doctype html><html lang="ja"><meta charset="utf-8"><title>"&#x3C;input>"</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="input"><h1 id="input">"<input>"</h1><intro><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input">ブラウザ組み込みの <code>&#x3C;input></code> コンポーネント</a>を利用することで、さまざまな種類のフォーム入力をレンダーすることができます。<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>input <span class="token operator">/</span><span class="token operator">></span></code></pre></intro><inlinetoc><section class="level2"aria-labelledby="リファレンス-reference"><h2 id="リファレンス-reference">リファレンス {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="input-input"><h3 id="input-input"><code>&#x3C;input></code> {/<em>input</em>/}</h3><p>入力欄を表示するには、<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input">組み込みのブラウザ <code>&#x3C;input></code></a> コンポーネントをレンダーします。<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>input name<span class="token operator">=</span><span class="token string">"myInput"</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p><a href="#usage">さらに例を見る</a><section class="level4"aria-labelledby="props-props"><h4 id="props-props">props {/<em>props</em>/}</h4><p><code>&#x3C;input></code> は<a href="/reference/react-dom/components/common#props">一般的な要素の props</a> をすべてサポートしています。</p><canary><p><code>formAction</code> に対する React の拡張は React の Canary および experimental リリースのみの機能です。React の安定版では <code>formAction</code> は<a href="https://react.dev/reference/react-dom/components#all-html-components">組み込みブラウザコンポーネント</a>の機能としてのみ動作します。<a href="/community/versioning-policy#all-release-channels">React のリリースチャンネルについてはこちら</a>。<p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#formaction"><code>formAction</code></a>: 文字列または関数。<code>type="submit"</code> and <code>type="image"</code> の場合に親の <code>&#x3C;form action></code> を上書きする。<code>action</code> に URL が渡された場合はフォームは標準的な HTML フォームとして動作する。関数が渡された場合はその関数がフォームの送信を処理する。<a href="/reference/react-dom/components/form#props"><code>&#x3C;form action></code></a> を参照。<p>以下の props を渡すことで、<a href="#controlling-an-input-with-a-state-variable">入力欄を制御されたコンポーネント (controlled component)</a> にできます。<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement#checked"><code>checked</code></a>: ブーリアン。チェックボックスまたはラジオボタンの場合、選択されているかどうかを制御します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement#value"><code>value</code></a>: 文字列。テキスト入力の場合、そのテキストを制御します。（ラジオボタンの場合は、フォームデータを指定します。）</ul><p>これらのいずれかを渡す場合は、渡された値を更新する <code>onChange</code> ハンドラも渡す必要があります。<p>以下の <code>&#x3C;input></code> の props は、非制御 (uncontrolled) の入力欄にのみ使用されます。<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement#defaultChecked"><code>defaultChecked</code></a>: ブーリアン。<code>type="checkbox"</code> および <code>type="radio"</code> の入力欄の場合に、<a href="#providing-an-initial-value-for-an-input">初期値</a>を指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement#defaultValue"><code>defaultValue</code></a>: 文字列。テキスト入力の場合に、<a href="#providing-an-initial-value-for-an-input">初期値</a>を指定します。</ul><p>以下の <code>&#x3C;input></code> の props は、非制御の入力欄と制御された入力欄の両方で用いられます。<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#accept"><code>accept</code></a>: 文字列。<code>type="file"</code> である入力欄が受け付けるファイルの種類を指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#alt"><code>alt</code></a>: 文字列。<code>type="image"</code> である入力欄の場合に、代替画像テキストを指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#capture"><code>capture</code></a>: 文字列。<code>type="file"</code> である入力欄がキャプチャするメディア（マイク、ビデオ、またはカメラ）を指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#autocomplete"><code>autoComplete</code></a>: 文字列。可能な<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete#values">オートコンプリート動作</a>の 1 つを指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#autofocus"><code>autoFocus</code></a>: ブーリアン。<code>true</code> の場合、React はマウント時にその要素をフォーカスします。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#dirname"><code>dirname</code></a>: 文字列。要素の文字方向に対するフォームフィールド名を指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#disabled"><code>disabled</code></a>: ブール値。<code>true</code> の場合、入力はインタラクティブではなくなり、薄暗く表示されます。<li><code>children</code>: <code>&#x3C;input></code> は子要素を受け取りません。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#form"><code>form</code></a>: 文字列。この入力が属する <code>&#x3C;form></code> の <code>id</code> を指定します。省略された場合、最も近い親フォームが対象となります。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#formaction"><code>formAction</code></a>: 文字列。<code>type="submit"</code> および <code>type="image"</code> の場合、親要素の <code>&#x3C;form action></code> を上書きします。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#formenctype"><code>formEnctype</code></a>: 文字列。<code>type="submit"</code> および <code>type="image"</code> の場合、親要素の <code>&#x3C;form enctype></code> を上書きします。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#formmethod"><code>formMethod</code></a>: 文字列。<code>type="submit"</code> および <code>type="image"</code> の場合、親要素の <code>&#x3C;form method></code> を上書きします。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#formnovalidate"><code>formNoValidate</code></a>: 文字列。<code>type="submit"</code> および <code>type="image"</code> の場合、親要素の <code>&#x3C;form noValidate></code> を上書きします。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#formtarget"><code>formTarget</code></a>: 文字列。<code>type="submit"</code> および <code>type="image"</code> の場合、<code>&#x3C;form target></code> を上書きします。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#height"><code>height</code></a>: 文字列。<code>type="image"</code> の場合、画像の高さを指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#list"><code>list</code></a>: 文字列。オートコンプリートの選択肢を指定する <code>&#x3C;datalist></code> の <code>id</code> を指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#max"><code>max</code></a>: 数値。数値および日時タイプの入力欄において最大値を指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#maxlength"><code>maxLength</code></a>: 数値。テキストなどのタイプの入力欄において最大文字数を指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#min"><code>min</code></a>: 数値。数値および日時タイプの入力欄において最小値を指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#minlength"><code>minLength</code></a>: 数値。テキストなどのタイプの入力欄において最小文字数を指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#multiple"><code>multiple</code></a>: ブール値。<code>type="file"</code> および <code>type="email"</code> の場合、複数の値を許可するかどうかを指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#name"><code>name</code></a>: 文字列。<a href="#reading-the-input-values-when-submitting-a-form">フォームで送信される</a>際に使われるこの入力欄の名前を指定します。<li><code>onChange</code>: <a href="/reference/react-dom/components/common#event-handler"><code>Event</code> ハンドラ</a>関数。<a href="#controlling-an-input-with-a-state-variable">制御された入力</a>の場合は必須。ユーザが入力の値を変更するとすぐに発火します（例えば、キーストロークごとに発火します）。ブラウザの <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/input_event"><code>input</code> イベント</a>と同じように動作します。<li><code>onChangeCapture</code>: <code>onChange</code> の<a href="/learn/responding-to-events#capture-phase-events">キャプチャフェーズ</a>で発火するバージョン。<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/input_event"><code>onInput</code></a>: <a href="/reference/react-dom/components/common#event-handler"><code>Event</code> ハンドラ</a>関数。ユーザが値を変更するとすぐに発火します。歴史的な理由から、React では代わりに同様の動作をする <code>onChange</code> を使用するのが慣習となっています。<li><code>onInputCapture</code>: <code>onInput</code> の<a href="/learn/responding-to-events#capture-phase-events">キャプチャフェーズ</a>で発火するバージョン。<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/invalid_event"><code>onInvalid</code></a>: <a href="/reference/react-dom/components/common#event-handler"><code>Event</code> ハンドラ</a>関数。フォームの送信時に入力の検証に失敗した場合に発火します。組み込みの <code>invalid</code> イベントとは異なり、React の <code>onInvalid</code> イベントはバブルします。<li><code>onInvalidCapture</code>: <code>onInvalid</code> の<a href="/learn/responding-to-events#capture-phase-events">キャプチャフェーズ</a>で発火するバージョン。<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/select_event"><code>onSelect</code></a>: <a href="/reference/react-dom/components/common#event-handler"><code>Event</code> ハンドラ</a>関数。<code>&#x3C;input></code> 内で選択テキストが変更された後に発火します。React は <code>onSelect</code> イベントを拡張しており、空の選択やテキストの編集（選択に影響を与える可能性がある）でも発火します。<li><code>onSelectCapture</code>: <code>onSelect</code> の<a href="/learn/responding-to-events#capture-phase-events">キャプチャフェーズ</a>で発火するバージョン。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#pattern"><code>pattern</code></a>: 文字列。<code>value</code> がマッチする必要のあるパターンを指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#placeholder"><code>placeholder</code></a>: 文字列。入力値が空の場合、これが薄い色で表示されます。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#readonly"><code>readOnly</code></a>: ブーリアン。<code>true</code> の場合、入力欄はユーザによって編集できなくなります。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#required"><code>required</code></a>: ブーリアン。<code>true</code> の場合、フォームを送信するためには値が必須となります。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#size"><code>size</code></a>: 数値。width の設定と似ていますが、入力欄によって異なる単位で指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#src"><code>src</code></a>: 文字列。<code>type="image"</code> の入力の場合、画像ファイルを指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#step"><code>step</code></a>: 正の数値、または文字列の <code>'any'</code>。有効な値の間隔を指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#type"><code>type</code></a>: 文字列。<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#input_types">入力タイプ</a>の 1 つ。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#width"><code>width</code></a>: 文字列。<code>type="image"</code> の場合、画像の幅を指定します。</ul></canary></section><section class="level4"aria-labelledby="注意点-caveats"><h4 id="注意点-caveats">注意点 {/<em>caveats</em>/}</h4><ul><li>チェックボックスの場合 <code>value</code>（や <code>defaultValue</code>）ではなく、<code>checked</code>（や <code>defaultChecked</code>）が必要です。<li>テキスト入力欄が props として文字列型の <code>value</code> プロパティを受け取ると、<a href="#controlling-an-input-with-a-state-variable">制御されたものとして扱われます</a>。<li>チェックボックスまたはラジオボタンが props としてブーリアン型の <code>checked</code> を受け取ると、<a href="#controlling-an-input-with-a-state-variable">制御されたものとして扱われます</a>。<li>入力欄は制御されたコンポーネントと非制御コンポーネントに同時になることはできません。。<li>入力欄は、ライフタイム中に制御されたコンポーネントから非制御コンポーネント、またはその逆に切り替えることはできません。<li>すべての制御された入力欄には、制御に使っている state を同期的に更新するための <code>onChange</code> イベントハンドラが必要です。</ul></section></section></section><section class="level2"aria-labelledby="使用法-usage"><h2 id="使用法-usage">使用法 {/<em>usage</em>/}</h2><section class="level3"aria-labelledby="各種の入力欄を表示する-displaying-inputs-of-different-types"><h3 id="各種の入力欄を表示する-displaying-inputs-of-different-types">各種の入力欄を表示する {/<em>displaying-inputs-of-different-types</em>/}</h3><p>入力欄を表示するには、<code>&#x3C;input></code> コンポーネントをレンダーします。デフォルトではテキスト入力になります。チェックボックスの場合は <code>type="checkbox"</code> を、ラジオボタンの場合は <code>type="radio"</code> を、<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#input_types">または他の入力タイプのいずれか</a>を渡すことができます。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyForm</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token maybe-class-name">Text</span> input<span class="token operator">:</span> <span class="token operator">&#x3C;</span>input name<span class="token operator">=</span><span class="token string">"myInput"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token literal-property property">Checkbox</span><span class="token operator">:</span> <span class="token operator">&#x3C;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> name<span class="token operator">=</span><span class="token string">"myCheckbox"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>
        <span class="token maybe-class-name">Radio</span> buttons<span class="token operator">:</span>
        <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
          <span class="token operator">&#x3C;</span>input type<span class="token operator">=</span><span class="token string">"radio"</span> name<span class="token operator">=</span><span class="token string">"myRadio"</span> value<span class="token operator">=</span><span class="token string">"option1"</span> <span class="token operator">/</span><span class="token operator">></span>
          <span class="token maybe-class-name">Option</span> <span class="token number">1</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
          <span class="token operator">&#x3C;</span>input type<span class="token operator">=</span><span class="token string">"radio"</span> name<span class="token operator">=</span><span class="token string">"myRadio"</span> value<span class="token operator">=</span><span class="token string">"option2"</span> <span class="token operator">/</span><span class="token operator">></span>
          <span class="token maybe-class-name">Option</span> <span class="token number">2</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
          <span class="token operator">&#x3C;</span>input type<span class="token operator">=</span><span class="token string">"radio"</span> name<span class="token operator">=</span><span class="token string">"myRadio"</span> value<span class="token operator">=</span><span class="token string">"option3"</span> <span class="token operator">/</span><span class="token operator">></span>
          <span class="token maybe-class-name">Option</span> <span class="token number">3</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">label</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack></section><section class="level3"aria-labelledby="入力欄にラベルを付ける-providing-a-label-for-an-input"><h3 id="入力欄にラベルを付ける-providing-a-label-for-an-input">入力欄にラベルを付ける {/<em>providing-a-label-for-an-input</em>/}</h3><p>通常、すべての <code>&#x3C;input></code> は <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label"><code>&#x3C;label></code></a> タグ内に配置します。これにより、ブラウザに対してこのラベルがその入力欄に関連付けられていることが伝わります。ユーザがラベルをクリックすると、ブラウザは自動的に入力欄にフォーカスします。これはアクセシビリティの観点からも重要です。ユーザが入力欄にフォーカスすると、スクリーンリーダがラベルのキャプションを読み上げます。<p>もし <code>&#x3C;label></code> 内に <code>&#x3C;input></code> をネストできない場合は、同じ ID を <code>&#x3C;input id></code> と <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/htmlFor"><code>&#x3C;label htmlFor></code></a> に渡すことで関連付けることができます。同一コンポーネントの複数のインスタンス間での競合を避けるために、<a href="/reference/react/useId"><code>useId</code></a> を使用してそのような ID を生成してください。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useId <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Form</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ageInputId <span class="token operator">=</span> <span class="token function">useId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token maybe-class-name">Your</span> first name<span class="token operator">:</span>
        <span class="token operator">&#x3C;</span>input name<span class="token operator">=</span><span class="token string">"firstName"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label htmlFor<span class="token operator">=</span><span class="token punctuation">{</span>ageInputId<span class="token punctuation">}</span><span class="token operator">></span><span class="token maybe-class-name">Your</span> age<span class="token operator">:</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>input id<span class="token operator">=</span><span class="token punctuation">{</span>ageInputId<span class="token punctuation">}</span> name<span class="token operator">=</span><span class="token string">"age"</span> type<span class="token operator">=</span><span class="token string">"number"</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack></section><section class="level3"aria-labelledby="入力欄に初期値を指定する-providing-an-initial-value-for-an-input"><h3 id="入力欄に初期値を指定する-providing-an-initial-value-for-an-input">入力欄に初期値を指定する {/<em>providing-an-initial-value-for-an-input</em>/}</h3><p>オプションで、入力値の初期値を指定することができます。テキスト入力の場合は、<code>defaultValue</code> として文字列を渡してください。チェックボックスとラジオボタンの場合は、代わりにブーリアンの <code>defaultChecked</code> を使用して初期値を指定してください。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyForm</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token maybe-class-name">Text</span> input<span class="token operator">:</span> <span class="token operator">&#x3C;</span>input name<span class="token operator">=</span><span class="token string">"myInput"</span> defaultValue<span class="token operator">=</span><span class="token string">"Some initial value"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token literal-property property">Checkbox</span><span class="token operator">:</span> <span class="token operator">&#x3C;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> name<span class="token operator">=</span><span class="token string">"myCheckbox"</span> defaultChecked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>
        <span class="token maybe-class-name">Radio</span> buttons<span class="token operator">:</span>
        <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
          <span class="token operator">&#x3C;</span>input type<span class="token operator">=</span><span class="token string">"radio"</span> name<span class="token operator">=</span><span class="token string">"myRadio"</span> value<span class="token operator">=</span><span class="token string">"option1"</span> <span class="token operator">/</span><span class="token operator">></span>
          <span class="token maybe-class-name">Option</span> <span class="token number">1</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
          <span class="token operator">&#x3C;</span>input
            type<span class="token operator">=</span><span class="token string">"radio"</span>
            name<span class="token operator">=</span><span class="token string">"myRadio"</span>
            value<span class="token operator">=</span><span class="token string">"option2"</span>
            defaultChecked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> 
          <span class="token operator">/</span><span class="token operator">></span>
          <span class="token maybe-class-name">Option</span> <span class="token number">2</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
          <span class="token operator">&#x3C;</span>input type<span class="token operator">=</span><span class="token string">"radio"</span> name<span class="token operator">=</span><span class="token string">"myRadio"</span> value<span class="token operator">=</span><span class="token string">"option3"</span> <span class="token operator">/</span><span class="token operator">></span>
          <span class="token maybe-class-name">Option</span> <span class="token number">3</span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">label</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack></section><section class="level3"aria-labelledby="フォーム送信時に入力欄から値を読み取る-reading-the-input-values-when-submitting-a-form"><h3 id="フォーム送信時に入力欄から値を読み取る-reading-the-input-values-when-submitting-a-form">フォーム送信時に入力欄から値を読み取る {/<em>reading-the-input-values-when-submitting-a-form</em>/}</h3><p>入力欄を <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form"><code>&#x3C;form></code></a> で囲み、その中に <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button"><code>&#x3C;button type="submit"></code></a> を配置します。これにより、<code>&#x3C;form onSubmit></code> イベントハンドラが呼び出されます。デフォルトでは、ブラウザはフォームデータを現在の URL に送信し、ページを更新します。<code>e.preventDefault()</code> を呼び出すことで、その振る舞いをオーバーライドできます。<a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData"><code>new FormData(e.target)</code></a> を使用してフォームデータを読み込みます。<sandpack></sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyForm</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">handleSubmit</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Prevent the browser from reloading the page</span>
    e<span class="token punctuation">.</span><span class="token method function property-access">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Read the form data</span>
    <span class="token keyword">const</span> form <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span>form<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// You can pass formData as a fetch body directly:</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/some-api'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> form<span class="token punctuation">.</span><span class="token property-access">method</span><span class="token punctuation">,</span> <span class="token literal-property property">body</span><span class="token operator">:</span> formData <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Or you can work with it as a plain object:</span>
    <span class="token keyword">const</span> formJson <span class="token operator">=</span> <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">fromEntries</span><span class="token punctuation">(</span>formData<span class="token punctuation">.</span><span class="token method function property-access">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>formJson<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>form method<span class="token operator">=</span><span class="token string">"post"</span> onSubmit<span class="token operator">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token maybe-class-name">Text</span> input<span class="token operator">:</span> <span class="token operator">&#x3C;</span>input name<span class="token operator">=</span><span class="token string">"myInput"</span> defaultValue<span class="token operator">=</span><span class="token string">"Some initial value"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token literal-property property">Checkbox</span><span class="token operator">:</span> <span class="token operator">&#x3C;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> name<span class="token operator">=</span><span class="token string">"myCheckbox"</span> defaultChecked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span>
        <span class="token maybe-class-name">Radio</span> buttons<span class="token operator">:</span>
        <span class="token operator">&#x3C;</span>label<span class="token operator">></span><span class="token operator">&#x3C;</span>input type<span class="token operator">=</span><span class="token string">"radio"</span> name<span class="token operator">=</span><span class="token string">"myRadio"</span> value<span class="token operator">=</span><span class="token string">"option1"</span> <span class="token operator">/</span><span class="token operator">></span> <span class="token maybe-class-name">Option</span> <span class="token number">1</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>label<span class="token operator">></span><span class="token operator">&#x3C;</span>input type<span class="token operator">=</span><span class="token string">"radio"</span> name<span class="token operator">=</span><span class="token string">"myRadio"</span> value<span class="token operator">=</span><span class="token string">"option2"</span> defaultChecked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span> <span class="token maybe-class-name">Option</span> <span class="token number">2</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>label<span class="token operator">></span><span class="token operator">&#x3C;</span>input type<span class="token operator">=</span><span class="token string">"radio"</span> name<span class="token operator">=</span><span class="token string">"myRadio"</span> value<span class="token operator">=</span><span class="token string">"option3"</span> <span class="token operator">/</span><span class="token operator">></span> <span class="token maybe-class-name">Option</span> <span class="token number">3</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button type<span class="token operator">=</span><span class="token string">"reset"</span><span class="token operator">></span><span class="token maybe-class-name">Reset</span> form<span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button type<span class="token operator">=</span><span class="token string">"submit"</span><span class="token operator">></span><span class="token maybe-class-name">Submit</span> form<span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>form<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">label</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre><note><p>すべての <code>&#x3C;input></code> に <code>name</code> を指定してください。例えば、<code>&#x3C;input name="firstName" defaultValue="Taylor" /></code> のように指定します。指定した <code>name</code> は、フォームデータ内のキーとして使用されます。例えば、<code>{ firstName: "Taylor" }</code> のようになります。</p></note><pitfall><p>デフォルトでは、<code>&#x3C;form></code> 内の<em>あらゆる</em> <code>&#x3C;button></code> はフォームの送信を行います。これは予想外の挙動かもしれません！ 独自のカスタム <code>Button</code> React コンポーネントを利用している場合は、<code>&#x3C;button></code> の代わりに <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/button"><code>&#x3C;button type="button"></code></a> を返すようにすることを考慮してください。そしてフォームを送信することが<em>意図されている</em>ボタンには明示的に <code>&#x3C;button type="submit"></code> を使用してください。</p></pitfall></section><section class="level3"aria-labelledby="state-変数を使用して入力要素を制御する-controlling-an-input-with-a-state-variable"><h3 id="state-変数を使用して入力要素を制御する-controlling-an-input-with-a-state-variable">state 変数を使用して入力要素を制御する {/<em>controlling-an-input-with-a-state-variable</em>/}</h3><p><code>&#x3C;input /></code> のような入力欄は<em>非制御</em>です。<code>&#x3C;input defaultValue="Initial text" /></code> のように<a href="#providing-an-initial-value-for-an-input">デフォルト値を指定</a>している場合でも、この JSX で指定しているのはあくまで初期値であって現在の値ではありません。<p><strong><em>制御された</em>入力欄をレンダーするには、<code>value</code> プロパティ（チェックボックスやラジオボタンの場合は <code>checked</code>）を渡してください</strong>。React は入力欄が常に渡した <code>value</code> を反映するようにします。通常、<a href="/reference/react/useState">state 変数</a>を宣言することで入力欄を制御します。<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Form</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>firstName<span class="token punctuation">,</span> setFirstName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Declare a state variable...</span>
  <span class="token comment">// ...</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>input
      value<span class="token operator">=</span><span class="token punctuation">{</span>firstName<span class="token punctuation">}</span> <span class="token comment">// ...force the input's value to match the state variable...</span>
      onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setFirstName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token comment">// ... and update the state variable on any edits!</span>
    <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>例えば編集のたびに UI を再レンダーする必要があるなどの理由でいずれにせよ state が必要な場合、制御された入力欄は特に有用です。<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Form</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>firstName<span class="token punctuation">,</span> setFirstName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token maybe-class-name">First</span> name<span class="token operator">:</span>
        <span class="token operator">&#x3C;</span>input value<span class="token operator">=</span><span class="token punctuation">{</span>firstName<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setFirstName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token punctuation">{</span>firstName <span class="token operator">!==</span> <span class="token string">''</span> <span class="token operator">&#x26;&#x26;</span> <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Your</span> name is <span class="token punctuation">{</span>firstName<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token punctuation">}</span>
      <span class="token spread operator">...</span></code></pre><p>また、制御された入力欄は、入力 state を変更する方法（例えばボタンクリックなど）を複数提供したい場合にも役立ちます。<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Form</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>age<span class="token punctuation">,</span> setAge<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> ageAsNumber <span class="token operator">=</span> <span class="token known-class-name class-name">Number</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token literal-property property">Age</span><span class="token operator">:</span>
        <span class="token operator">&#x3C;</span>input
          value<span class="token operator">=</span><span class="token punctuation">{</span>age<span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setAge</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          type<span class="token operator">=</span><span class="token string">"number"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setAge</span><span class="token punctuation">(</span>ageAsNumber <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token maybe-class-name">Add</span> <span class="token number">10</span> years
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span></code></pre><p>制御されたコンポーネントに渡す <code>value</code> は、<code>undefined</code> や <code>null</code> であってはなりません。初期値を空にしたい場合（例えば、以下の <code>firstName</code> フィールドのような場合）、state 変数を空の文字列 (<code>''</code>) で初期化してください。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Form</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>firstName<span class="token punctuation">,</span> setFirstName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>age<span class="token punctuation">,</span> setAge<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'20'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> ageAsNumber <span class="token operator">=</span> <span class="token known-class-name class-name">Number</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token maybe-class-name">First</span> name<span class="token operator">:</span>
        <span class="token operator">&#x3C;</span>input
          value<span class="token operator">=</span><span class="token punctuation">{</span>firstName<span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setFirstName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token literal-property property">Age</span><span class="token operator">:</span>
        <span class="token operator">&#x3C;</span>input
          value<span class="token operator">=</span><span class="token punctuation">{</span>age<span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setAge</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          type<span class="token operator">=</span><span class="token string">"number"</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setAge</span><span class="token punctuation">(</span>ageAsNumber <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token maybe-class-name">Add</span> <span class="token number">10</span> years
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token punctuation">{</span>firstName <span class="token operator">!==</span> <span class="token string">''</span> <span class="token operator">&#x26;&#x26;</span>
        <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Your</span> name is <span class="token punctuation">{</span>firstName<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token punctuation">}</span>
      <span class="token punctuation">{</span>ageAsNumber <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&#x26;&#x26;</span>
        <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Your</span> age is <span class="token punctuation">{</span>ageAsNumber<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">label</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">p</span> <span class="token punctuation">{</span> <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><pitfall><p><strong><code>onChange</code> を指定せずに <code>value</code> を渡すと、入力欄に入力することができなくなります</strong>。入力欄に <code>value</code> を渡して制御を行うと、渡した値で入力欄を<em>強制的に固定</em>することになります。したがって、state 変数を <code>value</code> として渡しても、<code>onChange</code> イベントハンドラ内でその state 変数を同期的に更新するのを忘れた場合、React は入力欄を、キーストローク毎に指定した <code>value</code> に戻してしまいます。</p></pitfall></section><section class="level3"aria-labelledby="キーストロークごとの再レンダーを最適化する-optimizing-re-rendering-on-every-keystroke"><h3 id="キーストロークごとの再レンダーを最適化する-optimizing-re-rendering-on-every-keystroke">キーストロークごとの再レンダーを最適化する {/<em>optimizing-re-rendering-on-every-keystroke</em>/}</h3><p>制御された入力欄を使用する場合、キーストロークごとに state のセットが行われます。state を含んだコンポーネントが大きなツリーを再レンダーする場合、速度が遅くなる可能性があります。再レンダー時のパフォーマンスを最適化する方法がいくつかあります。<p>例えば、キーストロークごとにページ内コンテンツをすべて再レンダーするフォームがあるとしましょう。<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>firstName<span class="token punctuation">,</span> setFirstName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>form<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>input value<span class="token operator">=</span><span class="token punctuation">{</span>firstName<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setFirstName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>form<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">PageContent</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p><code>&#x3C;PageContent /></code> は入力値の state に依存していないため、入力値 state を独立したコンポーネントに移動できます。<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">SignupForm</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">PageContent</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">SignupForm</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>firstName<span class="token punctuation">,</span> setFirstName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>form<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>input value<span class="token operator">=</span><span class="token punctuation">{</span>firstName<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setFirstName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>form<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>これにより、キーストロークごとに <code>SignupForm</code> のみが再レンダーされるため、パフォーマンスが大幅に向上します。<p>再レンダーを回避する方法がない場合（例えば、<code>PageContent</code> が検索ボックスの入力値に依存する場合）、<a href="/reference/react/useDeferredValue#deferring-re-rendering-for-a-part-of-the-ui"><code>useDeferredValue</code></a> を使用することで、巨大な再レンダーの途中でも、制御された入力欄の応答性を維持できます。</section></section><section class="level2"aria-labelledby="トラブルシューティング-troubleshooting"><h2 id="トラブルシューティング-troubleshooting">トラブルシューティング {/<em>troubleshooting</em>/}</h2><section class="level3"aria-labelledby="テキスト入力欄にタイプしても内容が更新されない-my-text-input-doesnt-update-when-i-type-into-it"><h3 id="テキスト入力欄にタイプしても内容が更新されない-my-text-input-doesnt-update-when-i-type-into-it">テキスト入力欄にタイプしても内容が更新されない {/<em>my-text-input-doesnt-update-when-i-type-into-it</em>/}</h3><p><code>value</code> があるが <code>onChange</code> のない入力欄をレンダーすると、コンソールにエラーが表示されます。<pre class="language-js"><code class="language-js"><span class="token comment">// 🔴 Bug: controlled text input with no onChange handler</span>
<span class="token operator">&#x3C;</span>input value<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><consoleblock level="error"><p>You provided a <code>value</code> prop to a form field without an <code>onChange</code> handler. This will render a read-only field. If the field should be mutable use <code>defaultValue</code>. Otherwise, set either <code>onChange</code> or <code>readOnly</code>.</p></consoleblock><p>エラーメッセージが示すように、<a href="#providing-an-initial-value-for-a-text-area"><em>初期値</em>を指定したいだけの場合</a>は、代わりに <code>defaultValue</code> を渡すようにしてください。<pre class="language-js"><code class="language-js"><span class="token comment">// ✅ Good: uncontrolled input with an initial value</span>
<span class="token operator">&#x3C;</span>input defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p><a href="#controlling-an-input-with-a-state-variable">state 変数でこの入力欄を制御したい場合</a>は、<code>onChange</code> ハンドラを指定してください。<pre class="language-js"><code class="language-js"><span class="token comment">// ✅ Good: controlled input with onChange</span>
<span class="token operator">&#x3C;</span>input value<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setSomething</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p>値を意図的に読み取り専用にしたい場合は、エラーを抑制するために props として <code>readOnly</code> を追加してください。<pre class="language-js"><code class="language-js"><span class="token comment">// ✅ Good: readonly controlled input without on change</span>
<span class="token operator">&#x3C;</span>input value<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> readOnly<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre></section><section class="level3"aria-labelledby="チェックボックスをクリックしても更新されない-my-checkbox-doesnt-update-when-i-click-on-it"><h3 id="チェックボックスをクリックしても更新されない-my-checkbox-doesnt-update-when-i-click-on-it">チェックボックスをクリックしても更新されない {/<em>my-checkbox-doesnt-update-when-i-click-on-it</em>/}</h3><p><code>checked</code> があるが <code>onChange</code> のないチェックボックスをレンダーすると、コンソールにエラーが表示されます。<pre class="language-js"><code class="language-js"><span class="token comment">// 🔴 Bug: controlled checkbox with no onChange handler</span>
<span class="token operator">&#x3C;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> checked<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><consoleblock level="error"><p>You provided a <code>checked</code> prop to a form field without an <code>onChange</code> handler. This will render a read-only field. If the field should be mutable use <code>defaultChecked</code>. Otherwise, set either <code>onChange</code> or <code>readOnly</code>.</p></consoleblock><p>エラーメッセージが示すように、<a href="#providing-an-initial-value-for-an-input"><em>初期値</em>を指定したいだけの場合</a>は、代わりに <code>defaultChecked</code> を渡すようにしてください。<pre class="language-js"><code class="language-js"><span class="token comment">// ✅ Good: uncontrolled checkbox with an initial value</span>
<span class="token operator">&#x3C;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> defaultChecked<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p><a href="#controlling-an-input-with-a-state-variable">state 変数でこのチェックボックスを制御したい場合</a>は、<code>onChange</code> ハンドラを指定してください。<pre class="language-js"><code class="language-js"><span class="token comment">// ✅ Good: controlled checkbox with onChange</span>
<span class="token operator">&#x3C;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> checked<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setSomething</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">checked</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><pitfall><p>チェックボックスの場合は、<code>e.target.value</code> ではなく <code>e.target.checked</code> を読み取る必要があります。</p></pitfall><p>チェックボックスを意図的に読み取り専用にしたい場合は、エラーを抑制するために props として <code>readOnly</code> を追加してください。<pre class="language-js"><code class="language-js"><span class="token comment">// ✅ Good: readonly controlled input without on change</span>
<span class="token operator">&#x3C;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> checked<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> readOnly<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre></section><section class="level3"aria-labelledby="キーストロークごとに入力欄のカーソルが先頭に戻る-my-input-caret-jumps-to-the-beginning-on-every-keystroke"><h3 id="キーストロークごとに入力欄のカーソルが先頭に戻る-my-input-caret-jumps-to-the-beginning-on-every-keystroke">キーストロークごとに入力欄のカーソルが先頭に戻る {/<em>my-input-caret-jumps-to-the-beginning-on-every-keystroke</em>/}</h3><p>入力欄を<a href="#controlling-a-text-area-with-a-state-variable">制御する</a>場合、<code>onChange</code> 中でその state 変数を DOM からやってくる入力欄の値に更新する必要があります。<p>state を <code>e.target.value</code>（チェックボックスの場合は <code>e.target.checked</code>）以外のものに更新することはできません。<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 🔴 Bug: updating an input to something other than e.target.value</span>
  <span class="token function">setFirstName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">.</span><span class="token method function property-access">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>また、非同期に更新することもできません。<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 🔴 Bug: updating an input asynchronously</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setFirstName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>コードを修正するには、state を <code>e.target.value</code> の値に同期的に更新します。<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ✅ Updating a controlled input to e.target.value synchronously</span>
  <span class="token function">setFirstName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>これで問題が解決しない場合、入力欄がキーストロークごとに DOM から削除・再追加されている可能性があります。これは、再レンダーごとに state を誤って<a href="/learn/preserving-and-resetting-state">リセット</a>している場合に起こります。例えば、入力欄またはその親が常に異なる <code>key</code> 属性を受け取っている可能性や、コンポーネント定義をネストしている（これは React では許されておらず、「内側」のコンポーネントがレンダー時に再マウントさえることになります）可能性があります。</section><section class="level3"aria-labelledby="a-component-is-changing-an-uncontrolled-input-to-be-controlled-というエラーが発生する-im-getting-an-error-a-component-is-changing-an-uncontrolled-input-to-be-controlled"><h3 id="a-component-is-changing-an-uncontrolled-input-to-be-controlled-というエラーが発生する-im-getting-an-error-a-component-is-changing-an-uncontrolled-input-to-be-controlled">"A component is changing an uncontrolled input to be controlled" というエラーが発生する {/<em>im-getting-an-error-a-component-is-changing-an-uncontrolled-input-to-be-controlled</em>/}</h3><p>コンポーネントに <code>value</code> を渡す場合、そのライフサイクル全体を通じて文字列型でなければなりません。<p>最初に <code>value={undefined}</code> を渡しておき、後で <code>value="some string"</code> を渡すようなことはできません。なぜなら、React はあなたがコンポーネントを非制御コンポーネントと制御されたコンポーネントのどちらにしたいのか分からなくなるからです。制御されたコンポーネントは常に文字列の <code>value</code> を受け取るべきであり、<code>null</code> や <code>undefined</code> であってはいけません。<p>あなたの <code>value</code> が API や state 変数から来ている場合、それが <code>null</code> や <code>undefined</code> に初期化されているかもしれません。その場合、まず空の文字列（<code>''</code>）にセットするか、<code>value</code> が文字列であることを保証するために <code>value={someValue ?? ''}</code> を渡すようにしてください。<p>同様に、チェックボックスに <code>checked</code> を渡す場合は、常にブーリアン型であることを確認してください。 <span style="float:footnote"><a href="../../../index.html#toc">Go to TOC</a></span></section></section></inlinetoc></section>