<!doctype html><html lang="ja"><meta charset="utf-8"><title>"&#x3C;select>"</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="select"><h1 id="select">"<select>"ブラウザ組み込みの &#x3C;select> コンポーネントを利用することで、選択肢を含むセレクトボックスをレンダーすることができます。&#x3C;select> &#x3C;option value="someOption">Some option&#x3C;/option> &#x3C;option value="otherOption">Other option&#x3C;/option> &#x3C;/select>リファレンス {/reference/}&#x3C;select> {/select/}セレクトボックスを表示するためには、ブラウザ組み込みの &#x3C;select> コンポーネントをレンダーします。&#x3C;select> &#x3C;option value="someOption">Some option&#x3C;/option> &#x3C;option value="otherOption">Other option&#x3C;/option> &#x3C;/select>さらに例を見るprops {/props/}&#x3C;select> は一般的な要素の props をすべてサポートしています。value プロパティを渡すことで、セレクトボックスを制御されたコンポーネント (controlled component) にできます。 value: 文字列（または multiple={true} の場合は文字列の配列）。どのオプションが選択されているかを制御します。それぞれの value 文字列は、&#x3C;select> 内にネストされたいずれかの &#x3C;option> の value と一致します。 value を渡す場合は、渡された値を更新する onChange ハンドラも渡す必要があります。もし &#x3C;select> を非制御コンポーネント (uncontrolled component) として使用する場合は、代わりに defaultValue プロパティを渡すことができます。 defaultValue: 文字列（または multiple={true} の場合は文字列の配列）。デフォルトのオプションを指定 します。 以下の &#x3C;select> の props は、非制御セレクトボックスと制御されたセレクトボックスの両方で用いられます。 autoComplete: 文字列。可能なオートコンプリート動作の 1 つを指定します。 autoFocus: ブーリアン。true の場合、React は要素をマウント時にフォーカスします。 children: &#x3C;select> は &#x3C;option>、&#x3C;optgroup>、&#x3C;datalist> コンポーネントを子として受け入れます。カスタムコンポーネントを渡しても構いませんが、その場合は最終的に上記のコンポーネントのいずれかにレンダーされる必要があります。&#x3C;option> タグを最終的にレンダーする独自のコンポーネントを渡す場合、レンダーする各 &#x3C;option> には value が必要です。 disabled: ブーリアン。true の場合、セレクトボックスはインタラクティブではなくなり、薄暗く表示されます。 form: 文字列。このセレクトボックスが属する &#x3C;form> 要素の id を指定します。省略した場合、最も近い親フォームが対象となります。 multiple: ブーリアン。true の場合、ブラウザで複数選択が可能になります。 name: 文字列。フォームとともに送信されるこの選択ボックスの名前を指定します。 onChange: Event ハンドラ関数。制御されたセレクトボックスでは必要です。ユーザが別のオプションを選択したときに即座に発火します。ブラウザの input イベントと同様に動作します。 onChangeCapture: onChange のキャプチャフェーズで発火するバージョンです。 onInput: Event ハンドラ関数。ユーザによって値が変更されたときに即座に発火します。歴史的な理由から、React では代わりに同様の動作をする onChange を使用するのが慣習となっています。 onInputCapture: onInput のキャプチャフェーズで発火するバージョンです。 onInvalid: Event ハンドラ関数。フォームの送信時に入力の検証に失敗した場合に発火します。組み込みの invalid イベントとは異なり、React の onInvalid イベントはバブルします。 onInvalidCapture: onInvalid のキャプチャフェーズで発火するバージョンです。 required: ブーリアン。true の場合、フォームを送信する際に値の指定を必須にします。 size: 数値。multiple={true} となっている選択ボックスにおける最初に表示させたい項目の数を指定します。 注意点 {/caveats/} HTML とは異なり、&#x3C;option> に selected 属性を渡すことはサポートされていません。代わりに、非制御のセレクトボックスには &#x3C;select defaultValue> を使用し、制御されたセレクトボックスには &#x3C;select value> を使用します。 セレクトボックスに value プロパティが渡されると、制御されたコンポーネントとして扱われます。 セレクトボックスは制御されたコンポーネントと非制御コンポーネントに同時になることはできません。 セレクトボックスは、ライフタイム中に制御されたコンポーネントから非制御コンポーネント、またはその逆に切り替えることはできません。 すべての制御されたセレクトボックスには、制御に使っている state を同期的に更新するための onChange イベントハンドラが必要です。 使用法 {/usage/}選択肢を含むセレクトボックスを表示する {/displaying-a-select-box-with-options/}&#x3C;option> コンポーネントのリストを内部に含む &#x3C;select> をレンダーして、セレクトボックスを表示します。各 &#x3C;option> に、フォームで送信されるデータを表す value を指定してください。export default function FruitPicker() { return ( &#x3C;label> Pick a fruit: &#x3C;select name="selectedFruit"> &#x3C;option value="apple">Apple&#x3C;/option> &#x3C;option value="banana">Banana&#x3C;/option> &#x3C;option value="orange">Orange&#x3C;/option> &#x3C;/select> &#x3C;/label> ); }select { margin: 5px; } セレクトボックスにラベルを付ける {/providing-a-label-for-a-select-box/}通常、すべての &#x3C;select> は &#x3C;label> タグ内に配置します。これにより、ブラウザに対してこのラベルがそのセレクトボックスに関連付けられていることが伝わります。ユーザがラベルをクリックすると、ブラウザは自動的にセレクトボックスにフォーカスします。これはアクセシビリティの観点からも重要です。ユーザがセレクトボックスにフォーカスすると、スクリーンリーダがラベルのキャプションを読み上げます。もし &#x3C;label> 内に &#x3C;select> をネストできない場合は、同じ ID を &#x3C;select id> と &#x3C;label htmlFor> に渡すことで関連付けることができます。同一コンポーネントの複数のインスタンス間での競合を避けるために、useId を使用してそのような ID を生成してください。import { useId } from 'react'; export default function Form() { const vegetableSelectId = useId(); return ( &#x3C;> &#x3C;label> Pick a fruit: &#x3C;select name="selectedFruit"> &#x3C;option value="apple">Apple&#x3C;/option> &#x3C;option value="banana">Banana&#x3C;/option> &#x3C;option value="orange">Orange&#x3C;/option> &#x3C;/select> &#x3C;/label> &#x3C;hr /> &#x3C;label htmlFor={vegetableSelectId}> Pick a vegetable: &#x3C;/label> &#x3C;select id={vegetableSelectId} name="selectedVegetable"> &#x3C;option value="cucumber">Cucumber&#x3C;/option> &#x3C;option value="corn">Corn&#x3C;/option> &#x3C;option value="tomato">Tomato&#x3C;/option> &#x3C;/select> &#x3C;/> ); }select { margin: 5px; }デフォルトのオプションを指定する {/providing-an-initially-selected-option/}デフォルトでは、ブラウザはリスト内の最初の &#x3C;option> を選択します。異なるオプションをデフォルトで選択する場合は、その &#x3C;option> の value を &#x3C;select> 要素の defaultValue として渡します。export default function FruitPicker() { return ( &#x3C;label> Pick a fruit: &#x3C;select name="selectedFruit" defaultValue="orange"> &#x3C;option value="apple">Apple&#x3C;/option> &#x3C;option value="banana">Banana&#x3C;/option> &#x3C;option value="orange">Orange&#x3C;/option> &#x3C;/select> &#x3C;/label> ); }select { margin: 5px; } HTML とは異なり、個々の &#x3C;option> に selected 属性を渡すことはサポートされていません。複数選択を有効にする {/enabling-multiple-selection/}複数のオプションを選択できるようにするには、&#x3C;select> に multiple={true} を渡します。さらに初期選択オプションを指定するために defaultValue を渡したい場合は、配列にする必要があります。export default function FruitPicker() { return ( &#x3C;label> Pick some fruits: &#x3C;select name="selectedFruit" defaultValue={['orange', 'banana']} multiple={true} > &#x3C;option value="apple">Apple&#x3C;/option> &#x3C;option value="banana">Banana&#x3C;/option> &#x3C;option value="orange">Orange&#x3C;/option> &#x3C;/select> &#x3C;/label> ); }select { display: block; margin-top: 10px; width: 200px; }フォーム送信時にセレクトボックスから値を読み取る {/reading-the-select-box-value-when-submitting-a-form/}セレクトボックスを &#x3C;form> で囲み、その中に &#x3C;button type="submit"> を配置します。これにより、&#x3C;form onSubmit> イベントハンドラが呼び出されます。デフォルトでは、ブラウザはフォームデータを現在の URL に送信し、ページを更新します。e.preventDefault() を呼び出すことで、その振る舞いをオーバーライドできます。new FormData(e.target) を使用してフォームデータを読み込みます。 export default function EditPost() { function handleSubmit(e) { // Prevent the browser from reloading the page e.preventDefault(); // Read the form data const form = e.target; const formData = new FormData(form); // You can pass formData as a fetch body directly: fetch('/some-api', { method: form.method, body: formData }); // You can generate a URL out of it, as the browser does by default: console.log(new URLSearchParams(formData).toString()); // You can work with it as a plain object. const formJson = Object.fromEntries(formData.entries()); console.log(formJson); // (!) This doesn't include multiple select values // Or you can get an array of name-value pairs. console.log([...formData.entries()]); } return ( &#x3C;form method="post" onSubmit={handleSubmit}> &#x3C;label> Pick your favorite fruit: &#x3C;select name="selectedFruit" defaultValue="orange"> &#x3C;option value="apple">Apple&#x3C;/option> &#x3C;option value="banana">Banana&#x3C;/option> &#x3C;option value="orange">Orange&#x3C;/option> &#x3C;/select> &#x3C;/label> &#x3C;label> Pick all your favorite vegetables: &#x3C;select name="selectedVegetables" multiple={true} defaultValue={['corn', 'tomato']} > &#x3C;option value="cucumber">Cucumber&#x3C;/option> &#x3C;option value="corn">Corn&#x3C;/option> &#x3C;option value="tomato">Tomato&#x3C;/option> &#x3C;/select> &#x3C;/label> &#x3C;hr /> &#x3C;button type="reset">Reset&#x3C;/button> &#x3C;button type="submit">Submit&#x3C;/button> &#x3C;/form> ); }label, select { display: block; } label { margin-bottom: 20px; }&#x3C;select> に name を指定してください。例えば &#x3C;select name="selectedFruit" /> のように指定します。指定した name はフォームデータ内のキーとして使用されます。例えば、{ selectedFruit: "orange" } のようになります。&#x3C;select multiple={true}> を使用すると、フォームから読み取った FormData には、選択されたそれぞれの値が個別に名前と値のペアとして含まれます。上記の例のコンソールログをよく確認してください。デフォルトでは、&#x3C;form> 内のあらゆる &#x3C;button> はフォームの送信を行います。これは予想外の挙動かもしれません！ 独自のカスタム Button React コンポーネントを利用している場合は、&#x3C;button> の代わりに &#x3C;button type="button"> を返すようにすることを考慮してください。そしてフォームを送信することが意図されているボタンには明示的に &#x3C;button type="submit"> を使用してください。state 変数を使ってセレクトボックスを制御する {/controlling-a-select-box-with-a-state-variable/}&#x3C;select /> のようなセレクトボックスは非制御です。たとえ &#x3C;select defaultValue="orange" /> のようにデフォルトのオプションを指定している場合でも、この JSX で指定しているのはあくまで初期値であって現在の値ではありません。制御されたセレクトボックスをレンダーするには、value プロパティを渡してください。React はセレクトボックスが常に渡した value を反映するようにします。通常、state 変数を宣言することでセレクトボックスを制御します。function FruitPicker() { const [selectedFruit, setSelectedFruit] = useState('orange'); // Declare a state variable... // ... return ( &#x3C;select value={selectedFruit} // ...force the select's value to match the state variable... onChange={e => setSelectedFruit(e.target.value)} // ... and update the state variable on any change! > &#x3C;option value="apple">Apple&#x3C;/option> &#x3C;option value="banana">Banana&#x3C;/option> &#x3C;option value="orange">Orange&#x3C;/option> &#x3C;/select> ); }これは、選択毎に UI の一部を再レンダーしたい場合に便利です。import { useState } from 'react'; export default function FruitPicker() { const [selectedFruit, setSelectedFruit] = useState('orange'); const [selectedVegs, setSelectedVegs] = useState(['corn', 'tomato']); return ( &#x3C;> &#x3C;label> Pick a fruit: &#x3C;select value={selectedFruit} onChange={e => setSelectedFruit(e.target.value)} > &#x3C;option value="apple">Apple&#x3C;/option> &#x3C;option value="banana">Banana&#x3C;/option> &#x3C;option value="orange">Orange&#x3C;/option> &#x3C;/select> &#x3C;/label> &#x3C;hr /> &#x3C;label> Pick all your favorite vegetables: &#x3C;select multiple={true} value={selectedVegs} onChange={e => { const options = [...e.target.selectedOptions]; const values = options.map(option => option.value); setSelectedVegs(values); }} > &#x3C;option value="cucumber">Cucumber&#x3C;/option> &#x3C;option value="corn">Corn&#x3C;/option> &#x3C;option value="tomato">Tomato&#x3C;/option> &#x3C;/select> &#x3C;/label> &#x3C;hr /> &#x3C;p>Your favorite fruit: {selectedFruit}&#x3C;/p> &#x3C;p>Your favorite vegetables: {selectedVegs.join(', ')}&#x3C;/p> &#x3C;/> ); }select { margin-bottom: 10px; display: block; }onChange を指定せずに value を渡すと、オプションを選択することができなくなります。セレクトボックスに value を渡して制御を行うと、渡した値でセレクトボックスを強制的に固定することになります。したがって、state 変数を value として渡しても、onChange イベントハンドラ内でその state 変数を同期的に更新するのを忘れた場合、React はセレクトボックスを、キーストローク毎に指定した value に戻してしまいます。HTML とは異なり、個々の &#x3C;option> に selected 属性を渡すことはサポートされていません。 Go to TOC</select></h1></section>