<!doctype html><html lang="ja"><meta charset="utf-8"><title>リファレンス {/reference/}</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../../../themes/packages/prism-coy-theme/theme_common.css"><p>script: "<script>"
canary: true</script><canary></canary><p>React による <code>&#x3C;script></code> の機能拡張は、現在 React の Canary および experimental チャンネルでのみ利用可能です。React の安定版リリースでは、<code>&#x3C;script></code> は単なる<a href="https://react.dev/reference/react-dom/components#all-html-components">組み込みのブラウザ HTML コンポーネント</a>として機能します。<a href="/community/versioning-policy#all-release-channels">React のリリースチャンネルについてはこちらをご覧ください</a>。</p><intro><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script">ブラウザ組み込みの <code>&#x3C;script></code> コンポーネント</a>を利用することで、ドキュメントにスクリプトを追加できます。<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>script<span class="token operator">></span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"hi!"</span><span class="token punctuation">)</span> <span class="token operator">&#x3C;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre></intro><inlinetoc><section class="level2"aria-labelledby="リファレンス-reference"><h2 id="リファレンス-reference">リファレンス {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="-script"><h3 id="-script"><code>&#x3C;script></code> {/<em>script</em>/}</h3><p>ドキュメントにインラインスクリプトまたは外部スクリプトを追加するためには、<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script">ブラウザ組み込みの <code>&#x3C;script></code> コンポーネント</a>をレンダーします。任意のコンポーネントから <code>&#x3C;script></code> をレンダーでき、React は<a href="#special-rendering-behavior">特定の場合</a>に対応する DOM 要素をドキュメントの head 内に配置し、同一スクリプトの重複解消処理を行います。<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>script<span class="token operator">></span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"hi!"</span><span class="token punctuation">)</span> <span class="token operator">&#x3C;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&#x3C;</span>script src<span class="token operator">=</span><span class="token string">"script.js"</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p><a href="#usage">さらに例を見る</a><section class="level4"aria-labelledby="props-props"><h4 id="props-props">props {/<em>props</em>/}</h4><p><code>&#x3C;script></code> は、<a href="/reference/react-dom/components/common#props">一般的な要素の props</a> をすべてサポートしています。<p>props として <code>children</code> または <code>src</code> のいずれかが必要です。<ul><li><code>children</code>: 文字列。インラインスクリプトのソースコード。<li><code>src</code>: 文字列。外部スクリプトの URL。</ul><p>他に、以下の props がサポートされます。<ul><li><code>async</code>: ブーリアン。ドキュメントの残りの部分の処理を完了するまでブラウザにスクリプトの実行を遅延させることを許可します。これはパフォーマンスのために推奨される動作です。<li><code>crossOrigin</code>: 文字列。使用する <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/crossorigin">CORS ポリシー</a>。可能な値は <code>anonymous</code> と <code>use-credentials</code> です。<li><code>fetchPriority</code>: 文字列。複数のスクリプトを同時にフェッチする際に、ブラウザにスクリプトの優先付けを行わせます。<code>"high"</code>、<code>"low"</code>、<code>"auto"</code>（デフォルト）のいずれかです。<li><code>integrity</code>: 文字列。文字列。<a href="https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity">真正性を検証する</a>ために使用するスクリプトの暗号化ハッシュ。<li><code>noModule</code>: ブーリアン。ES モジュールをサポートするブラウザでこのスクリプトを無効にすることで、サポートしていないブラウザ用のフォールバックスクリプトとして利用できるようにします。<li><code>nonce</code>: 文字列。厳格なコンテンツセキュリティポリシーを使用する際に<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/nonce">リソースを許可するための暗号化 nonce</a>。<li><code>referrer</code>: 文字列。スクリプトをフェッチする際、およびそのスクリプトが更にリソースフェッチする際に送信する <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script#referrerpolicy">Referer ヘッダー</a>を指定します。<li><code>type</code>: 文字列。スクリプトが<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script/type">従来のスクリプト、ES モジュール、またはインポートマップ</a>のいずれであるかを指定します。</ul><p>以下の props は React による<a href="#special-rendering-behavior">スクリプトの特別な扱い</a>を無効にします。<ul><li><code>onError</code>: 関数。スクリプトのロードに失敗したときに呼び出されます。<li><code>onLoad</code>: 関数。スクリプトのロードが完了したときに呼び出されます。</ul><p>以下は React での使用が<strong>推奨されない</strong> props です。<ul><li><code>blocking</code>: 文字列。<code>"render"</code> と設定されている場合、スクリプトがロードされるまでページを描画しないようブラウザに指示します。React ではサスペンスを通じてより細かい制御を提供します。<li><code>defer</code>: 文字列。ドキュメントの読み込みが完了するまでブラウザによるスクリプトの実行を防ぎます。これはストリーミングでサーバレンダーされるコンポーネントと互換性がありません。代わりに <code>async</code> を使用してください。</ul></section><section class="level4"aria-labelledby="特別なレンダー動作-special-rendering-behavior"><h4 id="特別なレンダー動作-special-rendering-behavior">特別なレンダー動作 {/<em>special-rendering-behavior</em>/}</h4><p>React は <code>&#x3C;script></code> コンポーネントをドキュメントの <code>&#x3C;head></code> に移動させ、同一スクリプトの重複解消処理を行います。<p>この動作を有効にするには、props として <code>src</code> と <code>async={true}</code> の props を指定してください。React は同じ <code>src</code> を持つスクリプトが重複しないようにします。スクリプトを安全に移動させるために <code>async</code> が true である必要があります。<p>この特別な動作に関して、以下の 2 つの注意点があります。<ul><li>スクリプトがレンダーされた後、React は props に変更があってもそれを無視します（開発中にこれが起きた場合は React が警告を発します）。<li>スクリプトをレンダーしていたコンポーネントがアンマウントされた後も、React は DOM にスクリプトを残すことがあります。（スクリプトは DOM に挿入された際に一度だけ実行されるものなので、これによる影響はありません。）</ul></section></section></section><section class="level2"aria-labelledby="使用法-usage"><h2 id="使用法-usage">使用法 {/<em>usage</em>/}</h2><section class="level3"aria-labelledby="外部スクリプトのレンダー-rendering-an-external-script"><h3 id="外部スクリプトのレンダー-rendering-an-external-script">外部スクリプトのレンダー {/<em>rendering-an-external-script</em>/}</h3><p>コンポーネントが正しく表示されるために特定のスクリプトに依存している場合、当該コンポーネント内で <code>&#x3C;script></code> をレンダーできます。 ただしコンポーネントはスクリプトのロードが完了する前にコミットされる可能性があります。 <code>onLoad</code> プロパティを使うなどで <code>load</code> イベントが発火したのを確認してからスクリプトの内容に依存するコードを使用するようにしてください。<p>React 重複解消処理を行うため、複数のコンポーネントが同じ <code>src</code> を持つスクリプトをレンダーしている場合でも、React はそれらのうちひとつだけを DOM に挿入します。</p><sandpackwithhtmloutput><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">ShowRenderedHTML</span></span> <span class="token keyword module">from</span> <span class="token string">'./ShowRenderedHTML.js'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token known-class-name class-name">Map</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>lat<span class="token punctuation">,</span> long<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>script <span class="token keyword">async</span> src<span class="token operator">=</span><span class="token string">"map-api.js"</span> onLoad<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'script loaded'</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>div id<span class="token operator">=</span><span class="token string">"map"</span> data<span class="token operator">-</span>lat<span class="token operator">=</span><span class="token punctuation">{</span>lat<span class="token punctuation">}</span> data<span class="token operator">-</span>long<span class="token operator">=</span><span class="token punctuation">{</span>long<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Page</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">ShowRenderedHTML</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token known-class-name class-name">Map</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">ShowRenderedHTML</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpackwithhtmloutput><note>スクリプトを使用する場合、[preinit](/reference/react-dom/preinit) 関数を呼び出すことが有用です。この関数を呼び出すことで、たとえば [HTTP Early Hints レスポンス](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/103)を送信でき、ブラウザがスクリプトのフェッチをより早く開始できるかもしれません。</note></section><section class="level3"aria-labelledby="インラインスクリプトのレンダー-rendering-an-inline-script"><h3 id="インラインスクリプトのレンダー-rendering-an-inline-script">インラインスクリプトのレンダー {/<em>rendering-an-inline-script</em>/}</h3><p>インラインスクリプトを含めるには、<code>&#x3C;script></code> コンポーネントをレンダーする際に children としてスクリプトのソースコードを指定します。インラインスクリプトは重複解消処理が行われず、ドキュメントの <code>&#x3C;head></code> に移動されません。</p><sandpackwithhtmloutput><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">ShowRenderedHTML</span></span> <span class="token keyword module">from</span> <span class="token string">'./ShowRenderedHTML.js'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Tracking</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>script<span class="token operator">></span>
      <span class="token function">ga</span><span class="token punctuation">(</span><span class="token string">'send'</span><span class="token punctuation">,</span> <span class="token string">'pageview'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>script<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Page</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">ShowRenderedHTML</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">My</span> <span class="token maybe-class-name">Website</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Tracking</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Welcome</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">ShowRenderedHTML</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpackwithhtmloutput><span style="float:footnote"><a href="../../../index.html#toc">Go to TOC</a></span></section></section></inlinetoc>