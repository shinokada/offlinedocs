<!doctype html><html lang="ja"><meta charset="utf-8"><title>""</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"><h1 id="">"<textarea>"</textarea><intro><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea">ブラウザ組み込みの <code>&#x3C;textarea></code> コンポーネント</a>を利用することで、複数行のテキスト入力エリアをレンダーすることができます。<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>textarea <span class="token operator">/</span><span class="token operator">></span></code></pre></intro><inlinetoc><section class="level2"aria-labelledby="リファレンス-reference"><h2 id="リファレンス-reference">リファレンス {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="-textarea"><h3 id="-textarea"><code>&#x3C;textarea></code> {/<em>textarea</em>/}</h3><p>テキストエリアを表示するためには、<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea">ブラウザ組み込みの <code>&#x3C;textarea></code></a> コンポーネントをレンダーします。<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>textarea name<span class="token operator">=</span><span class="token string">"postContent"</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p><a href="#usage">さらに例を見る</a><section class="level4"aria-labelledby="props-props"><h4 id="props-props">props {/<em>props</em>/}</h4><p><code>&#x3C;textarea></code> は<a href="/reference/react-dom/components/common#props">一般的な要素の props</a> をすべてサポートしています。<p><code>value</code> プロパティを渡すことで、<a href="#controlling-a-text-area-with-a-state-variable">テキストエリアを制御されたコンポーネント (controlled component)</a> にできます。<ul><li><code>value</code>: 文字列。テキストエリア内のテキストを制御します。</ul><p><code>value</code> を渡す場合は、渡された値を更新する <code>onChange</code> ハンドラも渡す必要があります。<p>もし <code>&#x3C;textarea></code> を非制御コンポーネント (uncontrolled component) として使用する場合は、代わりに <code>defaultValue</code> プロパティを渡すことができます。<ul><li><code>defaultValue</code>: 文字列。テキストエリアの<a href="#providing-an-initial-value-for-a-text-area">初期値</a>を指定します。</ul><p>これらの <code>&#x3C;textarea></code> の props は、非制御のテキストエリアと制御されたテキストエリアの両方で用いられます。<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea#autocomplete"><code>autoComplete</code></a>: <code>'on'</code> または <code>'off'</code>。オートコンプリートの挙動を指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea#autofocus"><code>autoFocus</code></a>: ブーリアン。<code>true</code> の場合、React はマウント時にこの要素にフォーカスします。<li><code>children</code>: <code>&#x3C;textarea></code> には子要素を指定できません。初期値を設定するには <code>defaultValue</code> を使用します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea#cols"><code>cols</code></a>: 数値。デフォルトの幅を平均文字幅で指定します。デフォルトは <code>20</code> です。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea#disabled"><code>disabled</code></a>: ブーリアン。<code>true</code> の場合、入力エリアは操作不可能になり、表示が暗くなります。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea#form"><code>form</code></a>: 文字列。この入力が属する <code>&#x3C;form></code> の <code>id</code> を指定します。省略された場合、最も近い親のフォームとなります。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea#maxlength"><code>maxLength</code></a>: 数値。テキストの最大長を指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea#minlength"><code>minLength</code></a>: 数値。テキストの最小長を指定します。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#name"><code>name</code></a>: 文字列。<a href="#reading-the-textarea-value-when-submitting-a-form">フォームで送信される</a>この入力エリアの名前を指定します。<li><code>onChange</code>: <a href="/reference/react-dom/components/common#event-handler"><code>Event</code> ハンドラ</a> 関数。<a href="#controlling-a-text-area-with-a-state-variable">制御されたテキストエリア</a>では必須。ユーザによって入力値が変更されるとすぐに発火します（例えば、各キーストロークで発火します）。ブラウザの <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/input_event"><code>input</code> イベント</a> と同様に動作します。<li><code>onChangeCapture</code>: <code>onChange</code> の<a href="/learn/responding-to-events#capture-phase-events">キャプチャフェーズ</a>で発火するバージョン。<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/input_event"><code>onInput</code></a>: <a href="/reference/react-dom/components/common#event-handler"><code>Event</code> ハンドラ</a>関数。ユーザによって値が変更されるとすぐに発火します。歴史的な理由から、React では同様に動作する <code>onChange</code> を使用するのが慣例です。<li><code>onInputCapture</code>: <code>onInput</code> の<a href="/learn/responding-to-events#capture-phase-events">キャプチャフェーズ</a>で発火するバージョン。<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/invalid_event"><code>onInvalid</code></a>: <a href="/reference/react-dom/components/common#event-handler"><code>Event</code> ハンドラ</a>関数。フォームの送信時に入力が検証に失敗した場合に発火します。組み込みの <code>invalid</code> イベントとは異なり、React の <code>onInvalid</code> イベントはバブリングします。<li><code>onInvalidCapture</code>: <code>onInvalid</code> の<a href="/learn/responding-to-events#capture-phase-events">キャプチャフェーズ</a>で発火するバージョン。<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLTextAreaElement/select_event"><code>onSelect</code></a>: <a href="/reference/react-dom/components/common#event-handler"><code>Event</code> ハンドラ</a>関数。<code>&#x3C;textarea></code> 内で選択テキストが変更された後に発火します。React は <code>onSelect</code> イベントを拡張しており、空の選択やテキストの編集（選択に影響を与える可能性がある）でも発火します。<li><code>onSelectCapture</code>: <code>onSelect</code> の<a href="/learn/responding-to-events#capture-phase-events">キャプチャフェーズ</a>で発火するバージョン。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea#placeholder"><code>placeholder</code></a>: 文字列。テキストエリアの値が空の場合、これが薄い色で表示されます。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea#readonly"><code>readOnly</code></a>: ブーリアン。<code>true</code> の場合、テキストエリアはユーザによって編集できなくなります。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea#required"><code>required</code></a>: ブーリアン。<code>true</code> の場合、フォームを送信するためには値が必須となります。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea#rows"><code>rows</code></a>: 数値。デフォルトの高さを平均文字高での指定します。デフォルトは <code>2</code> です。<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea#wrap"><code>wrap</code></a>: <code>'hard'</code>、<code>'soft'</code>、または <code>'off'</code>。フォームを送信するときにテキストがどのように折り返されるかを指定します。</ul></section><section class="level4"aria-labelledby="注意点-caveats"><h4 id="注意点-caveats">注意点 {/<em>caveats</em>/}</h4><ul><li><code>&#x3C;textarea>something&#x3C;/textarea></code> のように子要素を渡すことはできません。<a href="#providing-an-initial-value-for-a-text-area">初期内容の指定には <code>defaultValue</code> を使用してください</a>。<li>テキストエリアが props として文字列型の <code>value</code> を受け取ると、<a href="#controlling-a-text-area-with-a-state-variable">制御されたテキストエリアとして扱われます</a>。<li>テキストエリアは制御されたコンポーネントと非制御コンポーネントに同時になることはできません。。<li>テキストエリアは、ライフタイム中に制御されたコンポーネントから非制御コンポーネント、またはその逆に切り替えることはできません。<li>すべての制御されたテキストエリアには、制御に使っている state を同期的に更新するための <code>onChange</code> イベントハンドラが必要です。</ul></section></section></section><section class="level2"aria-labelledby="使用法-usage"><h2 id="使用法-usage">使用法 {/<em>usage</em>/}</h2><section class="level3"aria-labelledby="テキストエリアを表示する-displaying-a-text-area"><h3 id="テキストエリアを表示する-displaying-a-text-area">テキストエリアを表示する {/<em>displaying-a-text-area</em>/}</h3><p>テキストエリアを表示するには、<code>&#x3C;textarea></code> をレンダーします。そのデフォルトのサイズは <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea#rows"><code>rows</code></a> と <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea#cols"><code>cols</code></a> 属性で指定できますが、デフォルトではユーザがそれをリサイズできます。リサイズを無効にするには、CSS で <code>resize: none</code> を指定します。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">NewPost</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
      <span class="token maybe-class-name">Write</span> your post<span class="token operator">:</span>
      <span class="token operator">&#x3C;</span>textarea name<span class="token operator">=</span><span class="token string">"postContent"</span> rows<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">}</span> cols<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">40</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">textarea</span> <span class="token punctuation">{</span> <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">label</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">label<span class="token punctuation">,</span> textarea</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack></section><section class="level3"aria-labelledby="テキストエリアにラベルを付ける-providing-a-label-for-a-text-area"><h3 id="テキストエリアにラベルを付ける-providing-a-label-for-a-text-area">テキストエリアにラベルを付ける {/<em>providing-a-label-for-a-text-area</em>/}</h3><p>通常、すべての <code>&#x3C;textarea></code> は <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label"><code>&#x3C;label></code></a> タグ内に配置します。これにより、ブラウザに対してこのラベルがそのテキストエリアに関連付けられていることが伝わります。ユーザがラベルをクリックすると、ブラウザは自動的にテキストエリアにフォーカスします。これはアクセシビリティの観点からも重要です。ユーザがテキストエリアにフォーカスすると、スクリーンリーダがラベルのキャプションを読み上げます。<p>もし <code>&#x3C;label></code> 内に <code>&#x3C;textarea></code> をネストできない場合は、同じ ID を <code>&#x3C;textarea id></code> と <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/htmlFor"><code>&#x3C;label htmlFor></code></a> に渡すことで関連付けることができます。同一コンポーネントの複数のインスタンス間での競合を避けるために、<a href="/reference/react/useId"><code>useId</code></a> を使用してそのような ID を生成してください。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useId <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Form</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> postTextAreaId <span class="token operator">=</span> <span class="token function">useId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label htmlFor<span class="token operator">=</span><span class="token punctuation">{</span>postTextAreaId<span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token maybe-class-name">Write</span> your post<span class="token operator">:</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>textarea
        id<span class="token operator">=</span><span class="token punctuation">{</span>postTextAreaId<span class="token punctuation">}</span>
        name<span class="token operator">=</span><span class="token string">"postContent"</span>
        rows<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">}</span>
        cols<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">40</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack></section><section class="level3"aria-labelledby="テキストエリアに初期値を指定する-providing-an-initial-value-for-a-text-area"><h3 id="テキストエリアに初期値を指定する-providing-an-initial-value-for-a-text-area">テキストエリアに初期値を指定する {/<em>providing-an-initial-value-for-a-text-area</em>/}</h3><p>オプションで、テキストエリアの初期値を指定することができます。<code>defaultValue</code> 文字列として渡してください。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">EditPost</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
      <span class="token maybe-class-name">Edit</span> your post<span class="token operator">:</span>
      <span class="token operator">&#x3C;</span>textarea
        name<span class="token operator">=</span><span class="token string">"postContent"</span>
        defaultValue<span class="token operator">=</span><span class="token string">"I really enjoyed biking yesterday!"</span>
        rows<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">}</span>
        cols<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">40</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">textarea</span> <span class="token punctuation">{</span> <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">label</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">label<span class="token punctuation">,</span> textarea</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><pitfall><p>HTML とは異なり、初期テキストを <code>&#x3C;textarea>Some content&#x3C;/textarea></code> のようにして渡すことはサポートされていません。</p></pitfall></section><section class="level3"aria-labelledby="フォーム送信時にテキストエリアから値を読み取る-reading-the-text-area-value-when-submitting-a-form"><h3 id="フォーム送信時にテキストエリアから値を読み取る-reading-the-text-area-value-when-submitting-a-form">フォーム送信時にテキストエリアから値を読み取る {/<em>reading-the-text-area-value-when-submitting-a-form</em>/}</h3><p>テキストエリアを <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form"><code>&#x3C;form></code></a> で囲み、その中に <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button"><code>&#x3C;button type="submit"></code></a> を配置します。これにより、<code>&#x3C;form onSubmit></code> イベントハンドラが呼び出されます。デフォルトでは、ブラウザはフォームデータを現在の URL に送信し、ページを更新します。<code>e.preventDefault()</code> を呼び出すことで、その振る舞いをオーバーライドできます。<a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData"><code>new FormData(e.target)</code></a> を使用してフォームデータを読み込みます。<sandpack></sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">EditPost</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">handleSubmit</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Prevent the browser from reloading the page</span>
    e<span class="token punctuation">.</span><span class="token method function property-access">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Read the form data</span>
    <span class="token keyword">const</span> form <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span>form<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// You can pass formData as a fetch body directly:</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/some-api'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> form<span class="token punctuation">.</span><span class="token property-access">method</span><span class="token punctuation">,</span> <span class="token literal-property property">body</span><span class="token operator">:</span> formData <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Or you can work with it as a plain object:</span>
    <span class="token keyword">const</span> formJson <span class="token operator">=</span> <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">fromEntries</span><span class="token punctuation">(</span>formData<span class="token punctuation">.</span><span class="token method function property-access">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>formJson<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>form method<span class="token operator">=</span><span class="token string">"post"</span> onSubmit<span class="token operator">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token maybe-class-name">Post</span> # <span class="token operator">&#x3C;</span>input name<span class="token operator">=</span><span class="token string">"postTitle"</span> defaultValue<span class="token operator">=</span><span class="token string">"Biking"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token maybe-class-name">Edit</span> your post<span class="token operator">:</span>
        <span class="token operator">&#x3C;</span>textarea
          name<span class="token operator">=</span><span class="token string">"postContent"</span>
          defaultValue<span class="token operator">=</span><span class="token string">"I really enjoyed biking yesterday!"</span>
          rows<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">}</span>
          cols<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">40</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button type<span class="token operator">=</span><span class="token string">"reset"</span><span class="token operator">></span><span class="token maybe-class-name">Reset</span> edits<span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button type<span class="token operator">=</span><span class="token string">"submit"</span><span class="token operator">></span><span class="token maybe-class-name">Save</span> post<span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>form<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">label</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre><note><p><code>&#x3C;textarea></code> に <code>name</code> を指定してください。例えば <code>&#x3C;textarea name="postContent" /></code> のように指定します。指定した <code>name</code> はフォームデータ内のキーとして使用されます。例えば、<code>{ postContent: "Your post" }</code> のようになります。</p></note><pitfall><p>デフォルトでは、<code>&#x3C;form></code> 内の<em>あらゆる</em> <code>&#x3C;button></code> はフォームの送信を行います。これは予想外の挙動かもしれません！ 独自のカスタム <code>Button</code> React コンポーネントを利用している場合は、<code>&#x3C;button></code> の代わりに <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/button"><code>&#x3C;button type="button"></code></a> を返すようにすることを考慮してください。そしてフォームを送信することが<em>意図されている</em>ボタンには明示的に <code>&#x3C;button type="submit"></code> を使用してください。</p></pitfall></section><section class="level3"aria-labelledby="state-変数を使ってテキストエリアを制御する-controlling-a-text-area-with-a-state-variable"><h3 id="state-変数を使ってテキストエリアを制御する-controlling-a-text-area-with-a-state-variable">state 変数を使ってテキストエリアを制御する {/<em>controlling-a-text-area-with-a-state-variable</em>/}</h3><p><code>&#x3C;textarea /></code> のようなテキストエリアは<em>非制御</em>です。たとえ <code>&#x3C;textarea defaultValue="Initial text" /></code> のように<a href="#providing-an-initial-value-for-a-text-area">デフォルト値を指定</a>している場合でも、この JSX で指定しているのはあくまで初期値であって現在の値ではありません。<p><strong><em>制御された</em>テキストエリアをレンダーするには、<code>value</code> プロパティを渡してください</strong>。React はテキストエリアが常に渡した <code>value</code> を反映するようにします。通常、<a href="/reference/react/useState">state 変数</a>を宣言することでテキストエリアを制御します。<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">NewPost</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>postContent<span class="token punctuation">,</span> setPostContent<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Declare a state variable...</span>
  <span class="token comment">// ...</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>textarea
      value<span class="token operator">=</span><span class="token punctuation">{</span>postContent<span class="token punctuation">}</span> <span class="token comment">// ...force the input's value to match the state variable...</span>
      onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setPostContent</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token comment">// ... and update the state variable on any edits!</span>
    <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>これは、キーストロークごとに UI の一部を再レンダーしたい場合に便利です。</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">MarkdownPreview</span></span> <span class="token keyword module">from</span> <span class="token string">'./MarkdownPreview.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MarkdownEditor</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>postContent<span class="token punctuation">,</span> setPostContent<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'_Hello,_ **Markdown**!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token maybe-class-name">Enter</span> some markdown<span class="token operator">:</span>
        <span class="token operator">&#x3C;</span>textarea
          value<span class="token operator">=</span><span class="token punctuation">{</span>postContent<span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setPostContent</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MarkdownPreview</span> markdown<span class="token operator">=</span><span class="token punctuation">{</span>postContent<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Remarkable</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'remarkable'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> md <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Remarkable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MarkdownPreview</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> markdown <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> renderedHTML <span class="token operator">=</span> md<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span>markdown<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>div dangerouslySetInnerHTML<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">__html</span><span class="token operator">:</span> renderedHTML<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"react"</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token property">"react-dom"</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token property">"react-scripts"</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token property">"remarkable"</span><span class="token operator">:</span> <span class="token string">"2.0.1"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"react-scripts start"</span><span class="token punctuation">,</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"react-scripts build"</span><span class="token punctuation">,</span>
    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"react-scripts test --env=jsdom"</span><span class="token punctuation">,</span>
    <span class="token property">"eject"</span><span class="token operator">:</span> <span class="token string">"react-scripts eject"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">textarea</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><pitfall><p><strong><code>onChange</code> を指定せずに <code>value</code> を渡すと、テキストエリアに入力することができなくなります</strong>。テキストエリアに <code>value</code> を渡して制御を行うと、渡した値でテキストエリアを<em>強制的に固定</em>することになります。したがって、state 変数を <code>value</code> として渡しても、<code>onChange</code> イベントハンドラ内でその state 変数を同期的に更新するのを忘れた場合、React はテキストエリアを、キーストローク毎に指定した <code>value</code> に戻してしまいます。</p></pitfall></section></section><section class="level2"aria-labelledby="トラブルシューティング-troubleshooting"><h2 id="トラブルシューティング-troubleshooting">トラブルシューティング {/<em>troubleshooting</em>/}</h2><section class="level3"aria-labelledby="テキストエリアにタイプしても内容が更新されない-my-text-area-doesnt-update-when-i-type-into-it"><h3 id="テキストエリアにタイプしても内容が更新されない-my-text-area-doesnt-update-when-i-type-into-it">テキストエリアにタイプしても内容が更新されない {/<em>my-text-area-doesnt-update-when-i-type-into-it</em>/}</h3><p><code>value</code> があるが <code>onChange</code> のないテキストエリアをレンダーすると、コンソールにエラーが表示されます。<pre class="language-js"><code class="language-js"><span class="token comment">// 🔴 Bug: controlled text area with no onChange handler</span>
<span class="token operator">&#x3C;</span>textarea value<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><consoleblock level="error"><p>You provided a <code>value</code> prop to a form field without an <code>onChange</code> handler. This will render a read-only field. If the field should be mutable use <code>defaultValue</code>. Otherwise, set either <code>onChange</code> or <code>readOnly</code>.</p></consoleblock><p>エラーメッセージが示すように、<a href="#providing-an-initial-value-for-a-text-area"><em>初期値</em>を指定したいだけの場合</a>は、代わりに <code>defaultValue</code> を渡すようにしてください。<pre class="language-js"><code class="language-js"><span class="token comment">// ✅ Good: uncontrolled text area with an initial value</span>
<span class="token operator">&#x3C;</span>textarea defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p><a href="#controlling-a-text-area-with-a-state-variable">state 変数でこのテキストエリアを制御したい場合</a>は、<code>onChange</code> ハンドラを指定してください。<pre class="language-js"><code class="language-js"><span class="token comment">// ✅ Good: controlled text area with onChange</span>
<span class="token operator">&#x3C;</span>textarea value<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setSomething</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p>値を意図的に読み取り専用にしたい場合は、エラーを抑制するために props として <code>readOnly</code> を追加してください。<pre class="language-js"><code class="language-js"><span class="token comment">// ✅ Good: readonly controlled text area without on change</span>
<span class="token operator">&#x3C;</span>textarea value<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> readOnly<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre></section><section class="level3"aria-labelledby="キーストロークごとにテキストエリアのカーソルが先頭に戻る-my-text-area-caret-jumps-to-the-beginning-on-every-keystroke"><h3 id="キーストロークごとにテキストエリアのカーソルが先頭に戻る-my-text-area-caret-jumps-to-the-beginning-on-every-keystroke">キーストロークごとにテキストエリアのカーソルが先頭に戻る {/<em>my-text-area-caret-jumps-to-the-beginning-on-every-keystroke</em>/}</h3><p>テキストエリアを<a href="#controlling-a-text-area-with-a-state-variable">制御する</a>場合、<code>onChange</code> 中でその state 変数を DOM からやってくるテキストエリアの値に更新する必要があります。<p>state を <code>e.target.value</code> 以外のものに更新することはできません。<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 🔴 Bug: updating an input to something other than e.target.value</span>
  <span class="token function">setFirstName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">.</span><span class="token method function property-access">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>また、非同期に更新することもできません。<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 🔴 Bug: updating an input asynchronously</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setFirstName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>コードを修正するには、state を <code>e.target.value</code> の値に同期的に更新します。<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ✅ Updating a controlled input to e.target.value synchronously</span>
  <span class="token function">setFirstName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>これで問題が解決しない場合、テキストエリアがキーストロークごとに DOM から削除・再追加されている可能性があります。これは、再レンダーごとに state を誤って<a href="/learn/preserving-and-resetting-state">リセット</a>している場合に起こります。例えば、テキストエリアまたはその親が常に異なる <code>key</code> 属性を受け取っている可能性や、コンポーネント定義をネストしている（これは React では許されておらず、「内側」のコンポーネントがレンダー時に再マウントさえることになります）可能性があります。</section><section class="level3"aria-labelledby="a-component-is-changing-an-uncontrolled-input-to-be-controlled-というエラーが発生する-im-getting-an-error-a-component-is-changing-an-uncontrolled-input-to-be-controlled"><h3 id="a-component-is-changing-an-uncontrolled-input-to-be-controlled-というエラーが発生する-im-getting-an-error-a-component-is-changing-an-uncontrolled-input-to-be-controlled">"A component is changing an uncontrolled input to be controlled" というエラーが発生する {/<em>im-getting-an-error-a-component-is-changing-an-uncontrolled-input-to-be-controlled</em>/}</h3><p>コンポーネントに <code>value</code> を渡す場合、そのライフサイクル全体を通じて文字列型でなければなりません。<p>最初に <code>value={undefined}</code> を渡しておき、後で <code>value="some string"</code> を渡すようなことはできません。なぜなら、React はあなたがコンポーネントを非制御コンポーネントと制御されたコンポーネントのどちらにしたいのか分からなくなるからです。制御されたコンポーネントは常に文字列の <code>value</code> を受け取るべきであり、<code>null</code> や <code>undefined</code> であってはいけません。<p>あなたの <code>value</code> が API や state 変数から来ている場合、それが <code>null</code> や <code>undefined</code> に初期化されているかもしれません。その場合、まず空の文字列（<code>''</code>）にセットするか、<code>value</code> が文字列であることを保証するために <code>value={someValue ?? ''}</code> を渡すようにしてください。 <span style="float:footnote"><a href="../../../index.html#toc">Go to TOC</a></span></section></section></inlinetoc></h1></section>