<!doctypehtml><html lang="pl"><meta charset="utf-8"><title>Test Renderer</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="test-renderer"class="level1"><h1>Test Renderer</h1><p><strong>Importowanie</strong><pre class="language-javascript"><code class="language-javascript"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">TestRenderer</span></span> <span class="token keyword module">from</span> <span class="token string">'react-test-renderer'</span><span class="token punctuation">;</span> <span class="token comment">// ES6</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">TestRenderer</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react-test-renderer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ES5 z zainstalowanym npm</span></code></pre><section id="overview"class="level2"><h2>Ogólne informacje</h2><p>Paczka ta udostępnia narzędzie, które renderuje komponenty reactowe do czysto javascriptowych obiektów, bez użycia drzewa DOM czy natywnego środowiska mobilnego.<p>Istotą tej paczki jest łatwość wygenerowania "migawki" (ang. <em>snapshot</em>) hierarchii widoków (podobnej do drzewa DOM), wyrenderowanej przez komponent z React DOM lub React Native bez pomocy przeglądarki czy <a href="https://github.com/tmpvar/jsdom">jsdom</a>.<p>Przykład:<pre class="language-javascript"><code class="language-javascript"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">TestRenderer</span></span> <span class="token keyword module">from</span> <span class="token string">'react-test-renderer'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Link</span></span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>a href<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span><span class="token property-access">page</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> testRenderer <span class="token operator">=</span> <span class="token maybe-class-name">TestRenderer</span><span class="token punctuation">.</span><span class="token method function property-access">create</span><span class="token punctuation">(</span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Link</span> page<span class="token operator">=</span><span class="token string">"https://www.facebook.com/"</span><span class="token operator">></span><span class="token maybe-class-name">Facebook</span><span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Link</span><span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>testRenderer<span class="token punctuation">.</span><span class="token method function property-access">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { type: 'a',</span>
<span class="token comment">//   props: { href: 'https://www.facebook.com/' },</span>
<span class="token comment">//   children: [ 'Facebook' ] }</span></code></pre><p>Przy pomocy funkcjonalności biblioteki Jest do generowania snapshotów można automatycznie zapisać do pliku kopię drzewa w formacie JSON, a w teście sprawdzać, czy się ono nie zmieniło <a href="https://jestjs.io/docs/en/snapshot-testing">(Więcej informacji na ten temat)</a>.<p>Zwrócone drzewo można również przeszukiwać w celu znalezienia konkretnych węzłów i sprawdzenia ich właściwości.<pre class="language-javascript"><code class="language-javascript"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">TestRenderer</span></span> <span class="token keyword module">from</span> <span class="token string">'react-test-renderer'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">SubComponent</span> foo<span class="token operator">=</span><span class="token string">"bar"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p className<span class="token operator">=</span><span class="token string">"my"</span><span class="token operator">></span><span class="token maybe-class-name">Cześć</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">SubComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>p className<span class="token operator">=</span><span class="token string">"sub"</span><span class="token operator">></span><span class="token maybe-class-name">Potomek</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> testRenderer <span class="token operator">=</span> <span class="token maybe-class-name">TestRenderer</span><span class="token punctuation">.</span><span class="token method function property-access">create</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyComponent</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> testInstance <span class="token operator">=</span> testRenderer<span class="token punctuation">.</span><span class="token property-access">root</span><span class="token punctuation">;</span>

<span class="token function">expect</span><span class="token punctuation">(</span>testInstance<span class="token punctuation">.</span><span class="token method function property-access">findByType</span><span class="token punctuation">(</span><span class="token maybe-class-name">SubComponent</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">foo</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span>testInstance<span class="token punctuation">.</span><span class="token method function property-access">findByProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">"sub"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Potomek'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><section id="testrenderer"class="level3"><h3>TestRenderer</h3><ul><li><a href="#testrenderercreate"><code>TestRenderer.create()</code></a><li><a href="#testrendereract"><code>TestRenderer.act()</code></a></ul></section><section id="testrenderer-instance"class="level3"><h3>Instancja TestRenderer</h3><ul><li><a href="#testrenderertojson"><code>testRenderer.toJSON()</code></a><li><a href="#testrenderertotree"><code>testRenderer.toTree()</code></a><li><a href="#testrendererupdate"><code>testRenderer.update()</code></a><li><a href="#testrendererunmount"><code>testRenderer.unmount()</code></a><li><a href="#testrenderergetinstance"><code>testRenderer.getInstance()</code></a><li><a href="#testrendererroot"><code>testRenderer.root</code></a></ul></section><section id="testinstance"class="level3"><h3>TestInstance</h3><ul><li><a href="#testinstancefind"><code>testInstance.find()</code></a><li><a href="#testinstancefindbytype"><code>testInstance.findByType()</code></a><li><a href="#testinstancefindbyprops"><code>testInstance.findByProps()</code></a><li><a href="#testinstancefindall"><code>testInstance.findAll()</code></a><li><a href="#testinstancefindallbytype"><code>testInstance.findAllByType()</code></a><li><a href="#testinstancefindallbyprops"><code>testInstance.findAllByProps()</code></a><li><a href="#testinstanceinstance"><code>testInstance.instance</code></a><li><a href="#testinstancetype"><code>testInstance.type</code></a><li><a href="#testinstanceprops"><code>testInstance.props</code></a><li><a href="#testinstanceparent"><code>testInstance.parent</code></a><li><a href="#testinstancechildren"><code>testInstance.children</code></a></ul></section></section><section id="reference"class="level2"><h2>Dokumentacja</h2><section id="testrenderercreate-testrenderercreate"class="level3"><h3><code>TestRenderer.create()</code> {#testrenderercreate}</h3><pre class="language-javascript"><code class="language-javascript"><span class="token maybe-class-name">TestRenderer</span><span class="token punctuation">.</span><span class="token method function property-access">create</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Tworzy instancję <code>TestRenderer</code> przy użyciu przekazanego elementu reactowego. Nie korzysta z prawdziwego drzewa DOM, lecz renderuje całe drzewo komponentów do pamięci, aby można było wykonać na nim asercje. Zwraca <a href="#testrenderer-instance">instancję TestRenderera</a>.</section><section id="testrendereract-testrendereract"class="level3"><h3><code>TestRenderer.act()</code> {#testrendereract}</h3><pre class="language-javascript"><code class="language-javascript"><span class="token maybe-class-name">TestRenderer</span><span class="token punctuation">.</span><span class="token method function property-access">act</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Podobnie jak <a href="./test-utils.html#act">funkcja pomocnicza <code>act()</code> z <code>react-dom/test-utils</code></a>, <code>TestRenderer.act</code> przygotowuje komponent do późniejszych asercji. Używaj tej wersji funkcji <code>act()</code> do opakowania wywołań <code>TestRenderer.create</code> i <code>testRenderer.update</code>.<pre class="language-javascript"><code class="language-javascript"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>create<span class="token punctuation">,</span> act<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-test-renderer'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">App</span></span> <span class="token keyword module">from</span> <span class="token string">'./app.js'</span><span class="token punctuation">;</span> <span class="token comment">// Testowany komponent</span>

<span class="token comment">// wyrenderuj komponent</span>
<span class="token keyword">let</span> root<span class="token punctuation">;</span> 
<span class="token function">act</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  root <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">App</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// wykonaj sprawdzenia na korzeniu drzewa</span>
<span class="token function">expect</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span><span class="token method function property-access">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// zaktualizuj komponent przy użyciu innych właściwości</span>
<span class="token function">act</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  root<span class="token punctuation">.</span><span class="token method function property-access">update</span><span class="token punctuation">(</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">App</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// wykonaj sprawdzenia na korzeniu drzewa</span>
<span class="token function">expect</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span><span class="token method function property-access">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="testrenderertojson-testrenderertojson"class="level3"><h3><code>testRenderer.toJSON()</code> {#testrenderertojson}</h3><pre class="language-javascript"><code class="language-javascript">testRenderer<span class="token punctuation">.</span><span class="token method function property-access">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>Zwraca obiekt reprezentujący wyrenderowane drzewo. W drzewie znajdą się wyłącznie węzły specyficzne dla platformy, np. <code>&#x3C;div></code> lub <code>&#x3C;View></code>, wraz ze swoimi właściwościami. Nie zostaną wyrenderowane natomiast żadne niestandardowe komponenty użytkownika. Funkcja przydaje się przy <a href="https://facebook.github.io/jest/docs/en/snapshot-testing.html#snapshot-testing-with-jest">testowaniu za pomocą snapshotów</a>.</section><section id="testrenderertotree-testrenderertotree"class="level3"><h3><code>testRenderer.toTree()</code> {#testrenderertotree}</h3><pre class="language-javascript"><code class="language-javascript">testRenderer<span class="token punctuation">.</span><span class="token method function property-access">toTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>Zwraca obiekt reprezentujący wyrenderowane drzewo. W przeciwieństwie do <code>toJSON()</code>, ta reprezentacja jest bardziej szczegółowa i zawiera również niestandardowe komponenty użytkownika. Prawdopodobnie ta funkcja nigdy ci się nie przyda, chyba że piszesz w oparciu o tę paczkę własną bibliotekę do testów.</section><section id="testrendererupdate-testrendererupdate"class="level3"><h3><code>testRenderer.update()</code> {#testrendererupdate}</h3><pre class="language-javascript"><code class="language-javascript">testRenderer<span class="token punctuation">.</span><span class="token method function property-access">update</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span></code></pre><p>Przy użyciu nowego elementu głównego ponownie renderuje drzewo przechowywane w pamięci. Symuluje aktualizację przeprowadzaną przez Reacta na korzeniu drzewa. Jeśli nowy element ma ten sam typ i klucz, co poprzedni, drzewo zostanie zaktualizowane; w przeciwnym wypadku drzewo zostanie odmontowane i zamontowane ponownie.</section><section id="testrendererunmount-testrendererunmount"class="level3"><h3><code>testRenderer.unmount()</code> {#testrendererunmount}</h3><pre class="language-javascript"><code class="language-javascript">testRenderer<span class="token punctuation">.</span><span class="token method function property-access">unmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>Odmontowuje drzewo przechowywane w pamięci, wywołując odpowiednie zdarzenia z cyklu życia komponentów.</section><section id="testrenderergetinstance-testrenderergetinstance"class="level3"><h3><code>testRenderer.getInstance()</code> {#testrenderergetinstance}</h3><pre class="language-javascript"><code class="language-javascript">testRenderer<span class="token punctuation">.</span><span class="token method function property-access">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>Zwraca instancję korzenia drzewa, jeśli takowy istnieje. Nie zadziała, jeśli komponent główny jest funkcją, ponieważ funkcje nie mają własnych instancji.</section><section id="testrendererroot-testrendererroot"class="level3"><h3><code>testRenderer.root</code> {#testrendererroot}</h3><pre class="language-javascript"><code class="language-javascript">testRenderer<span class="token punctuation">.</span><span class="token property-access">root</span></code></pre><p>Zwraca "instancję testową" korzenia drzewa. Przydatne do wykonywania asercji na poszczególnych węzłach drzewa, a także do wyszukiwania innych "instancji testowych" w poddrzewach.</section><section id="testinstancefind-testinstancefind"class="level3"><h3><code>testInstance.find()</code> {#testinstancefind}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token method function property-access">find</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span></code></pre><p>Wyszukuje w poddrzewie dokładnie jedną instancję testową, dla której wywołanie <code>test(testInstance)</code> zwróci <code>true</code>. Jeśli funkcja <code>test(testInstance)</code> nie zwróci <code>true</code> dla dokładnie jednej instancji, rzucony zostanie wyjątek.</section><section id="testinstancefindbytype-testinstancefindbytype"class="level3"><h3><code>testInstance.findByType()</code> {#testinstancefindbytype}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token method function property-access">findByType</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span></code></pre><p>Wyszukuje w poddrzewie dokładnie jedną instancję testową o podanym typie <code>type</code>. Jeśli funkcja znajdzie inną liczbę instancji, rzucony zostanie wyjątek.</section><section id="testinstancefindbyprops-testinstancefindbyprops"class="level3"><h3><code>testInstance.findByProps()</code> {#testinstancefindbyprops}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token method function property-access">findByProps</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span></code></pre><p>Wyszukuje w poddrzewie dokładnie jedną instancję testową o podanych właściwościach <code>props</code>. Jeśli funkcja znajdzie inną liczbę instancji, rzucony zostanie wyjątek.</section><section id="testinstancefindall-testinstancefindall"class="level3"><h3><code>testInstance.findAll()</code> {#testinstancefindall}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token method function property-access">findAll</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span></code></pre><p>Wyszukuje w poddrzewie wszystkie instancje testowe, dla których funkcja <code>test(testInstance)</code> zwraca <code>true</code>.</section><section id="testinstancefindallbytype-testinstancefindallbytype"class="level3"><h3><code>testInstance.findAllByType()</code> {#testinstancefindallbytype}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token method function property-access">findAllByType</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span></code></pre><p>Wyszukuje w poddrzewie wszystkie instancje testowe o podanym typie <code>type</code>.</section><section id="testinstancefindallbyprops-testinstancefindallbyprops"class="level3"><h3><code>testInstance.findAllByProps()</code> {#testinstancefindallbyprops}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token method function property-access">findAllByProps</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span></code></pre><p>Wyszukuje w poddrzewie wszystkie instancje testowe o podanych właściwościach <code>props</code>.</section><section id="testinstanceinstance-testinstanceinstance"class="level3"><h3><code>testInstance.instance</code> {#testinstanceinstance}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token property-access">instance</span></code></pre><p>Zwraca instancję komponentu powiązanego z daną instancją testową. Działa tylko dla komponentów klasowych, ponieważ funkcyjne nie mają instancji. Wynik jest referencją odpowiadającą <code>this</code> w danym komponencie.</section><section id="testinstancetype-testinstancetype"class="level3"><h3><code>testInstance.type</code> {#testinstancetype}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token property-access">type</span></code></pre><p>Zwraca typ komponentu powiązanego z daną instancją testową. Przykładowo, typem komponentu <code>&#x3C;Button /></code> jest <code>Button</code>.</section><section id="testinstanceprops-testinstanceprops"class="level3"><h3><code>testInstance.props</code> {#testinstanceprops}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token property-access">props</span></code></pre><p>Zwraca atrybuty powiązane z daną instancją testową. Przykładowo, właściwościami komponentu <code>&#x3C;Button size="small" /></code> są: <code>{size: 'small'}</code>.</section><section id="testinstanceparent-testinstanceparent"class="level3"><h3><code>testInstance.parent</code> {#testinstanceparent}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token property-access">parent</span></code></pre><p>Zwraca instancję rodzica dla danej instancji testowej.</section><section id="testinstancechildren-testinstancechildren"class="level3"><h3><code>testInstance.children</code> {#testinstancechildren}</h3><pre class="language-javascript"><code class="language-javascript">testInstance<span class="token punctuation">.</span><span class="token property-access">children</span></code></pre><p>Zwraca instancje potomków dla danej "instancji testowej".</section></section><section id="ideas"class="level2"><h2>Pomysły</h2><p>Do metody <code>TestRenderer.create</code> jako argument można przekazać funkcję <code>createNodeMock</code>, która pozwala na tworzenie własnych atrap referencji (ang. <em>mock refs</em>). <code>createNodeMock</code> jako argument przyjmuje element, a zwraca obiekt będący atrapą referencji. Przydaje się to w testach komponentów, które korzystają z referencji (ang. <em>refs</em>) do innych komponentów.<pre class="language-javascript"><code class="language-javascript"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">TestRenderer</span></span> <span class="token keyword module">from</span> <span class="token string">'react-test-renderer'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">input</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">input</span><span class="token punctuation">.</span><span class="token method function property-access">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">el</span> <span class="token arrow operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">input</span> <span class="token operator">=</span> el<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> focused <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">TestRenderer</span><span class="token punctuation">.</span><span class="token method function property-access">create</span><span class="token punctuation">(</span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyComponent</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token function-variable function">createNodeMock</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">===</span> <span class="token string">'input'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// atrapa funkcji "focus"</span>
        <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
          <span class="token function-variable function">focus</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
            focused <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword control-flow">return</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span>focused<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><span style="float:footnote"><a href="./index.html#toc">Go to TOC</a></span></section></section>