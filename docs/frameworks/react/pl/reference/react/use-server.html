<!doctype html><html lang="pl"><meta charset="utf-8"><title>"'use server'"</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="use-server"><h1 id="use-server">"'use server'"</h1><p>canary: true</p><canary><p><code>'use server'</code> is needed only if you're <a href="/learn/start-a-new-react-project#bleeding-edge-react-frameworks">using React Server Components</a> or building a library compatible with them.</p></canary><intro><p><code>'use server'</code> marks server-side functions that can be called from client-side code.</p></intro><inlinetoc><section class="level2"aria-labelledby="reference-reference"><h2 id="reference-reference">Reference {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="use-server-use-server"><h3 id="use-server-use-server"><code>'use server'</code> {/<em>use-server</em>/}</h3><p>Add <code>'use server';</code> at the very top of an async function to mark that the function can be executed by the client.<pre class="language-js"><code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">addToCart</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">'use server'</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// &#x3C;ProductDetailPage addToCart={addToCart} /></span></code></pre><p>This function can be passed to the client. When called on the client, it will make a network request to the server that includes a serialized copy of any arguments passed. If the server function returns a value, that value will be serialized and returned to the client.<p>Alternatively, add <code>'use server';</code> at the very top of a file to mark all exports within that file as async server functions that can be used anywhere, including imported in client component files.<section class="level4"aria-labelledby="caveats-caveats"><h4 id="caveats-caveats">Caveats {/<em>caveats</em>/}</h4><ul><li>Remember that parameters to functions marked with <code>'use server'</code> are fully client-controlled. For security, always treat them as untrusted input, making sure to validate and escape the arguments as appropriate.<li>To avoid the confusion that might result from mixing client- and server-side code in the same file, <code>'use server'</code> can only be used in server-side files; the resulting functions can be passed to client components through props.<li>Because the underlying network calls are always asynchronous, <code>'use server'</code> can be used only on async functions.<li>Directives like <code>'use server'</code> must be at the very beginning of their function or file, above any other code including imports (comments above directives are OK). They must be written with single or double quotes, not backticks. (The <code>'use xyz'</code> directive format somewhat resembles the <code>useXyz()</code> Hook naming convention, but the similarity is coincidental.)</ul></section></section></section><section class="level2"aria-labelledby="usage-usage"><h2 id="usage-usage">Usage {/<em>usage</em>/}</h2><wip>This section is a work in progress.<p>This API can be used in any framework that supports React Server Components. You may find additional documentation from them.<ul><li><a href="https://nextjs.org/docs/getting-started/react-essentials">Next.js documentation</a><li>More coming soon <span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></ul></wip></section></inlinetoc></section>