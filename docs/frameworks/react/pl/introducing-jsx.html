<!doctypehtml><html lang="pl"><meta charset="utf-8"><title>Wprowadzenie do JSX</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css"><section id="wprowadzenie-do-jsx"class="level1"><h1>Wprowadzenie do JSX</h1><p>Weźmy na warsztat poniższą instrukcję przypisania:<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Witaj</span><span class="token punctuation">,</span> świecie<span class="token operator">!</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>Nieco zaskakującą może się tutaj wydawać przypisywana wartość, która nie jest ani typowym łańcuchem znaków, ani HTML-em.<p>Taką składnię nazywamy JSX i jest to rozszerzenie składni JavaScriptu o możliwość wstawiania znaczników. Zalecamy używanie jej wraz z Reactem do opisywania, jak powinien wyglądać interfejs graficzny strony. JSX może przypominać język oparty o szablony, jednakże daje on do dyspozycji pełnię możliwości JavaScriptu.<p>JSX jest tłumaczony jeden do jednego na reactowe "elementy". Sposoby ich wyświetlania na stronie poznamy w <a href="./rendering-elements.html">następnym rozdziale</a>. Poniżej znajdziesz podstawy składni JSX, które pozwolą ci szybko zacząć tworzyć kod.<section id="why-jsx"class="level3"><h3>Dlaczego JSX?</h3><p>React przyjmuje ideę, że logika związana z prezentacją danych jest z natury rzeczy powiązana z innymi elementami logiki biznesowej UI: sposobami przetwarzania zdarzeń w aplikacji, tym, jak stan aplikacji zmienia się w czasie, jak również tym, jak dane są przygotowywane do wyświetlenia.<p>Zamiast sztucznie rozdzielać <em>technologie</em>, umiejscawiając znaczniki oraz logikę aplikacji w osobnych plikach, React wprowadza <a href="https://pl.wikipedia.org/wiki/Zasada_jednej_odpowiedzialno%C5%9Bci">podział odpowiedzialności</a> poprzez wprowadzenie luźno powiązanych jednostek, nazywanych "komponentami", które zawierają zarówno znaczniki HTML, jak i związaną z nimi logikę.<p>React <a href="./react-without-jsx.html">nie wymaga</a> używania JSX, jednakże większość programistów uważa go za przydatne narzędzie, unaoczniające to, co dzieje się w kodzie javascriptowym operującym na interfejsach graficznych. Pomaga on również Reactowi wyświetlać bardziej użyteczne informacje o błędach i ostrzeżenia.<p>Pora sprawdzić, jak to działa - do dzieła!</section><section id="embedding-expressions-in-jsx"class="level3"><h3>Osadzanie wyrażeń w JSX</h3><p>W poniższym przykładzie deklarujemy zmienną <code>name</code>, a następnie używamy jej wewnątrz JSX, po prostu otaczając ją nawiasami klamrowymi:<pre class="language-js{1,2}"><code class="language-js{1,2}">const name = 'Grzegorz';
const element = &#x3C;h1>Witaj, {name}&#x3C;/h1>;</code></pre><p>Zauważ, że dowolne <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators#Expressions">wyrażenie JavaScriptowe</a> możesz osadzić w JSX poprzez otoczenie go klamrami. Przykładowo, możesz użyć <code>2 + 2</code>, <code>user.firstName</code> czy <code>formatName(user)</code>, jako że są to prawidłowe wyrażenia w języku JavaScript.<p>W poniższym przykładzie umiejscawiamy wynik wywołania funkcji javascriptowej <code>formatName(user)</code> wewnątrz znacznika <code>&#x3C;h1></code>:<pre class="language-js{12}"><code class="language-js{12}">function formatName(user) {
  return user.firstName + ' ' + user.lastName;
}

const user = {
  firstName: 'Grzegorz',
  lastName: 'Brzęczyszczykiewicz',
};

const element = (
  &#x3C;h1>
    Witaj, {formatName(user)}!
  &#x3C;/h1>
);</code></pre><p><strong><a href="https://codepen.io/gaearon/pen/PGEjdG?editors=1010">Przetestuj kod na CodePen</a></strong><p>Dla czytelności podzieliliśmy kod JSX na kilka linii. Nie jest to wprawdzie wymagane, ale polecamy również otaczanie go w nawiasy. Pozwoli to uniknąć pułapek związanych z <a href="http://stackoverflow.com/q/2846283">automatycznym wstawianiem średników</a> w JavaScripcie.</section><section id="jsx-is-an-expression-too"class="level3"><h3>JSX również jest wyrażeniem</h3><p>Po kompilacji, wyrażenia JSX-owe stają się zwykłymi wywołaniami funkcji w JavaScripcie i są ewaluowane do obiektów javascriptowych.<p>Oznacza to, że możesz używać znaczników JSX również wewnątrz instrukcji warunkowych <code>if</code>, pętli <code>for</code>, przypisywać je do zmiennych, oczekiwać przekazania jako argumenty do funkcji, zwracać z funkcji i w wielu innych miejscach.<pre class="language-js{3,5}"><code class="language-js{3,5}">function getGreeting(user) {
  if (user) {
    return &#x3C;h1>Witaj, {formatName(user)}!&#x3C;/h1>;
  }
  return &#x3C;h1>Witaj, nieznajomy.&#x3C;/h1>;
}</code></pre></section><section id="specifying-attributes-with-jsx"class="level3"><h3>Podawanie atrybutów w JSX</h3><p>Możesz przekazać literał znakowy jako atrybut, używając poniższej składni:<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&#x3C;</span>a href<span class="token operator">=</span><span class="token string">"https://www.reactjs.org"</span><span class="token operator">></span> link <span class="token operator">&#x3C;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>Możesz także przypisać wartość dowolnego wyrażenia javascriptowego do atrybutu, używając nawiasów klamrowych:<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&#x3C;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">avatarUrl</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&#x3C;</span><span class="token operator">/</span>img<span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>Nie otaczaj jednak klamer cudzysłowami, gdy chcesz przekazać wartość jakiegoś wyrażenia do atrybutu. Zalecamy użycie albo cudzysłowów (dla statycznych ciągów znaków), albo klamer (dla wartości wyrażeń), ale nie obydwu naraz (dla tego samego atrybutu).<blockquote><p><strong>Uwaga:</strong><p>Jako że składni JSX jest bliżej do JavaScriptu niż do HTML-a, React DOM do nazywania argumentów używa notacji <code>camelCase</code> zamiast nazw atrybutów HTML-owych.<p>Przykładowo, w JSX <code>class</code> staje się <a href="https://developer.mozilla.org/pl/docs/Web/API/Element/className"><code>className</code></a>, zaś zamiast <code>tabindex</code> używamy <code>tabIndex</code>.</blockquote></section><section id="specifying-children-with-jsx"class="level3"><h3>Specyfikowanie elementów potomnych w JSX</h3><p>Jeśli znacznik jest pusty, możesz zakończyć go bezpośrednio przy pomocy <code>/></code>, podobnie jak ma to miejsce w XML-u:<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&#x3C;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">avatarUrl</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>Znaczniki JSX mogą jednak również zawierać elementy potomne:<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
    <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Witaj</span><span class="token operator">!</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
    <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token maybe-class-name">Dobrze</span> cię widzieć<span class="token punctuation">.</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="jsx-prevents-injection-attacks"class="level3"><h3>JSX jest odporny na ataki przez wstrzyknięcie kodu</h3><p>W JSX można bezpiecznie osadzać dane wprowadzone przez użytkownika:<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> title <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token property-access">potencjalnieZlosliweDane</span><span class="token punctuation">;</span>
<span class="token comment">// To jest bezpieczne:</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>Domyślnie, React DOM stosuje <a href="https://pl.wikipedia.org/wiki/Znak_modyfikacji">znaki ucieczki</a> w wartościach używanych w JSX, zanim je wyświetli. W ten sposób upewniamy się, że nic, co nie zostało bezpośrednio napisane w kodzie twojej aplikacji, nie zostanie wstrzyknięte w kod strony. Wszystko, co wyświetlamy, zamieniane jest na statyczne łańcuchy znaków. Pozwala to uniknąć ataków typu <a href="https://pl.wikipedia.org/wiki/Cross-site_scripting">XSS (Cross-site scripting)</a>.</section><section id="jsx-represents-objects"class="level3"><h3>JSX reprezentuje obiekty</h3><p>Zanim twój kod JSX będzie mógł zostać wyświetlony w przeglądarce, musi zostać odpowiednio przetworzony przez narzędzie takie jak <em>Babel</em>. Babel transpiluje znaczniki JSX do wywołań funkcji <code>React.createElement</code>.<p>Poniższe dwa fragmenty kodu są sobie równoważne:<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token operator">&#x3C;</span>h1 className<span class="token operator">=</span><span class="token string">"greeting"</span><span class="token operator">></span>
    <span class="token maybe-class-name">Witaj</span><span class="token punctuation">,</span> świecie<span class="token operator">!</span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span>
  <span class="token string">'h1'</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">'greeting'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'Witaj, świecie!'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Funkcja <code>React.createElement</code> wykonuje kilka sprawdzeń, które ułatwiają pisanie kodu wolnego od błędów. W swej istocie jednak, zwraca ona po prostu obiekt podobny do poniższego:<pre class="language-js"><code class="language-js"><span class="token comment">// Note: this structure is simplified</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'h1'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">'greeting'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token string">'Witaj, świecie'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Takie obiekty nazywamy "<em>elementami reactowymi</em>". Możesz o nich myśleć jak o sposobie opisania tego, co znajdzie się na ekranie. <code>ReactDOM</code> odczytuje te obiekty i używa ich do skonstruowania drzewa DOM twojej strony, jak również do późniejszego odświeżania go.<p>Więcej o wyświetlaniu elementów reactowych dowiesz się w <a href="./rendering-elements.html">następnym rozdziale</a>.<blockquote><p><strong>Wskazówka:</strong><p>Polecamy używanie <a href="https://babeljs.io/docs/en/next/editors">"Babela" jako definicji języka</a> w twoim ulubionym edytorze. Pozwoli to na poprawne podświetlanie składni ES6 i JSX. <span style="float:footnote"><a href="./index.html#toc">Go to TOC</a></span></blockquote></section></section>