<!doctype html><html lang="de"><meta charset="utf-8"><title>"'use client'"</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="use-client"><h1 id="use-client">"'use client'"</h1><p>titleForTitleTag: "'use client' directive" canary: true</p><canary><p><code>'use client'</code> is needed only if you're <a href="/learn/start-a-new-react-project#bleeding-edge-react-frameworks">using React Server Components</a> or building a library compatible with them.</p><intro><p><code>'use client'</code> lets you mark what code runs on the client.</p></intro><inlinetoc><section class="level2"aria-labelledby="reference-reference"><h2 id="reference-reference">Reference {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="use-client-use-client"><h3 id="use-client-use-client"><code>'use client'</code> {/<em>use-client</em>/}</h3><p>Add <code>'use client'</code> at the top of a file to mark the module and its transitive dependencies as client code.<pre class="language-js"><code class="language-js"><span class="token string">'use client'</span><span class="token punctuation">;</span>

<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> formatDate <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./formatters'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">Button</span></span> <span class="token keyword module">from</span> <span class="token string">'./button'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">RichTextEditor</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> timestamp<span class="token punctuation">,</span> text <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token function">formatDate</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">const</span> editButton <span class="token operator">=</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Button</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p>When a file marked with <code>'use client'</code> is imported from a Server Component, <a href="/learn/start-a-new-react-project#bleeding-edge-react-frameworks">compatible bundlers</a> will treat the module import as a boundary between server-run and client-run code.<p>As dependencies of <code>RichTextEditor</code>, <code>formatDate</code> and <code>Button</code> will also be evaluated on the client regardless of whether their modules contain a <code>'use client'</code> directive. Note that a single module may be evaluated on the server when imported from server code and on the client when imported from client code.<section class="level4"aria-labelledby="caveats-caveats"><h4 id="caveats-caveats">Caveats {/<em>caveats</em>/}</h4><ul><li><code>'use client'</code> must be at the very beginning of a file, above any imports or other code (comments are OK). They must be written with single or double quotes, but not backticks.<li>When a <code>'use client'</code> module is imported from another client-rendered module, the directive has no effect.<li>When a component module contains a <code>'use client'</code> directive, any usage of that component is guaranteed to be a Client Component. However, a component can still be evaluated on the client even if it does not have a <code>'use client'</code> directive.<ul><li>A component usage is considered a Client Component if it is defined in module with <code>'use client'</code> directive or when it is a transitive dependency of a module that contains a <code>'use client'</code> directive. Otherwise, it is a Server Component.</ul><li>Code that is marked for client evaluation is not limited to components. All code that is a part of the Client module sub-tree is sent to and run by the client.<li>When a server evaluated module imports values from a <code>'use client'</code> module, the values must either be a React component or <a href="#passing-props-from-server-to-client-components">supported serializable prop values</a> to be passed to a Client Component. Any other use case will throw an exception.</ul></section></section><section class="level3"aria-labelledby="how-use-client-marks-client-code-how-use-client-marks-client-code"><h3 id="how-use-client-marks-client-code-how-use-client-marks-client-code">How <code>'use client'</code> marks client code {/<em>how-use-client-marks-client-code</em>/}</h3><p>In a React app, components are often split into separate files, or <a href="/learn/importing-and-exporting-components#exporting-and-importing-a-component">modules</a>.<p>For apps that use React Server Components, the app is server-rendered by default. <code>'use client'</code> introduces a server-client boundary in the <a href="/learn/understanding-your-ui-as-a-tree#the-module-dependency-tree">module dependency tree</a>, effectively creating a subtree of Client modules.<p>To better illustrate this, consider the following React Server Components app.</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">FancyText</span></span> <span class="token keyword module">from</span> <span class="token string">'./FancyText'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">InspirationGenerator</span></span> <span class="token keyword module">from</span> <span class="token string">'./InspirationGenerator'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">Copyright</span></span> <span class="token keyword module">from</span> <span class="token string">'./Copyright'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">FancyText</span> title text<span class="token operator">=</span><span class="token string">"Get Inspired App"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">InspirationGenerator</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Copyright</span> year<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">2004</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">InspirationGenerator</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">FancyText</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>title<span class="token punctuation">,</span> text<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> title
    <span class="token operator">?</span> <span class="token operator">&#x3C;</span>h1 className<span class="token operator">=</span><span class="token string">'fancy title'</span><span class="token operator">></span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
    <span class="token operator">:</span> <span class="token operator">&#x3C;</span>h3 className<span class="token operator">=</span><span class="token string">'fancy cursive'</span><span class="token operator">></span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h3<span class="token operator">></span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token string">'use client'</span><span class="token punctuation">;</span>

<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports">inspirations</span> <span class="token keyword module">from</span> <span class="token string">'./inspirations'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">FancyText</span></span> <span class="token keyword module">from</span> <span class="token string">'./FancyText'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">InspirationGenerator</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>index<span class="token punctuation">,</span> setIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> quote <span class="token operator">=</span> inspirations<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">next</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> inspirations<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Your</span> inspirational quote is<span class="token operator">:</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">FancyText</span> text<span class="token operator">=</span><span class="token punctuation">{</span>quote<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>next<span class="token punctuation">}</span><span class="token operator">></span><span class="token maybe-class-name">Inspire</span> me again<span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Copyright</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>year<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>p className<span class="token operator">=</span><span class="token string">'small'</span><span class="token operator">></span>©️ <span class="token punctuation">{</span>year<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">[</span>
  <span class="token string">"Don’t let yesterday take up too much of today.” — Will Rogers"</span><span class="token punctuation">,</span>
  <span class="token string">"Ambition is putting a ladder against the sky."</span><span class="token punctuation">,</span>
  <span class="token string">"A joy that's shared is a joy made double."</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector"><span class="token class">.fancy</span></span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Georgia'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.title</span></span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode color">#007AA3</span><span class="token punctuation">;</span>
  <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.cursive</span></span> <span class="token punctuation">{</span>
  <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.small</span></span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>In the module dependency tree of this example app, the <code>'use client'</code> directive in <code>InspirationGenerator.js</code> marks that module and all of its transitive dependencies as Client modules. The subtree starting at <code>InspirationGenerator.js</code> is now marked as Client modules.</p><diagram name="use_client_module_dependency"height="{250}"width="{545}"alt="A tree graph with the top node representing the module &#x27;App.js&#x27;. &#x27;App.js&#x27; has three children: &#x27;Copyright.js&#x27;, &#x27;FancyText.js&#x27;, and &#x27;InspirationGenerator.js&#x27;. &#x27;InspirationGenerator.js&#x27; has two children: &#x27;FancyText.js&#x27; and &#x27;inspirations.js&#x27;. The nodes under and including &#x27;InspirationGenerator.js&#x27; have a yellow background color to signify that this sub-graph is client-rendered due to the &#x27;use client&#x27; directive in &#x27;InspirationGenerator.js&#x27;.">`'use client'` segments the module dependency tree of the React Server Components app, marking `InspirationGenerator.js` and all of its dependencies as client-rendered.</diagram><p>During render, the framework will server-render the root component and continue through the <a href="/learn/understanding-your-ui-as-a-tree#the-render-tree">render tree</a>, opting-out of evaluating any code imported from client-marked code.<p>The server-rendered portion of the render tree is then sent to the client. The client, with its client code downloaded, then completes rendering the rest of the tree.</p><diagram name="use_client_render_tree"height="{250}"width="{500}"alt="A tree graph where each node represents a component and its children as child components. The top-level node is labelled &#x27;App&#x27; and it has two child components &#x27;InspirationGenerator&#x27; and &#x27;FancyText&#x27;. &#x27;InspirationGenerator&#x27; has two child components, &#x27;FancyText&#x27; and &#x27;Copyright&#x27;. Both &#x27;InspirationGenerator&#x27; and its child component &#x27;FancyText&#x27; are marked to be client-rendered.">The render tree for the React Server Components app. `InspirationGenerator` and its child component `FancyText` are components exported from client-marked code and considered Client Components.</diagram><p>We introduce the following definitions:<ul><li><strong>Client Components</strong> are components in a render tree that are rendered on the client.<li><strong>Server Components</strong> are components in a render tree that are rendered on the server.</ul><p>Working through the example app, <code>App</code>, <code>FancyText</code> and <code>Copyright</code> are all server-rendered and considered Server Components. As <code>InspirationGenerator.js</code> and its transitive dependencies are marked as client code, the component <code>InspirationGenerator</code> and its child component <code>FancyText</code> are Client Components.</p><deepdive>#### How is `FancyText` both a Server and a Client Component? {/*how-is-fancytext-both-a-server-and-a-client-component*/}<p>By the above definitions, the component <code>FancyText</code> is both a Server and Client Component, how can that be?<p>First, let's clarify that the term "component" is not very precise. Here are just two ways "component" can be understood:<ol><li>A "component" can refer to a <strong>component definition</strong>. In most cases this will be a function.</ol><pre class="language-js"><code class="language-js"><span class="token comment">// This is a definition of a component</span>
<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">My</span> <span class="token maybe-class-name">Component</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
<span class="token punctuation">}</span></code></pre><ol start="2"><li>A "component" can also refer to a <strong>component usage</strong> of its definition.</ol><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">MyComponent</span></span> <span class="token keyword module">from</span> <span class="token string">'./MyComponent'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// This is a usage of a component</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyComponent</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Often, the imprecision is not important when explaining concepts, but in this case it is.<p>When we talk about Server or Client Components, we are referring to component usages.<ul><li>If the component is defined in a module with a <code>'use client'</code> directive, or the component is imported and called in a Client Component, then the component usage is a Client Component.<li>Otherwise, the component usage is a Server Component.</ul><p><diagram name="use_client_render_tree"height="{150}"width="{450}"alt="A tree graph where each node represents a component and its children as child components. The top-level node is labelled &#x27;App&#x27; and it has two child components &#x27;InspirationGenerator&#x27; and &#x27;FancyText&#x27;. &#x27;InspirationGenerator&#x27; has two child components, &#x27;FancyText&#x27; and &#x27;Copyright&#x27;. Both &#x27;InspirationGenerator&#x27; and its child component &#x27;FancyText&#x27; are marked to be client-rendered.">A render tree illustrates component usages.</diagram><p>Back to the question of <code>FancyText</code>, we see that the component definition does <em>not</em> have a <code>'use client'</code> directive and it has two usages.<p>The usage of <code>FancyText</code> as a child of <code>App</code>, marks that usage as a Server Component. When <code>FancyText</code> is imported and called under <code>InspirationGenerator</code>, that usage of <code>FancyText</code> is a Client Component as <code>InspirationGenerator</code> contains a <code>'use client'</code> directive.<p>This means that the component definition for <code>FancyText</code> will both be evaluated on the server and also downloaded by the client to render its Client Component usage.</p></deepdive><deepdive><section class="level4"aria-labelledby="why-is-copyright-a-server-component-why-is-copyright-a-server-component"><h4 id="why-is-copyright-a-server-component-why-is-copyright-a-server-component">Why is <code>Copyright</code> a Server Component? {/<em>why-is-copyright-a-server-component</em>/}</h4><p>Because <code>Copyright</code> is rendered as a child of the Client Component <code>InspirationGenerator</code>, you might be surprised that it is a Server Component.<p>Recall that <code>'use client'</code> defines the boundary between server and client code on the <em>module dependency tree</em>, not the render tree.</p><diagram name="use_client_module_dependency"height="{200}"width="{500}"alt="A tree graph with the top node representing the module &#x27;App.js&#x27;. &#x27;App.js&#x27; has three children: &#x27;Copyright.js&#x27;, &#x27;FancyText.js&#x27;, and &#x27;InspirationGenerator.js&#x27;. &#x27;InspirationGenerator.js&#x27; has two children: &#x27;FancyText.js&#x27; and &#x27;inspirations.js&#x27;. The nodes under and including &#x27;InspirationGenerator.js&#x27; have a yellow background color to signify that this sub-graph is client-rendered due to the &#x27;use client&#x27; directive in &#x27;InspirationGenerator.js&#x27;.">`'use client'` defines the boundary between server and client code on the module dependency tree.</diagram><p>In the module dependency tree, we see that <code>App.js</code> imports and calls <code>Copyright</code> from the <code>Copyright.js</code> module. As <code>Copyright.js</code> does not contain a <code>'use client'</code> directive, the component usage is rendered on the server. <code>App</code> is rendered on the server as it is the root component.<p>Client Components can render Server Components because you can pass JSX as props. In this case, <code>InspirationGenerator</code> receives <code>Copyright</code> as <a href="/learn/passing-props-to-a-component#passing-jsx-as-children">children</a>. However, the <code>InspirationGenerator</code> module never directly imports the <code>Copyright</code> module nor calls the component, all of that is done by <code>App</code>. In fact, the <code>Copyright</code> component is fully executed before <code>InspirationGenerator</code> starts rendering.<p>The takeaway is that a parent-child render relationship between components does not guarantee the same render environment.</section></deepdive></section><section class="level3"aria-labelledby="when-to-use-use-client-when-to-use-use-client"><h3 id="when-to-use-use-client-when-to-use-use-client">When to use <code>'use client'</code> {/<em>when-to-use-use-client</em>/}</h3><p>With <code>'use client'</code>, you can determine when components are Client Components. As Server Components are default, here is a brief overview of the advantages and limitations to Server Components to determine when you need to mark something as client rendered.<p>For simplicity, we talk about Server Components, but the same principles apply to all code in your app that is server run.<section class="level4"aria-labelledby="advantages-of-server-components-advantages"><h4 id="advantages-of-server-components-advantages">Advantages of Server Components {/<em>advantages</em>/}</h4><ul><li>Server Components can reduce the amount of code sent and run by the client. Only Client modules are bundled and evaluated by the client.<li>Server Components benefit from running on the server. They can access the local filesystem and may experience low latency for data fetches and network requests.</ul></section><section class="level4"aria-labelledby="limitations-of-server-components-limitations"><h4 id="limitations-of-server-components-limitations">Limitations of Server Components {/<em>limitations</em>/}</h4><ul><li>Server Components cannot support interaction as event handlers must be registered and triggered by a client.<ul><li>For example, event handlers like <code>onClick</code> can only be defined in Client Components.</ul><li>Server Components cannot use most Hooks.<ul><li>When Server Components are rendered, their output is essentially a list of components for the client to render. Server Components do not persist in memory after render and cannot have their own state.</ul></ul></section></section><section class="level3"aria-labelledby="serializable-types-returned-by-server-components-serializable-types"><h3 id="serializable-types-returned-by-server-components-serializable-types">Serializable types returned by Server Components {/<em>serializable-types</em>/}</h3><p>As in any React app, parent components pass data to child components. As they are rendered in different environments, passing data from a Server Component to a Client Component requires extra consideration.<p>Prop values passed from a Server Component to Client Component must be serializable.<p>Serializable props include:<ul><li>Primitives<ul><li><a href="https://developer.mozilla.org/en-US/docs/Glossary/String">string</a><li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Number">number</a><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt">bigint</a><li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Boolean">boolean</a><li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Undefined">undefined</a><li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Null">null</a><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol">symbol</a>, only symbols registered in the global Symbol registry via <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/for"><code>Symbol.for</code></a></ul><li>Iterables containing serializable values<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map">Map</a><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set">Set</a><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray">TypedArray</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer">ArrayBuffer</a></ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date">Date</a><li>Plain <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">objects</a>: those created with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer">object initializers</a>, with serializable properties<li>Functions that are <a href="/reference/react/use-server">Server Actions</a><li>Client or Server Component elements (JSX)<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promises</a></ul><p>Notably, these are not supported:<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function">Functions</a> that are not exported from client-marked modules or marked with <a href="/reference/react/use-server"><code>'use server'</code></a><li><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Classes_in_JavaScript">Classes</a><li>Objects that are instances of any class (other than the built-ins mentioned) or objects with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object#null-prototype_objects">a null prototype</a><li>Symbols not registered globally, ex. <code>Symbol('my new symbol')</code></ul></section></section><section class="level2"aria-labelledby="usage-usage"><h2 id="usage-usage">Usage {/<em>usage</em>/}</h2><section class="level3"aria-labelledby="building-with-interactivity-and-state-building-with-interactivity-and-state"><h3 id="building-with-interactivity-and-state-building-with-interactivity-and-state">Building with interactivity and state {/<em>building-with-interactivity-and-state</em>/}</h3><sandpack><pre class="language-js"><code class="language-js"><span class="token string">'use client'</span><span class="token punctuation">;</span>

<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Counter</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>initialValue <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>countValue<span class="token punctuation">,</span> setCountValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setCountValue</span><span class="token punctuation">(</span>countValue <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">decrement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setCountValue</span><span class="token punctuation">(</span>countValue <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h2<span class="token operator">></span><span class="token maybe-class-name">Count</span> <span class="token maybe-class-name">Value</span><span class="token operator">:</span> <span class="token punctuation">{</span>countValue<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h2<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>increment<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>decrement<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></sandpack><p>As <code>Counter</code> requires both the <code>useState</code> Hook and event handlers to increment or decrement the value, this component must be a Client Component and will require a <code>'use client'</code> directive at the top.<p>In contrast, a component that renders UI without interaction will not need to be a Client Component.<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> readFile <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'node:fs/promises'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">Counter</span></span> <span class="token keyword module">from</span> <span class="token string">'./Counter'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">CounterContainer</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> initialValue <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'/path/to/counter_value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Counter</span> initialValue<span class="token operator">=</span><span class="token punctuation">{</span>initialValue<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token punctuation">}</span></code></pre><p>For example, <code>Counter</code>'s parent component, <code>CounterContainer</code>, does not require <code>'use client'</code> as it is not interactive and does not use state. In addition, <code>CounterContainer</code> must be a Server Component as it reads from the local file system on the server, which is possible only in a Server Component.<p>There are also components that don't use any server or client-only features and can be agnostic to where they render. In our earlier example, <code>FancyText</code> is one such component.<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">FancyText</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>title<span class="token punctuation">,</span> text<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> title
    <span class="token operator">?</span> <span class="token operator">&#x3C;</span>h1 className<span class="token operator">=</span><span class="token string">'fancy title'</span><span class="token operator">></span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
    <span class="token operator">:</span> <span class="token operator">&#x3C;</span>h3 className<span class="token operator">=</span><span class="token string">'fancy cursive'</span><span class="token operator">></span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h3<span class="token operator">></span>
<span class="token punctuation">}</span></code></pre><p>In this case, we don't add the <code>'use client'</code> directive, resulting in <code>FancyText</code>'s <em>output</em> (rather than its source code) to be sent to the browser when referenced from a Server Component. As demonstrated in the earlier Inspirations app example, <code>FancyText</code> is used as both a Server or Client Component, depending on where it is imported and used.<p>But if <code>FancyText</code>'s HTML output was large relative to its source code (including dependencies), it might be more efficient to force it to always be a Client Component. Components that return a long SVG path string are one case where it may be more efficient to force a component to be a Client Component.</section><section class="level3"aria-labelledby="using-client-apis-using-client-apis"><h3 id="using-client-apis-using-client-apis">Using client APIs {/<em>using-client-apis</em>/}</h3><p>Your React app may use client-specific APIs, such as the browser's APIs for web storage, audio and video manipulation, and device hardware, among <a href="https://developer.mozilla.org/en-US/docs/Web/API">others</a>.<p>In this example, the component uses <a href="https://developer.mozilla.org/en-US/docs/Glossary/DOM">DOM APIs</a> to manipulate a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas"><code>canvas</code></a> element. Since those APIs are only available in the browser, it must be marked as a Client Component.<pre class="language-js"><code class="language-js"><span class="token string">'use client'</span><span class="token punctuation">;</span>

<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>useRef<span class="token punctuation">,</span> useEffect<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Circle</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">useLayoutEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> canvas <span class="token operator">=</span> ref<span class="token punctuation">.</span><span class="token property-access">current</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token method function property-access">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token method function property-access">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token method function property-access">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token method function property-access">arc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token method function property-access">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>canvas ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="using-third-party-libraries-using-third-party-libraries"><h3 id="using-third-party-libraries-using-third-party-libraries">Using third-party libraries {/<em>using-third-party-libraries</em>/}</h3><p>Often in a React app, you'll leverage third-party libraries to handle common UI patterns or logic.<p>These libraries may rely on component Hooks or client APIs. Third-party components that use any of the following React APIs must run on the client:<ul><li><a href="/reference/react/createContext">createContext</a><li><a href="/reference/react/hooks"><code>react</code></a> and <a href="/reference/react-dom/hooks"><code>react-dom</code></a> Hooks, excluding <a href="/reference/react/use"><code>use</code></a> and <a href="/reference/react/useId"><code>useId</code></a><li><a href="/reference/react/forwardRef">forwardRef</a><li><a href="/reference/react/memo">memo</a><li><a href="/reference/react/startTransition">startTransition</a><li>If they use client APIs, ex. DOM insertion or native platform views</ul><p>If these libraries have been updated to be compatible with React Server Components, then they will already include <code>'use client'</code> markers of their own, allowing you to use them directly from your Server Components. If a library hasn't been updated, or if a component needs props like event handlers that can only be specified on the client, you may need to add your own Client Component file in between the third-party Client Component and your Server Component where you'd like to use it.<p>[TODO]: &#x3C;> (Troubleshooting - need use-cases) <span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section></inlinetoc></canary></section>