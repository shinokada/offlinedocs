<!doctype html><html lang="de"><meta charset="utf-8"><title>Context</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="context"class="level1"><h1>Context</h1><p>Context ermöglicht es, Daten durch den Komponentenbaum zu leiten, ohne die Props in jeder Schicht manuell zu übergeben.<p>In einer typischen React-Anwendung werden Daten top-down (Elternkomponente zur Kindkomponente) durch Props übergeben. Für bestimmte Arten von Props (z.B. lokale Einstellungen, UI Theme), welche von vielen Komponenten innerhalb der Anwendung benötigt werden kann dies sehr umständlich werden. Mit Hilfe von Context ist es möglich, solche Werte zwischen Komponenten zu teilen, ohne diese explizit als Prop durch alle Schichten des Baumes zu geben.<ul><li><a href="#when-to-use-context">Wann Context verwendet werden soll</a><li><a href="#before-you-use-context">Bevor du Context verwendest</a><li><a href="#api">API</a><ul><li><a href="#reactcreatecontext">React.createContext</a><li><a href="#contextprovider">Context.Provider</a><li><a href="#classcontexttype">Class.contextType</a><li><a href="#contextconsumer">Context.Consumer</a></ul><li><a href="#examples">Beispiele</a><ul><li><a href="#dynamic-context">Dynamischer Context</a><li><a href="#updating-context-from-a-nested-component">Updaten des Contextes von einer genesteten Komponente</a><li><a href="#consuming-multiple-contexts">Konsumieren mehrerer Contexte</a></ul><li><a href="#caveats">Fallen</a><li><a href="#legacy-api">Legacy API</a></ul><section id="when-to-use-context"class="level2"><h2>Wann Context verwendet werden soll</h2><p>Context wurde entwickelt, um Daten zu teilen, welche für einen Baum von React Komponenten als "global" bezeichnet werden können, zum Beispiel der aktuelle authentifizierte Nutzer, das Theme oder die bevorzugte Sprache. In dem unten angeführten Codebeispiel, leiten wir ein Theme Prop manuell durch den Code, um die Button-Komponente zu stylen:<p><code>embed:context/motivation-problem.js</code><p>Mit der Verwendung von Context können wir das Übergeben der Props durch Zwischenelemente verhindern:<p><code>embed:context/motivation-solution.js</code></section><section id="before-you-use-context"class="level2"><h2>Bevor du Context verwendest</h2><p>Context wird hauptsächlich verwendet, wenn Daten von <em>vielen</em> Komponenten in verschiedenen genesteten Schichten erreichbar sein müssen. Benutze es sparsam, weil es das Wiederverwenden von Komponenten schwieriger macht.<p><strong>Wenn du nur das Übergeben von Props durch mehrere Schichten verhindern möchtest, ist <a href="./composition-vs-inheritance.html">Komponenten-Komposition</a> oft die bessere Lösung als Context.</strong><p>Betrachte zum Beispiel eine <code>Page</code> Komponente, welche eine <code>user</code> und <code>avatarSize</code> Prop durch mehrere Schichten übergibt, damit die tief genestete <code>Link</code> und <code>Avatar</code> Komponenten sie lesen können:<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Page</span> user<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span> avatarSize<span class="token operator">=</span><span class="token punctuation">{</span>avatarSize<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token comment">// ... rendert ...</span>
<span class="token operator">&#x3C;</span><span class="token maybe-class-name">PageLayout</span> user<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span> avatarSize<span class="token operator">=</span><span class="token punctuation">{</span>avatarSize<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token comment">// ... rendert ...</span>
<span class="token operator">&#x3C;</span><span class="token maybe-class-name">NavigationBar</span> user<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span> avatarSize<span class="token operator">=</span><span class="token punctuation">{</span>avatarSize<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token comment">// ... rendert ...</span>
<span class="token operator">&#x3C;</span><span class="token maybe-class-name">Link</span> href<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">permalink</span><span class="token punctuation">}</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Avatar</span> user<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span> size<span class="token operator">=</span><span class="token punctuation">{</span>avatarSize<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Link</span><span class="token operator">></span></code></pre><p>Es kann überflüßig erscheinen, die <code>user</code> und <code>avatarSize</code> Props durch so viele Schichten zu übergeben, wenn am Ende nur die <code>Avatar</code> Komponente sie wirklich benötigt. Außerdem ist es nervig, wenn die <code>Avatar</code> Komponente mehrere Props von oben benötigt, weil man diese dann auch in alle Zwischenschichten hinzufügen muss.<p>Der einzige Weg dieses Problem <strong>ohne Context</strong> zu lösen ist, <a href="./composition-vs-inheritance.html#containment">die <code>Avatar</code> Komponente sich selber zu übergeben</a>, damit die Zwischenkomponenten nichts über die <code>user</code> or <code>avatarSize</code> Props wissen müssen.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Page</span></span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> user <span class="token operator">=</span> props<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> userLink <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Link</span> href<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">permalink</span><span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Avatar</span> user<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span> size<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span><span class="token property-access">avatarSize</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Link</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">PageLayout</span> userLink<span class="token operator">=</span><span class="token punctuation">{</span>userLink<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Jetzt haben wir:</span>
<span class="token operator">&#x3C;</span><span class="token maybe-class-name">Page</span> user<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span> avatarSize<span class="token operator">=</span><span class="token punctuation">{</span>avatarSize<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token comment">// ... rendert ...</span>
<span class="token operator">&#x3C;</span><span class="token maybe-class-name">PageLayout</span> userLink<span class="token operator">=</span><span class="token punctuation">{</span><span class="token spread operator">...</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token comment">// ... rendert ...</span>
<span class="token operator">&#x3C;</span><span class="token maybe-class-name">NavigationBar</span> userLink<span class="token operator">=</span><span class="token punctuation">{</span><span class="token spread operator">...</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token comment">// ... rendert ...</span>
<span class="token punctuation">{</span>props<span class="token punctuation">.</span><span class="token property-access">userLink</span><span class="token punctuation">}</span></code></pre><p>Mit dieser Veränderung muss nur die obereste Seitenkomponente über die Verwendung der <code>user</code> und <code>avatarSize</code> Props der <code>Link</code> und <code>Avatar</code> Komponenten Bescheid wissen.<p>Diese <em>inversion of control</em> (engl. für Umkehrung der Steuerung) macht den Code, durch das Reduzieren der Anzahl an überreichten Props durch die Anwendung und durch die Steigerung der Kontrolle der Root-Komponenten, in vielen Fällen sauberer. Jedoch ist das nicht in jedem Fall die richtige Entscheidung: durch das Schieben der Komplexität höher in den Baum, werden diese Higher-Level-Komponenten komplizierter und erzwingen die Lower-Level-Komponenten flexibler als erwünscht zu sein.<p>Du bist nicht auf ein einzelnes Kind für eine Komponente beschränkt. Du kannst mehrere Kinder durchgeben, sogar mehrere seperate Slots für Kinder haben, <a href="./composition-vs-inheritance.html#containment">wie hier dokumentiert wird</a>:<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Page</span></span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> user <span class="token operator">=</span> props<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> content <span class="token operator">=</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Feed</span> user<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> topBar <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">NavigationBar</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Link</span> href<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">permalink</span><span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Avatar</span> user<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span> size<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span><span class="token property-access">avatarSize</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Link</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">NavigationBar</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">PageLayout</span>
      topBar<span class="token operator">=</span><span class="token punctuation">{</span>topBar<span class="token punctuation">}</span>
      content<span class="token operator">=</span><span class="token punctuation">{</span>content<span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Dieses Pattern ist für viele Fälle ausreichend, in denen man ein Kind von seinen unmittelbaren Eltern entkoppeln möchte. Du kannst es noch einen Schritt mit "<a href="./render-props.html">render props</a>" weitertreiben, wenn das Kind mit dem Elternteil vor dem Rendern kommunizieren muss.<p>Manchmal jedoch müssen die gleichen Daten von vielen Komponenten im Baum auf verschiedenen Schichten erreichbar sein. Mit Context kannst du solche Daten und dessen Veränderungen zu allen nachfolgenden Komponenten "broadcasten". Gängige Beispiele, bei denen das Verwenden von Context einfacher ist als eine der Alternativen inkludieren das Managen von aktuellen lokalen Daten, Theme oder Daten Cache.</section><section id="api"class="level2"><h2>API</h2><section id="reactcreatecontext-reactcreatecontext"class="level3"><h3><code>React.createContext</code> {#reactcreatecontext}</h3><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token maybe-class-name">MyContext</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createContext</span><span class="token punctuation">(</span>defaultValue<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Erstellt ein Context-Objekt. Wenn React eine Komponente rendert, die dieses Context-Objekt abonniert hat, wird es den aktuellen Context-Wert des am meisten übereinstimmenden <code>Providers</code>, welcher im Baum oberhalb des Wertes ist, lesen.<p>Das <code>defaultValue</code> Argument wird <strong>nur</strong> dann benützt, wenn eine Komponente keinen übereinstimmenden Provider im Baum oberhalb hat. Das kann für das isolierte Testen von Komponenten, ohne sie umwickeln zu müssen, hilfreich sein. Beachte: <code>undefined</code> als übergebener Providerwert verursacht nicht, dass <code>defaultValue</code> von konsumierenden Komponenten verwendet wird.</section><section id="contextprovider-contextprovider"class="level3"><h3><code>Context.Provider</code> {#contextprovider}</h3><pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyContext</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Provider</span></span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token comment">/* irgendein Wert */</span><span class="token punctuation">}</span><span class="token operator">></span></code></pre><p>Jedes Context-Objekt kommt mit einer Provider React Komponente, welche konsumierenden Komponenten erlaubt, die Veränderungen von Context zu abonnieren.<p>Ein <code>value</code> Prop wird von konsumierenden Komponenten akzeptiert, welche vom Provider abstammen. Ein Provider kann mit vielen Konsumenten verbunden sein. Provider können genestet werden, um tiefer im Baum liegende Werte zu überschreiben.<p>Alle Konsumenten, welche von dem Provider abstammen, werden neu gerendert, wenn sich das <code>value</code> Prop des Providers ändert. Die Verbreitung des Providers zu dessen abstammenden Konsumenten (einschließlich <a href="#classcontexttype"><code>.contextType</code></a> und <a href="./hooks-reference.html#usecontext"><code>useContext</code></a>) hängt nicht von der <code>shouldComponentUpdate</code> Methode ab, weshalb der Konsument ein Update bekommt, auch wenn eine zuvorkommende Komponente aus dem Update ausbricht.<p>Veränderungen werden mit dem Vergleichen des neuen und alten Werten ermittelt, welches den gleichen Algorithmus wie <a href="//developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is#Description"><code>Object.is</code></a> verwendet.<blockquote><p>Hinweis<p>Diese Art und Weise wie Veränderungen ermittelt werden, kann Probleme schaffen, wenn Objekte als <code>value</code> überreicht werden: siehe <a href="#caveats">Caveats</a></blockquote></section><section id="classcontexttype-classcontexttype"class="level3"><h3><code>Class.contextType</code> {#classcontexttype}</h3><pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">context</span><span class="token punctuation">;</span>
    <span class="token comment">/* führe einen Nebeneffekt beim Mounten mit dem Wert von MyContext beim Mounten aus */</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">context</span><span class="token punctuation">;</span>
    <span class="token comment">/* ... */</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">context</span><span class="token punctuation">;</span>
    <span class="token comment">/* ... */</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">context</span><span class="token punctuation">;</span>
    <span class="token comment">/* rendere etwas basierend auf dem Wert von MyContext */</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token maybe-class-name">MyClass</span><span class="token punctuation">.</span><span class="token property-access">contextType</span> <span class="token operator">=</span> <span class="token maybe-class-name">MyContext</span><span class="token punctuation">;</span></code></pre><p>Das <code>contextType</code> Prop einer Klasse kann mit <a href="#reactcreatecontext"><code>React.createContext()</code></a> ein Context-Objekt zugewiesen werden. Das lässt dich den nahestehensten aktuellen Wert des Context-Types, welcher <code>this.context</code> verwendet, konsumieren. Du kannst auf das in jeder Lifecycle-Methode, inklusive der Render-Funktion verweisen.<blockquote><p>Beachte:<p>Du kannst nur einen einzigen Context mit dieser API abonnieren. Falls du mehrere benötigst, kannst du hier mehr darüber lesen: <a href="#consuming-multiple-contexts">Konsumieren von mehreren Contexte</a><p>Falls du die experimentellen <a href="https://babeljs.io/docs/plugins/transform-class-properties/">"public class fields syntax"</a> verwendest, kannst du das <strong>static</strong> Klassen-Feld verwenden, um deinen <code>contextType</code> zu initialisieren.</blockquote><pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> contextType <span class="token operator">=</span> <span class="token maybe-class-name">MyContext</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">context</span><span class="token punctuation">;</span>
    <span class="token comment">/* rendere etwas auf dem Wert basierend */</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section><section id="contextconsumer-contextconsumer"class="level3"><h3><code>Context.Consumer</code> {#contextconsumer}</h3><pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyContext</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Consumer</span></span><span class="token operator">></span>
  <span class="token punctuation">{</span><span class="token parameter">value</span> <span class="token arrow operator">=></span> <span class="token comment">/* rendere etwas auf dem Context-Wert basierend */</span><span class="token punctuation">}</span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">MyContext</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Consumer</span></span><span class="token operator">></span></code></pre><p>Eine React-Komponente die Context-Veränderungen abonniert hat. Das lässt dich einen Context innerhalb einer <a href="./components-and-props.html#function-and-class-components">Funktions-Komponente</a> abonnieren.<p>Benötigt eine <a href="./render-props.html#using-props-other-than-render">Funktion als Kind (engl. function as a child)</a>. Diese Funktion erhält den aktuellen Context-Wert und gibt einen React-Knoten zurück. Das der Funktion übergebende <code>value</code> Argument wird mit dem <code>value</code> Prop des nahestehensten Provider von diesem Context im Baum darüber übereinstimmen. Falls es keinen Provider für diesen Context im Baum oberhalb gibt, wird das <code>value</code> Argument mit dem <code>defaultValue</code>, welches <code>createContext()</code> übergeben wurde, übereinstimmen.<blockquote><p>Hinweis<p>Für nähere Informationen über das 'function as a child' Pattern, siehe <a href="./render-props.html">render Props</a>.</blockquote></section><section id="contextdisplayname-contextdisplayname"class="level3"><h3><code>Context.displayName</code> {#contextdisplayname}</h3><p>Context-Objekt akzeptiert eine <code>displayName</code> String-Eigenschaft. React DevTools verwendet diesen String um festzustellen, was für den Context darzustellen ist.<p>Die folgende Komponente wird zum Beispiel als MyDisplayName in den DevTools erscheinen:<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token maybe-class-name">MyContext</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createContext</span><span class="token punctuation">(</span><span class="token comment">/* irgendein Wert */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">MyContext</span><span class="token punctuation">.</span><span class="token property-access">displayName</span> <span class="token operator">=</span> <span class="token string">'MyDisplayName'</span><span class="token punctuation">;</span>

<span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyContext</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Provider</span></span><span class="token operator">></span> <span class="token comment">// "MyDisplayName.Provider" in DevTools</span>
<span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyContext</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Consumer</span></span><span class="token operator">></span> <span class="token comment">// "MyDisplayName.Consumer" in DevTools</span></code></pre></section></section><section id="examples"class="level2"><h2>Beispiele</h2><section id="dynamic-context"class="level3"><h3>Dynamischer Context</h3><p>Ein komplizierteres Beispiel mit dynamischen Werten für ein Theme:<p><strong>theme-context.js</strong> <code>embed:context/theme-detailed-theme-context.js</code><p><strong>themed-button.js</strong> <code>embed:context/theme-detailed-themed-button.js</code><p><strong>app.js</strong> <code>embed:context/theme-detailed-app.js</code></section><section id="updating-context-from-a-nested-component"class="level3"><h3>Updaten des Contextes von einer genesteten Komponente</h3><p>Oft ist es nötig, den Context von einer Komponente zu updaten, die sehr tief innerhalb des Komponenten-Baumes sitzt. In diesem Fall kannst du eine Funktion durch den Context übergeben, welche es allen Konsumenten ermöglicht, den Context zu updaten:<p><strong>theme-context.js</strong> <code>embed:context/updating-nested-context-context.js</code><p><strong>theme-toggler-button.js</strong> <code>embed:context/updating-nested-context-theme-toggler-button.js</code><p><strong>app.js</strong> <code>embed:context/updating-nested-context-app.js</code></section><section id="consuming-multiple-contexts"class="level3"><h3>Konsumieren mehrerer Contexten</h3><p>Um einem Context das schnelle neu Rendern beizubehalten, muss React für einen Context-Konsumenten einen eigenen Knoten im Baum erstellen.<p><code>embed:context/multiple-contexts.js</code><p>Falls zwei oder mehr Context-Werte oft gemeinsam verwendet werden, sollte man vielleicht überlegen, ob man eine eigene Render Prop Komponente erstellt, die beide Werte zur Verfügung stellt.</section></section><section id="caveats"class="level2"><h2>Fallen</h2><p>Da Context eine Referenz-Identität verwendet, um festzustellen, wann es rerendern soll, gibt es einige Fallen die ungewollte Renders in Komsumten auslösen können, wenn ein Elternteil eines Providers rerendert. Der untenstehende Code zum Beispiel wird alle Konsumenten jedes Mal wenn der Provider rerendert, rerendern, weil jedes Mal ein neues Objekt für <code>value</code> erstellt wird:<p><code>embed:context/reference-caveats-problem.js</code><p>Um dieses Problem zu umgehen, hebe den Wert in den State des Elternteils:<p><code>embed:context/reference-caveats-solution.js</code></section><section id="legacy-api"class="level2"><h2>Legacy API</h2><blockquote><p>Hinweis<p>Früher hat React eine experimentelle Context API geliefert. Diese alte API wird von allen 16.x Releases supported, jedoch sollten alle Applikationen die es verwenden, zur neuesten Version migrieren. Diese Legacy API wird in zukünftigen React Versionen entfernt werden. Lese die <a href="./legacy-context.html">Legacy Context Dokumentation hier</a>. <span style="float:footnote"><a href="./index.html#toc">Go to TOC</a></span></blockquote></section></section>