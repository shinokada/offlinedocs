<!doctypehtml><html lang="fr"><meta charset="utf-8"><title>Contexte</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="contexte"class="level1"><h1>Contexte</h1><p>Le Contexte offre un moyen de faire passer des données à travers l'arborescence du composant sans avoir à passer manuellement les props à chaque niveau.<p>Dans une application React typique, les données sont passées de haut en bas (du parent à l'enfant) via les props, mais cela peut devenir lourd pour certains types de props (ex. les préférences régionales, le thème de l'interface utilisateur) qui s'avèrent nécessaires pour de nombreux composants au sein d'une application. Le Contexte offre un moyen de partager des valeurs comme celles-ci entre des composants sans avoir à explicitement passer une prop à chaque niveau de l'arborescence.<ul><li><a href="#when-to-use-context">Quand utiliser le Contexte</a><li><a href="#before-you-use-context">Avant d'utiliser le Contexte</a><li><a href="#api">API</a><ul><li><a href="#reactcreatecontext">React.createContext</a><li><a href="#contextprovider">Context.Provider</a><li><a href="#classcontexttype">Class.contextType</a><li><a href="#contextconsumer">Context.Consumer</a><li><a href="#contextdisplayname">Context.displayName</a></ul><li><a href="#examples">Exemples</a><ul><li><a href="#dynamic-context">Contexte dynamique</a><li><a href="#updating-context-from-a-nested-component">Mettre à jour le Contexte à partir d'un composant imbriqué</a><li><a href="#consuming-multiple-contexts">Consommer plusieurs Contextes</a></ul><li><a href="#caveats">Limitations</a><li><a href="#legacy-api">API historique</a></ul><section id="when-to-use-context"class="level2"><h2>Quand utiliser le Contexte</h2><p>Le Contexte est conçu pour partager des données qui peuvent être considérées comme « globales » pour une arborescence de composants React, comme l'utilisateur actuellement authentifié, le thème, ou la préférence de langue. Par exemple, dans le code ci-dessous nous faisons passer manuellement la prop <code>theme</code> afin de styler le composant <code>Button</code> :<p><code>embed:context/motivation-problem.js</code><p>En utilisant le Contexte, nous pouvons éviter de passer les props à travers des éléments intermédiaires :<p><code>embed:context/motivation-solution.js</code></section><section id="before-you-use-context"class="level2"><h2>Avant d'utiliser le Contexte</h2><p>Le Contexte est principalement utilisé quand certaines données doivent être accessibles par de <em>nombreux</em> composants à différents niveaux d'imbrication. Utilisez-le avec parcimonie car il rend la réutilisation des composants plus difficile.<p><strong>Si vous voulez seulement éviter de passer certaines props à travers de nombreux niveaux, <a href="./composition-vs-inheritance.html">la composition des composants</a> est souvent plus simple que le contexte.</strong><p>Par exemple, prenez un composant <code>Page</code> qui passe des props <code>user</code> et <code>avatarSize</code> plusieurs niveaux plus bas pour que les composants profondément imbriqués <code>Link</code> et <code>Avatar</code> puissent les lire :<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Page</span> user<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span> avatarSize<span class="token operator">=</span><span class="token punctuation">{</span>avatarSize<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token comment">// ... qui affiche ...</span>
<span class="token operator">&#x3C;</span><span class="token maybe-class-name">PageLayout</span> user<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span> avatarSize<span class="token operator">=</span><span class="token punctuation">{</span>avatarSize<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token comment">// ... qui affiche ...</span>
<span class="token operator">&#x3C;</span><span class="token maybe-class-name">NavigationBar</span> user<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span> avatarSize<span class="token operator">=</span><span class="token punctuation">{</span>avatarSize<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token comment">// ... qui affiche ...</span>
<span class="token operator">&#x3C;</span><span class="token maybe-class-name">Link</span> href<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">permalink</span><span class="token punctuation">}</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Avatar</span> user<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span> size<span class="token operator">=</span><span class="token punctuation">{</span>avatarSize<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Link</span><span class="token operator">></span></code></pre><p>Ça peut paraître redondant de passer les props <code>user</code> et <code>avatarSize</code> à travers plusieurs niveaux, si au final seul le composant <code>Avatar</code> en a réellement besoin. Il est également pénible qu'à chaque fois que le composant <code>Avatar</code> a besoin de davantage de props d'en haut, vous ayez à les ajouter à tous les niveaux.<p>Un des moyens de résoudre ce problème <strong>sans le contexte</strong> consisterait à <a href="./composition-vs-inheritance.html#containment">transmettre le composant <code>Avatar</code> lui-même</a> de façon à ce que les composants intermédiaires n'aient pas besoin de connaître les props <code>user</code> ou <code>avatarSize</code> :<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Page</span></span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> user <span class="token operator">=</span> props<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> userLink <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Link</span> href<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">permalink</span><span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Avatar</span> user<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span> size<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span><span class="token property-access">avatarSize</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Link</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">PageLayout</span> userLink<span class="token operator">=</span><span class="token punctuation">{</span>userLink<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// À présent nous avons :</span>
<span class="token operator">&#x3C;</span><span class="token maybe-class-name">Page</span> user<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span> avatarSize<span class="token operator">=</span><span class="token punctuation">{</span>avatarSize<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token comment">// ... qui affiche ...</span>
<span class="token operator">&#x3C;</span><span class="token maybe-class-name">PageLayout</span> userLink<span class="token operator">=</span><span class="token punctuation">{</span><span class="token spread operator">...</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token comment">// ... qui affiche ...</span>
<span class="token operator">&#x3C;</span><span class="token maybe-class-name">NavigationBar</span> userLink<span class="token operator">=</span><span class="token punctuation">{</span><span class="token spread operator">...</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token comment">// ... qui affiche ...</span>
<span class="token punctuation">{</span>props<span class="token punctuation">.</span><span class="token property-access">userLink</span><span class="token punctuation">}</span></code></pre><p>Avec cette modification, seulement le composant le plus haut placé, <code>Page</code>, a besoin de connaître l'utilisation de <code>user</code> et <code>avatarSize</code> par les composants <code>Link</code> et <code>Avatar</code>.<p>Cette <em>inversion de contrôle</em> peut rendre votre code plus propre dans de nombreux cas en réduisant le nombre de props que vous avez besoin de passer à travers votre application et vous donne plus de contrôle sur les composants racines. Cependant, ce n'est pas toujours la bonne approche : déplacer la complexité vers le haut de l'arborescence rend les composants des niveaux supérieurs plus compliqués et force les composants de plus bas niveau à être plus flexibles que vous pourriez le souhaiter.<p>Vous n'êtes pas limité·e à un unique enfant pour un composant. Vous pouvez passer plusieurs enfants, ou même prévoir dans votre JSX plusieurs emplacements séparés pour les enfants <a href="./composition-vs-inheritance.html#containment">comme documenté ici</a> :<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Page</span></span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> user <span class="token operator">=</span> props<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> content <span class="token operator">=</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Feed</span> user<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> topBar <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">NavigationBar</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Link</span> href<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">permalink</span><span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Avatar</span> user<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span> size<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span><span class="token property-access">avatarSize</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Link</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">NavigationBar</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">PageLayout</span>
      topBar<span class="token operator">=</span><span class="token punctuation">{</span>topBar<span class="token punctuation">}</span>
      content<span class="token operator">=</span><span class="token punctuation">{</span>content<span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Ce motif est suffisant pour les nombreux cas où vous avez besoin de découpler un enfant de ses parents directs. Vous pouvez aller encore plus loin avec les <a href="./render-props.html">props de rendu</a> si l'enfant a besoin de communiquer avec le parent avant de s'afficher.<p>Cependant, parfois les mêmes données ont besoin d'être accessibles par de nombreux composants dans l'arborescence, et à différents niveaux d'imbrication. Le Contexte vous permet de « diffuser » ces données, et leurs mises à jour, à tous les composants plus bas dans l'arbre. Les exemples courants où l'utilisation du Contexte apporte une simplification incluent la gestion des préférences régionales, du thème ou d'un cache de données.</section><section id="api"class="level2"><h2>API</h2><section id="reactcreatecontext-reactcreatecontext"class="level3"><h3><code>React.createContext</code> {#reactcreatecontext}</h3><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token maybe-class-name">MyContext</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createContext</span><span class="token punctuation">(</span>defaultValue<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Crée un objet Context. Lorsque React affiche un composant qui s'abonne à cet objet <code>Context</code>, il lira la valeur actuelle du contexte depuis le <code>Provider</code> le plus proche situé plus haut dans l'arborescence.<p>L'argument <code>defaultValue</code> est <strong>uniquement</strong> utilisé lorsqu'un composant n'a pas de <code>Provider</code> correspondant au-dessus de lui dans l'arborescence. Ça peut être utile pour tester des composants de manière isolée sans les enrober. Remarquez que passer <code>undefined</code> comme valeur au <code>Provider</code> n’aboutit pas à ce que les composants consommateurs utilisent <code>defaultValue</code>.</section><section id="contextprovider-contextprovider"class="level3"><h3><code>Context.Provider</code> {#contextprovider}</h3><pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyContext</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Provider</span></span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token comment">/* une valeur */</span><span class="token punctuation">}</span><span class="token operator">></span></code></pre><p>Chaque objet Contexte est livré avec un composant React <code>Provider</code> qui permet aux composants consommateurs de s'abonner aux mises à jour du contexte.<p>Il accepte une prop <code>value</code> à transmettre aux composants consommateurs descendants de ce <code>Provider</code>(plus bas dans l'arbre, donc). Un <code>Provider</code> peut être connecté à plusieurs consommateurs. Les <code>Provider</code> peuvent être imbriqués pour remplacer leur valeur plus profondément dans l'arbre.<p>Tous les consommateurs qui sont descendants d'un <code>Provider</code> se rafraîchiront lorsque la prop <code>value</code> du <code>Provider</code> change. La propagation du <code>Provider</code> vers ses consommateurs descendants (y compris <a href="#classcontexttype"><code>.contextType</code></a> et <a href="./hooks-reference.html#usecontext"><code>useContext</code></a>) n'est pas assujettie à la méthode <code>shouldComponentUpdate</code>, de sorte que le consommateur est mis à jour même lorsqu'un composant ancêtre saute sa mise à jour.<p>On détermine si modification il y a en comparant les nouvelles et les anciennes valeurs avec le même algorithme que <a href="//developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Object/is#Description"><code>Object.is</code></a>.<blockquote><p>Remarque<p>La manière dont les modifications sont déterminées peut provoquer des problèmes lorsqu’on passe des objets dans <code>value</code> : voir les <a href="#caveats">limitations</a>.</blockquote></section><section id="classcontexttype-classcontexttype"class="level3"><h3><code>Class.contextType</code> {#classcontexttype}</h3><pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">context</span><span class="token punctuation">;</span>
    <span class="token comment">/* produit un effet de bord au montage sur la valeur de MyContext */</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">context</span><span class="token punctuation">;</span>
    <span class="token comment">/* ... */</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">context</span><span class="token punctuation">;</span>
    <span class="token comment">/* ... */</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">context</span><span class="token punctuation">;</span>
    <span class="token comment">/* affiche quelque chose basé sur la valeur de MyContext */</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token maybe-class-name">MyClass</span><span class="token punctuation">.</span><span class="token property-access">contextType</span> <span class="token operator">=</span> <span class="token maybe-class-name">MyContext</span><span class="token punctuation">;</span></code></pre><p>La propriété <code>contextType</code> d’une classe peut recevoir un objet Contexte créé par <a href="#reactcreatecontext"><code>React.createContext()</code></a>. Ça vous permet de consommer la valeur la plus proche de ce Contexte en utilisant <code>this.context</code>. Vous pouvez la référencer dans toutes les méthodes de cycle de vie, y compris la fonction de rendu.<blockquote><p>Remarque<p>Vous pouvez vous abonner à un unique contexte en utilisant cette API. Si vous voulez lire plus d'un contexte, voyez <a href="#consuming-multiple-contexts">Consommer plusieurs contextes</a>.<p>Si vous utilisez <a href="https://babeljs.io/docs/plugins/transform-class-properties/">la syntaxe expérimentale des champs publics de classe</a>, vous pouvez utiliser un champ <strong>statique</strong> de classe pour initialiser votre <code>contextType</code>.</blockquote><pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> contextType <span class="token operator">=</span> <span class="token maybe-class-name">MyContext</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">context</span><span class="token punctuation">;</span>
    <span class="token comment">/* Affiche quelque chose basé sur la valeur */</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section><section id="contextconsumer-contextconsumer"class="level3"><h3><code>Context.Consumer</code> {#contextconsumer}</h3><pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">MyContext</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Consumer</span></span><span class="token operator">></span>
  <span class="token punctuation">{</span><span class="token parameter">value</span> <span class="token arrow operator">=></span> <span class="token comment">/* affiche quelque chose basé sur la valeur du contexte */</span><span class="token punctuation">}</span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">MyContext</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Consumer</span></span><span class="token operator">></span></code></pre><p>Un composant React qui s'abonne aux modifications de contexte. Ça permet de s'abonner à un contexte au sein d'une <a href="./components-and-props.html#function-and-class-components">fonction composant</a>.<p>Nécessite une <a href="./render-props.html#using-props-other-than-render">fonction enfant</a>. La fonction reçoit le contexte actuel et renvoie un nœud React. L'argument <code>value</code> envoyé à la fonction sera égal à la prop <code>value</code> du <code>Provider</code> le plus proche (plus haut dans l'arbre) pour le contexte en question. Si il n'y pas de <code>Provider</code> pour le contexte voulu, l'argument <code>value</code> sera égal à la <code>defaultValue</code> passée lors de son <code>createContext()</code>.<blockquote><p>Remarque<p>Pour en apprendre davantage sur l'approche « fonction enfant », voyez les <a href="./render-props.html">props de rendu</a>.</blockquote></section><section id="contextdisplayname-contextdisplayname"class="level3"><h3><code>Context.displayName</code> {#contextdisplayname}</h3><p>Les objets Contexte permettent une propriété textuelle <code>displayName</code>. Les Outils de développement React l’utilisent pour déterminer comment afficher le contexte.<p>Par exemple, le composant ci-après apparaîtra dans les Outils de développement en tant que MyDisplayName :<pre class="language-js{2}"><code class="language-js{2}">const MyContext = React.createContext(/* une valeur */);
MyContext.displayName = 'MyDisplayName';

&#x3C;MyContext.Provider> // "MyDisplayName.Provider" dans les DevTools
&#x3C;MyContext.Consumer> // "MyDisplayName.Consumer" dans les DevTools</code></pre></section></section><section id="examples"class="level2"><h2>Exemples</h2><section id="dynamic-context"class="level3"><h3>Contexte dynamique</h3><p>Un exemple plus complexe avec des valeurs dynamiques pour le thème :<p><strong>theme-context.js</strong> <code>embed:context/theme-detailed-theme-context.js</code><p><strong>themed-button.js</strong> <code>embed:context/theme-detailed-themed-button.js</code><p><strong>app.js</strong> <code>embed:context/theme-detailed-app.js</code></section><section id="updating-context-from-a-nested-component"class="level3"><h3>Mettre à jour le Contexte à partir d’un composant imbriqué</h3><p>Il est souvent nécessaire de mettre à jour le contexte à partir d'un composant imbriqué profondément dans l’arbre des composants. Dans un tel cas, vous pouvez passer une fonction à travers le contexte qui permet aux consommateurs de le mettre à jour :<p><strong>theme-context.js</strong> <code>embed:context/updating-nested-context-context.js</code><p><strong>theme-toggler-button.js</strong> <code>embed:context/updating-nested-context-theme-toggler-button.js</code><p><strong>app.js</strong> <code>embed:context/updating-nested-context-app.js</code></section><section id="consuming-multiple-contexts"class="level3"><h3>Consommer plusieurs Contextes</h3><p>Pour conserver un rafraîchissement rapide du contexte, React a besoin que chaque consommateur de contexte soit un nœud à part dans l'arborescence.<p><code>embed:context/multiple-contexts.js</code><p>Si plusieurs valeurs de contexte sont souvent utilisées ensemble, vous voudrez peut-être créer votre propre composant avec prop de rendu qui fournira les deux.</section></section><section id="caveats"class="level2"><h2>Limitations</h2><p>Dans la mesure où le contexte utilise une identité référentielle pour déterminer quand se rafraîchir, il y a des cas piégeux qui peuvent déclencher des rafraîchissements involontaires pour les consommateurs lorsque le parent d'un fournisseur se rafraîchit. Par exemple, le code ci-dessous va rafraîchir chaque consommateur, le <code>Provider</code> se rafraîchissant lui-même parce qu'un nouvel objet est créé à chaque fois pour <code>value</code> :<p><code>embed:context/reference-caveats-problem.js</code><p>Pour contourner ce problème, placez la valeur dans l'état du parent :<p><code>embed:context/reference-caveats-solution.js</code></section><section id="legacy-api"class="level2"><h2>API historique</h2><blockquote><p>Remarque<p>React fournissait auparavant une API de contextes expérimentale. L'ancienne API restera prise en charge par toutes les versions 16.x, mais les applications qui l'utilisent devraient migrer vers la nouvelle version. L'API historique sera supprimée dans une future version majeure de React. Lisez la <a href="./legacy-context.html">documentation sur l’API historique de contexte ici</a>. <span style="float:footnote"><a href="./index.html#toc">Go to TOC</a></span></blockquote></section></section>