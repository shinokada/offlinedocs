<!doctype html><html lang="fr"><meta charset="utf-8"><title>Utiliser TypeScript</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="utiliser-typescript"><h1 id="utiliser-typescript">Utiliser TypeScript</h1><p>re: <a href="https://github.com/reactjs/react.dev/issues/5960">https://github.com/reactjs/react.dev/issues/5960</a></p><intro><p>TypeScript est une solution populaire d'ajout de définitions de types à des bases de code JavaScript. TypeScript <a href="/learn/writing-markup-with-jsx">prend nativement en charge JSX</a>, et pour obtenir une prise en charge complète de la version web de React, il vous suffit d'ajouter <a href="https://www.npmjs.com/package/@types/react"><code>@types/react</code></a> et <a href="https://www.npmjs.com/package/@types/react-dom"><code>@types/react-dom</code></a> à votre projet.</p></intro><youwilllearn><ul><li><a href="/learn/typescript#typescript-with-react-components">Comment utiliser TypeScript pour les composants React</a><li><a href="/learn/typescript#example-hooks">Des exemples de typages avec les Hooks</a><li><a href="/learn/typescript/#useful-types">Les types usuels de <code>@types/react</code></a><li><a href="/learn/typescript/#further-learning">Des ressources pour aller plus loin</a></ul></youwilllearn><section class="level2"aria-labelledby="installation-installation"><h2 id="installation-installation">Installation {/<em>installation</em>/}</h2><p>Tous les <a href="/learn/start-a-new-react-project#production-grade-react-frameworks">frameworks React de qualité reconnue</a> prennent en charge TypeScript. Suivez le guide spécifique à votre framework pour l'installation :<ul><li><a href="https://nextjs.org/docs/pages/building-your-application/configuring/typescript">Next.js</a><li><a href="https://remix.run/docs/en/1.19.2/guides/typescript">Remix</a><li><a href="https://www.gatsbyjs.com/docs/how-to/custom-configuration/typescript/">Gatsby</a><li><a href="https://docs.expo.dev/guides/typescript/">Expo</a></ul><section class="level3"aria-labelledby="ajouter-typescript-à-un-projet-react-existant-adding-typescript-to-an-existing-react-project"><h3 id="ajouter-typescript-à-un-projet-react-existant-adding-typescript-to-an-existing-react-project">Ajouter TypeScript à un projet React existant {/<em>adding-typescript-to-an-existing-react-project</em>/}</h3><p>Pour installer la dernière version des définitions de types de React :</p><terminalblock>npm install @types/react @types/react-dom</terminalblock><p>Vous devrez définir les options de compilation suivantes dans votre <code>tsconfig.json</code> :<ol><li><code>dom</code> doit figurer dans <a href="https://www.typescriptlang.org/tsconfig/#lib"><code>lib</code></a> (Notez que si aucune option <code>lib</code> n'est précisée, <code>dom</code> est inclus par défaut).<li><a href="https://www.typescriptlang.org/tsconfig/#jsx"><code>jsx</code></a> doit être défini avec une valeur valide. La plupart des applications utiliseront sans doute <code>preserve</code>. Si vous travaillez sur une bibliothèque, consultez <a href="https://www.typescriptlang.org/tsconfig/#jsx">la documentation de <code>jsx</code></a> pour savoir quelle valeur choisir.</ol></section></section><section class="level2"aria-labelledby="typescript-pour-les-composants-react-typescript-with-react-components"><h2 id="typescript-pour-les-composants-react-typescript-with-react-components">TypeScript pour les composants React {/<em>typescript-with-react-components</em>/}</h2><note><p>Tout fichier contenant du JSX doit utiliser l'extension de fichier <code>.tsx</code>. Il s'agit d'une extension spécifique à TypeScript qui lui indique que le fichier contient du JSX.</p></note><p>Écrire du code React en TypeScript est très similaire à son écriture en JavaScript. La différence principale lorsque vous travaillez sur un composant tient à ce que vous pouvez fournir les types de ses propriétés. Ces types peuvent être utilisés pour vérifier une utilisation correcte et pour fournir une documentation à la volée dans les éditeurs.<p>Si on reprend le <a href="/learn#components">composant <code>MyButton</code></a> du guide de <a href="/learn">démarrage rapide</a>, nous pouvons ajouter un type qui décrit le <code>title</code> du bouton :</p><sandpack><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyButton</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> title <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> # <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">Bienvenue dans mon appli</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">MyButton</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Je suis un bouton<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">AppTSX</span></span> <span class="token keyword module">from</span> <span class="token string">"./App.tsx"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">App</span> <span class="token operator">=</span> <span class="token maybe-class-name">AppTSX</span><span class="token punctuation">;</span></code></pre></sandpack><note><p>Les bacs à sable de cette documentation comprennent le code TypeScript, mais n'exécutent pas la vérification de types. Ça signifie que vous pouvez modifier les bacs à sable TypeScript pour apprendre, mais vous ne verrez aucune erreur ni aucun avertissement liés au typage. Pour bénéficier de la vérification de types, vous pouvez utiliser le <a href="https://www.typescriptlang.org/play"><em>TypeScript Playground</em></a> ou un bac à sable en ligne aux fonctionnalités plus riches.</p></note><p>Cette syntaxe en ligne est la façon la plus rapide de fournir des types pour un composant, mais dès que vous commencer à avoir un certain nombre de props à décrire, elle devient difficile à lire. Utilisez plutôt une <code>interface</code> ou un <code>type</code> pour décrire les props du composant :</p><sandpack><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">MyButtonProps</span></span> <span class="token punctuation">{</span>
  <span class="token comment">/** Le texte à afficher dans le bouton */</span>
  # <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token comment">/** Indique si on peut interagir avec le bouton */</span>
  disabled<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyButton</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token punctuation">,</span> disabled <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token maybe-class-name">MyButtonProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>disabled<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">Bienvenue dans mon appli</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">MyButton</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Je suis un bouton inactif<span class="token punctuation">"</span></span> <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span><span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">AppTSX</span></span> <span class="token keyword module">from</span> <span class="token string">"./App.tsx"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">App</span> <span class="token operator">=</span> <span class="token maybe-class-name">AppTSX</span><span class="token punctuation">;</span></code></pre></sandpack><p>Le type qui décrit les props de votre composant peut être aussi simple ou complexe que nécessaire, mais ce sera toujours un type objet utilisant soit <code>type</code> soit <code>interface</code>. Vous pouvez apprendre à décrire des objets en TypeScript avec les <a href="https://www.typescriptlang.org/docs/handbook/2/objects.html">types objets</a>, vous trouverez sûrement les <a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#union-types">types unions</a> pratiques pour décrire des propriétés pouvant avoir plusieurs types, et le guide <a href="https://www.typescriptlang.org/docs/handbook/2/types-from-types.html">Créer des types à partir d'autres types</a> vous aidera pour les cas plus avancés. <em>(Tous ces liens pointent vers la documentation TypeScript qui n'a pas de version française, NdT)</em></section><section class="level2"aria-labelledby="exemples-de-typage-avec-les-hooks-example-hooks"><h2 id="exemples-de-typage-avec-les-hooks-example-hooks">Exemples de typage avec les Hooks {/<em>example-hooks</em>/}</h2><p>Les définitions de types dans <code>@types/react</code> incluent le typage des Hooks fournis par React, que vous pouvez donc utiliser sans configuration supplémentaire. Ces types sont conçus pour s'appuyer sur le code que vous écrivez, vous bénéficierez donc la plupart du temps de <a href="https://www.typescriptlang.org/docs/handbook/type-inference.html">l'inférence de type</a>, de sorte que vous ne devriez pas avoir à leur fournir des types sur-mesure.<p>Ceci étant dit, voyons quelques exemples de fourniture explicite de types à des Hooks.<section class="level3"aria-labelledby="usestate-typing-usestate"><h3 id="usestate-typing-usestate"><code>useState</code> {/<em>typing-usestate</em>/}</h3><p>Le <a href="/reference/react/useState">Hook <code>useState</code></a> réutilise la valeur initiale que vous lui passez pour déterminer le type attendu pour la variable d'état. Par exemple, le code suivant :<pre class="language-ts"><code class="language-ts"><span class="token comment">// Infère le type "boolean"</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>enabled<span class="token punctuation">,</span> setEnabled<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>…attribuera le type <code>boolean</code> à <code>enabled</code>, et <code>setEnabled</code> sera une fonction acceptant soit un argument <code>boolean</code>, soit une fonction de mise à jour qui accepte et renvoie un <code>boolean</code>. Si vous souhaitez typer l'état explicitement, vous pouvez passer un paramètre de type à l'appel <code>useState</code> :<pre class="language-ts"><code class="language-ts"><span class="token comment">// Typage explicite à "boolean"</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>enabled<span class="token punctuation">,</span> setEnabled<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token builtin">boolean</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Dans ce cas précis ça n'avait guère d'intérêt, mais pour une union par exemple, vous aurez besoin d'un typage explicite. Par exemple, le <code>status</code> ci-dessous a un jeu de valeurs restreint :<pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Status</span></span> <span class="token operator">=</span> <span class="token string">"idle"</span> <span class="token operator">|</span> <span class="token string">"loading"</span> <span class="token operator">|</span> <span class="token string">"success"</span> <span class="token operator">|</span> <span class="token string">"error"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>status<span class="token punctuation">,</span> setStatus<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Status</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">"idle"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Ou alors, comme conseillé dans <a href="/learn/choosing-the-state-structure#principles-for-structuring-state">Principes de structuration d’état</a>, vous pouvez grouper des éléments d'état étroitement liés dans un objet et en décrire les différentes configurations <em>via</em> une union discriminante :<pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">RequestState</span></span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'idle'</span> <span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'loading'</span> <span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span> error<span class="token operator">:</span> <span class="token known-class-name class-name">Error</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>requestState<span class="token punctuation">,</span> setRequestState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">RequestState</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'idle'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section class="level3"aria-labelledby="usereducer-typing-usereducer"><h3 id="usereducer-typing-usereducer"><code>useReducer</code> {/<em>typing-usereducer</em>/}</h3><p>Le <a href="/reference/react/useReducer">Hook <code>useReducer</code></a> est un Hook plus complexe qui prend une fonction de réduction et un état initial. Les types de la fonction de réduction sont inférés sur base de l'état initial. Vous pouvez choisir de spécifier un paramètre de type à l'appel <code>useReducer</code> pour typer cet état, mais il est généralement préférable de typer l'état initial directement :</p><sandpack><pre class="language-tsx"><code class="language-tsx"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>useReducer<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">State</span></span> <span class="token punctuation">{</span>
   count<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">CounterAction</span></span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"reset"</span> <span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"setCount"</span><span class="token punctuation">;</span> value<span class="token operator">:</span> <span class="token maybe-class-name">State</span><span class="token punctuation">[</span><span class="token string">"count"</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>

<span class="token keyword">const</span> initialState<span class="token operator">:</span> <span class="token maybe-class-name">State</span> <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">stateReducer</span><span class="token punctuation">(</span>state<span class="token operator">:</span> <span class="token maybe-class-name">State</span><span class="token punctuation">,</span> action<span class="token operator">:</span> <span class="token maybe-class-name">CounterAction</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">State</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">"reset"</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> initialState<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"setCount"</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> <span class="token spread operator">...</span>state<span class="token punctuation">,</span> count<span class="token operator">:</span> action<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword module">default</span><span class="token operator">:</span>
      <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Error</span></span><span class="token punctuation">(</span><span class="token string">"Unknown action"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>stateReducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">addFive</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"setCount"</span><span class="token punctuation">,</span> value<span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">count</span> <span class="token operator">+</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">reset</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"reset"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">Bienvenue dans mon compteur</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">

      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Compteur : </span><span class="token punctuation">{</span>state<span class="token punctuation">.</span><span class="token property-access">count</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>addFive<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">Ajouter 5</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>reset<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">Réinitialiser</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">AppTSX</span></span> <span class="token keyword module">from</span> <span class="token string">"./App.tsx"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">App</span> <span class="token operator">=</span> <span class="token maybe-class-name">AppTSX</span><span class="token punctuation">;</span></code></pre></sandpack><p>Nous utilisons ici TypeScript à certains endroits stratégiques :<ul><li><code>interface State</code> décrit la forme de l'état pour notre réducteur.<li><code>type CounterAction</code> décrit les différentes actions susceptibles d'être <em>dispatchées</em> auprès du réducteur.<li><code>const initialState: State</code> fournit un type pour l'état initial, qui est aussi le type qu'utilisera <code>useReducer</code> par défaut.<li><code>stateReducer(state: State, action: CounterAction): State</code> définit les types des arguments et de la valeur de retour pour la fonction de réduction.</ul><p>Pour un style plus explicite, vous pouvez plutôt définir le type d'<code>initialState</code> en passant un paramètre de type à <code>useReducer</code> :<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> stateReducer<span class="token punctuation">,</span> <span class="token maybe-class-name">State</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./your-reducer-implementation'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useReducer</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">State</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>stateReducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="usecontext-typing-usecontext"><h3 id="usecontext-typing-usecontext"><code>useContext</code> {/<em>typing-usecontext</em>/}</h3><p>Le <a href="/reference/react/useContext">Hook <code>useContext</code></a> permet de diffuser des données à travers l'arbre de composants sans avoir à les faire percoler explicitement <em>via</em> chaque niveau intermédiaire. On l'utilise pour créer un composant fournisseur, en définissant le plus souvent un Hook dédié pour en consommer la valeur dans un composant descendant.<p>Le type de la valeur fournie par le contexte est inféré à partir de la valeur passée à l'appel <code>createContext</code> :</p><sandpack><pre class="language-tsx"><code class="language-tsx"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> useContext<span class="token punctuation">,</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Theme</span></span> <span class="token operator">=</span> <span class="token string">"light"</span> <span class="token operator">|</span> <span class="token string">"dark"</span> <span class="token operator">|</span> <span class="token string">"system"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">ThemeContext</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createContext</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Theme</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">"system"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">useGetTheme</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">useContext</span><span class="token punctuation">(</span><span class="token maybe-class-name">ThemeContext</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>theme<span class="token punctuation">,</span> setTheme<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Theme</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">'light'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">ThemeContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">MyComponent</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span><span class="token class-name">ThemeContext.Provider</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token function">useGetTheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Thème actif : </span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">AppTSX</span></span> <span class="token keyword module">from</span> <span class="token string">"./App.tsx"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">App</span> <span class="token operator">=</span> <span class="token maybe-class-name">AppTSX</span><span class="token punctuation">;</span></code></pre></sandpack><p>Cette technique fonctionne lorsque vous avez une valeur par défaut pertinente — mais il arrive que ça ne soit pas le cas, et que vous utilisiez alors <code>null</code> comme valeur par défaut. Le souci, c'est que pour satisfaire le système de typage, vous allez devoir explicitement passer à <code>createContext</code> un paramètre de type <code>ContextShape | null</code>.<p>Ça va complexifier votre code en vous forçant à éliminer le <code>| null</code> du type pour les consommateurs du contexte. Nous vous conseillons d'incorporer un <em>type guard</em> au sein de votre Hook personnalisé pour vérifier que la valeur existe bien, et lever une exception dans le cas contraire :<pre class="language-tsx"><code class="language-tsx"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> useContext<span class="token punctuation">,</span> useState<span class="token punctuation">,</span> useMemo <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token comment">// C'est un exemple simplifié, imaginez quelque chose de plus riche</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">ComplexObject</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  kind<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Le contexte est créé avec `| null` dans son type, pour autoriser</span>
<span class="token comment">// la valeur par défaut.</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">Context</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createContext</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">ComplexObject</span> <span class="token operator">|</span> <span class="token keyword null nil">null</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Le `| null` sera retiré grâce à une vérification au sein du Hook.</span>
<span class="token keyword">const</span> <span class="token function-variable function">useGetComplexObject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span><span class="token maybe-class-name">Context</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>object<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Error</span></span><span class="token punctuation">(</span><span class="token string">"useGetComplexObject must be used within a Provider"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> object<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyApp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> kind<span class="token operator">:</span> <span class="token string">"complex"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">Context.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>object<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">MyComponent</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span><span class="token class-name">Context.Provider</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token function">useGetComplexObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Objet courant : </span><span class="token punctuation">{</span>object<span class="token punctuation">.</span><span class="token property-access">kind</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="usememo-typing-usememo"><h3 id="usememo-typing-usememo"><code>useMemo</code> {/<em>typing-usememo</em>/}</h3><p>Le <a href="/reference/react/useMemo">Hook <code>useMemo</code></a> mémoïse les valeurs renvoyées par une fonction, pour ne re-exécuter celle-ci que si les dépendances passées en deuxième paramètre ont changé. Le type du résultat de l'appel au Hook est inféré sur base de la valeur de retour de la fonction passée en premier argument. Vous pouvez choisir de passer un paramètre de type explicitement.<pre class="language-ts"><code class="language-ts"><span class="token comment">// Le type de `visibleTodos` est inféré à partir du type du résultat</span>
<span class="token comment">// de `filterTodos`</span>
<span class="token keyword">const</span> visibleTodos <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">filterTodos</span><span class="token punctuation">(</span>todos<span class="token punctuation">,</span> tab<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>todos<span class="token punctuation">,</span> tab<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section class="level3"aria-labelledby="usecallback-typing-usecallback"><h3 id="usecallback-typing-usecallback"><code>useCallback</code> {/<em>typing-usecallback</em>/}</h3><p>Le <a href="/reference/react/useCallback">Hook <code>useCallback</code></a> fournit une référence stable à une fonction tant que les dépendances passées en deuxième argument ne changent pas. De façon similaire à <code>useMemo</code>, le type de la fonction est inféré sur base du type de la fonction passée en premier argument, et vous pouvez passer un paramètre de type explicite si vous le souhaitez.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> handleClick <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>todos<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Lorsque vous utilisez le mode strict de TypeScript, <code>useCallback</code> exigera le typage détaillé de la fonction que vous lui passez, notamment pour ses arguments. Selon vos préférences stylistiques, vous pourrez le faire soit avec un typage classique de signature, soit avec un paramètre de type passé au Hook, en exploitant les fonctions <code>*EventHandler</code> fournies par les définitions de types de React, comme ceci :<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useCallback <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Form</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">"Change me"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> handleChange <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useCallback</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ChangeEventHandler</span></span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">HTMLInputElement</span><span class="token operator">>></span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setValue</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">currentTarget</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>setValue<span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>input value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>p<span class="token operator">></span><span class="token maybe-class-name">Valeur </span><span class="token operator">:</span> <span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section></section><section class="level2"aria-labelledby="types-utiles-useful-types"><h2 id="types-utiles-useful-types">Types utiles {/<em>useful-types</em>/}</h2><p>Le module <code>@types/react</code> fournit un vaste ensemble de types ; une fois que vous serez à l'aise avec l'utilisation combinée de React et TypeScript, ça vaut le coup d'explorer son contenu. Vous le trouverez dans <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/index.d.ts">le dossier de React sur DefinitelyTyped</a>. Nous allons passer ici en revue les types les plus courants.<section class="level3"aria-labelledby="événements-dom-typing-dom-events"><h3 id="événements-dom-typing-dom-events">Événements DOM {/<em>typing-dom-events</em>/}</h3><p>Lorsque vous travaillez avec des événements DOM en React, le type de l'événement peut souvent être inféré sur base du gestionnaire d'événement. Cependant, si vous souhaitez extraire la fonction qui sera passée comme gestionnaire, vous devrez typer l'événement explicitement.</p><sandpack><pre class="language-tsx"><code class="language-tsx"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Form</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">"Modifiez-moi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleChange</span><span class="token punctuation">(</span>event<span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ChangeEvent</span></span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">HTMLInputElement</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setValue</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">currentTarget</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>input</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Valeur : </span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">AppTSX</span></span> <span class="token keyword module">from</span> <span class="token string">"./App.tsx"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">App</span> <span class="token operator">=</span> <span class="token maybe-class-name">AppTSX</span><span class="token punctuation">;</span></code></pre></sandpack><p>Les types React fournissent de nombreux types d'événements : la liste complète est <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/b580df54c0819ec9df62b0835a315dd48b8594a9/types/react/index.d.ts#L1247C1-L1373">ici</a>, elle reprend la <a href="https://developer.mozilla.org/fr/docs/Web/Events">majorité des événements courants du DOM</a>.<p>Pour déterminer le type dont vous avez besoin, vous pouvez commencer par regarder l'infobulle au survol du gestionnaire que vous utilisez : elle affichera le type de l'événement.<p>Si vous avez besoin d'un type d'événement qui ne figure pas dans la liste, vous pouvez utiliser le type <code>React.SyntheticEvent</code>, qui est le type de base pour tous les autres.</section><section class="level3"aria-labelledby="enfants-typing-children"><h3 id="enfants-typing-children">Enfants {/<em>typing-children</em>/}</h3><p>Il y a deux façons courantes de décrire les enfants d'un composant. La première consiste à utiliser le type <code>React.ReactNode</code>, qui est une union de tous les types d'enfants possibles dans JSX :<pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">ModalRendererProps</span></span> <span class="token punctuation">{</span>
  # <span class="token builtin">string</span><span class="token punctuation">;</span>
  children<span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ReactNode</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>C'est là une définition très large pour les enfants. La seconde utilise plutôt le type <code>React.ReactElement</code>, qui ne permet que les éléments JSX et pas les nœuds primitifs tels que les chaînes de caractères ou les nombres :<pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">ModalRendererProps</span></span> <span class="token punctuation">{</span>
  # <span class="token builtin">string</span><span class="token punctuation">;</span>
  children<span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ReactElement</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Notez que vous ne pouvez pas utiliser TypeScript pour retreindre le type de vos enfants à certains éléments JSX spécifiques, vous ne pouvez donc pas vous appuyer sur le système de typage pour indiquer qu'un composant n'accepterait par exemple que des enfants <code>&#x3C;li></code>.<p>Vous trouverez un exemple complet avec <code>React.ReactNode</code> et <code>React.ReactElement</code> et la vérification de types activée dans <a href="https://www.typescriptlang.org/play?#code/JYWwDg9gTgLgBAJQKYEMDG8BmUIjgIilQ3wChSB6CxYmAOmXRgDkIATJOdNJMGAZzgwAFpxAR+8YADswAVwGkZMJFEzpOjDKw4AFHGEEBvUnDhphwADZsi0gFw0mDWjqQBuUgF9yaCNMlENzgAXjgACjADfkctFnYkfQhDAEpQgD44AB42YAA3dKMo5P46C2tbJGkvLIpcgt9-QLi3AEEwMFCItJDMrPTTbIQ3dKywdIB5aU4kKyQQKpha8drhhIGzLLWODbNs3b3s8YAxKBQAcwXpAThMaGWDvbH0gFloGbmrgQfBzYpd1YjQZbEYARkB6zMwO2SHSAAlZlYIBCdtCRkZpHIrFYahQYQD8UYYFA5EhcfjyGYqHAXnJAsIUHlOOUbHYhMIIHJzsI0Qk4P9SLUBuRqXEXEwAKKfRZcNA8PiCfxWACecAAUgBlAAacFm80W-CU11U6h4TgwUv11yShjgJjMLMqDnN9Dilq+nh8pD8AXgCHdMrCkWisVoAet0R6fXqhWKhjKllZVVxMcavpd4Zg7U6Qaj+2hmdG4zeRF10uu-Aeq0LBfLMEe-V+T2L7zLVu+FBWLdLeq+lc7DYFf39deFVOotMCACNOCh1dq219a+30uC8YWoZsRyuEdjkevR8uvoVMdjyTWt4WiSSydXD4NqZP4AymeZE072ZzuUeZQKheQgA">ce bac à sable TypeScript</a>.</section><section class="level3"aria-labelledby="props-de-style-typing-style-props"><h3 id="props-de-style-typing-style-props">Props de style {/<em>typing-style-props</em>/}</h3><p>Lorsque vous utilisez des styles en ligne dans React, vous pouvez utiliser <code>React.CSSProperties</code> pour typer l'objet passé à la prop <code>style</code>. Ce type regroupe toutes les propriétés CSS possibles, c'est une bonne façon de vous assurer que vous ne passez que de propriétés CSS valides à votre prop <code>style</code>, et d'obtenir une complétion automatique dans votre éditeur.<pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">MyComponentProps</span></span> <span class="token punctuation">{</span>
  style<span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">CSSProperties</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section></section><section class="level2"aria-labelledby="aller-plus-loin-further-learning"><h2 id="aller-plus-loin-further-learning">Aller plus loin {/<em>further-learning</em>/}</h2><p>Ce guide a couvert les bases de l'utilisation de TypeScript avec React, mais il reste beaucoup à apprendre. Les pages dédiées de la documentation pour chaque API fournissent davantage d'information sur leur utilisation avec TypeScript.<p>Nous vous conseillons les ressources suivantes <em>(toutes en anglais, NdT)</em> :<ul><li><p><a href="https://www.typescriptlang.org/docs/handbook/">Le handbook TypeScript</a> est la documentation officielle du langage et couvre tous les aspects importants.<li><p><a href="https://devblogs.microsoft.com/typescript/">Les notes de versions de TypeScript</a> présentent chaque nouvelle fonctionnalité en détails.<li><p><a href="https://react-typescript-cheatsheet.netlify.app/">L'antisèche React TypeScript</a> est une antisèche synthétique maintenue par la communauté pour utiliser TypeScript avec React, qui couvre pas mal de cas à la marge et aborde plus de sujets que cette page.<li><p><a href="https://discord.com/invite/typescript">Le forum communautaire Discord de TypeScript</a> est un super endroit où poser vos questions et obtenir de l'aide pour vos problèmes liés à TypeScript avec React. <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></ul></section></section>