<!doctypehtml><html lang="fr"><meta charset="utf-8"><title>Ajouter React à un site web</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css"><section id="ajouter-react-à-un-site-web"class="level1"><h1>Ajouter React à un site web</h1><p>Utiliser React en fonction de vos besoins<p>React a été conçu dès le départ pour une adoption progressive, et <strong>vous pouvez utiliser React <em>a minima</em> ou autant que nécessaire.</strong> Peut-être souhaitez-vous juste ajouter un peu d'interactivité à une page existante. Les composants React sont une bonne solution pour ça.<p>La majorité des sites web ne sont pas, et n'ont pas besoin d'être, des applications web monopages <em>(Single-Page Application ou plus simplement SPA, NdT)</em>. <strong>Avec juste quelques lignes de code et sans outillage particulier</strong>, vous pouvez essayer React sur une petite partie de votre site web. Vous pourrez par la suite ajouter des composants supplémentaires ou limiter React à quelques éléments dynamiques.<ul><li><a href="#add-react-in-one-minute">Ajouter React en une minute</a><li><a href="#optional-try-react-with-jsx">Optionnel : Essayer React avec JSX</a> (aucun <em>bundler</em> nécessaire !)</ul><section id="add-react-in-one-minute"class="level2"><h2>Ajouter React en une minute</h2><p>Dans cette partie, nous allons voir comment ajouter un composant React à une page HTML existante. Vous pouvez suivre les étapes avec votre propre site web, ou avec une page HTML vide pour vous entraîner.<p>Pas besoin d'outils compliqués ni de faire des installations : <strong>pour suivre cette section, vous avez juste besoin d'une connexion à internet et d'une minute de votre temps.</strong><p>Optionnel : <a href="https://gist.github.com/gaearon/6668a1f6986742109c00a581ce704605/archive/f6c882b6ae18bde42dcf6fdb751aae93495a2275.zip">Télécharger l'exemple complet (2 Ko zippé)</a><section id="step-1-add-a-dom-container-to-the-html"class="level3"><h3>Étape 1 : ajouter un conteneur DOM à votre HTML</h3><p>Pour commencer, ouvrez la page HTML que vous souhaitez modifier. Ajoutez une balise <code>&#x3C;div></code> vide pour indiquer l'endroit dans lequel vous souhaitez afficher quelque chose avec React. Par exemple :<pre class="language-html{3}"><code class="language-html{3}">&#x3C;!-- ... code HTML existant ... -->

&#x3C;div id="like_button_container">&#x3C;/div>

&#x3C;!-- ... code HTML existant ... --></code></pre><p>L'attribut <code>id</code> de votre <code>&#x3C;div></code>, qui est unique, va vous permettre de manipuler cette balise depuis le code JavaScript afin d'afficher un composant React dans celle-ci.<blockquote><p>Astuce<p>Vous pouvez placer une telle <code>&#x3C;div></code> « conteneur » <strong>où vous le souhaitez</strong> dans la balise <code>&#x3C;body></code>. Vous pouvez d’ailleurs avoir autant de conteneurs DOM indépendants que vous le souhaitez dans la même page. Il sont généralement vides, car React remplacera leur contenu existant de toutes façons.</blockquote></section><section id="step-2-add-the-script-tags"class="level3"><h3>Étape 2 : ajouter les balises de script</h3><p>Ensuite, ajoutez trois balises <code>&#x3C;script></code> à votre page HTML, juste avant la fermeture de la balise <code>&#x3C;/body></code> :<pre class="language-html{6,7,10}"><code class="language-html{6,7,10}">  &#x3C;!-- ... autres contenus HTML ... -->

  &#x3C;!-- Charge React -->
  &#x3C;!-- Remarque : pour le déploiement, remplacez "development.js"
       par "production.min.js" -->
  &#x3C;script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin>&#x3C;/script>
  &#x3C;script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin>&#x3C;/script>

  &#x3C;!-- Charge notre composant React -->
  &#x3C;script src="like_button.js">&#x3C;/script>
&#x3C;/body></code></pre><p>Les deux premières balises permettent de charger React, alors que la troisième charge le code de votre composant.</section><section id="step-3-create-a-react-component"class="level3"><h3>Étape 3 : créer un composant React</h3><p>Créez un fichier nommé <code>like_button.js</code> dans le même dossier que votre page HTML.<p>Ouvrez et copiez <strong><a href="https://gist.github.com/gaearon/0b180827c190fe4fd98b4c7f570ea4a8/raw/b9157ce933c79a4559d2aa9ff3372668cce48de7/LikeButton.js">le code de démarrage</a></strong> et collez son contenu dans votre fichier.<blockquote><p>Astuce<p>Ce code définit un composant appelé <code>LikeButton</code>. Ne vous en faites pas si vous ne comprenez pas son code tout de suite, nous aborderons les facettes de React ultérieurement dans notre <a href="/tutorial/tutorial.html">tutoriel pratique</a> et dans le <a href="./hello-world.html">guide des fondamentaux</a>. Pour le moment, essayons simplement de l'afficher à l’écran !</blockquote><p>Ajoutez deux lignes à la fin de <code>like_button.js</code>, après <strong><a href="https://gist.github.com/gaearon/0b180827c190fe4fd98b4c7f570ea4a8/raw/b9157ce933c79a4559d2aa9ff3372668cce48de7/LikeButton.js">le code de démarrage</a></strong> :<pre class="language-js{3,4}"><code class="language-js{3,4}">// ... le code de démarrage que vous avez collé ...

const domContainer = document.querySelector('#like_button_container');
ReactDOM.render(e(LikeButton), domContainer);</code></pre><p>Ces deux lignes de code vont remplacer le contenu de la <code>&#x3C;div></code> que nous avons ajoutée dans la première étape. Ainsi elles afficheront notre composant React sous forme de bouton « J’aime ».</section><section id="thats-it"class="level3"><h3>Et voilà !</h3><p>Il n'y a pas de quatrième étape. <strong>Vous venez tout juste d'ajouter votre premier composant React à votre site web.</strong><p>Pour plus d'astuces concernant l'intégration de React, n'hésitez pas à consulter les prochaines sections.<p><strong><a href="https://gist.github.com/gaearon/6668a1f6986742109c00a581ce704605">Voir le code source intégral de l'exemple</a></strong><p><strong><a href="https://gist.github.com/gaearon/6668a1f6986742109c00a581ce704605/archive/f6c882b6ae18bde42dcf6fdb751aae93495a2275.zip">Télécharger le code source intégral de l'exemple (2 Ko zippé)</a></strong></section><section id="tip-reuse-a-component"class="level3"><h3>Astuce : réutiliser un composant</h3><p>Généralement, on souhaite afficher des composants React à plusieurs endroits d'une page HTML. Voici un exemple qui affiche le bouton « J’aime » à trois reprises et lui fournit quelques données :<p><a href="https://gist.github.com/gaearon/faa67b76a6c47adbab04f739cba7ceda">Voir le code source intégral de l'exemple</a><p><a href="https://gist.github.com/gaearon/faa67b76a6c47adbab04f739cba7ceda/archive/9d0dd0ee941fea05fd1357502e5aa348abb84c12.zip">Télécharger le code source intégral de l'exemple (2 Ko zippé)</a><blockquote><p>Remarque<p>Cette solution est souvent utilisée lorsque les éléments de React doivent être isolés les uns des autres. Il est cependant plus facile d'utiliser le principe de <a href="./components-and-props.html#composing-components">composition de composants</a> au sein de votre code React.</blockquote></section><section id="tip-minify-javascript-for-production"class="level3"><h3>Astuce : minifier votre JavaScript pour la production</h3><p>Avant de déployer votre site web en production, gardez à l'esprit qu'un JavaScript non-minifié risque de ralentir significativement le chargement de la page pour vos utilisateurs.<p>Si vous minifiez déjà vos scripts applicatifs et si vous vous assurez de référencer les versions de React dont les noms se terminent en <code>production.min.js</code>, <strong>votre site sera prêt pour la production</strong> :<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>script src<span class="token operator">=</span><span class="token string">"https://unpkg.com/react@16/umd/react.production.min.js"</span> crossorigin<span class="token operator">></span><span class="token operator">&#x3C;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&#x3C;</span>script src<span class="token operator">=</span><span class="token string">"https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"</span> crossorigin<span class="token operator">></span><span class="token operator">&#x3C;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre><p>Si vous n'avez pas de minification déjà en place pour vos scripts, voici <a href="https://gist.github.com/gaearon/42a2ffa41b8319948f9be4076286e1f3">une façon de faire</a>.</section></section><section id="optional-try-react-with-jsx"class="level2"><h2>Optionnel : essayer React avec JSX</h2><p>Dans les exemples ci-dessus, nous utilisions uniquement les fonctionnalités prises en charge nativement par les navigateurs. C'est pourquoi nous appelions une fonction JavaScript pour indiquer à React ce qu'il fallait afficher :<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> e <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access">createElement</span><span class="token punctuation">;</span>

<span class="token comment">// Affiche un bouton « J’aime »</span>
<span class="token keyword control-flow">return</span> <span class="token function">e</span><span class="token punctuation">(</span>
  <span class="token string">'button'</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">liked</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'J’aime'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Néanmoins, React nous offre aussi la possibilité d'utiliser plutôt <a href="./introducing-jsx.html">JSX</a>.<pre class="language-js"><code class="language-js"><span class="token comment">// Affiche un bouton « J’aime »</span>
<span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
  <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">liked</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
    <span class="token constant">J</span>’aime
  <span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Ces deux extraits de code sont équivalents. Même si la syntaxe <strong>JSX est <a href="./react-without-jsx.html">complètement optionnelle</a></strong>, la plupart des développeur·euse·s React la trouvent très pratique pour écrire du code (avec React ou même avec d'autres bibliothèques).<p>Vous pouvez tester JSX en utilisant un <a href="https://babeljs.io/en/repl#?babili=false&#x26;browsers=&#x26;build=&#x26;builtIns=false&#x26;spec=false&#x26;loose=false&#x26;code_lz=DwIwrgLhD2B2AEcDCAbAlgYwNYF4DeAFAJTw4B88EAFmgM4B0tAphAMoQCGETBe86WJgBMAXJQBOYJvAC-RGWQBQ8FfAAyaQYuAB6cFDhkgA&#x26;debug=false&#x26;forceAllTransforms=false&#x26;shippedProposals=false&#x26;circleciRepo=&#x26;evaluate=false&#x26;fileSize=false&#x26;timeTravel=false&#x26;sourceType=module&#x26;lineWrap=true&#x26;presets=es2015%2Creact%2Cstage-2&#x26;prettier=false&#x26;targets=&#x26;version=7.4.3">convertisseur en ligne</a>.<section id="quickly-try-jsx"class="level3"><h3>Essayer JSX en un clin d’œil</h3><p>La façon la plus simple et rapide de tester JSX dans votre projet est d'ajouter la balise <code>&#x3C;script></code> ci-dessous à votre page :<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/babel-standalone@6/babel.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>Vous pouvez désormais utiliser JSX dans les fichiers chargés par n'importe quelle balise <code>&#x3C;script></code> simplement en lui ajoutant l'attribut <code>type="text/babel"</code>. Vous pouvez télécharger et tester cet exemple contenant un <a href="https://raw.githubusercontent.com/reactjs/reactjs.org/master/static/html/single-file-example.html">fichier HTML utilisant JSX</a>.<p>Cette approche est acceptable pour se former ou réaliser des démos simples. Cependant, elle va ralentir l'affichage de votre site, elle n'est donc <strong>pas adaptée pour la production</strong>. Lorsque vous serez prêt·e à aller plus loin, supprimez la balise <code>&#x3C;script></code> et l'attribut <code>type="text/babel"</code> que vous venez d'ajouter. Dans la section suivante, nous verrons plutôt comment configurer le préprocesseur JSX afin de convertir automatiquement toutes les balises <code>&#x3C;script></code>.</section><section id="add-jsx-to-a-project"class="level3"><h3>Ajouter JSX à votre projet</h3><p>L'ajout de JSX à votre projet ne nécessite pas d'outils compliqués comme un <em>bundler</em> ou un serveur de développement. Cela ressemble plus <strong>à l'ajout d'un préprocesseur CSS</strong>. Le seul outil indispensable est <a href="https://nodejs.org/fr/">Node.js</a>, qui doit être installé sur votre ordinateur.<p>Dans un terminal (invite de commande), déplacez-vous dans le dossier de votre projet, et copiez-collez ces deux commandes :<ol><li><strong>Étape 1 :</strong> exécutez <code>npm init -y</code> (si ça ne fonctionne pas, <a href="https://gist.github.com/gaearon/246f6380610e262f8a648e3e51cad40d">voici un correctif</a>)<li><strong>Étape 2 :</strong> exécutez <code>npm install babel-cli@6 babel-preset-react-app@3</code></ol><blockquote><p>Astuce<p>Nous <strong>utilisons npm uniquement pour installer le préprocesseur JSX</strong> (vous n'en aurez besoin pour rien d'autre). React et le code applicatif peuvent rester sous la forme de balises <code>&#x3C;script></code> sans modification.</blockquote><p>Bravo ! Vous venez d'ajouter <strong>une configuration JSX de production</strong> à votre projet.</section><section id="run-jsx-preprocessor"class="level3"><h3>Lancer le préprocesseur JSX</h3><p>Créez un dossier nommé <code>src</code> et lancez la commande suivante dans le terminal :<pre class="language-text"><code class="language-text">npx babel --watch src --out-dir . --presets react-app/prod</code></pre><blockquote><p>Remarque<p><code>npx</code> n'est pas une faute de frappe, il s'agit d'un <a href="https://medium.com/@maybekatz/introducing-npx-an-npm-package-runner-55f7d4bd282b">outil d’exécution de paquet fourni avec npm 5.2+</a> <em>(”package runner tool”, NdT)</em>.<p>Si le message d'erreur <em>”You have mistakenly installed the <code>babel</code> package”</em> apparaît, vous avez peut-être loupé <a href="#add-jsx-to-a-project">l'étape précédente</a>. Dans le même dossier, recommencez l'opération et essayez de nouveau.</blockquote><p>Cette commande surveille votre JSX en continu, inutile donc d’attendre qu’elle se termine.<p>Dorénavant, si à partir du <strong><a href="https://gist.github.com/gaearon/c8e112dc74ac44aac4f673f2c39d19d1/raw/09b951c86c1bf1116af741fa4664511f2f179f0a/like_button.js">code de démarrage JSX</a></strong>, vous créez un fichier nommé <code>src/like_button.js</code>, le préprocesseur va produire un fichier traduit <code>like_button.js</code>, avec du code JavaScript exploitable par le navigateur. Ce fichier sera mis à jour à chaque modification de votre fichier JSX original.<p>Et en bonus, ça vous permet aussi d’utiliser des syntaxes JavaScript modernes comme les classes, sans vous soucier de la compatibilité avec d'anciens navigateurs. L'outil que nous venons d’utiliser se nomme Babel, et vous pouvez en savoir plus sur lui en allant sur <a href="https://babeljs.io/docs/en/babel-cli/">sa documentation</a>.<p>Si vous vous sentez à l'aise avec les outils de compilation et souhaitez en apprendre plus, la <a href="./create-a-new-react-app.html">partie suivante</a> décrit les outils les plus populaires et les plus accessibles de la chaine de compilation. Si ce n'est pas le cas, les balises décrites précédemment fonctionneront à merveille ! <span style="float:footnote"><a href="./index.html#toc">Go to TOC</a></span></section></section></section>