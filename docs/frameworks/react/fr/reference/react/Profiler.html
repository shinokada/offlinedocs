<!doctype html><html lang="fr"><meta charset="utf-8"><title>&#x3C;Profiler></title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="profiler"><h1 id="profiler"><profiler></profiler></h1><intro><p><code>&#x3C;Profiler></code> lets you measure rendering performance of a React tree programmatically.<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Profiler</span> id<span class="token operator">=</span><span class="token string">"App"</span> onRender<span class="token operator">=</span><span class="token punctuation">{</span>onRender<span class="token punctuation">}</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">App</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Profiler</span><span class="token operator">></span></code></pre></intro><inlinetoc><section class="level2"aria-labelledby="reference-reference"><h2 id="reference-reference">Reference {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="profiler-profiler"><h3 id="profiler-profiler"><code>&#x3C;Profiler></code> {/<em>profiler</em>/}</h3><p>Wrap a component tree in a <code>&#x3C;Profiler></code> to measure its rendering performance.<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Profiler</span> id<span class="token operator">=</span><span class="token string">"App"</span> onRender<span class="token operator">=</span><span class="token punctuation">{</span>onRender<span class="token punctuation">}</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">App</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Profiler</span><span class="token operator">></span></code></pre><section class="level4"aria-labelledby="props-props"><h4 id="props-props">Props {/<em>props</em>/}</h4><ul><li><code>id</code>: A string identifying the part of the UI you are measuring.<li><code>onRender</code>: An <a href="#onrender-callback"><code>onRender</code> callback</a> that React calls it every time components within the profiled tree update. It receives information about what was rendered and how much time it took.</ul></section><section class="level4"aria-labelledby="caveats-caveats"><h4 id="caveats-caveats">Caveats {/<em>caveats</em>/}</h4><ul><li>Profiling adds some additional overhead, so <strong>it is disabled in the production build by default.</strong> To opt into production profiling, you need to enable a <a href="https://fb.me/react-profiling">special production build with profiling enabled.</a></ul></section></section><section class="level3"aria-labelledby="onrender-callback-onrender-callback"><h3 id="onrender-callback-onrender-callback"><code>onRender</code> callback {/<em>onrender-callback</em>/}</h3><p>React will call your <code>onRender</code> callback with information about what was rendered.<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">onRender</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> phase<span class="token punctuation">,</span> actualDuration<span class="token punctuation">,</span> baseDuration<span class="token punctuation">,</span> startTime<span class="token punctuation">,</span> commitTime</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Aggregate or log render timings...</span>
<span class="token punctuation">}</span></code></pre><section class="level4"aria-labelledby="parameters-onrender-parameters"><h4 id="parameters-onrender-parameters">Parameters {/<em>onrender-parameters</em>/}</h4><ul><li><code>id</code>: The string <code>id</code> prop of the <code>&#x3C;Profiler></code> tree that has just committed. This lets you identify which part of the tree was committed if you are using multiple profilers.<li><code>phase</code>: <code>"mount"</code>, <code>"update"</code> or <code>"nested-update"</code>. This lets you know whether the tree has just been mounted for the first time or re-rendered due to a change in props, state, or hooks.<li><code>actualDuration</code>: The number of milliseconds spent rendering the <code>&#x3C;Profiler></code> and its descendants for the current update. This indicates how well the subtree makes use of memoization (e.g. <a href="/reference/react/memo"><code>memo</code></a> and <a href="/reference/react/useMemo"><code>useMemo</code></a>). Ideally this value should decrease significantly after the initial mount as many of the descendants will only need to re-render if their specific props change.<li><code>baseDuration</code>: The number of milliseconds estimating how much time it would take to re-render the entire <code>&#x3C;Profiler></code> subtree without any optimizations. It is calculated by summing up the most recent render durations of each component in the tree. This value estimates a worst-case cost of rendering (e.g. the initial mount or a tree with no memoization). Compare <code>actualDuration</code> against it to see if memoization is working.<li><code>startTime</code>: A numeric timestamp for when React began rendering the current update.<li><code>endTime</code>: A numeric timestamp for when React committed the current update. This value is shared between all profilers in a commit, enabling them to be grouped if desirable.</ul></section></section></section><section class="level2"aria-labelledby="usage-usage"><h2 id="usage-usage">Usage {/<em>usage</em>/}</h2><section class="level3"aria-labelledby="measuring-rendering-performance-programmatically-measuring-rendering-performance-programmatically"><h3 id="measuring-rendering-performance-programmatically-measuring-rendering-performance-programmatically">Measuring rendering performance programmatically {/<em>measuring-rendering-performance-programmatically</em>/}</h3><p>Wrap the <code>&#x3C;Profiler></code> component around a React tree to measure its rendering performance.<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">App</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Profiler</span> id<span class="token operator">=</span><span class="token string">"Sidebar"</span> onRender<span class="token operator">=</span><span class="token punctuation">{</span>onRender<span class="token punctuation">}</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Sidebar</span> <span class="token operator">/</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Profiler</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">PageContent</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">App</span><span class="token operator">></span></code></pre><p>It requires two props: an <code>id</code> (string) and an <code>onRender</code> callback (function) which React calls any time a component within the tree "commits" an update.</p><pitfall><p>Profiling adds some additional overhead, so <strong>it is disabled in the production build by default.</strong> To opt into production profiling, you need to enable a <a href="https://fb.me/react-profiling">special production build with profiling enabled.</a></p></pitfall><note><p><code>&#x3C;Profiler></code> lets you gather measurements programmatically. If you're looking for an interactive profiler, try the Profiler tab in <a href="/learn/react-developer-tools">React Developer Tools</a>. It exposes similar functionality as a browser extension.</p></note></section><section class="level3"aria-labelledby="measuring-different-parts-of-the-application-measuring-different-parts-of-the-application"><h3 id="measuring-different-parts-of-the-application-measuring-different-parts-of-the-application">Measuring different parts of the application {/<em>measuring-different-parts-of-the-application</em>/}</h3><p>You can use multiple <code>&#x3C;Profiler></code> components to measure different parts of your application:<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">App</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Profiler</span> id<span class="token operator">=</span><span class="token string">"Sidebar"</span> onRender<span class="token operator">=</span><span class="token punctuation">{</span>onRender<span class="token punctuation">}</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Sidebar</span> <span class="token operator">/</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Profiler</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Profiler</span> id<span class="token operator">=</span><span class="token string">"Content"</span> onRender<span class="token operator">=</span><span class="token punctuation">{</span>onRender<span class="token punctuation">}</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Content</span> <span class="token operator">/</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Profiler</span><span class="token operator">></span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">App</span><span class="token operator">></span></code></pre><p>You can also nest <code>&#x3C;Profiler></code> components:<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">App</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Profiler</span> id<span class="token operator">=</span><span class="token string">"Sidebar"</span> onRender<span class="token operator">=</span><span class="token punctuation">{</span>onRender<span class="token punctuation">}</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Sidebar</span> <span class="token operator">/</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Profiler</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Profiler</span> id<span class="token operator">=</span><span class="token string">"Content"</span> onRender<span class="token operator">=</span><span class="token punctuation">{</span>onRender<span class="token punctuation">}</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Content</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Profiler</span> id<span class="token operator">=</span><span class="token string">"Editor"</span> onRender<span class="token operator">=</span><span class="token punctuation">{</span>onRender<span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Editor</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Profiler</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Preview</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Content</span><span class="token operator">></span>
  <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">Profiler</span><span class="token operator">></span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">App</span><span class="token operator">></span></code></pre><p>Although <code>&#x3C;Profiler></code> is a lightweight component, it should be used only when necessary. Each use adds some CPU and memory overhead to an application.<p><span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section></inlinetoc></section>