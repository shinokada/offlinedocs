<!doctype html><html lang="fr"><meta charset="utf-8"><title>startTransition</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="starttransition"><h1 id="starttransition">startTransition</h1><intro><p><code>startTransition</code> vous permet de mettre à jour l'état sans bloquer l'UI.<pre class="language-js"><code class="language-js"><span class="token function">startTransition</span><span class="token punctuation">(</span>scope<span class="token punctuation">)</span></code></pre></intro><inlinetoc><section class="level2"aria-labelledby="référence-reference"><h2 id="référence-reference">Référence {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="starttransitionscope-starttransitionscope"><h3 id="starttransitionscope-starttransitionscope"><code>startTransition(scope)</code> {/<em>starttransitionscope</em>/}</h3><p>La fonction <code>startTransition</code> vous permet de marquer une mise à jour d'état comme étant une Transition.<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> startTransition <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">TabContainer</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>tab<span class="token punctuation">,</span> setTab<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'about'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">selectTab</span><span class="token punctuation">(</span><span class="token parameter">nextTab</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">startTransition</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">setTab</span><span class="token punctuation">(</span>nextTab<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p><a href="#usage">Voir d'autres exemples ci-dessous</a>.<section class="level4"aria-labelledby="paramètres-parameters"><h4 id="paramètres-parameters">Paramètres {/<em>parameters</em>/}</h4><ul><li><code>scope</code> : une fonction qui met à jour l'état en appelant au moins une <a href="/reference/react/useState#setstate">fonction <code>set</code></a>. React appelle immédiatement <code>scope</code> sans argument et marque toutes les mises à jour d'état demandées durant l'exécution synchrone de <code>scope</code> comme des Transitions. Elles seront <a href="/reference/react/useTransition#marking-a-state-update-as-a-non-blocking-transition">non bloquantes</a> et <a href="/reference/react/useTransition#preventing-unwanted-loading-indicators">n'afficheront pas d'indicateurs de chargement indésirables</a>.</ul></section><section class="level4"aria-labelledby="valeur-renvoyée-returns"><h4 id="valeur-renvoyée-returns">Valeur renvoyée {/<em>returns</em>/}</h4><p><code>startTransition</code> ne renvoie rien.</section><section class="level4"aria-labelledby="limitations-caveats"><h4 id="limitations-caveats">Limitations {/<em>caveats</em>/}</h4><ul><li><p><code>startTransition</code> ne fournit pas de moyen de surveiller la progression de la Transition. Pour afficher un indicateur pendant que la Transition a lieu, utilisez plutôt <a href="/reference/react/useTransition"><code>useTransition</code></a>.<li><p>Vous pouvez enrober une mise à jour dans une Transition uniquement si vous avez accès à la fonction <code>set</code> de l'état en question. Si vous souhaitez démarrer une Transition en réaction à une prop ou à la valeur renvoyée par un Hook personnalisé, utilisez plutôt <a href="/reference/react/useDeferredValue"><code>useDeferredValue</code></a>.<li><p>La fonction que vous passez à <code>startTransition</code> doit être synchrone. React exécute cette fonction immédiatement, et marque toutes les mises à jour demandées lors de son exécution comme des Transitions. Si vous essayez de faire des mises à jour d'état plus tard (par exemple avec un timer), elles ne seront pas marquées comme des Transitions.<li><p>Une mise à jour d'état marquée comme une Transition pourra être interrompue par d'autres mises à jour d'état. Par exemple, si vous mettez à jour un composant de graphe au sein d'une Transition, mais commencez alors une saisie dans un champ texte tandis que le graphe est en train de refaire son rendu, React redémarrera le rendu du composant graphe après avoir traité la mise à jour d'état du champ.<li><p>Les mises à jour en Transition ne peuvent pas être utilisées pour contrôler des champs textuels.<li><p>Si plusieurs Transitions sont en cours, React les regroupe pour le moment. Cette limitation sera sans doute levée dans une future version.</ul></section></section></section><section class="level2"aria-labelledby="utilisation-usage"><h2 id="utilisation-usage">Utilisation {/<em>usage</em>/}</h2><section class="level3"aria-labelledby="marquer-une-mise-à-jour-détat-comme-étant-une-transition-non-bloquante-marking-a-state-update-as-a-non-blocking-transition"><h3 id="marquer-une-mise-à-jour-détat-comme-étant-une-transition-non-bloquante-marking-a-state-update-as-a-non-blocking-transition">Marquer une mise à jour d'état comme étant une Transition non bloquante {/<em>marking-a-state-update-as-a-non-blocking-transition</em>/}</h3><p>Vous pouvez indiquer qu'une mise à jour d'état doit être traitée comme une <em>Transition</em> en l'enrobant dans un appel à <code>startTransition</code> :<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> startTransition <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">TabContainer</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>tab<span class="token punctuation">,</span> setTab<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'about'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">selectTab</span><span class="token punctuation">(</span><span class="token parameter">nextTab</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">startTransition</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">setTab</span><span class="token punctuation">(</span>nextTab<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p>Les Transitions vous permettent de conserver des mises à jour d'interface utilisateur réactives même sur des appareils lents.<p>Avec une Transition, votre UI reste réactive pendant le rendu. Par exemple, si l'utilisateur clique sur un onglet mais ensuite change d'avis et va sur un autre onglet, il peut le faire sans devoir d'abord attendre que le premier onglet ait fini son rendu.</p><note><p><code>startTransition</code> est très similaire à <a href="/reference/react/useTransition"><code>useTransition</code></a>, à ceci près qu'elle ne fournit pas le drapeau <code>isPending</code> pour surveiller la progression de la Transition. Vous pouvez appeler <code>startTransition</code> quand <code>useTransition</code> est indisponible. En particulier, <code>startTransition</code> fonctionne hors des composants, comme par exemple dans une bibliothèque de gestion de données.<p><a href="/reference/react/useTransition">Apprenez-en davantage sur les Transitions et consultez des exemples sur la page de <code>useTransition</code></a>.</p></note><span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section></inlinetoc></section>