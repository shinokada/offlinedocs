<!doctype html><html lang="fr"><meta charset="utf-8"><title>"'use server'"</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="use-server"><h1 id="use-server">"'use server'"</h1><p>canary: true</p><canary><p><code>'use server'</code> n'est utile que si vous <a href="/learn/start-a-new-react-project#bleeding-edge-react-frameworks">utilisez React Server Components</a> ou créez une bibliothèque compatible avec eux.</p></canary><intro><p><code>'use server'</code> marque les fonctions côté serveur qui peuvent être appelées par du code React côté client.</p></intro><inlinetoc><section class="level2"aria-labelledby="référence-reference"><h2 id="référence-reference">Référence {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="use-server-use-server"><h3 id="use-server-use-server"><code>'use server'</code> {/<em>use-server</em>/}</h3><p>Ajoutez <code>'use server';</code> tout en haut d'une fonction asynchrone pour indiquer que cette fonction peut être appelée par du code côté client.<pre class="language-js"><code class="language-js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">addToCart</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">'use server'</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// &#x3C;ProductDetailPage addToCart={addToCart} /></span></code></pre><p>Cette fonction peut être passée au client. Lorsqu'elle est appelée par le client, elle fera un appel réseau au serveur en lui passant une copie sérialisée des arguments qu'elle a reçus. Si la fonction serveur renvoie une valeur, celle-ci sera sérialisée et renvoyée au client.<p>Vous pouvez aussi utiliser <code>'use server';</code> tout en haut d'un fichier pour indiquer que tous les exports de ce fichier sont des fonctions serveur asynchrones qui peuvent être utilisées depuis n'importe où, y compris par import dans des fichiers de composants côté client.<section class="level4"aria-labelledby="limitations-caveats"><h4 id="limitations-caveats">Limitations {/<em>caveats</em>/}</h4><ul><li>Gardez à l'esprit que les paramètres des fonctions marquées par <code>'use server'</code> sont entièrement contrôlés par le client. Pour une meilleure sécurité, traitez-les toujours commes des entrées non vérifiées, et assurez-vous de les valider et d'en échapper le contenu lorsque nécessaire.<li>Pour éviter toute confusion qui pourrait résulter du mélange entre codes côté client et côté serveur au sein d'un même fichier, <code>'use server'</code> ne peut être utilisée que dans des fichiers côté serveur. Les fonctions résultantes peuvent être passées à des composants côté client <em>via</em> leurs props.<li>Puisque les appels réseaux sous-jacents sont intrinsèquement asynchrones, <code>'use server'</code> ne peut être utilisée que pour des fonctions asynchrones.<li>Les directives telles que <code>'use server'</code> doivent être placées au tout début du fichier, au-dessus de tout import et de quelque autre code que ce soit (à l'exception des commentaires, qui peuvent apparaître avant). Elles doivent utiliser des apostrophes (<code>'</code>) ou guillemets (<code>"</code>), pas des apostrophes inverses (<code>`</code>). (Le format de directive <code>'use xyz'</code> n'est pas sans rappeler la convention de nommage <code>useXyz()</code> des Hooks, mais c'est là une simple coïncidence.)</ul></section></section></section><section class="level2"aria-labelledby="utilisation-usage"><h2 id="utilisation-usage">Utilisation {/<em>usage</em>/}</h2><wip><p>Cette section est incomplète. Consultez la <a href="https://beta.nextjs.org/docs/rendering/server-and-client-components">documentation Next.js des Server Components</a>.</p></wip><span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></inlinetoc></section>