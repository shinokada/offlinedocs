<!doctype html><html lang="fr"><meta charset="utf-8"><title>preload</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="preload"><h1 id="preload">preload</h1><p>canary: true</p><canary><p>La fonction <code>preload</code> n'est actuellement disponible que sur les canaux de livraison Canary et Expérimental de React. Apprenez-en davantage sur <a href="/community/versioning-policy#all-release-channels">les canaux de livraison React</a>.</p></canary><note><p><a href="/learn/start-a-new-react-project">Les frameworks basés sur React</a> s'occupent fréquemment pour vous du chargement des ressources, de sorte que vous n'aurez peut-être pas besoin d'appeler ces API vous-même. Consultez la documentation de votre framework pour en savoir plus à ce sujet.</p></note><intro><p><code>preload</code> vous permet de charger en avance une ressource telle qu'une feuille de styles, une fonte ou un script extérieurs que vous avez l'intention d'utiliser.<pre class="language-js"><code class="language-js"><span class="token function">preload</span><span class="token punctuation">(</span><span class="token string">"https://example.com/font.woff2"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword module">as</span><span class="token operator">:</span> <span class="token string">"font"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></intro><inlinetoc><section class="level2"aria-labelledby="référence-reference"><h2 id="référence-reference">Référence {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="preloadhref-options-preload"><h3 id="preloadhref-options-preload"><code>preload(href, options)</code> {/<em>preload</em>/}</h3><p>Pour précharger une ressource, appelez la fonction <code>preload</code> de <code>react-dom</code>.<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> preload <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">AppRoot</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">preload</span><span class="token punctuation">(</span><span class="token string">"https://example.com/font.woff2"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword module">as</span><span class="token operator">:</span> <span class="token string">"font"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><p><a href="#usage">Voir d'autres exemples plus bas</a>.<p>La fonction <code>preload</code> suggère au navigateur de commencer à télécharger une ressource donnée, ce qui peut faire gagner du temps.<section class="level4"aria-labelledby="paramètres-parameters"><h4 id="paramètres-parameters">Paramètres {/<em>parameters</em>/}</h4><ul><li><code>href</code> : une chaîne de caractères. L'URL de la ressource que vous souhaitez télécharger.<li><code>options</code> : un objet. Il contient les propriétés suivantes :<ul><li><code>as</code> : une chaîne de caractères obligatoire. Le type de la ressource. Les <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#as">valeurs possibles</a> sont <code>audio</code>, <code>document</code>, <code>embed</code>, <code>fetch</code>, <code>font</code>, <code>image</code>, <code>object</code>, <code>script</code>, <code>style</code>, <code>track</code>, <code>video</code> et <code>worker</code>.<li><code>precedence</code> : une chaîne de caractères. Indique à React où placer le nœud DOM <code>&#x3C;style></code> par rapport aux autres présents dans le <code>&#x3C;head></code> du document, ce qui détermine quelle feuille de styles a priorité sur quelle autre. La valeur peut être (par ordre de précédence) <code>"reset"</code>, <code>"low"</code>, <code>"medium"</code> ou <code>"high"</code>.<li><code>crossOrigin</code> : une chaîne de caractères. La <a href="https://developer.mozilla.org/fr/docs/Web/HTML/Attributes/crossorigin">politique CORS</a> à utiliser. Les valeurs possibles sont <code>anonymous</code> et <code>use-credentials</code>. Elle est obligatoire lorsque <code>as</code> vaut <code>"fetch"</code>.<li><code>referrerPolicy</code> : une chaîne de caractères. <a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/link#referrerpolicy">L'en-tête Referrer</a> à envoyer lors du chargement. Les valeurs possibles sont <code>no-referrer-when-downgrade</code> (par défaut), <code>no-referrer</code>, <code>origin</code>, <code>origin-when-cross-origin</code> ou <code>unsafe-url</code>.<li><code>integrity</code> : une chaîne de caractères. Une empreinte cryptographique de la ressource afin de <a href="https://developer.mozilla.org/fr/docs/Web/Security/Subresource_Integrity">vérifier son authenticité</a>.<li><code>type</code> : une chaîne de caractères. Le type MIME de la ressource liée.<li><code>nonce</code> : une chaîne de caractères. Un <a href="https://developer.mozilla.org/fr/docs/Web/HTML/Global_attributes/nonce">nonce cryptographique autorisant la ressource</a> dans le cadre d'une Politique de Sécurité de Contenu (CSP) stricte.<li><code>fetchPriority</code> : une chaîne de caractères. Suggère une priorité relative pour le chargement de la ressource. Les valeurs possibles sont <code>auto</code> (par défaut), <code>high</code> ou <code>low</code>.<li><code>imageSrcSet</code> : une chaîne de caractères. À n'utiliser que pour <code>as: "image"</code>. Indique le <a href="https://developer.mozilla.org/fr/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images">jeu de sources de l'image</a>.<li><code>imageSizes</code> : une chaîne de caractères. À n'utiliser que pour <code>as: "image"</code>. Indique les <a href="https://developer.mozilla.org/fr/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images">tailles de l'image</a>.</ul></ul></section><section class="level4"aria-labelledby="valeur-renvoyée-returns"><h4 id="valeur-renvoyée-returns">Valeur renvoyée {/<em>returns</em>/}</h4><p><code>preload</code> ne renvoie rien.</section><section class="level4"aria-labelledby="limitations-caveats"><h4 id="limitations-caveats">Limitations {/<em>caveats</em>/}</h4><ul><li>Plusieurs appels équivalents à <code>preload</code> ont le même effet qu'un unique appel. Des appels à <code>preload</code> sont considérés équivalents selon les règles que voici :<ul><li>Deux appels sont équivalents s'ils ont le même <code>href</code>, sauf si :<li>L'option <code>as</code> vaut <code>image</code>, auquel cas les deux appels sont équivalents s'ils ont les mêmes <code>href</code>, <code>imageSrcSet</code> et <code>imageSizes</code>.</ul><li>Côté client, vous pouvez appeler <code>preload</code> n'importe où : lors du rendu d'un composant, dans un Effet, dans un gestionnaire d'événement, etc.<li>Lors d'un rendu côté serveur ou du rendu de Composants Serveur, <code>preload</code> n'a d'effet que si vous l'appelez lors du rendu d'un composant ou dans une fonction asynchrone issue du rendu d'un composant. Tout autre appel sera ignoré.</ul></section></section></section><section class="level2"aria-labelledby="utilisation-usage"><h2 id="utilisation-usage">Utilisation {/<em>usage</em>/}</h2><section class="level3"aria-labelledby="précharger-lors-du-rendu-preloading-when-rendering"><h3 id="précharger-lors-du-rendu-preloading-when-rendering">Précharger lors du rendu {/<em>preloading-when-rendering</em>/}</h3><p>Appelez <code>preload</code> lors du rendu d'un composant si vous savez que ses enfants auront besoin de charger une ressource spécifique.</p><recipes titletext="Exemples de préchargement"><section class="level4"aria-labelledby="précharger-un-script-preloading-an-external-script"><h4 id="précharger-un-script-preloading-an-external-script">Précharger un script {/<em>preloading-an-external-script</em>/}</h4><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> preload <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">AppRoot</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">preload</span><span class="token punctuation">(</span><span class="token string">"https://example.com/script.js"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword module">as</span><span class="token operator">:</span> <span class="token string">"script"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token spread operator">...</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Si vous souhaitez que le navigateur évalue la ressource immédiatement après chargement (plutôt que simplement le charger), utilisez plutôt <a href="/reference/react-dom/preinit"><code>preinit</code></a>. Si vous souhaitez charger un module ESM, utilisez <a href="/reference/react-dom/preloadModule"><code>preloadModule</code></a>.</p><solution></solution></section><section class="level4"aria-labelledby="précharger-une-feuille-de-styles-preloading-a-stylesheet"><h4 id="précharger-une-feuille-de-styles-preloading-a-stylesheet">Précharger une feuille de styles {/<em>preloading-a-stylesheet</em>/}</h4><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> preload <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">AppRoot</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">preload</span><span class="token punctuation">(</span><span class="token string">"https://example.com/style.css"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword module">as</span><span class="token operator">:</span> <span class="token string">"style"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token spread operator">...</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Si vous souhaitez que le navigateur insère la feuille de styles immédiatement après chargement (c'est-à-dire qu'il la parse et l'applique aussi), utilisez plutôt <a href="/reference/react-dom/preinit"><code>preinit</code></a>.</p><solution></solution></section><section class="level4"aria-labelledby="précharger-une-fonte-preloading-a-font"><h4 id="précharger-une-fonte-preloading-a-font">Précharger une fonte {/<em>preloading-a-font</em>/}</h4><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> preload <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">AppRoot</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">preload</span><span class="token punctuation">(</span><span class="token string">"https://example.com/style.css"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword module">as</span><span class="token operator">:</span> <span class="token string">"style"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">preload</span><span class="token punctuation">(</span><span class="token string">"https://example.com/font.woff2"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword module">as</span><span class="token operator">:</span> <span class="token string">"font"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token spread operator">...</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Si vous préchargez une feuille de styles, il est souhaitable de précharger toute fonte que cette feuille de styles référence. Ainsi, le navigateur pourra commencer à télécharger les fontes avant d'avoir chargé et parsé la feuille de styles.</p><solution></solution></section><section class="level4"aria-labelledby="précharger-une-image-preloading-an-image"><h4 id="précharger-une-image-preloading-an-image">Précharger une image {/<em>preloading-an-image</em>/}</h4><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> preload <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">AppRoot</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">preload</span><span class="token punctuation">(</span><span class="token string">"/banner.png"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token keyword module">as</span><span class="token operator">:</span> <span class="token string">"image"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageSrcSet</span><span class="token operator">:</span> <span class="token string">"/banner512.png 512w, /banner1024.png 1024w"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">imageSizes</span><span class="token operator">:</span> <span class="token string">"(max-width: 512px) 512px, 1024px"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token spread operator">...</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Lorsque vous préchargez une image, les options <code>imageSrcSet</code> et <code>imageSizes</code> aide le navigateur à <a href="https://developer.mozilla.org/fr/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images">charger l'image de la meilleure taille pour ses dimensions d'affichage à l'écran</a>.</p><solution></solution></section></recipes></section><section class="level3"aria-labelledby="précharger-dans-un-gestionnaire-dévénement-preloading-in-an-event-handler"><h3 id="précharger-dans-un-gestionnaire-dévénement-preloading-in-an-event-handler">Précharger dans un gestionnaire d'événement {/<em>preloading-in-an-event-handler</em>/}</h3><p>Appelez <code>preload</code> depuis un gestionnaire d'événement avant de passer à une page ou un état qui auront besoin de ressources extérieures. Ça permet de déclencher le processus plus tôt que si vous l'appeliez au sein de la nouvelle page ou suite au nouvel état.<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> preload <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">CallToAction</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">preload</span><span class="token punctuation">(</span><span class="token string">"https://example.com/wizardStyles.css"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword module">as</span><span class="token operator">:</span> <span class="token string">"style"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">startWizard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>onClick<span class="token punctuation">}</span><span class="token operator">></span><span class="token constant">D</span>émarrer l’assistant<span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p><span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section></inlinetoc></section>