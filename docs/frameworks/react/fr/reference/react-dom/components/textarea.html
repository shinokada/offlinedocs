<!doctype html><html lang="fr"><meta charset="utf-8"><title>"&#x3C;textarea>"</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="textarea"><h1 id="textarea">"<textarea>"</textarea><intro><p>Le <a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/textarea">composant natif <code>&#x3C;textarea></code> du navigateur</a> vous permet d'afficher un champ de saisie textuelle multiligne.<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>textarea <span class="token operator">/</span><span class="token operator">></span></code></pre></intro><inlinetoc><section class="level2"aria-labelledby="référence-reference"><h2 id="référence-reference">Référence {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="textarea-textarea"><h3 id="textarea-textarea"><code>&#x3C;textarea></code> {/<em>textarea</em>/}</h3><p>Pour afficher une zone de texte, utilisez le <a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/textarea">composant natif<code>&#x3C;textarea></code> du navigateur</a>.<pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>textarea name<span class="token operator">=</span><span class="token string">"postContent"</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p><a href="#usage">Voir plus d'exemples ci-dessous</a>.<section class="level4"aria-labelledby="props-props"><h4 id="props-props">Props {/<em>props</em>/}</h4><p><code>&#x3C;textarea></code> prend en charge toutes les <a href="/reference/react-dom/components/common#props">props communes aux éléments</a>.<p>Une zone de texte peut devenir un <a href="#controlling-a-text-area-with-a-state-variable">champ contrôlé</a> en lui passant une prop <code>value</code> :<ul><li><code>value</code> : une chaîne de caractères. Contrôle le texte dans la zone de texte.</ul><p>Lorsque vous passez <code>value</code>, vous devez également passer un gestionnaire d'événement <code>onChange</code> qui met à jour la valeur passée.<p>Si votre <code>&#x3C;textarea></code> n'est pas contrôlée, passez plutôt la prop <code>defaultValue</code> :<ul><li><code>defaultValue</code> : une chaîne de caractères. Spécifie <a href="#providing-an-initial-value-for-a-text-area">la valeur initiale</a> pour une zone de texte.</ul><p>Ces props de <code>&#x3C;textarea></code> sont compatibles avec les zones de texte contrôlées et non contrôlées :<ul><li><a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/textarea#autocomplete"><code>autoComplete</code></a> : soit <code>'on'</code> ou <code>'off'</code>. Spécifie le comportement de l'autocomplétion.<li><a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/textarea#autofocus"><code>autoFocus</code></a> : un booléen. Si <code>true</code>, React va activer l'élément après le montage <em>(l'apparition initiale dans le DOM, NdT)</em>.<li><code>children</code> : <code>&#x3C;textarea></code> n'accepte pas d'enfants. Pour définir sa valeur initiale, utilisez <code>defaultValue</code>.<li><a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/textarea#cols"><code>cols</code></a> : un nombre. Spécifie la largeur par défaut en prenant pour unité la largeur moyenne des caractères. Par défaut, <code>20</code>.<li><a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/textarea#disabled"><code>disabled</code></a> : un booléen. Si <code>true</code>, la zone de texte ne sera pas interactive et sera grisée.<li><a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/textarea#form"><code>form</code></a> : une chaîne de caractères. Spécifie l'<code>id</code> du <code>&#x3C;form></code> auquel appartient cette zone de texte. S'il est absent, la zone de saisie sera associée au formulaire parent le plus proche.<li><a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/textarea#maxlength"><code>maxLength</code></a> : un nombre. Spécifie la longueur maximale du texte.<li><a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/textarea#minlength"><code>minLength</code></a> : un nombre. Spécifie la longueur minimale du texte.<li><a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/textarea#name"><code>name</code></a> : une chaîne de caractères. Spécifie le nom de cette zone de texte au sein de <a href="#reading-the-textarea-value-when-submitting-a-form">l'envoi du formulaire</a>.<li><code>onChange</code> : une fonction <a href="/reference/react-dom/components/common#event-handler">gestionnaire d'événement</a>. Requis pour <a href="#controlling-a-text-area-with-a-state-variable">les zones de texte contrôlées</a>. Se déclenche immédiatement lorsque la valeur de la zone de texte est modifiée par l'utilisateur (par exemple, il se déclenche à chaque frappe). Se comporte comme <a href="https://developer.mozilla.org/fr/docs/Web/API/HTMLElement/input_event">l'événement <code>input</code></a> du navigateur.<li><code>onChangeCapture</code> : une version de <code>onChange</code> qui se déclenche lors de la <a href="/learn/responding-to-events#capture-phase-events">phase de capture</a>.<li><a href="https://developer.mozilla.org/fr/docs/Web/API/HTMLElement/input_event"><code>onInput</code></a> : une fonction <a href="/reference/react-dom/components/common#event-handler">gestionnaire d'événement</a>. Se déclenche immédiatement lorsque la valeur de la zone de texte est modifiée par l'utilisateur. Pour des raisons historiques, en React, il est préférable d'utiliser <code>onChange</code> à la place, qui fonctionne de manière similaire.<li><code>onInputCapture</code> : une version de <code>onInput</code> qui se déclenche lors de la <a href="/learn/responding-to-events#capture-phase-events">phase de capture</a>.<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/invalid_event"><code>onInvalid</code></a> : une fonction <a href="/reference/react-dom/components/common#event-handler">gestionnaire d'événement</a>. Se déclenche si une zone de texte échoue à la validation lors de la soumission du formulaire. Contrairement à l'événement natif <code>invalid</code>, l'événement React <code>onInvalid</code> se propage.<li><code>onInvalidCapture</code> : une version de <code>onInvalid</code> qui se déclenche lors de la <a href="/learn/responding-to-events#capture-phase-events">phase de capture</a>.<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLTextAreaElement/select_event"><code>onSelect</code></a> : une fonction <a href="/reference/react-dom/components/common#event-handler">gestionnaire d'événement</a>. Se déclenche après que la sélection à l'intérieur de la zone de texte a changé. React étend l'événement <code>onSelect</code> pour se déclencher également pour une sélection vide et sur les modifications de texte (qui peuvent affecter la sélection).<li><code>onSelectCapture</code> : une version de <code>onSelect</code> qui se déclenche lors de la <a href="/learn/responding-to-events#capture-phase-events">phase de capture</a>.<li><a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/textarea#placeholder"><code>placeholder</code></a> : une chaîne de caractères. Affichée dans une couleur discrète lorsque la valeur de la zone de texte est vide.<li><a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/textarea#readonly"><code>readOnly</code></a> : un booléen. Si <code>true</code>, la zone de texte n'est pas modifiable par l'utilisateur.<li><a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/textarea#required"><code>required</code></a> : un booléen. Si <code>true</code>, la valeur doit être fournie pour que le formulaire puisse être soumis.<li><a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/textarea#rows"><code>rows</code></a> : un nombre. Spécifie la hauteur par défaut en prenant pour unité la hauteur moyenne des caractères. Par défaut, <code>2</code>.<li><a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/textarea#wrap"><code>wrap</code></a> : peut être <code>'hard'</code>, <code>'soft'</code>, ou <code>'off'</code>. Spécifie comment les retours à la ligne automatiques sont appliqués lors de la soumission d'un formulaire.</ul></section><section class="level4"aria-labelledby="limitations-caveats"><h4 id="limitations-caveats">Limitations {/<em>caveats</em>/}</h4><ul><li>Passer des enfants de cette manière n'est pas autorisé : <code>&#x3C;textarea>quelque chose&#x3C;/textarea></code>. <a href="#providing-an-initial-value-for-a-text-area">Utilisez <code>defaultValue</code> pour définir le contenu initial</a>.<li>Si une zone de texte reçoit une prop <code>value</code> textuelle, elle sera <a href="#controlling-a-text-area-with-a-state-variable">traitée comme contrôlée</a>.<li>Une zone de texte ne peut pas être à la fois contrôlée et non contrôlée.<li>Une zone de texte ne peut pas basculer entre un statut contrôlé et non contrôlé au cours de son existence.<li>Une zone de texte contrôlée doit avoir un gestionnaire <code>onChange</code> qui met à jour sa valeur.</ul></section></section></section><section class="level2"aria-labelledby="utilisation-usage"><h2 id="utilisation-usage">Utilisation {/<em>usage</em>/}</h2><section class="level3"aria-labelledby="afficher-une-zone-de-texte-displaying-a-text-area"><h3 id="afficher-une-zone-de-texte-displaying-a-text-area">Afficher une zone de texte {/<em>displaying-a-text-area</em>/}</h3><p>Utilisez <code>&#x3C;textarea></code> pour afficher une zone de texte. Vous pouvez spécifier sa taille par défaut avec les attributs <a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/textarea#rows"><code>rows</code></a> et <a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/textarea#cols"><code>cols</code></a>, mais par défaut, l'utilisateur pourra la redimensionner. Pour désactiver le redimensionnement, vous pouvez spécifier <code>resize: none</code> dans le CSS.</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">NewPost</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
       Écrivez votre article <span class="token operator">:</span>
      <span class="token operator">&#x3C;</span>textarea name<span class="token operator">=</span><span class="token string">"postContent"</span> rows<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">}</span> cols<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">40</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">textarea</span> <span class="token punctuation">{</span> <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">label</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">label<span class="token punctuation">,</span> textarea</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack></section><section class="level3"aria-labelledby="fournir-une-légende-pour-une-zone-de-texte-providing-a-label-for-a-text-area"><h3 id="fournir-une-légende-pour-une-zone-de-texte-providing-a-label-for-a-text-area">Fournir une légende pour une zone de texte {/<em>providing-a-label-for-a-text-area</em>/}</h3><p>Vous placerez généralement chaque <code>&#x3C;textarea></code> à l'intérieur d'une balise <a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/label"><code>&#x3C;label></code></a>. Ça indique au navigateur que cette légende est associée à cette zone de texte. Lorsque l'utilisateur cliquera sur la légende, le navigateur activera la zone de texte. C'est également essentiel pour l'accessibilité : un lecteur d'écran annoncera la légende lorsque l'utilisateur activera la zone de texte.<p>Si vous ne pouvez pas imbriquer votre <code>&#x3C;textarea></code> dans un <code>&#x3C;label></code>, associez-les en passant le même <code>id</code> à <code>&#x3C;textarea id></code> et <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/htmlFor"><code>&#x3C;label htmlFor></code></a>. Pour éviter les conflits entre les instances d'un composant, générez un <code>id</code> avec <a href="/reference/react/useId"><code>useId</code></a>.</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useId <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Form</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> postTextAreaId <span class="token operator">=</span> <span class="token function">useId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label htmlFor<span class="token operator">=</span><span class="token punctuation">{</span>postTextAreaId<span class="token punctuation">}</span><span class="token operator">></span>
        Écrivez votre article <span class="token operator">:</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>textarea
        id<span class="token operator">=</span><span class="token punctuation">{</span>postTextAreaId<span class="token punctuation">}</span>
        name<span class="token operator">=</span><span class="token string">"postContent"</span>
        rows<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">}</span>
        cols<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">40</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack></section><section class="level3"aria-labelledby="passer-une-valeur-initiale-à-une-zone-de-texte-passing-an-initial-value-to-a-text-area"><h3 id="passer-une-valeur-initiale-à-une-zone-de-texte-passing-an-initial-value-to-a-text-area">Passer une valeur initiale à une zone de texte {/<em>passing-an-initial-value-to-a-text-area</em>/}</h3><p>Vous pouvez éventuellement spécifier la valeur initiale d'une zone de texte en passant la prop <code>defaultValue</code> :</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">EditPost</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
      <span class="token maybe-class-name">Modifiez</span> votre article <span class="token operator">:</span>
      <span class="token operator">&#x3C;</span>textarea
        name<span class="token operator">=</span><span class="token string">"postContent"</span>
        defaultValue<span class="token operator">=</span><span class="token string">"J’ai beaucoup aimé faire du vélo hier !"</span>
        rows<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">}</span>
        cols<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">40</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">textarea</span> <span class="token punctuation">{</span> <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">label</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">label<span class="token punctuation">,</span> textarea</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><pitfall><p>Contrairement à HTML, passer du texte initial de cette manière n'est pas pris en charge : <code>&#x3C;textarea>Contenu&#x3C;/textarea></code>.</p></pitfall></section><section class="level3"aria-labelledby="lire-la-valeur-dune-zone-de-texte-lors-de-la-soumission-dun-formulaire-reading-the-text-area-value-when-submitting-a-form"><h3 id="lire-la-valeur-dune-zone-de-texte-lors-de-la-soumission-dun-formulaire-reading-the-text-area-value-when-submitting-a-form">Lire la valeur d'une zone de texte lors de la soumission d'un formulaire {/<em>reading-the-text-area-value-when-submitting-a-form</em>/}</h3><p>Ajoutez un <a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/form"><code>&#x3C;form></code></a> autour de votre zone de texte avec un <a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/button"><code>&#x3C;button type="submit"></code></a> à l'intérieur. Il appellera votre gestionnaire d'événement <code>&#x3C;form onSubmit></code>. Par défaut, le navigateur enverra les données du formulaire à l'URL actuelle et rechargera la page. Vous pouvez remplacer ce comportement en appelant <code>e.preventDefault()</code>. Lisez les données du formulaire avec <a href="https://developer.mozilla.org/fr/docs/Web/API/FormData"><code>new FormData(e.target)</code></a>.</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">EditPost</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">handleSubmit</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Empêche le navigateur de recharger la page</span>
    e<span class="token punctuation">.</span><span class="token method function property-access">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Lit les données du formulaire</span>
    <span class="token keyword">const</span> form <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span>form<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Vous pouvez passer formData directement comme corps de la requête fetch :</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/some-api'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> form<span class="token punctuation">.</span><span class="token property-access">method</span><span class="token punctuation">,</span> <span class="token literal-property property">body</span><span class="token operator">:</span> formData <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Ou vous pouvez travailler avec comme un objet simple :</span>
    <span class="token keyword">const</span> formJson <span class="token operator">=</span> <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">fromEntries</span><span class="token punctuation">(</span>formData<span class="token punctuation">.</span><span class="token method function property-access">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>formJson<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>form method<span class="token operator">=</span><span class="token string">"post"</span> onSubmit<span class="token operator">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token maybe-class-name">Titre</span> de l’article <span class="token operator">:</span> <span class="token operator">&#x3C;</span>input name<span class="token operator">=</span><span class="token string">"postTitle"</span> defaultValue<span class="token operator">=</span><span class="token string">"Faire du vélo"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token maybe-class-name">Modifiez</span> votre article <span class="token operator">:</span>
        <span class="token operator">&#x3C;</span>textarea
          name<span class="token operator">=</span><span class="token string">"postContent"</span>
          defaultValue<span class="token operator">=</span><span class="token string">"J’ai beaucoup aimé faire du vélo hier !"</span>
          rows<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">}</span>
          cols<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">40</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button type<span class="token operator">=</span><span class="token string">"reset"</span><span class="token operator">></span><span class="token maybe-class-name">Abandonner</span> les modifications<span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>button type<span class="token operator">=</span><span class="token string">"submit"</span><span class="token operator">></span><span class="token maybe-class-name">Sauvegarder</span> l’article<span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>form<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">label</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">input</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><note><p>Donnez un <code>name</code> à votre <code>&#x3C;textarea></code>, par exemple <code>&#x3C;textarea name="postContent" /></code>. Le <code>name</code> que vous avez spécifié sera utilisé comme clé dans les données du formulaire, par exemple <code>{ postContent: "Votre article" }</code>.</p></note><pitfall><p>Par défaut, <em>n'importe quel</em> <code>&#x3C;button></code> à l'intérieur d'un <code>&#x3C;form></code> va le soumettre. Cela peut être surprenant ! Si vous avez votre propre composant React <code>Button</code>, envisagez de retourner <a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/input/button"><code>&#x3C;button type="button"></code></a> au lieu de <code>&#x3C;button></code>. Ensuite, pour être explicite, utilisez <code>&#x3C;button type="submit"></code> pour les boutons qui <em>sont</em> censés soumettre le formulaire.</p></pitfall></section><section class="level3"aria-labelledby="contrôler-une-zone-de-texte-avec-une-variable-détat-controlling-a-text-area-with-a-state-variable"><h3 id="contrôler-une-zone-de-texte-avec-une-variable-détat-controlling-a-text-area-with-a-state-variable">Contrôler une zone de texte avec une variable d'état {/<em>controlling-a-text-area-with-a-state-variable</em>/}</h3><p>Une zone de texte comme <code>&#x3C;textarea /></code> est <em>non contrôlée</em>. Même si vous <a href="#providing-an-initial-value-for-a-text-area">passez une valeur initiale</a> comme <code>&#x3C;textarea defaultValue="Texte initial" /></code>, votre JSX ne spécifie que la valeur initiale, il ne contrôle pas la valeur actuelle.<p><strong>Pour afficher une zone de texte <em>contrôlée</em>, passez une prop <code>value</code> à <code>&#x3C;textarea /></code>.</strong> React forcera la zone de texte à toujours avoir la valeur que vous avez passée. Généralement, vous contrôlerez une zone de texte en déclarant une <a href="/reference/react/useState">variable d'état</a> :<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">NewPost</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>postContent<span class="token punctuation">,</span> setPostContent<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Déclare une variable d’état...</span>
  <span class="token comment">// ...</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>textarea
      value<span class="token operator">=</span><span class="token punctuation">{</span>postContent<span class="token punctuation">}</span> <span class="token comment">// ...force la valeur du champ de saisie à la valeur de la variable d'état...</span>
      onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setPostContent</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token comment">// ...et met à jour la variable d'état à chaque frappe !</span>
    <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>C'est utile lorsque vous voulez rafraîchir une partie de l'interface utilisateur à chaque frappe.</p><sandpack><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">MarkdownPreview</span></span> <span class="token keyword module">from</span> <span class="token string">'./MarkdownPreview.js'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MarkdownEditor</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>postContent<span class="token punctuation">,</span> setPostContent<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'_Salut,_ **Markdown**!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>label<span class="token operator">></span>
        <span class="token maybe-class-name">Saisissez</span> du <span class="token maybe-class-name">Markdown </span><span class="token operator">:</span>
        <span class="token operator">&#x3C;</span>textarea
          value<span class="token operator">=</span><span class="token punctuation">{</span>postContent<span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setPostContent</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>label<span class="token operator">></span>
      <span class="token operator">&#x3C;</span>hr <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token maybe-class-name">MarkdownPreview</span> markdown<span class="token operator">=</span><span class="token punctuation">{</span>postContent<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Remarkable</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'remarkable'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> md <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Remarkable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MarkdownPreview</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> markdown <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> renderedHTML <span class="token operator">=</span> md<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span>markdown<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>div dangerouslySetInnerHTML<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">__html</span><span class="token operator">:</span> renderedHTML<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"react"</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token property">"react-dom"</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token property">"react-scripts"</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token property">"remarkable"</span><span class="token operator">:</span> <span class="token string">"2.0.1"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"react-scripts start"</span><span class="token punctuation">,</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"react-scripts build"</span><span class="token punctuation">,</span>
    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"react-scripts test --env=jsdom"</span><span class="token punctuation">,</span>
    <span class="token property">"eject"</span><span class="token operator">:</span> <span class="token string">"react-scripts eject"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">textarea</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></sandpack><pitfall><p><strong>Si vous passez <code>value</code> sans <code>onChange</code>, il sera impossible de réaliser une saisie dans la zone de texte.</strong> Lorsque vous contrôlez une zone de texte en passant une <code>value</code>, vous <em>forcez</em> la zone de texte à toujours avoir la valeur que vous avez passée. Donc, si vous passez une variable d'état comme <code>value</code> mais oubliez de mettre à jour cette variable d'état de manière synchrone au sein du gestionnaire d'événement <code>onChange</code>, React réinitialisera la zone de texte, après chaque frappe, à la <code>value</code> que vous avez spécifiée.</p></pitfall></section></section><section class="level2"aria-labelledby="dépannage-troubleshooting"><h2 id="dépannage-troubleshooting">Dépannage {/<em>troubleshooting</em>/}</h2><section class="level3"aria-labelledby="ma-zone-de-texte-ne-se-met-pas-à-jour-lorsque-je-tape-dedans-my-text-area-doesnt-update-when-i-type-into-it"><h3 id="ma-zone-de-texte-ne-se-met-pas-à-jour-lorsque-je-tape-dedans-my-text-area-doesnt-update-when-i-type-into-it">Ma zone de texte ne se met pas à jour lorsque je tape dedans {/<em>my-text-area-doesnt-update-when-i-type-into-it</em>/}</h3><p>Si vous affichez une zone de texte avec <code>value</code> mais sans <code>onChange</code>, vous verrez une erreur dans la console :<pre class="language-js"><code class="language-js"><span class="token comment">// 🔴 Bug : zone de texte contrôlée sans gestionnaire onChange</span>
<span class="token operator">&#x3C;</span>textarea value<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><consoleblock level="error"><p>You provided a <code>value</code> prop to a form field without an <code>onChange</code> handler. This will render a read-only field. If the field should be mutable use <code>defaultValue</code>. Otherwise, set either <code>onChange</code> or <code>readOnly</code>.</p></consoleblock><p><em>(« Vous avez fourni une prop <code>value</code> à un champ de formulaire sans gestionnaire <code>onChange</code>. Ça produira un champ en lecture seule. Si le champ doit être modifiable utilisez <code>defaultValue</code>. Sinon, définissez soit <code>onChange</code> soit <code>readOnly</code>. », NdT)</em><p>Comme le message d'erreur le suggère, si vous ne voulez spécifier que <a href="#providing-an-initial-value-for-a-text-area">la valeur initiale</a> de la zone de texte, passez plutôt <code>defaultValue</code> :<pre class="language-js"><code class="language-js"><span class="token comment">// ✅ Correct : zone de texte non contrôlée avec une valeur initiale</span>
<span class="token operator">&#x3C;</span>textarea defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p>Si vous voulez <a href="#controlling-a-text-area-with-a-state-variable">contrôler cette zone de texte avec une variable d'état</a>, spécifiez un gestionnaire <code>onChange</code> :<pre class="language-js"><code class="language-js"><span class="token comment">// ✅ Correct : zone de texte contrôlée avec onChange</span>
<span class="token operator">&#x3C;</span>textarea value<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token arrow operator">=></span> <span class="token function">setSomething</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p>Si la valeur est en lecture seule intentionnellement, ajoutez une prop <code>readOnly</code> pour supprimer l'erreur :<pre class="language-js"><code class="language-js"><span class="token comment">// ✅ Correct : zone de texte en lecture seule sans onChange</span>
<span class="token operator">&#x3C;</span>textarea value<span class="token operator">=</span><span class="token punctuation">{</span>something<span class="token punctuation">}</span> readOnly<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre></section><section class="level3"aria-labelledby="le-curseur-de-ma-zone-de-texte-revient-au-début-à-chaque-frappe-my-text-area-jumps-to-the-beginning-on-every-keystroke"><h3 id="le-curseur-de-ma-zone-de-texte-revient-au-début-à-chaque-frappe-my-text-area-jumps-to-the-beginning-on-every-keystroke">Le curseur de ma zone de texte revient au début à chaque frappe {/<em>my-text-area-jumps-to-the-beginning-on-every-keystroke</em>/}</h3><p>Si vous <a href="#controlling-a-text-area-with-a-state-variable">contrôlez une zone de texte</a>, vous devez mettre à jour sa variable d'état avec la valeur DOM de la zone de texte pendant le <code>onChange</code>.<p>Vous ne pouvez pas la mettre à jour avec autre chose que <code>e.target.value</code> :<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 🔴 Bug : mettre à jour un champ de saisie avec autre chose que e.target.value</span>
  <span class="token function">setFirstName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">.</span><span class="token method function property-access">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Vous ne pouvez pas la mettre à jour de manière asynchrone :<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 🔴 Bug : mettre à jour un champ de saisie de manière asynchrone</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setFirstName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Pour corriger votre code, mettez à jour de manière synchrone avec <code>e.target.value</code> :<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ✅ Mettre à jour un champ de saisie contrôlé avec e.target.value de manière synchrone</span>
  <span class="token function">setFirstName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Si ça ne corrige pas le problème, il est possible que la zone de texte soit supprimée et réinsérée dans le DOM à chaque frappe. Ça peut se produire si vous <a href="/learn/preserving-and-resetting-state">réinitialisez accidentellement l'état</a> à chaque nouveau rendu. Par exemple, ça peut se produire si la zone de texte ou l'un de ses parents reçoit toujours un attribut <code>key</code> différent, ou si vous imbriquez des définitions de composants (ce qui n'est pas autorisé en React et provoque le remontage du composant « interne » à chaque rendu).</section><section class="level3"aria-labelledby="jai-une-erreur-a-component-is-changing-an-uncontrolled-input-to-be-controlled-im-getting-an-error-a-component-is-changing-an-uncontrolled-input-to-be-controlled"><h3 id="jai-une-erreur-a-component-is-changing-an-uncontrolled-input-to-be-controlled-im-getting-an-error-a-component-is-changing-an-uncontrolled-input-to-be-controlled">J'ai une erreur : "A component is changing an uncontrolled input to be controlled" {/<em>im-getting-an-error-a-component-is-changing-an-uncontrolled-input-to-be-controlled</em>/}</h3><p><em>(« Un composant passe un champ non contrôlé en mode contrôlé », NdT)</em><p>Si vous passez une <code>value</code> à un composant, cette valeur doit être une chaîne de caractères tout au long de son cycle de vie.<p>Si vous passez <code>value={undefined}</code> à un composant, puis plus tard <code>value="quelqueChose"</code>, React ne saura pas si vous voulez que le composant soit contrôlé ou non. Un composant contrôlé doit toujours recevoir une chaîne de caractères en <code>value</code>, pas <code>null</code> ni <code>undefined</code>.<p>Si votre <code>value</code> provient d'une API ou d'une variable d'état, elle peut être initialisée à <code>null</code> ou <code>undefined</code>. Dans ce cas, définissez-la avec une chaîne vide (<code>''</code>) initialement, ou passez <code>value={someValue ?? ''}</code> pour vous assurer que <code>value</code> est une chaîne de caractères. <span style="float:footnote"><a href="../../../index.html#toc">Go to TOC</a></span></section></section></inlinetoc></h1></section>