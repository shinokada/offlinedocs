<!doctype html><html lang="fr"><meta charset="utf-8"><title>preinitModule</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="preinitmodule"><h1 id="preinitmodule">preinitModule</h1><p>canary: true</p><canary><p>La fonction <code>preinitModule</code> n'est actuellement disponible que sur les canaux de livraison Canary et Expérimental de React. Apprenez-en davantage sur <a href="/community/versioning-policy#all-release-channels">les canaux de livraison React</a>.</p></canary><note><p><a href="/learn/start-a-new-react-project">Les frameworks basés sur React</a> s'occupent fréquemment pour vous du chargement des ressources, de sorte que vous n'aurez peut-être pas besoin d'appeler ces API vous-même. Consultez la documentation de votre framework pour en savoir plus à ce sujet.</p></note><intro><p><code>preinitModule</code> vous permet de charger et d'évaluer en avance un module ESM.<pre class="language-js"><code class="language-js"><span class="token function">preinitModule</span><span class="token punctuation">(</span><span class="token string">"https://example.com/module.js"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword module">as</span><span class="token operator">:</span> <span class="token string">"script"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></intro><inlinetoc><section class="level2"aria-labelledby="référence-reference"><h2 id="référence-reference">Référence {/<em>reference</em>/}</h2><section class="level3"aria-labelledby="preinitmodulehref-options-preinitmodule"><h3 id="preinitmodulehref-options-preinitmodule"><code>preinitModule(href, options)</code> {/<em>preinitmodule</em>/}</h3><p>Pour préinitialiser un module ESM, appelez la fonction <code>preinitModule</code> de <code>react-dom</code>.<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> preinitModule <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">AppRoot</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">preinitModule</span><span class="token punctuation">(</span><span class="token string">"https://example.com/module.js"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword module">as</span><span class="token operator">:</span> <span class="token string">"script"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><p><a href="#usage">Voir d'autres exemples plus bas</a>.<p>La fonction <code>preinitModule</code> suggère au navigateur de commencer à télécharger puis d'évaluer un module donné, ce qui peut faire gagner du temps. Les modules que vous passez à <code>preinitModule</code> sont exécutés dès qu'ils ont terminé leur chargement.<section class="level4"aria-labelledby="parameters-parameters"><h4 id="parameters-parameters">Parameters {/<em>parameters</em>/}</h4><ul><li><code>href</code> : une chaîne de caractères. L'URL du module que vous souhaitez télécharger et évaluer.<li><code>options</code> : un objet. Il contient les propriétés suivantes :<ul><li><code>as</code> : une chaîne de caractères obligatoire. Le type de la ressource. La seule valeur autorisée est <code>script</code>.<li><code>crossOrigin</code> : une chaîne de caractères. La <a href="https://developer.mozilla.org/fr/docs/Web/HTML/Attributes/crossorigin">politique CORS</a> à utiliser. Les valeurs possibles sont <code>anonymous</code> et <code>use-credentials</code>.<li><code>integrity</code> : une chaîne de caractères. Une empreinte cryptographique de la ressource afin de <a href="https://developer.mozilla.org/fr/docs/Web/Security/Subresource_Integrity">vérifier son authenticité</a>.<li><code>nonce</code> : une chaîne de caractères. Un <a href="https://developer.mozilla.org/fr/docs/Web/HTML/Global_attributes/nonce">nonce cryptographique autorisant la ressource</a> dans le cadre d'une Politique de Sécurité de Contenu (CSP) stricte.</ul></ul></section><section class="level4"aria-labelledby="valeur-renvoyée-returns"><h4 id="valeur-renvoyée-returns">Valeur renvoyée {/<em>returns</em>/}</h4><p><code>preinitModule</code> ne renvoie rien.</section><section class="level4"aria-labelledby="limitations-caveats"><h4 id="limitations-caveats">Limitations {/<em>caveats</em>/}</h4><ul><li>Plusieurs appels à <code>preinitModule</code> avec le même <code>href</code> ont le même effet qu'un unique appel.<li>Côté client, vous pouvez appeler <code>preinitModule</code> n'importe où : lors du rendu d'un composant, dans un Effet, dans un gestionnaire d'événement, etc.<li>Lors d'un rendu côté serveur ou du rendu de Composants Serveur, <code>preinitModule</code> n'a d'effet que si vous l'appelez lors du rendu d'un composant ou dans une fonction asynchrone issue du rendu d'un composant. Tout autre appel sera ignoré.</ul></section></section></section><section class="level2"aria-labelledby="utilisation-usage"><h2 id="utilisation-usage">Utilisation {/<em>usage</em>/}</h2><section class="level3"aria-labelledby="préinitialisation-lors-du-rendu-preiniting-when-rendering"><h3 id="préinitialisation-lors-du-rendu-preiniting-when-rendering">Préinitialisation lors du rendu {/<em>preiniting-when-rendering</em>/}</h3><p>Appelez <code>preinitModule</code> lors du rendu d'un composant si vous savez que ses enfants auront besoin de charger un module spécifique, et que vous acceptez d'évaluer ce module immédiatement après son chargement.<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> preinitModule <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">AppRoot</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">preinitModule</span><span class="token punctuation">(</span><span class="token string">"https://example.com/module.js"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword module">as</span><span class="token operator">:</span> <span class="token string">"script"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token spread operator">...</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Si vous souhaitez que le navigateur télécharge mais n'évalue pas le module immédiatement, utilisez plutôt <a href="/reference/react-dom/preload"><code>preload</code></a>. Si vous souhaitez charger et évaluer un script qui n'est pas un module ESM, utilisez <a href="/reference/react-dom/preinitModule"><code>preinit</code></a>.</section><section class="level3"aria-labelledby="préinitialisation-dans-un-gestionnaire-dévénement-preiniting-in-an-event-handler"><h3 id="préinitialisation-dans-un-gestionnaire-dévénement-preiniting-in-an-event-handler">Préinitialisation dans un gestionnaire d'événement {/<em>preiniting-in-an-event-handler</em>/}</h3><p>Appelez <code>preinitModule</code> depuis un gestionnaire d'événement avant de passer à une page ou un état qui auront besoin de modules. Ça permet de déclencher le processus plus tôt que si vous l'appeliez au sein de la nouvelle page ou suite au nouvel état.<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> preinitModule <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">CallToAction</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">preinitModule</span><span class="token punctuation">(</span><span class="token string">"https://example.com/module.js"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword module">as</span><span class="token operator">:</span> <span class="token string">"script"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">startWizard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>onClick<span class="token punctuation">}</span><span class="token operator">></span><span class="token constant">D</span>émarrer l’assistant<span class="token operator">&#x3C;</span><span class="token operator">/</span>button<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p><span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section></inlinetoc></section>