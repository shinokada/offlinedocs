<!doctype html><html id="env_vars"lang="en"><meta charset="utf-8"><title>Environment Variables</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="sidebar_label"content="Environment Variables"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><p>import Tabs from '@theme/Tabs'; import TabItem from '@theme/TabItem';<section id="setting-environment-variables"class="level3"><h3>Setting Environment Variables</h3><p>Environment variables can be set to your Micro through the Deta cli's <a href="../cli/commands.md#deta-update">update command</a>. These variables are encrypted at rest.<p>You need to create a file where you specify your environment variables with their values.<blockquote>We strongly recommend creating a file called `.env` so that this file is skipped by the Deta cli and not deployed with your Micro's code. Also, please do not share/commit your env file publicly.</blockquote><p>You can use the following command to update your environment variables:<pre class="language-sh"><code class="language-sh">deta update -e &#x3C;env_file_name></code></pre><p>The environment variables must be defined in the following format:<pre class="language-text"><code class="language-text">VAR_NAME=VALUE</code></pre><p>You should not change the value of the environment variables through your Micro's code, as the change will not persist in following invocations of your Micro.<section id="example"class="level4"><h4>Example</h4><p>Suppose you want to make an environment variable <code>SECRET_TOKEN</code> with a value of <code>abcdefgh</code> accessible to your Micro's code.<ul><li>Create a <code>.env</code> file with the following content:</ul><pre class="language-text"><code class="language-text">SECRET_TOKEN=abcdefg</code></pre><ul><li>Update the Micro's environment variables with the <code>deta update</code> command:</ul><pre class="language-sh"><code class="language-sh">deta update -e .env</code></pre></section></section><section id="pre-set-environment-variables"class="level3"><h3>Pre-Set Environment Variables</h3><p>Deta pre-sets some environment variables in your Micro's environment which are used by our runtime.<blockquote>These pre-set variables are specific to your Micro and should not be shared publicly (unless we mention otherwise). These variables can not be updated from the cli.</blockquote><p>The following pre-set environment variables could be useful for you:<ul><li><strong>DETA_PATH</strong></ul><p><code>DETA_PATH</code> stores a unique identifier for your Micro. This value is also used as the sub-domain under which your Micro is available through <code>http</code>. For example, if your <code>DETA_PATH</code> variable contained a value of <code>sdfgh</code> then your Micro is accessible at <a href="https://sdfgh.deta.dev">https://sdfgh.deta.dev</a>.<blockquote>This value does not store the self assigned sub-domain value at the moment.</blockquote><ul><li><strong>DETA_RUNTIME</strong></ul><p><code>DETA_RUNTIME</code> indicates if your code is running on a Micro, with a string value <code>true</code>.<p>In some cases, you might need to run some code exclusively in local development and not in a Micro. For example, if you're running a FastAPI project on your Micro, and you've got an endpoint that dumps debug information like so:<pre class="language-py"><code class="language-py"><span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>get</span><span class="token punctuation">(</span><span class="token operator">/</span>debug_info<span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">debug_info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

   <span class="token keyword">return</span> get_debug_info<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><p>If you want this endpoint to be only available locally, you can check the environment variable to selectively execute code:<pre class="language-py"><code class="language-py"><span class="token keyword">import</span> os

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>get</span><span class="token punctuation">(</span><span class="token operator">/</span>debug_info<span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">debug_info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">not</span> os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">'DETA_RUNTIME'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> get_debug_info<span class="token punctuation">(</span><span class="token punctuation">)</span>

   <span class="token keyword">raise</span> HTTPException<span class="token punctuation">(</span>status_code<span class="token operator">=</span><span class="token number">404</span><span class="token punctuation">,</span> detail<span class="token operator">=</span>Not Found<span class="token punctuation">)</span></code></pre><ul><li><strong>DETA_PROJECT_KEY</strong></ul><p><code>DETA_PROJECT_KEY</code> is a project key generated for your Micro for authentication with <a href="../base/about.md">Deta Base</a> and <a href="../drive/about.md">Deta Drive</a>.<p>Each micro has its own project key and this <strong>should not be shared publicly</strong>.<p>While using our SDKs(the latest versions) within a Deta Micro, you can omit specifying the project key when instantiating a service instance.<p>&#x3C;Tabs groupId=preferred-language defaultValue=js values={[ {label: 'JavaScript', value:'js', }, {label: 'Python', value: 'python',}, ]}<blockquote><tabitem value="js"></tabitem></blockquote><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token maybe-class-name">Base</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Drive</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'deta'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> base <span class="token operator">=</span> <span class="token function"><span class="token maybe-class-name">Base</span></span><span class="token punctuation">(</span><span class="token string">'base_name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> drive <span class="token operator">=</span> <span class="token function"><span class="token maybe-class-name">Drive</span></span><span class="token punctuation">(</span><span class="token string">'drive_name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><tabitem value="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> deta <span class="token keyword">import</span> Base<span class="token punctuation">,</span> Drive

base <span class="token operator">=</span> Base<span class="token punctuation">(</span><span class="token string">'base_name'</span><span class="token punctuation">)</span>
drive <span class="token operator">=</span> Drive<span class="token punctuation">(</span><span class="token string">'drive_name'</span><span class="token punctuation">)</span></code></pre></tabitem></section><section id="issues"class="level2"><h2>Issues</h2><p>If you run into any issues, consider reporting them in our <a href="https://github.com/orgs/deta/discussions">Github Discussions</a>.<span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section>