<!doctype html><html id="deploy"lang="en"><meta charset="utf-8"><title>Deploy your app or API on Deta Micros</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="sidebar_lable"content="Deploy your app or API on Deta Micros"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><p>A Deta Micro is a micro server where you can deploy your Python or Node web app without worrying about ops.<section id="python"class="level2"><h2>Python</h2><p>Most Python micro frameworks are supported, like FastAPI and Flask. Deta should run both pure WSGI &#x26; ASGI apps without any issue. Full frameworks like Django are not fully supported yet, as they require various other commands.<p>For Deta to be able to run your code, you need to call your app instance <code>app</code> and it has to be in a file called <code>main.py</code>, which is the only required file for a Python Micro. Of course you could add more files and folders.<p>No need to use a server like <code>uvicorn</code>, Deta has its own global server. Make sure you have the framework in your <code>requirements.txt</code>.<section id="example-code"class="level3"><h3>Example code</h3><section id="fastapi"class="level4"><h4>FastAPI</h4><pre class="language-py"><code class="language-py"><span class="token keyword">from</span> fastapi <span class="token keyword">import</span> FastAPI

app <span class="token operator">=</span> FastAPI<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># notice that the app instance is called `app`, this is very important.</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>get</span><span class="token punctuation">(</span><span class="token operator">/</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">read_root</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>Hello<span class="token punctuation">:</span> World<span class="token punctuation">}</span>
</code></pre></section><section id="bottlepy"class="level4"><h4>Bottlepy</h4><pre class="language-py"><code class="language-py"><span class="token keyword">from</span> bottle <span class="token keyword">import</span> Bottle

app <span class="token operator">=</span> Bottle<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># notice that the app instance is called `app`, this is very important.</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">home</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token string">'Hello, World!'</span></code></pre></section><section id="flask"class="level4"><h4>Flask</h4><pre class="language-py"><code class="language-py"><span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask

app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>  <span class="token comment"># notice that the app instance is called `app`, this is very important.</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token operator">/</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">hello_world</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token operator">&#x3C;</span>p<span class="token operator">></span>Hello<span class="token punctuation">,</span> World!<span class="token operator">&#x3C;</span><span class="token operator">/</span>p<span class="token operator">></span></code></pre></section><section id="starlette"class="level4"><h4>Starlette</h4><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> starlette<span class="token punctuation">.</span>applications <span class="token keyword">import</span> Starlette
<span class="token keyword">from</span> starlette<span class="token punctuation">.</span>responses <span class="token keyword">import</span> JSONResponse
<span class="token keyword">from</span> starlette<span class="token punctuation">.</span>routing <span class="token keyword">import</span> Route


<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">homepage</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> JSONResponse<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'hello'</span><span class="token punctuation">:</span> <span class="token string">'world'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment"># notice that the app instance is called `app`, this is very important.</span>
app <span class="token operator">=</span> Starlette<span class="token punctuation">(</span>debug<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> routes<span class="token operator">=</span><span class="token punctuation">[</span>
    Route<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> homepage<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre></section></section></section><section id="nodejs"class="level2"><h2>Node.js</h2><p>Most Node.js micro frameworks are supported, like Express, Koa, etc.<p>For Deta to be able to run your code, you need to call your app instance <code>app</code> and it has to be in a file called <code>index.js</code>, which is the only required file for a Node Micro. You also need to export <code>app</code>. Of course you could add more files and folders.<p>Make sure you have the framework in your <code>package.json</code>.<section id="example-code-1"class="level3"><h3>Example code</h3><section id="expressjs"class="level4"><h4>Express.js</h4><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// notice that the app instance is called `app`, this is very important.</span>

app<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token method function property-access">send</span><span class="token punctuation">(</span><span class="token string">'Hello World!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// no need for `app.listen()` on Deta, we run the app automatically.</span>
module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> app<span class="token punctuation">;</span> <span class="token comment">// make sure to export your `app` instance.</span></code></pre></section><section id="koajs"class="level4"><h4>Koa.js</h4><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token maybe-class-name">Koa</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Koa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span><span class="token property-access">body</span> <span class="token operator">=</span> <span class="token string">'Hello World'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// no need for `app.listen()` on Deta, we run the app automatically.</span>
module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> app<span class="token punctuation">;</span> <span class="token comment">// make sure to export your `app` instance.</span></code></pre></section><section id="fastifyjs"class="level4"><h4>Fastify.js</h4><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fastify'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Declare a route</span>
app<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> reply</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">hello</span><span class="token operator">:</span> <span class="token string">'world'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// no need for `app.listen()` on Deta, we run the app automatically.</span>
module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> app<span class="token punctuation">;</span> <span class="token comment">// make sure to export your `app` instance.</span></code></pre></section></section></section><section id="issues"class="level2"><h2>Issues</h2><p>If you run into any issues, consider reporting them in our <a href="https://github.com/orgs/deta/discussions">Github Discussions</a>. <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section>