<!doctype html><html id="sdk"lang="en"><meta charset="utf-8"><title>SDK</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><p>import Tabs from '@theme/Tabs'; import TabItem from '@theme/TabItem';<p>The Deta library is the easiest way to store and retrieve data from your Deta Base. Currently, we support JavaScript (Node + Browser), Python 3 and Go. <a href="#contact">Drop us a line</a> if you want us to support your favorite language.<blockquote>A Deta Base instance is a collection of data, not unlike a Key-Value store, a MongoDB collection or a PostgreSQL/MySQL table. It will grow with your app's needs.</blockquote><blockquote>We have an alpha version of the Python Base Async SDK. [Check the documentation here](/docs/base/async_sdk).</blockquote><section id="installing"class="level2"><h2>Installing</h2><br><tabs groupid="preferred-language"defaultvalue="js"values="{["{=""label:=""&#x27;javascript&#x27;,=""value:=""&#x27;js&#x27;,=""},=""&#x27;python&#x27;,=""&#x27;py&#x27;,=""&#x27;go&#x27;,=""]=""}=""><tabitem value="js">Using NPM:<pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> <span class="token function">install</span> deta</code></pre><p>Using Yarn:<pre class="language-shell"><code class="language-shell"><span class="token function">yarn</span> <span class="token function">add</span> deta</code></pre></tabitem><tabitem value="py"><pre class="language-shell"><code class="language-shell">pip <span class="token function">install</span> deta</code></pre></tabitem><tabitem value="go"><pre class="language-shell"><code class="language-shell">go get github.com/deta/deta-go</code></pre></tabitem></tabs><blockquote>If you are using the Deta SDK within a [Deta Micro](/docs/micros/about), you must include `deta` in your dependencies file (`package.json` or `requirements.txt`) to install the latest sdk version.</blockquote></section><section id="instantiating"class="level2"><h2>Instantiating</h2><p>To start working with your Base, you need to import the <code>Deta</code> class and initialize it with a <strong>Project Key</strong>. Then instantiate a subclass called <code>Base</code> with a database name of your choosing.<p>Deta Bases are created for you automatically when you start using them.</p><br><tabs groupid="preferred-language"defaultvalue="js"values="{["{=""label:=""&#x27;javascript&#x27;,=""value:=""&#x27;js&#x27;,=""},=""&#x27;python&#x27;,=""&#x27;py&#x27;,=""&#x27;go&#x27;,=""]=""}=""><tabitem value="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token maybe-class-name">Deta</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'deta'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// import Deta</span>

<span class="token comment">// Initialize with a Project Key</span>
<span class="token keyword">const</span> deta <span class="token operator">=</span> <span class="token function"><span class="token maybe-class-name">Deta</span></span><span class="token punctuation">(</span><span class="token string">'project key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token comment">// This how to connect to or create a database.</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> deta<span class="token punctuation">.</span><span class="token method function property-access"><span class="token maybe-class-name">Base</span></span><span class="token punctuation">(</span><span class="token string">'simple_db'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token comment">// You can create as many as you want without additional charges.</span>
<span class="token keyword">const</span> books <span class="token operator">=</span> deta<span class="token punctuation">.</span><span class="token method function property-access"><span class="token maybe-class-name">Base</span></span><span class="token punctuation">(</span><span class="token string">'books'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre><blockquote>If you are using Deta Base within a [Deta Micro](/docs/micros/about), the **Deta SDK** comes pre-installed and a valid project key is pre-set in the Micro's environment. There is no need to install the SDK or pass a key in the initialization step.<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token maybe-class-name">Deta</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'deta'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> deta <span class="token operator">=</span> <span class="token function"><span class="token maybe-class-name">Deta</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre></blockquote><blockquote>If you are using the `deta` npm package of `0.0.6` or below, `Deta` is the single default export and should be imported as such.<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token maybe-class-name">Deta</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'deta'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></blockquote></tabitem><tabitem value="py"><pre class="language-py"><code class="language-py"><span class="token keyword">from</span> deta <span class="token keyword">import</span> Deta  <span class="token comment"># Import Deta</span>

<span class="token comment"># Initialize with a Project Key</span>
deta <span class="token operator">=</span> Deta<span class="token punctuation">(</span>project key<span class="token punctuation">)</span>

<span class="token comment"># This how to connect to or create a database.</span>
db <span class="token operator">=</span> deta<span class="token punctuation">.</span>Base<span class="token punctuation">(</span>simple_db<span class="token punctuation">)</span>

<span class="token comment"># You can create as many as you want without additional charges.</span>
books <span class="token operator">=</span> deta<span class="token punctuation">.</span>Base<span class="token punctuation">(</span>books<span class="token punctuation">)</span>
</code></pre><blockquote>If you are using Deta Base within a [Deta Micro](/docs/micros/about), the **Deta SDK** comes pre-installed and a valid project key is pre-set in the Micro's environment. There is no need to install the SDK or pass a key in the the initialization step.<pre class="language-py"><code class="language-py"><span class="token keyword">from</span> deta <span class="token keyword">import</span> Deta

deta <span class="token operator">=</span> Deta<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></blockquote></tabitem><tabitem value="go"><tabs groupid="go-version"defaultvalue="new"values="{["{=""label:=""&#x27;version=""&#x3c;=""1.0.0&#x27;,=""value:=""&#x27;legacy&#x27;,=""},="">= 1.0.0', value: 'new', }, ] }><tabitem value="legacy"><pre class="language-go"><code class="language-go"><span class="token keyword">import</span> <span class="token punctuation">(</span>
  fmt
  github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// initialize with project key</span>
  <span class="token comment">// returns ErrBadProjectKey if project key is invalid</span>
  d<span class="token punctuation">,</span> err <span class="token operator">:=</span> deta<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>project_key<span class="token punctuation">)</span>
  <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to init <span class="token builtin">new</span> Deta instance<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// initialize with base name</span>
  <span class="token comment">// returns ErrBadBaseName if base name is invalid</span>
  db<span class="token punctuation">,</span> err <span class="token operator">:=</span> d<span class="token punctuation">.</span><span class="token function">NewBase</span><span class="token punctuation">(</span>base_name<span class="token punctuation">)</span>
  <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to init <span class="token builtin">new</span> Base instance<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></tabitem><tabitem value="new"><pre class="language-go"><code class="language-go"><span class="token keyword">import</span> <span class="token punctuation">(</span>
	fmt

	github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span><span class="token operator">/</span>deta
	github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span><span class="token operator">/</span>service<span class="token operator">/</span>base
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// initialize with project key</span>
	<span class="token comment">// returns ErrBadProjectKey if project key is invalid</span>
	d<span class="token punctuation">,</span> err <span class="token operator">:=</span> deta<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>deta<span class="token punctuation">.</span><span class="token function">WithProjectKey</span><span class="token punctuation">(</span>project_key<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to init <span class="token builtin">new</span> Deta instance<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// initialize with base name</span>
	<span class="token comment">// returns ErrBadBaseName if base name is invalid</span>
	db<span class="token punctuation">,</span> err <span class="token operator">:=</span> base<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> base_name<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to init <span class="token builtin">new</span> Base instance<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></tabitem></tabs></tabitem></tabs><blockquote>Your project key is confidential and meant to be used by you. Anyone who has your project key can access your database. Please, do not share it or commit it in your code.</blockquote></section><section id="using"class="level2"><h2>Using</h2><p>Deta's <strong><code>Base</code></strong> class offers the following methods to interact with your Deta Base:<p><a href="#put"><strong><code>put</code></strong></a> – Stores an item in the database. It will update an item if the key already exists.<p><a href="#insert"><strong><code>insert</code></strong></a> – Stores an item in the database but raises an error if the key already exists. (2x slower than <code>put</code>).<p><a href="#get"><strong><code>get</code></strong></a> – Retrieves an item from the database by its key.<p><a href="#fetch"><strong><code>fetch</code></strong></a> – Retrieves multiple items from the database based on the provided (optional) filters.<p><a href="#delete"><strong><code>delete</code></strong></a> – Deletes an item from the database.<p><a href="#update"><strong><code>update</code></strong></a> – Updates an item in the database.<section id="storing-numbers"class="level4"><h4>Storing Numbers</h4><blockquote>Base currently supports **maximum 16 digit numbers** (integers and floating points), please store larger numbers as a string.</blockquote></section><section id="put"class="level3"><h3>Put</h3><p><code>put</code> is the fastest way to store an item in the database.<p>If an item already exists under a given key, put will replace this item.<p>In the case you do not provide us with a key, we will auto generate a 12 char long string as a key.<p>&#x3C;Tabs groupId=preferred-language defaultValue=js values={[ { label: 'JavaScript', value: 'js', }, { label: 'Python', value: 'py', }, { label: 'Go', value: 'go', }, ] }><tabitem value="js"></tabitem><p><strong><code>async put(data, key = null, options = null)</code></strong><section id="parameters"class="level4"><h4>Parameters</h4><ul><li><strong>data</strong> (required) – Accepts: <code>object</code> (serializable), <code>string</code>, <a href="#storing-numbers"><code>number</code></a>, <code>boolean</code> and <code>array</code>.<ul><li>Description: The data to be stored.</ul><li><strong>key</strong> (optional) – Accepts: <code>string</code>, <code>null</code> or <code>undefined</code><ul><li>Description: the key (aka ID) to store the data under. Will be auto generated if not provided.</ul><li><strong>options</strong> (optional) - Accepts: <code>object</code>, <code>null</code> or <code>undefined</code><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  expireIn<span class="token operator">:</span> number<span class="token punctuation">,</span>
  expireAt<span class="token operator">:</span> Date
<span class="token punctuation">}</span></code></pre><ul><li>Description: Optional parameters.<ul><li><strong>expireIn</strong> : item will expire in <code>expireIn</code> seconds after a successfull put operation, see also <a href="./expiring_items">expiring items</a>.<li><strong>expireAt</strong> : item will expire at <code>expireAt</code> date, see also <a href="./expiring_items">expiring items</a>.</ul></ul></ul></section><section id="code-example"class="level4"><h4>Code Example</h4><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token maybe-class-name">Deta</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'deta'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> deta <span class="token operator">=</span> <span class="token function"><span class="token maybe-class-name">Deta</span></span><span class="token punctuation">(</span>project key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> deta<span class="token punctuation">.</span><span class="token method function property-access"><span class="token maybe-class-name">Base</span></span><span class="token punctuation">(</span>simple_db<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// store objects</span>
<span class="token comment">// a key will be automatically generated </span>
<span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> alex<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">77</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token comment">// we will use one as a key</span>
<span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> alex<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">77</span><span class="token punctuation">}</span><span class="token punctuation">,</span> one<span class="token punctuation">)</span>  
<span class="token comment">// the key could also be included in the object itself</span>
<span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> alex<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">77</span><span class="token punctuation">,</span> <span class="token literal-property property">key</span><span class="token operator">:</span>one<span class="token punctuation">}</span><span class="token punctuation">)</span>  

<span class="token comment">// store simple types</span>
<span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span>hello<span class="token punctuation">,</span> worlds<span class="token punctuation">)</span>
<span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
<span class="token comment">// success is the value and smart_work is the key. </span>
<span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span>success<span class="token punctuation">,</span> smart_work<span class="token punctuation">)</span>
<span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">]</span><span class="token punctuation">,</span> my_abc<span class="token punctuation">)</span>

<span class="token comment">// put expiring items</span>
<span class="token comment">// expire item in 300 seconds</span>
<span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> alex<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">}</span><span class="token punctuation">,</span> alex21<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">expireIn</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token comment">// expire item at expire date</span>
<span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> max<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">28</span><span class="token punctuation">}</span><span class="token punctuation">,</span> max28<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">expireAt</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2023-01-01T00:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span> </code></pre></section><section id="returns"class="level4"><h4>Returns</h4><p><code>put</code> returns a promise which resolves to the item on a successful put, otherwise it throws an Error.</p><tabitem value="py"><pre class="language-py"><code class="language-py">put<span class="token punctuation">(</span>
  data<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>Union<span class="token punctuation">[</span><span class="token builtin">dict</span><span class="token punctuation">,</span> <span class="token builtin">list</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
  key<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
  <span class="token operator">*</span><span class="token punctuation">,</span>
  expire_in<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
  expire_at<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>Union<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">,</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
<span class="token punctuation">)</span></code></pre></tabitem></section><section id="parameters-1"class="level4"><h4>Parameters</h4><ul><li><strong>data</strong> (required) – Accepts: <code>dict</code>, <code>str</code>, <a href="#storing-numbers"><code>int</code></a>, <a href="#storing-numbers"><code>float</code></a>, <code>bool</code> and <code>list</code>.<ul><li>Description: The data to be stored.</ul><li><strong>key</strong> (optional) – Accepts: <code>str</code> and <code>None</code><ul><li>Description: the key (aka ID) to store the data under. Will be auto generated if not provided.</ul><li><strong>expire_in</strong> (optional) - Accepts: <code>int</code> and <code>None</code><ul><li>Description: seconds after which the item will expire in, see also <a href="./expiring_items">expiring items</a></ul><li><strong>expire_at</strong> (optional) - Accepts: <code>int</code>, <code>float</code>, <code>datetime.datetime</code> and <code>None</code><ul><li>Description: time at which the item will expire in, can provide the timestamp directly(<code>int</code> or <code>float</code>) or a <a href="https://docs.python.org/3/library/datetime.html">datetime.datetime</a> object, see also <a href="./expiring_items">expiring items</a></ul></ul></section><section id="code-example-1"class="level4"><h4>Code Example</h4><pre class="language-py"><code class="language-py"><span class="token keyword">from</span> deta <span class="token keyword">import</span> Deta
deta <span class="token operator">=</span> Deta<span class="token punctuation">(</span>project key<span class="token punctuation">)</span>  
db <span class="token operator">=</span> deta<span class="token punctuation">.</span>Base<span class="token punctuation">(</span>simple_db<span class="token punctuation">)</span>

<span class="token comment"># store objects</span>
<span class="token comment"># a key will be automatically generated</span>
db<span class="token punctuation">.</span>put<span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> alex<span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">77</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  
<span class="token comment"># we will use one as a key</span>
db<span class="token punctuation">.</span>put<span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> alex<span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">77</span><span class="token punctuation">}</span><span class="token punctuation">,</span> one<span class="token punctuation">)</span>  
<span class="token comment"># the key could also be included in the object itself  </span>
db<span class="token punctuation">.</span>put<span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> alex<span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">77</span><span class="token punctuation">,</span> key<span class="token punctuation">:</span> one<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># simple types</span>
db<span class="token punctuation">.</span>put<span class="token punctuation">(</span>hello<span class="token punctuation">,</span> worlds<span class="token punctuation">)</span>
db<span class="token punctuation">.</span>put<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
<span class="token comment"># success is the value and smart_work is the key.</span>
db<span class="token punctuation">.</span>put<span class="token punctuation">(</span>success<span class="token punctuation">,</span> smart_work<span class="token punctuation">)</span>  
db<span class="token punctuation">.</span>put<span class="token punctuation">(</span><span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">]</span><span class="token punctuation">,</span> my_abc<span class="token punctuation">)</span>

<span class="token comment"># expiring items</span>
<span class="token comment"># expire item in 300 seconds</span>
db<span class="token punctuation">.</span>put<span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> alex<span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">23</span><span class="token punctuation">}</span><span class="token punctuation">,</span> alex23<span class="token punctuation">,</span> expire_in<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>
<span class="token comment"># expire item at date</span>
expire_at <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>fromisoformat<span class="token punctuation">(</span><span class="token number">2023</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span>01T00<span class="token punctuation">:</span><span class="token number">00</span><span class="token punctuation">:</span><span class="token number">00</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span>put<span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token builtin">max</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">28</span><span class="token punctuation">}</span><span class="token punctuation">,</span> max28<span class="token punctuation">,</span> expire_at<span class="token operator">=</span>expire_at<span class="token punctuation">)</span></code></pre></section><section id="returns-1"class="level4"><h4>Returns</h4><p><code>put</code> returns the item on a successful put, otherwise it raises an error.</p><tabitem value="go"><tabs groupid="go-version"defaultvalue="new"values="{["{=""label:=""&#x27;version=""&#x3c;=""1.0.0&#x27;,=""value:=""&#x27;legacy&#x27;,=""},="">= 1.0.0', value: 'new', }, ] }>}><tabitem value="legacy"><p><strong><code>Put(item interface{}) (string, error)</code></strong></p></tabitem></tabs></tabitem></section><section id="parameters-2"class="level4"><h4>Parameters</h4><ul><li><strong>item</strong> : The item to be stored, should be a <code>struct</code> or a <code>map</code>. If the item is a <code>struct</code> provide the field keys for the data with json struct tags. The key of the item must have a json struct tag of <code>key</code>. For storing expiring items, the field name <code>__expires</code> should be used with a <a href="https://pkg.go.dev/time#Time.Unix">Unix Time</a> value, see also <a href="./expiring_items">expiring items</a>.</ul><p><a href="#storing-numbers">Note for storing numbers</a></section><section id="code-example-2"class="level4"><h4>Code Example</h4><pre class="language-go"><code class="language-go"><span class="token keyword">import</span> <span class="token punctuation">(</span>
    log
    time
    github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span>
<span class="token punctuation">)</span>

<span class="token comment">// User represents a user</span>
<span class="token keyword">type</span> User <span class="token keyword">struct</span><span class="token punctuation">{</span>
    <span class="token comment">// json struct tag 'key' used to denote the key</span>

    Key      <span class="token builtin">string</span> <span class="token string">`json:key`</span> 
    Username <span class="token builtin">string</span> <span class="token string">`json:username`</span>
    Active   <span class="token builtin">bool</span> <span class="token string">`json:active`</span>
    Age      <span class="token builtin">int</span> <span class="token string">`json:age`</span>
    Likes    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token string">`json:likes`</span>
    <span class="token comment">// json struct tag '__expires' for expiration timestamp, </span>
    <span class="token comment">// tag has 'omitempty' for ommission of default 0 values</span>
    Expires  <span class="token builtin">int64</span> <span class="token string">`json:__expires,omitempty`</span> 
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// error ignored for brevity</span>
    d<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> deta<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>project key<span class="token punctuation">)</span>
    db<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> d<span class="token punctuation">.</span><span class="token function">NewBase</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span>

    <span class="token comment">// a user</span>
    u <span class="token operator">:=</span> <span class="token operator">&#x26;</span>User<span class="token punctuation">{</span>
        Key<span class="token punctuation">:</span> kasdlj1<span class="token punctuation">,</span>
        Username<span class="token punctuation">:</span> jimmy<span class="token punctuation">,</span>
        Active<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        Age<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
        Likes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>ramen<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// put item in the database</span>
    key<span class="token punctuation">,</span> err <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">Put</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>failed to put item<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>put item with key<span class="token punctuation">:</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>

    <span class="token comment">// can also use a map</span>
    um <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span>
      key<span class="token punctuation">:</span> kasdlj1<span class="token punctuation">,</span>
      username<span class="token punctuation">:</span> jimmy<span class="token punctuation">,</span>
      active<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      age<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
      likes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>ramen<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    key<span class="token punctuation">,</span> err <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">Put</span><span class="token punctuation">(</span>um<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>failed to put item<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>put item with key<span class="token punctuation">:</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>

    <span class="token comment">// expiring items</span>
    u <span class="token operator">=</span> <span class="token operator">&#x26;</span>User <span class="token punctuation">{</span>
      Key<span class="token punctuation">:</span> will_be_deleted<span class="token punctuation">,</span>  
      Username<span class="token punctuation">:</span> test_user<span class="token punctuation">,</span>
      Expires<span class="token punctuation">:</span> time<span class="token punctuation">.</span><span class="token function">Date</span><span class="token punctuation">(</span><span class="token number">2023</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>UTC<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Unix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    key<span class="token punctuation">,</span> err <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">Put</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>failed to put item<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>put item with key<span class="token punctuation">:</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>

    <span class="token comment">// maps with expiration timestamp</span>
    um <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span>
      key<span class="token punctuation">:</span> will_be_deleted<span class="token punctuation">,</span>
      test<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      __expires<span class="token punctuation">:</span> time<span class="token punctuation">.</span><span class="token function">Date</span><span class="token punctuation">(</span><span class="token number">2023</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>UTC<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Unix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token punctuation">}</span>

    key<span class="token punctuation">,</span> err <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">Put</span><span class="token punctuation">(</span>um<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>failed to put item<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>put item with key<span class="token punctuation">:</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><tabitem value="new"><p><strong><code>Put(item interface{}) (string, error)</code></strong></p></tabitem></section><section id="parameters-3"class="level4"><h4>Parameters</h4><ul><li><strong>item</strong> : The item to be stored, should be a <code>struct</code> or a <code>map</code>. If the item is a <code>struct</code> provide the field keys for the data with json struct tags. The key of the item must have a json struct tag of <code>key</code>. For storing expiring items, the field name <code>__expires</code> should be used with a <a href="https://pkg.go.dev/time#Time.Unix">Unix Time</a> value, see also <a href="./expiring_items">expiring items</a>.</ul><p><a href="#storing-numbers">Note for storing numbers</a></section><section id="code-example-3"class="level4"><h4>Code Example</h4><pre class="language-go"><code class="language-go">
<span class="token keyword">import</span> <span class="token punctuation">(</span>
	log
  time

	github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span><span class="token operator">/</span>deta
	github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span><span class="token operator">/</span>service<span class="token operator">/</span>base
<span class="token punctuation">)</span>

<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  <span class="token comment">// json struct tag 'key' used to denote the key</span>

	Key      <span class="token builtin">string</span>   <span class="token string">`json:key`</span> 
	Username <span class="token builtin">string</span>   <span class="token string">`json:username`</span>
	Active   <span class="token builtin">bool</span>     <span class="token string">`json:active`</span>
	Age      <span class="token builtin">int</span>      <span class="token string">`json:age`</span>
	Likes    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token string">`json:likes`</span>
  <span class="token comment">// json struct tag '__expires' for expiration timestamp</span>
  <span class="token comment">// 'omitempty' for omission of default 0 value</span>
  Expires  <span class="token builtin">int64</span> <span class="token string">`json:__expires,omitempty`</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// errors ignored for brevity</span>
	d<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> deta<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>deta<span class="token punctuation">.</span><span class="token function">WithProjectKey</span><span class="token punctuation">(</span>project_key<span class="token punctuation">)</span><span class="token punctuation">)</span>
	db<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> base<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> users<span class="token punctuation">)</span>

	u <span class="token operator">:=</span> <span class="token operator">&#x26;</span>User<span class="token punctuation">{</span>
		Key<span class="token punctuation">:</span>      kasdlj1<span class="token punctuation">,</span>
		Username<span class="token punctuation">:</span> jimmy<span class="token punctuation">,</span>
		Active<span class="token punctuation">:</span>   <span class="token boolean">true</span><span class="token punctuation">,</span>
		Age<span class="token punctuation">:</span>      <span class="token number">20</span><span class="token punctuation">,</span>
		Likes<span class="token punctuation">:</span>    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>ramen<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	key<span class="token punctuation">,</span> err <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">Put</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>failed to put item<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>successfully put item with key<span class="token punctuation">,</span> key<span class="token punctuation">)</span>

	<span class="token comment">// can also use a map</span>
	um <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span>
		key<span class="token punctuation">:</span>      kasdlj1<span class="token punctuation">,</span>
		username<span class="token punctuation">:</span> jimmy<span class="token punctuation">,</span>
		active<span class="token punctuation">:</span>   <span class="token boolean">true</span><span class="token punctuation">,</span>
		age<span class="token punctuation">:</span>      <span class="token number">20</span><span class="token punctuation">,</span>
		likes<span class="token punctuation">:</span>    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>ramen<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	key<span class="token punctuation">,</span> err <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">Put</span><span class="token punctuation">(</span>um<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>failed to put item<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>Successfully put item with key<span class="token punctuation">:</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>

  <span class="token comment">// put with expires</span>
  u <span class="token operator">:=</span> <span class="token operator">&#x26;</span>User<span class="token punctuation">{</span>
    Key<span class="token punctuation">:</span> will_be_deleted<span class="token punctuation">,</span>
    Username<span class="token punctuation">:</span> test_user<span class="token punctuation">,</span>
    Expires<span class="token punctuation">:</span> time<span class="token punctuation">.</span><span class="token function">Date</span><span class="token punctuation">(</span><span class="token number">2023</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>UTC<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Unix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  key<span class="token punctuation">,</span> err <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">Put</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span>
  <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>failed to put item<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>put item with key<span class="token punctuation">:</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>

  <span class="token comment">// put map with expires</span>
  um <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span>
    key<span class="token punctuation">:</span> will_be_deleted<span class="token punctuation">,</span>
    test<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    __expires<span class="token punctuation">:</span> time<span class="token punctuation">.</span><span class="token function">Data</span><span class="token punctuation">(</span><span class="token number">2023</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>UTC<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Unix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  key<span class="token punctuation">,</span> err <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">Put</span><span class="token punctuation">(</span>um<span class="token punctuation">)</span>
  <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>failed to put item<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>put item with key<span class="token punctuation">:</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></section><section id="returns-2"class="level4"><h4>Returns</h4><p>Returns the <code>key</code> of the item stored and an <code>error</code>. Possible error values:<ul><li><code>ErrBadItem</code> : bad item, item is of unexpected type<li><code>ErrBadRequest</code>: item caused a bad request response from the server<li><code>ErrUnauthorized</code>: unuathorized<li><code>ErrInternalServerError</code>: internal server error</ul><blockquote>Empty keys in objects/dictionaries/structs, like `{: value}` are invalid and will fail to be added during the backend processing stage.</blockquote></section></section><section id="get"class="level3"><h3>Get</h3><p><code>get</code> retrieves an item from the database by it's <code>key</code>.</p><br><tabs groupid="preferred-language"defaultvalue="js"values="{["{=""label:=""&#x27;javascript&#x27;,=""value:=""&#x27;js&#x27;,=""},=""&#x27;python&#x27;,=""&#x27;py&#x27;,=""&#x27;go&#x27;,=""]=""}=""><tabitem value="js"><p><strong><code>async get(key)</code></strong><section id="parameters-4"class="level4"><h4>Parameters</h4><ul><li><strong>key</strong> (required) – Accepts: <code>string</code><ul><li>Description: the key of which item is to be retrieved.</ul></ul></section><section id="code-example-4"class="level4"><h4>Code Example</h4><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> item <span class="token operator">=</span> <span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token string">'one'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// retrieving item with key one</span></code></pre></section><section id="returns-3"class="level4"><h4>Returns</h4><p>If the record is found, the promise resolves to:<pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'alex'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">77</span><span class="token punctuation">,</span> <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">'one'</span>
<span class="token punctuation">}</span></code></pre><p>If not found, the promise will resolve to <code>null</code>.</p><tabitem value="py"><pre class="language-py"><code class="language-py">get<span class="token punctuation">(</span>key<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span></code></pre></tabitem></section><section id="parameter-types"class="level4"><h4>Parameter Types</h4><ul><li><strong>key</strong> (required) – Accepts: <code>str</code><ul><li>Description: the key of which item is to be retrieved.</ul></ul></section><section id="code-example-5"class="level4"><h4>Code Example</h4><pre class="language-py"><code class="language-py">item <span class="token operator">=</span> db<span class="token punctuation">.</span>get<span class="token punctuation">(</span>one<span class="token punctuation">)</span> <span class="token comment"># retrieving item with key one</span></code></pre></section><section id="returns-4"class="level4"><h4>Returns</h4><p>If the record is found:<pre class="language-py"><code class="language-py"><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> alex<span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">77</span><span class="token punctuation">,</span> key<span class="token punctuation">:</span> one
<span class="token punctuation">}</span> </code></pre><p>If not found, the function will return <code>None</code>.</p><tabitem value="go"><p>&#x3C;Tabs groupId=go-version defaultValue=new values={[ { label: 'version &#x3C; 1.0.0', value: 'legacy', }, { label: 'version >= 1.0.0', value: 'new', }, ] }><tabitem value="legacy"></tabitem><p><strong><code>Get(key string, dest interface{}) error</code></strong></p></tabitem></section><section id="parameters-5"class="level4"><h4>Parameters</h4><ul><li><strong>key</strong>: the key of the item to be retrieved<li><strong>dest</strong>: the result will be stored into the value pointed by <code>dest</code></ul></section><section id="code-example-6"class="level4"><h4>Code Example</h4><pre class="language-go"><code class="language-go">
<span class="token keyword">import</span> <span class="token punctuation">(</span>
    fmt
    github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> User <span class="token keyword">struct</span><span class="token punctuation">{</span>
    Key <span class="token builtin">string</span> <span class="token string">`json:key`</span> <span class="token comment">// json struct tag 'key' used to denote the key</span>

    Username <span class="token builtin">string</span> <span class="token string">`json:username`</span>
    Active <span class="token builtin">bool</span> <span class="token string">`json:active`</span>
    Age <span class="token builtin">int</span> <span class="token string">`json:age`</span>
    Likes <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token string">`json:likes`</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// error ignored for brevity</span>
    d<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> deta<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>project key<span class="token punctuation">)</span>
    db<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> d<span class="token punctuation">.</span><span class="token function">NewBase</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span>

    <span class="token comment">// a variable to store the result </span>
    <span class="token keyword">var</span> u User 
    
    <span class="token comment">// get item</span>
    <span class="token comment">// returns ErrNotFound if no item was found</span>
    err <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>kasdlj1<span class="token punctuation">,</span> <span class="token operator">&#x26;</span>u<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span><span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to get item<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><tabitem value="new"><p><strong><code>Get(key string, dest interface{}) error</code></strong></p></tabitem></section><section id="parameters-6"class="level4"><h4>Parameters</h4><ul><li><strong>key</strong>: the key of the item to be retrieved<li><strong>dest</strong>: the result will be stored into the value pointed by <code>dest</code></ul></section><section id="code-example-7"class="level4"><h4>Code Example</h4><pre class="language-go"><code class="language-go"><span class="token keyword">import</span> <span class="token punctuation">(</span>
	fmt

	github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span><span class="token operator">/</span>deta
	github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span><span class="token operator">/</span>service<span class="token operator">/</span>base
<span class="token punctuation">)</span>

<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Key      <span class="token builtin">string</span>   <span class="token string">`json:key`</span> <span class="token comment">// json struct tag 'key' used to denote the key</span>

	Username <span class="token builtin">string</span>   <span class="token string">`json:username`</span>
	Active   <span class="token builtin">bool</span>     <span class="token string">`json:active`</span>
	Age      <span class="token builtin">int</span>      <span class="token string">`json:age`</span>
	Likes    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token string">`json:likes`</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	d<span class="token punctuation">,</span> err <span class="token operator">:=</span> deta<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>deta<span class="token punctuation">.</span><span class="token function">WithProjectKey</span><span class="token punctuation">(</span>project_key<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to init <span class="token builtin">new</span> Deta instance<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	db<span class="token punctuation">,</span> err <span class="token operator">:=</span> base<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> users<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to init <span class="token builtin">new</span> Base instance<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// a variable to store the result</span>
	<span class="token keyword">var</span> u User

	<span class="token comment">// get item</span>
	<span class="token comment">// returns ErrNotFound if no item was found</span>
	err <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>kasdlj1<span class="token punctuation">,</span> <span class="token operator">&#x26;</span>u<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to get item<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section><section id="returns-5"class="level4"><h4>Returns</h4><p>Returns an <code>error</code>. Possible error values:<ul><li><code>ErrNotFound</code>: no item with such key was found<li><code>ErrBadDestination</code>: bad destination, result could not be stored onto <code>dest</code><li><code>ErrUnauthorized</code>: unauthorized<li><code>ErrInternalServerError</code>: internal server error</ul></section></tabitem></tabs></section><section id="delete"class="level3"><h3>Delete</h3><p><code>delete</code> deletes an item from the database that matches the key provided.</p><br><tabs groupid="preferred-language"defaultvalue="js"values="{["{=""label:=""&#x27;javascript&#x27;,=""value:=""&#x27;js&#x27;,=""},=""&#x27;python&#x27;,=""&#x27;py&#x27;,=""&#x27;go&#x27;,=""value:&#x27;go&#x27;,=""]=""}=""><tabitem value="js"><p><strong><code>async delete(key)</code></strong><section id="parameters-7"class="level4"><h4>Parameters</h4><ul><li><strong>key</strong> (required) – Accepts: <code>string</code><ul><li>Description: the key of which item is to be deleted.</ul></ul></section><section id="code-example-8"class="level4"><h4>Code Example</h4><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">delete</span><span class="token punctuation">(</span>one<span class="token punctuation">)</span></code></pre></section><section id="returns-6"class="level4"><h4>Returns</h4><p>Always returns a promise which resolves to <code>null</code>, even if the key does not exist.</p><tabitem value="py"><pre class="language-py"><code class="language-py">delete<span class="token punctuation">(</span>key<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span></code></pre></tabitem></section><section id="parameters-8"class="level4"><h4>Parameters</h4><ul><li><strong>key</strong> (required) – Accepts: <code>str</code><ul><li>Description: the key of the item that is to be deleted.</ul></ul></section><section id="code-example-9"class="level4"><h4>Code Example</h4><pre class="language-py"><code class="language-py">res <span class="token operator">=</span> db<span class="token punctuation">.</span>delete<span class="token punctuation">(</span>one<span class="token punctuation">)</span></code></pre></section><section id="returns-7"class="level4"><h4>Returns</h4><p>Always returns <code>None</code>, even if the key does not exist.</p><tabitem value="go"><p><strong><code>Delete(key string) error</code></strong></p></tabitem></section><section id="parameters-9"class="level4"><h4>Parameters</h4><ul><li><strong>key</strong>: the key of the item to be deleted #### Code Example</ul><pre class="language-go"><code class="language-go"><span class="token comment">// delete item</span>
<span class="token comment">// returns a nil error if item was not found</span>
err <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">Delete</span><span class="token punctuation">(</span>dakjkfa<span class="token punctuation">)</span>
<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to <span class="token builtin">delete</span> item<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></section><section id="returns-8"class="level4"><h4>Returns</h4><p>Returns an <code>error</code>. A <code>nil</code> error is returned if no item was found with provided <code>key</code>. Possible error values:<ul><li><code>ErrUnauthorized</code>: unauthorized<li><code>ErrInternalServerError</code>: internal server error</ul></section></tabitem></tabs></section><section id="insert"class="level3"><h3>Insert</h3><p>The <code>insert</code> method inserts a single item into a <strong>Base</strong>, but is unique from <a href="#put"><code>put</code></a> in that it will raise an error if the <code>key</code> already exists in the database.<p><code>insert</code> is roughly 2x slower than <a href="#put"><code>put</code></a>.</p><br><tabs groupid="preferred-language"defaultvalue="js"values="{["{=""label:=""&#x27;javascript&#x27;,=""value:=""&#x27;js&#x27;,=""},=""&#x27;python&#x27;,=""&#x27;py&#x27;,=""&#x27;go&#x27;,=""]=""}=""><tabitem value="js"><p><strong><code>async insert(data, key = null, options = null)</code></strong><section id="parameters-10"class="level4"><h4>Parameters</h4><ul><li><strong>data</strong> (required) – Accepts: <code>object</code> (serializable), <code>string</code>, <a href="#storing-numbers"><code>number</code></a>, <code>boolean</code> and <code>array</code>.<ul><li>Description: The data to be stored.</ul><li><strong>key</strong> (optional) – Accepts: <code>string</code> and <code>null</code><ul><li>Description: the key (aka ID) to store the data under. Will be auto generated if not provided.</ul><li><strong>options</strong> (optional) - Accepts: <code>object</code>, <code>null</code> or <code>undefined</code><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  expireIn<span class="token operator">:</span> number<span class="token punctuation">,</span>
  expireAt<span class="token operator">:</span> Date
<span class="token punctuation">}</span></code></pre><ul><li>Description: Optional parameters.<ul><li><strong>expireIn</strong> : item will expire in <code>expireIn</code> seconds after a successfull insert operation, see also <a href="./expiring_items">expiring items</a>.<li><strong>expireAt</strong> : item will expire at <code>expireAt</code> date, see also <a href="./expiring_items">expiring items</a>.</ul></ul></ul></section><section id="code-example-10"class="level4"><h4>Code Example</h4><pre class="language-js"><code class="language-js"><span class="token comment">// will succeed, a key will be auto-generated</span>
<span class="token keyword">const</span> res1 <span class="token operator">=</span> <span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">insert</span><span class="token punctuation">(</span><span class="token string">'hello, world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// will succeed.</span>
<span class="token keyword">const</span> res2 <span class="token operator">=</span> <span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello, world'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'greeting1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// will raise an error as key greeting1 already existed.</span>
<span class="token keyword">const</span> res3 <span class="token operator">=</span> <span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello, there'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'greeting1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// expire item in 300 seconds</span>
<span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'will be deleted'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'temp_key'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">expireIn</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// expire at date</span>
<span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'will be deleted'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'temp_key_2'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">expireAt</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2023-01-01T00:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></section><section id="returns-9"class="level4"><h4>Returns</h4><p>Returns a promise which resolves to the item on a successful insert, and throws an error if the key already exists.</p><tabitem value="py"><pre class="language-py"><code class="language-py">insert<span class="token punctuation">(</span>
  data<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>Union<span class="token punctuation">[</span><span class="token builtin">dict</span><span class="token punctuation">,</span> <span class="token builtin">list</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
  key<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
  <span class="token operator">*</span><span class="token punctuation">,</span>
  expire_in<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
  expire_at<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>Union<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">,</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span> 
<span class="token punctuation">)</span></code></pre></tabitem></section><section id="parameters-11"class="level4"><h4>Parameters</h4><ul><li><strong>data</strong> (required) – Accepts: <code>dict</code>, <code>str</code>, <a href="#storing-numbers"><code>int</code></a>, <a href="#storing-numbers"><code>float</code></a>, <code>bool</code> and <code>list</code>.<ul><li>Description: The data to be stored.</ul><li><strong>key</strong> (optional) – Accepts: <code>str</code> and <code>None</code><ul><li>Description: the key (aka ID) to store the data under. Will be auto generated if not provided.</ul><li><strong>expire_in</strong> (optional) - Accepts: <code>int</code> and <code>None</code><ul><li>Description: seconds after which the item will expire in, see also <a href="./expiring_items">expiring items</a></ul><li><strong>expire_at</strong> (optional) - Accepts: <code>int</code>, <code>float</code>, <code>datetime.datetime</code> and <code>None</code><ul><li>Description: time at which the item will expire in, can provide the timestamp directly(<code>int</code> or <code>float</code>) or a <a href="https://docs.python.org/3/library/datetime.html">datetime.datetime</a> object, see also <a href="./expiring_items">expiring items</a></ul></ul></section><section id="code-example-11"class="level4"><h4>Code Example</h4><pre class="language-py"><code class="language-py"><span class="token comment"># will succeed, a key will be auto-generated</span>
db<span class="token punctuation">.</span>insert<span class="token punctuation">(</span>hello<span class="token punctuation">,</span> world<span class="token punctuation">)</span>

<span class="token comment"># will succeed.</span>
db<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token punctuation">{</span>message<span class="token punctuation">:</span> hello<span class="token punctuation">,</span> world<span class="token punctuation">}</span><span class="token punctuation">,</span> greeting1<span class="token punctuation">)</span>

<span class="token comment"># will raise an error as key greeting1 already existed.</span>
db<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token punctuation">{</span>message<span class="token punctuation">:</span> hello<span class="token punctuation">,</span> there<span class="token punctuation">}</span><span class="token punctuation">,</span> greeting1<span class="token punctuation">)</span>

<span class="token comment"># expiring items</span>
<span class="token comment"># expire in 300 seconds</span>
db<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token punctuation">{</span>message<span class="token punctuation">:</span> will be deleted<span class="token punctuation">}</span><span class="token punctuation">,</span> temp_greeting<span class="token punctuation">,</span> expire_in<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>

<span class="token comment"># expire at date</span>
expire_at <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>fromisoformat<span class="token punctuation">(</span><span class="token number">2023</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span>01T00<span class="token punctuation">:</span><span class="token number">00</span><span class="token punctuation">:</span><span class="token number">00</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token punctuation">{</span>message<span class="token punctuation">:</span> will_be_deleted<span class="token punctuation">}</span><span class="token punctuation">,</span> temp_greeting2<span class="token punctuation">,</span> expire_at<span class="token operator">=</span>expire_at<span class="token punctuation">)</span></code></pre></section><section id="returns-10"class="level4"><h4>Returns</h4><p>Returns the item on a successful insert, and throws an error if the key already exists.</p><tabitem value="go"><tabs groupid="go-version"defaultvalue="new"values="{["{=""label:=""&#x27;version=""&#x3c;=""1.0.0&#x27;,=""value:=""&#x27;legacy&#x27;,=""},="">= 1.0.0', value: 'new', }, ] }><tabitem value="legacy"><p><strong><code>Insert(item interface{}) (string, error)</code></strong></p></tabitem></tabs></tabitem></section><section id="parameters-12"class="level4"><h4>Parameters</h4><ul><li><strong>item</strong> : similar to <code>item</code> parameter to <a href="#put"><code>Put</code></a></ul></section><section id="code-example-12"class="level4"><h4>Code Example</h4><pre class="language-go"><code class="language-go">
<span class="token keyword">import</span> <span class="token punctuation">(</span>
    fmt
    github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> User <span class="token keyword">struct</span><span class="token punctuation">{</span>
    Key <span class="token builtin">string</span> <span class="token string">`json:key`</span> <span class="token comment">// json struct tag 'key' used to denote the key</span>

    Username <span class="token builtin">string</span> <span class="token string">`json:username`</span>
    Active <span class="token builtin">bool</span> <span class="token string">`json:active`</span>
    Age <span class="token builtin">int</span> <span class="token string">`json:age`</span>
    Likes <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token string">`json:likes`</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// error ignored for brevity</span>
    d<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> deta<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>project key<span class="token punctuation">)</span>
    db<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> d<span class="token punctuation">.</span><span class="token function">NewBase</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span>

    <span class="token comment">// a user</span>
    u <span class="token operator">:=</span> <span class="token operator">&#x26;</span>User<span class="token punctuation">{</span>
        Key<span class="token punctuation">:</span> kasdlj1<span class="token punctuation">,</span>
        Username<span class="token punctuation">:</span> jimmy<span class="token punctuation">,</span>
        Active<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        Age<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
        Likes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>ramen<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// insert item in the database</span>
    key<span class="token punctuation">,</span> err <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to insert item<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>Successfully inserted item with key<span class="token punctuation">:</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><tabitem value="new"><p><strong><code>Insert(item interface{}) (string, error)</code></strong></p></tabitem></section><section id="parameters-13"class="level4"><h4>Parameters</h4><ul><li><strong>item</strong> : similar to <code>item</code> parameter to <a href="#put"><code>Put</code></a></ul></section><section id="code-example-13"class="level4"><h4>Code Example</h4><pre class="language-go"><code class="language-go">
<span class="token keyword">import</span> <span class="token punctuation">(</span>
	fmt

	github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span><span class="token operator">/</span>deta
	github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span><span class="token operator">/</span>service<span class="token operator">/</span>base
<span class="token punctuation">)</span>

<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Key      <span class="token builtin">string</span>   <span class="token string">`json:key`</span> <span class="token comment">// json struct tag 'key' used to denote the key</span>

	Username <span class="token builtin">string</span>   <span class="token string">`json:username`</span>
	Active   <span class="token builtin">bool</span>     <span class="token string">`json:active`</span>
	Age      <span class="token builtin">int</span>      <span class="token string">`json:age`</span>
	Likes    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token string">`json:likes`</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	d<span class="token punctuation">,</span> err <span class="token operator">:=</span> deta<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>deta<span class="token punctuation">.</span><span class="token function">WithProjectKey</span><span class="token punctuation">(</span>project_key<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to init <span class="token builtin">new</span> Deta instance<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	db<span class="token punctuation">,</span> err <span class="token operator">:=</span> base<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> users<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to init <span class="token builtin">new</span> Base instance<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	u <span class="token operator">:=</span> <span class="token operator">&#x26;</span>User<span class="token punctuation">{</span>
		Key<span class="token punctuation">:</span>      kasdlj1<span class="token punctuation">,</span>
		Username<span class="token punctuation">:</span> jimmy<span class="token punctuation">,</span>
		Active<span class="token punctuation">:</span>   <span class="token boolean">true</span><span class="token punctuation">,</span>
		Age<span class="token punctuation">:</span>      <span class="token number">20</span><span class="token punctuation">,</span>
		Likes<span class="token punctuation">:</span>    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>ramen<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// insert item in the database</span>
	key<span class="token punctuation">,</span> err <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to insert item<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>Successfully inserted item with key<span class="token punctuation">:</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></section><section id="returns-11"class="level4"><h4>Returns</h4><p>Returns the <code>key</code> of the item inserted and an <code>error</code>. Possible error values:<ul><li><code>ErrConflict</code> : if item with provided <code>key</code> already exists<li><code>ErrBadItem</code>: bad item, if item is of unexpected type<li><code>ErrBadRequest</code>: item caused a bad request response from the server<li><code>ErrUnauthorized</code>: unauthorized<li><code>ErrInternalServerError</code>: internal server error</ul></section></tabitem></tabs></section><section id="put-many"class="level3"><h3>Put Many</h3><p>The Put Many method puts up to 25 items into a Base at once on a single call.</p><br><tabs groupid="preferred-language"defaultvalue="js"values="{["{=""label:=""&#x27;javascript&#x27;,=""value:=""&#x27;js&#x27;,=""},=""&#x27;python&#x27;,=""&#x27;py&#x27;,=""&#x27;go&#x27;,=""]=""}=""><tabitem value="js"><p><strong><code>async putMany(items, options)</code></strong><section id="parameters-14"class="level4"><h4>Parameters</h4><ul><li><strong>items</strong> (required) – Accepts: <code>Array</code> of items, where each item can be an <code>object</code> (serializable), <code>string</code>, <a href="#storing-numbers"><code>number</code></a>, <code>boolean</code> or <code>array</code>.<ul><li>Description: The list of items to be stored.</ul><li><strong>options</strong> (optional) - Accepts: <code>object</code>, <code>null</code> or <code>undefined</code><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  expireIn<span class="token operator">:</span> number<span class="token punctuation">,</span>
  expireAt<span class="token operator">:</span> Date
<span class="token punctuation">}</span></code></pre><ul><li>Description: Optional parameters.<ul><li><strong>expireIn</strong> : item will expire in <code>expireIn</code> seconds after a successfull put operation, see also <a href="./expiring_items">expiring items</a>.<li><strong>expireAt</strong> : item will expire at <code>expireAt</code> date, see also <a href="./expiring_items">expiring items</a>.</ul></ul></ul></section><section id="code-example-14"class="level4"><h4>Code Example</h4><pre class="language-js"><code class="language-js">
<span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">putMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token maybe-class-name">Beverly</span><span class="token punctuation">,</span> <span class="token literal-property property">hometown</span><span class="token operator">:</span> <span class="token maybe-class-name">Copernicus</span> <span class="token maybe-class-name">City</span><span class="token punctuation">,</span> <span class="token literal-property property">key</span><span class="token operator">:</span> one<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// key provided</span>
  dude<span class="token punctuation">,</span> <span class="token comment">// key auto-generated </span>
  <span class="token punctuation">[</span><span class="token maybe-class-name">Namaskāra</span><span class="token punctuation">,</span> marhabaan<span class="token punctuation">,</span> hello<span class="token punctuation">,</span> yeoboseyo<span class="token punctuation">]</span> <span class="token comment">// key auto-generated </span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// putMany with expire in 300 seconds</span>
<span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">putMany</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span> temp<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> test<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span> temp<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> test<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">expireIn</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// putMany with expire at</span>
<span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">putMany</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span> temp<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> test<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span> temp<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> test<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">expireAt</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2023-01-01T00:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></section><section id="returns-12"class="level4"><h4>Returns</h4><p>Returns a promise which resolves to the put items on a successful insert, and throws an error if you attempt to put more than 25 items.<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
    processed<span class="token operator">:</span> <span class="token punctuation">{</span>
        items<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                hometown<span class="token operator">:</span> Copernicus City<span class="token punctuation">,</span>
                key<span class="token operator">:</span> one<span class="token punctuation">,</span>
                name<span class="token operator">:</span> Beverly
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                key<span class="token operator">:</span> jyesxxlrezo0<span class="token punctuation">,</span>
                value<span class="token operator">:</span> dude
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                key<span class="token operator">:</span> 5feqybn7lb05<span class="token punctuation">,</span>
                value<span class="token operator">:</span> <span class="token punctuation">[</span>
                    Namaskāra<span class="token punctuation">,</span>
                    hello<span class="token punctuation">,</span>
                    marhabaan<span class="token punctuation">,</span>
                    yeoboseyo
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><tabitem value="py"><pre class="language-py"><code class="language-py">put_many<span class="token punctuation">(</span>
  items<span class="token punctuation">:</span> <span class="token builtin">list</span><span class="token punctuation">,</span>
  <span class="token operator">*</span><span class="token punctuation">,</span>
  expire_in<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
  expire_at<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>Union<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">,</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span></code></pre></tabitem></section><section id="parameters-15"class="level4"><h4>Parameters</h4><ul><li><strong>items</strong> (required) – Accepts: <code>list</code> of items, where each item can be an <code>dict</code> (JSON serializable), <code>str</code>, <a href="#storing-numbers"><code>int</code></a>, <code>bool</code>, <a href="#storing-numbers"><code>float</code></a> or <code>list</code>.<ul><li>Description: The list of items to be stored.</ul><li><strong>expire_in</strong> (optional) - Accepts: <code>int</code> and <code>None</code><ul><li>Description: seconds after which the item will expire in, see also <a href="./expiring_items">expiring items</a></ul><li><strong>expire_at</strong> (optional) - Accepts: <code>int</code>, <code>float</code>, <code>datetime.datetime</code> and <code>None</code><ul><li>Description: time at which the item will expire in, can provide the timestamp directly(<code>int</code> or <code>float</code>) or a <a href="https://docs.python.org/3/library/datetime.html">datetime.datetime</a> object, see also <a href="./expiring_items">expiring items</a></ul></ul></section><section id="code-example-15"class="level4"><h4>Code Example</h4><pre class="language-py"><code class="language-py">db<span class="token punctuation">.</span>put_many<span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>name<span class="token punctuation">:</span> Beverly<span class="token punctuation">,</span> hometown<span class="token punctuation">:</span> Copernicus City<span class="token punctuation">,</span> key<span class="token punctuation">:</span> one<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token operator">//</span> key provided
  dude<span class="token punctuation">,</span> <span class="token operator">//</span> key auto<span class="token operator">-</span>generated 
  <span class="token punctuation">[</span>Namaskāra<span class="token punctuation">,</span> marhabaan<span class="token punctuation">,</span> hello<span class="token punctuation">,</span> yeoboseyo<span class="token punctuation">]</span> <span class="token operator">//</span> key auto<span class="token operator">-</span>generated 
<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># put many to expire in 300 seconds</span>
db<span class="token punctuation">.</span>put_many<span class="token punctuation">(</span>
  <span class="token punctuation">[</span><span class="token punctuation">{</span>key<span class="token punctuation">:</span> tmp<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> test<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>key<span class="token punctuation">:</span> tmp<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> test<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  expire_in<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>

<span class="token comment"># put many with expire at</span>
expire_at <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>fromisoformat<span class="token punctuation">(</span><span class="token number">2023</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span>01T00<span class="token punctuation">:</span><span class="token number">00</span><span class="token punctuation">:</span><span class="token number">00</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span>put_many<span class="token punctuation">(</span>
  <span class="token punctuation">[</span><span class="token punctuation">{</span>key<span class="token punctuation">:</span> tmp<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> test<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>key<span class="token punctuation">:</span> tmp<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> test<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  expire_at<span class="token operator">=</span>expire_at<span class="token punctuation">,</span>
<span class="token punctuation">)</span></code></pre></section><section id="returns-13"class="level4"><h4>Returns</h4><p>Returns a dict with <code>processed</code> and <code>failed</code>(if any) items .<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
    processed<span class="token operator">:</span> <span class="token punctuation">{</span>
        items<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                hometown<span class="token operator">:</span> Copernicus City<span class="token punctuation">,</span>
                key<span class="token operator">:</span> one<span class="token punctuation">,</span>
                name<span class="token operator">:</span> Beverly
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                key<span class="token operator">:</span> jyesxxlrezo0<span class="token punctuation">,</span>
                value<span class="token operator">:</span> dude
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                key<span class="token operator">:</span> 5feqybn7lb05<span class="token punctuation">,</span>
                value<span class="token operator">:</span> <span class="token punctuation">[</span>
                    Namaskāra<span class="token punctuation">,</span>
                    hello<span class="token punctuation">,</span>
                    marhabaan<span class="token punctuation">,</span>
                    yeoboseyo
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><tabitem value="go"><p>&#x3C;Tabs groupId=go-version defaultValue=new values={[ { label: 'version &#x3C; 1.0.0', value: 'legacy', }, { label: 'version >= 1.0.0', value: 'new', }, ] }><tabitem value="legacy"></tabitem><p><strong><code>PutMany(items interface{}) ([]string, error)</code></strong></p></tabitem></section><section id="parameters-16"class="level4"><h4>Parameters:</h4><ul><li><strong>items</strong>: a slice of items, each item in the slice similar to the <code>item</code> parameter in <a href="#put"><code>Put</code></a></ul></section><section id="code-example-16"class="level4"><h4>Code Example:</h4><pre class="language-go"><code class="language-go">
<span class="token keyword">import</span> <span class="token punctuation">(</span>
    fmt
    github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> User <span class="token keyword">struct</span><span class="token punctuation">{</span>
    Key <span class="token builtin">string</span> <span class="token string">`json:key`</span> <span class="token comment">// json struct tag 'key' used to denote the key</span>

    Username <span class="token builtin">string</span> <span class="token string">`json:username`</span>
    Active <span class="token builtin">bool</span> <span class="token string">`json:active`</span>
    Age <span class="token builtin">int</span> <span class="token string">`json:age`</span>
    Likes <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token string">`json:likes`</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// error ignored for brevity</span>
    d<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> deta<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>project key<span class="token punctuation">)</span>
    db<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> d<span class="token punctuation">.</span><span class="token function">NewBase</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span>

    <span class="token comment">// users</span>
    u1 <span class="token operator">:=</span> <span class="token operator">&#x26;</span>User<span class="token punctuation">{</span>
        Key<span class="token punctuation">:</span> kasdlj1<span class="token punctuation">,</span>
        Username<span class="token punctuation">:</span> jimmy<span class="token punctuation">,</span>
        Active<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        Age<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
        Likes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>ramen<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    u2 <span class="token operator">:=</span> <span class="token operator">&#x26;</span>User<span class="token punctuation">{</span>
      Key<span class="token punctuation">:</span> askdjf<span class="token punctuation">,</span>
      Username<span class="token punctuation">:</span> joel<span class="token punctuation">,</span>
      Active<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      Age<span class="token punctuation">:</span> <span class="token number">23</span><span class="token punctuation">,</span>
      Likes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>coffee<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    users <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>User<span class="token punctuation">{</span>u1<span class="token punctuation">,</span> u2<span class="token punctuation">}</span>

    <span class="token comment">// put items in the database</span>
    keys<span class="token punctuation">,</span> err <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">PutMany</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to put items<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>Successfully put item with keys<span class="token punctuation">:</span><span class="token punctuation">,</span> keys<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><tabitem value="new"><p><strong><code>PutMany(items interface{}) ([]string, error)</code></strong></p></tabitem></section><section id="parameters-17"class="level4"><h4>Parameters:</h4><ul><li><strong>items</strong>: a slice of items, each item in the slice similar to the <code>item</code> parameter in <a href="#put"><code>Put</code></a></ul></section><section id="code-example-17"class="level4"><h4>Code Example:</h4><pre class="language-go"><code class="language-go"><span class="token keyword">import</span> <span class="token punctuation">(</span>
	fmt

	github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span><span class="token operator">/</span>deta
	github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span><span class="token operator">/</span>service<span class="token operator">/</span>base
<span class="token punctuation">)</span>

<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Key      <span class="token builtin">string</span>   <span class="token string">`json:key`</span> <span class="token comment">// json struct tag 'key' used to denote the key</span>

	Username <span class="token builtin">string</span>   <span class="token string">`json:username`</span>
	Active   <span class="token builtin">bool</span>     <span class="token string">`json:active`</span>
	Age      <span class="token builtin">int</span>      <span class="token string">`json:age`</span>
	Likes    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token string">`json:likes`</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	d<span class="token punctuation">,</span> err <span class="token operator">:=</span> deta<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>deta<span class="token punctuation">.</span><span class="token function">WithProjectKey</span><span class="token punctuation">(</span>project_key<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to init <span class="token builtin">new</span> Deta instance<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	db<span class="token punctuation">,</span> err <span class="token operator">:=</span> base<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> users<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to init <span class="token builtin">new</span> Base instance<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// users</span>
	u1 <span class="token operator">:=</span> <span class="token operator">&#x26;</span>User<span class="token punctuation">{</span>
		Key<span class="token punctuation">:</span>      kasdlj1<span class="token punctuation">,</span>
		Username<span class="token punctuation">:</span> jimmy<span class="token punctuation">,</span>
		Active<span class="token punctuation">:</span>   <span class="token boolean">true</span><span class="token punctuation">,</span>
		Age<span class="token punctuation">:</span>      <span class="token number">20</span><span class="token punctuation">,</span>
		Likes<span class="token punctuation">:</span>    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>ramen<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	u2 <span class="token operator">:=</span> <span class="token operator">&#x26;</span>User<span class="token punctuation">{</span>
		Key<span class="token punctuation">:</span>      askdjf<span class="token punctuation">,</span>
		Username<span class="token punctuation">:</span> joel<span class="token punctuation">,</span>
		Active<span class="token punctuation">:</span>   <span class="token boolean">true</span><span class="token punctuation">,</span>
		Age<span class="token punctuation">:</span>      <span class="token number">23</span><span class="token punctuation">,</span>
		Likes<span class="token punctuation">:</span>    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>coffee<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	users <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>User<span class="token punctuation">{</span>u1<span class="token punctuation">,</span> u2<span class="token punctuation">}</span>

	<span class="token comment">// put items in the database</span>
	keys<span class="token punctuation">,</span> err <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">PutMany</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to put items<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>Successfully put item with keys<span class="token punctuation">:</span><span class="token punctuation">,</span> keys<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></section><section id="returns-14"class="level4"><h4>Returns</h4><p>Returns the list of keys of the items stored and an <code>error</code>. In case of an error, none of the items are stored. Possible error values:<ul><li><code>ErrTooManyItems</code>: if there are more than 25 items<li><code>ErrBadItem</code>: bad item/items, one or more item of unexpected type<li><code>ErrBadRequest</code>: one or more item caused a bad request response from the server<li><code>ErrUnauthorized</code>: unauthorized<li><code>ErrInternalServerError</code>: internal server error</ul></section></tabitem></tabs></section><section id="update"class="level3"><h3>Update</h3><p><code>update</code> updates an existing item from the database.</p><br><tabs groupid="preferred-language"defaultvalue="js"values="{["{=""label:=""&#x27;javascript&#x27;,=""value:=""&#x27;js&#x27;,=""},=""&#x27;python&#x27;,=""&#x27;py&#x27;,=""&#x27;go&#x27;,=""]=""}=""><tabitem value="js"><p><strong><code>async update(updates, key, options)</code></strong><section id="parameters-18"class="level4"><h4>Parameters</h4><ul><li><strong>updates</strong> (required) - Accepts: <code>object</code> (JSON serializable)<ul><li>Description: a json object describing the updates on the item</ul><li><strong>key</strong> (required) – Accepts: <code>string</code><ul><li>Description: the key of the item to be updated.</ul><li><strong>options</strong> (optional) - Accepts: <code>object</code><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  expireIn<span class="token operator">:</span> number<span class="token punctuation">,</span>
  expireAt<span class="token operator">:</span> Date
<span class="token punctuation">}</span></code></pre><ul><li>Description: Optional parameters.<ul><li><strong>expireIn</strong> : item will expire in <code>expireIn</code> seconds after a successfull update operation, see also <a href="./expiring_items">expiring items</a>.<li><strong>expireAt</strong> : item will expire at <code>expireAt</code> date, see also <a href="./expiring_items">expiring items</a>.</ul></ul></ul><p><a href="#storing-numbers">Note for storing numbers</a><section id="update-operations"class="level5"><h5>Update operations</h5><ul><li><p><strong>Set</strong> : <code>Set</code> is practiced through normal key-value pairs. The operation changes the values of the attributes provided in the <code>set</code> object if the attribute already exists. If not, it adds the attribute to the item with the corresponding value.<li><p><strong>Increment</strong>: <code>Increment</code> increments the value of an attribute. The attribute's value <em>must be a number</em>. The util <code>base.util.increment(value)</code> should be used to increment the value. The <em>default value is 1</em> if not provided and it can also be negative.<li><p><strong>Append</strong>: <code>Append</code> appends to a list. The util <code>base.util.append(value)</code> should be used to append the value. The value can be a <code>primitive type</code> or an <code>array</code>.<li><p><strong>Prepend</strong>: <code>Prepend</code> prepends to a list. The util <code>base.util.prepend(value)</code> should be used to prepend the value. The value can be a <code>primitive type</code> or an <code>array</code>.<li><p><strong>Trim</strong>: <code>Trim</code> removes an attribute from the item, the util <code>base.util.trim()</code> should be used as the value of an attribute.</ul></section></section><section id="code-example-18"class="level4"><h4>Code Example</h4><p>Consider we have the following item in a base <code>const users = deta.Base('users')</code>:<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  key<span class="token operator">:</span> user-a<span class="token punctuation">,</span>
  username<span class="token operator">:</span> jimmy<span class="token punctuation">,</span>
  profile<span class="token operator">:</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token number">32</span><span class="token punctuation">,</span>
    active<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> pittsburgh 
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  on_mobile<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  likes<span class="token operator">:</span> <span class="token punctuation">[</span>anime<span class="token punctuation">]</span><span class="token punctuation">,</span>
  purchases<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span></code></pre><p>Then the following update operation :<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> updates <span class="token operator">=</span> <span class="token punctuation">{</span>
  profile<span class="token punctuation">.</span><span class="token property-access">age</span><span class="token operator">:</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token comment">// set profile.age to 33</span>
  profile<span class="token punctuation">.</span><span class="token property-access">active</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// set profile.active to true</span>
  profile<span class="token punctuation">.</span><span class="token property-access">email</span><span class="token operator">:</span> jimmy@deta<span class="token punctuation">.</span><span class="token property-access">sh</span><span class="token punctuation">,</span> <span class="token comment">// create a new attribute 'profile.email'</span>
  profile<span class="token punctuation">.</span><span class="token property-access">hometown</span><span class="token operator">:</span> users<span class="token punctuation">.</span><span class="token property-access">util</span><span class="token punctuation">.</span><span class="token method function property-access">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// remove 'profile.hometown'</span>
  <span class="token literal-property property">on_mobile</span><span class="token operator">:</span> users<span class="token punctuation">.</span><span class="token property-access">util</span><span class="token punctuation">.</span><span class="token method function property-access">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// remove 'on_mobile'</span>
  <span class="token literal-property property">purchases</span><span class="token operator">:</span> users<span class="token punctuation">.</span><span class="token property-access">util</span><span class="token punctuation">.</span><span class="token method function property-access">increment</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// increment 'purchases' by 2, default value is 1</span>
  <span class="token literal-property property">likes</span><span class="token operator">:</span> users<span class="token punctuation">.</span><span class="token property-access">util</span><span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span>ramen<span class="token punctuation">)</span> <span class="token comment">// append 'ramen' to 'likes', also accepts an array </span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">update</span><span class="token punctuation">(</span>updates<span class="token punctuation">,</span> user<span class="token operator">-</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Results in the following item in the base:<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  key<span class="token operator">:</span> user-a<span class="token punctuation">,</span>
  username<span class="token operator">:</span> jimmy<span class="token punctuation">,</span>
  profile<span class="token operator">:</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token number">33</span><span class="token punctuation">,</span>
    active<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    email<span class="token operator">:</span> jimmy@deta.sh
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  likes<span class="token operator">:</span> <span class="token punctuation">[</span>anime<span class="token punctuation">,</span> ramen<span class="token punctuation">]</span><span class="token punctuation">,</span>
  purchases<span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span></code></pre></section><section id="returns-15"class="level4"><h4>Returns</h4><p>If the item is updated, the promise resolves to <code>null</code>. Otherwise, an error is raised.</p><tabitem value="py"><pre class="language-py"><code class="language-py">update<span class="token punctuation">(</span>
  updates<span class="token punctuation">:</span> <span class="token builtin">dict</span><span class="token punctuation">,</span> 
  key<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> 
  <span class="token operator">*</span><span class="token punctuation">,</span> 
  expire_in<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span> 
  expire_at<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>Union <span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">,</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
<span class="token punctuation">)</span></code></pre></tabitem></section><section id="parameters-19"class="level4"><h4>Parameters</h4><ul><li><strong>updates</strong> (required) - Accepts: <code>dict</code> (JSON serializable)<ul><li>Description: a dict describing the updates on the item</ul><li><strong>key</strong> (required) – Accepts: <code>string</code><ul><li>Description: the key of the item to be updated.</ul><li><strong>expire_in</strong> (optional) - Accepts: <code>int</code> and <code>None</code><ul><li>Description: seconds after which the item will expire in, see also <a href="./expiring_items">expiring items</a></ul><li><strong>expire_at</strong> (optional) - Accepts: <code>int</code>, <code>float</code>, <code>datetime.datetime</code> and <code>None</code><ul><li>Description: time at which the item will expire in, can provide the timestamp directly(<code>int</code> or <code>float</code>) or a <a href="https://docs.python.org/3/library/datetime.html">datetime.datetime</a> object, see also <a href="./expiring_items">expiring items</a></ul></ul><p><a href="#storing-numbers">Note for storing numbers</a><section id="update-operations-1"class="level5"><h5>Update operations</h5><ul><li><p><strong>Set</strong> : <code>Set</code> is practiced through normal key-value pairs. The operation changes the values of the attributes provided in the <code>set</code> dict if the attribute already exists. If not, it adds the attribute to the item with the corresponding value.<li><p><strong>Increment</strong>: <code>Increment</code> increments the value of an attribute. The attribute's value <em>must be a number</em>. The util <code>base.util.increment(value)</code> should be used to increment the value. The <em>default value is 1</em> if not provided and it can also be negative.<li><p><strong>Append</strong>: <code>Append</code> appends to a list. The util <code>base.util.append(value)</code> should be used to append the value. The value can be a <code>primitive type</code> or a <code>list</code>.<li><p><strong>Prepend</strong>: <code>Prepend</code> prepends to a list. The util <code>base.util.prepend(value)</code> should be used to prepend the value. The value can be a <code>primitive type</code> or a <code>list</code>.<li><p><strong>Trim</strong>: <code>Trim</code> removes an attribute from the item, the util <code>base.util.trim()</code> should be used as the value of an attribute.</ul></section></section><section id="code-example-19"class="level4"><h4>Code Example</h4><p>Consider we have the following item in a base <code>users = deta.Base('users')</code>:<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  key<span class="token operator">:</span> user-a<span class="token punctuation">,</span>
  username<span class="token operator">:</span> jimmy<span class="token punctuation">,</span>
  profile<span class="token operator">:</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token number">32</span><span class="token punctuation">,</span>
    active<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> pittsburgh 
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  on_mobile<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  likes<span class="token operator">:</span> <span class="token punctuation">[</span>anime<span class="token punctuation">]</span><span class="token punctuation">,</span>
  purchases<span class="token operator">:</span> <span class="token number">1</span> 
<span class="token punctuation">}</span></code></pre><p>Then the following update operation:<pre class="language-py"><code class="language-py">updates <span class="token operator">=</span> <span class="token punctuation">{</span>
  profile<span class="token punctuation">.</span>age<span class="token punctuation">:</span> <span class="token number">33</span><span class="token punctuation">,</span>  <span class="token comment"># set profile.age to 33</span>
  profile<span class="token punctuation">.</span>active<span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token comment"># set profile.active to true</span>
  profile<span class="token punctuation">.</span>email<span class="token punctuation">:</span> jimmy@deta<span class="token punctuation">.</span>sh<span class="token punctuation">,</span> <span class="token comment"># create a new attribute 'profile.email'</span>
  profile<span class="token punctuation">.</span>hometown<span class="token punctuation">:</span> users<span class="token punctuation">.</span>util<span class="token punctuation">.</span>trim<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment"># remove 'profile.hometown'</span>
  on_mobile<span class="token punctuation">:</span> users<span class="token punctuation">.</span>util<span class="token punctuation">.</span>trim<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment"># remove 'on_mobile'</span>
  purchases<span class="token punctuation">:</span> users<span class="token punctuation">.</span>util<span class="token punctuation">.</span>increment<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment"># increment by 2, default value is 1</span>
  likes<span class="token punctuation">:</span> users<span class="token punctuation">.</span>util<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ramen<span class="token punctuation">)</span> <span class="token comment"># append 'ramen' to 'likes', also accepts a list </span>
<span class="token punctuation">}</span>

db<span class="token punctuation">.</span>update<span class="token punctuation">(</span>updates<span class="token punctuation">,</span> user<span class="token operator">-</span>a<span class="token punctuation">)</span></code></pre><p>Results in the following item in the base:<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  key<span class="token operator">:</span> user-a<span class="token punctuation">,</span>
  username<span class="token operator">:</span> jimmy<span class="token punctuation">,</span>
  profile<span class="token operator">:</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token number">33</span><span class="token punctuation">,</span>
    active<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    email<span class="token operator">:</span> jimmy@deta.sh
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  likes<span class="token operator">:</span><span class="token punctuation">[</span>anime<span class="token punctuation">,</span> ramen<span class="token punctuation">]</span><span class="token punctuation">,</span>
  purchases<span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span></code></pre></section><section id="returns-16"class="level4"><h4>Returns</h4><p>If the item is updated, returns <code>None</code>. Otherwise, an exception is raised.</p><tabitem value="go"><tabs groupid="go-version"defaultvalue="new"values="{["{=""label:=""&#x27;version=""&#x3c;=""1.0.0&#x27;,=""value:=""&#x27;legacy&#x27;,=""},="">= 1.0.0', value: 'new', }, ] }><tabitem value="legacy"><p><strong><code>Update(key string, updates Updates) error</code></strong></p></tabitem></tabs></tabitem></section><section id="parameters-20"class="level4"><h4>Parameters</h4><ul><li><strong>key</strong>: the key of the item to update<li><strong>updates</strong> : updates applied to the item, is of type <code>deta.Updates</code> which is a <code>map[string]interface{}</code></ul><p><a href="#storing-numbers">Note for storing numbers</a><section id="update-operations-2"class="level5"><h5>Update operations</h5><ul><li><p><strong>Set</strong> : <code>Set</code> is practiced through normal key-value pairs. The operation changes the values of the attributes provided if the attribute already exists. If not, it adds the attribute to the item with the corresponding value.<li><p><strong>Increment</strong>: <code>Increment</code> increments the value of an attribute. The attribute's value <em>must be a number</em>. The util <code>Base.Util.Increment(value interface{})</code> should be used to increment the value. The value can also be negative.<li><p><strong>Append</strong>: <code>Append</code> appends to a list. The util <code>Base.Util.Append(value interface{})</code> should be used to append the value. The value can be a slice.<li><p><strong>Prepend</strong>: <code>Prepend</code> prepends to a list. The util <code>Base.Util.Prepend(value interface{})</code> should be used to prepend the value. The value can be a slice.<li><p><strong>Trim</strong>: <code>Trim</code> removes an attribute from the item, the util <code>Base.Util.Trim()</code> should be used as the value of an attribute.</ul></section></section><section id="code-example-20"class="level4"><h4>Code Example</h4><p>Consider we have the following item in a base <code>users</code>:<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  key<span class="token operator">:</span> user-a<span class="token punctuation">,</span>
  username<span class="token operator">:</span> jimmy<span class="token punctuation">,</span>
  profile<span class="token operator">:</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token number">32</span><span class="token punctuation">,</span>
    active<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> pittsburgh 
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  on_mobile<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  likes<span class="token operator">:</span> <span class="token punctuation">[</span>anime<span class="token punctuation">]</span><span class="token punctuation">,</span>
  purchases<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span></code></pre><p>Then the following update operation :<pre class="language-go"><code class="language-go"><span class="token comment">// define the updates</span>
updates <span class="token operator">:=</span> deta<span class="token punctuation">.</span>Updates<span class="token punctuation">{</span>
  profile<span class="token punctuation">.</span>age<span class="token punctuation">:</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token comment">// set profile.age to 33</span>
  profile<span class="token punctuation">.</span>active<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// set profile.active to true</span>
  profile<span class="token punctuation">.</span>email<span class="token punctuation">:</span> jimmy@deta<span class="token punctuation">.</span>sh<span class="token punctuation">,</span> <span class="token comment">// create a new attribute 'profile.email'</span>
  profile<span class="token punctuation">.</span>hometown<span class="token punctuation">:</span> users<span class="token punctuation">.</span>Util<span class="token punctuation">.</span><span class="token function">Trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// remove 'profile.hometown'</span>
  on_mobile<span class="token punctuation">:</span> users<span class="token punctuation">.</span>Util<span class="token punctuation">.</span><span class="token function">Trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// remove 'on_mobile'</span>
  purchases<span class="token punctuation">:</span> users<span class="token punctuation">.</span>Util<span class="token punctuation">.</span><span class="token function">Increment</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// increment 'purchases' by 2 </span>
  likes<span class="token punctuation">:</span> users<span class="token punctuation">.</span>Util<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span>ramen<span class="token punctuation">)</span> <span class="token comment">// append 'ramen' to 'likes', also accepts a slice </span>
<span class="token punctuation">}</span>

<span class="token comment">// update</span>
err <span class="token operator">:=</span> users<span class="token punctuation">.</span>Util<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span>user<span class="token operator">-</span>a<span class="token punctuation">,</span> updates<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Results in the following item in the base:<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  key<span class="token operator">:</span> user-a<span class="token punctuation">,</span>
  username<span class="token operator">:</span> jimmy<span class="token punctuation">,</span>
  profile<span class="token operator">:</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token number">33</span><span class="token punctuation">,</span>
    active<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    email<span class="token operator">:</span> jimmy@deta.sh
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  likes<span class="token operator">:</span> <span class="token punctuation">[</span>anime<span class="token punctuation">,</span> ramen<span class="token punctuation">]</span><span class="token punctuation">,</span>
  purchases<span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span></code></pre><tabitem value="new"><p><strong><code>Update(key string, updates Updates) error</code></strong></p></tabitem></section><section id="parameters-21"class="level4"><h4>Parameters</h4><ul><li><strong>key</strong>: the key of the item to update<li><strong>updates</strong> : updates applied to the item, is of type <code>base.Updates</code> which is a <code>map[string]interface{}</code></ul><p><a href="#storing-numbers">Note for storing numbers</a><section id="update-operations-3"class="level5"><h5>Update operations</h5><ul><li><p><strong>Set</strong> : <code>Set</code> is practiced through normal key-value pairs. The operation changes the values of the attributes provided if the attribute already exists. If not, it adds the attribute to the item with the corresponding value.<li><p><strong>Increment</strong>: <code>Increment</code> increments the value of an attribute. The attribute's value <em>must be a number</em>. The util <code>Base.Util.Increment(value interface{})</code> should be used to increment the value. The value can also be negative.<li><p><strong>Append</strong>: <code>Append</code> appends to a list. The util <code>Base.Util.Append(value interface{})</code> should be used to append the value. The value can be a slice.<li><p><strong>Prepend</strong>: <code>Prepend</code> prepends to a list. The util <code>Base.Util.Prepend(value interface{})</code> should be used to prepend the value. The value can be a slice.<li><p><strong>Trim</strong>: <code>Trim</code> removes an attribute from the item, the util <code>Base.Util.Trim()</code> should be used as the value of an attribute.</ul></section></section><section id="code-example-21"class="level4"><h4>Code Example</h4><p>Consider we have the following item in a base <code>users</code>:<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  key<span class="token operator">:</span> user-a<span class="token punctuation">,</span>
  username<span class="token operator">:</span> jimmy<span class="token punctuation">,</span>
  profile<span class="token operator">:</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token number">32</span><span class="token punctuation">,</span>
    active<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> pittsburgh 
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  likes<span class="token operator">:</span> <span class="token punctuation">[</span>anime<span class="token punctuation">]</span><span class="token punctuation">,</span>
  purchases<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span></code></pre><p>Then the following update operation :<pre class="language-go"><code class="language-go"><span class="token keyword">import</span> <span class="token punctuation">(</span>
	fmt

	github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span><span class="token operator">/</span>deta
	github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span><span class="token operator">/</span>service<span class="token operator">/</span>base
<span class="token punctuation">)</span>

<span class="token keyword">type</span> Profile <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Active   <span class="token builtin">bool</span>   <span class="token string">`json:active`</span>
	Age      <span class="token builtin">int</span>    <span class="token string">`json:age`</span>
	Hometown <span class="token builtin">string</span> <span class="token string">`json:hometown`</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Key       <span class="token builtin">string</span>   <span class="token string">`json:key`</span> <span class="token comment">// json struct tag 'key' used to denote the key</span>

	Username  <span class="token builtin">string</span>   <span class="token string">`json:username`</span>
	Profile   <span class="token operator">*</span>Profile <span class="token string">`json:profile`</span>
	Purchases <span class="token builtin">int</span>      <span class="token string">`json:purchases`</span>
	Likes     <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token string">`json:likes`</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	d<span class="token punctuation">,</span> err <span class="token operator">:=</span> deta<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>deta<span class="token punctuation">.</span><span class="token function">WithProjectKey</span><span class="token punctuation">(</span>project_key<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to init <span class="token builtin">new</span> Deta instance<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	db<span class="token punctuation">,</span> err <span class="token operator">:=</span> base<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> users<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to init <span class="token builtin">new</span> Base instance<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// define the updates</span>
	updates <span class="token operator">:=</span> base<span class="token punctuation">.</span>Updates<span class="token punctuation">{</span>
		profile<span class="token punctuation">.</span>age<span class="token punctuation">:</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token comment">// set profile.age to 33</span>
		profile<span class="token punctuation">.</span>active<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// set profile.active to true</span>
		profile<span class="token punctuation">.</span>hometown<span class="token punctuation">:</span> db<span class="token punctuation">.</span>Util<span class="token punctuation">.</span><span class="token function">Trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// remove 'profile.hometown'</span>
		purchases<span class="token punctuation">:</span> db<span class="token punctuation">.</span>Util<span class="token punctuation">.</span><span class="token function">Increment</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// increment 'purchases' by 2 </span>
		likes<span class="token punctuation">:</span> db<span class="token punctuation">.</span>Util<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span>ramen<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// append 'ramen' to 'likes', also accepts a slice </span>
	<span class="token punctuation">}</span>
	<span class="token comment">// update</span>
	err <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span>user<span class="token operator">-</span>a<span class="token punctuation">,</span> updates<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to update<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Results in the following item in the base:<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  key<span class="token operator">:</span> user-a<span class="token punctuation">,</span>
  username<span class="token operator">:</span> jimmy<span class="token punctuation">,</span>
  profile<span class="token operator">:</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token number">33</span><span class="token punctuation">,</span>
    active<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  likes<span class="token operator">:</span> <span class="token punctuation">[</span>anime<span class="token punctuation">,</span> ramen<span class="token punctuation">]</span><span class="token punctuation">,</span>
  purchases<span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span></code></pre></section><section id="returns-17"class="level4"><h4>Returns</h4><p>Returns an <code>error</code>. Possible error values:<ul><li><code>ErrBadRequest</code>: the update operation caused a bad request response from the server<li><code>ErrUnauthorized</code>: unauthorized<li><code>ErrInternalServerError</code>: internal server error</ul></section></tabitem></tabs></section><section id="fetch"class="level3"><h3>Fetch</h3><p>Fetch retrieves a list of items matching a query. It will retrieve everything if no query is provided.<p>A query is composed of a single <a href="https://docs.deta.sh/docs/base/queries/">query</a> object or a list of <a href="https://docs.deta.sh/docs/base/queries/">queries</a>.<p>In the case of a list, the indvidual queries are OR'ed.</p><br><tabs groupid="preferred-language"defaultvalue="js"values="{["{=""label:=""&#x27;javascript&#x27;,=""value:=""&#x27;js&#x27;,=""},=""&#x27;python&#x27;,=""&#x27;py&#x27;,=""&#x27;go&#x27;,=""]=""}=""><tabitem value="js"><p>&#x3C;Tabs groupId=js-version defaultValue=new values={[ { label: 'version &#x3C; 1.0.0', value: 'legacy', }, { label: 'version >= 1.0.0', value: 'new', }, ] }></p><tabitem value="legacy"><p><strong><code>async fetch(query, pages=10, buffer=null)</code></strong><section id="parameters-22"class="level4"><h4>Parameters</h4><ul><li><strong>query</strong>: is a single <a href="https://docs.deta.sh/docs/base/queries/">query object</a> or list of queries. If omitted, you will get all the items in the database (up to 1mb).<li><strong>pages</strong>: how many pages of items should be returned.<li><strong>buffer</strong>: the number of items which will be returned for each iteration (aka page) on the return iterable. This is useful when your query is returning more than 1mb of data, so you could buffer the results in smaller chunks.</ul></section><section id="code-example-22"class="level4"><h4>Code Example</h4><p>For the examples, let's assume we have a <strong>Base</strong> with the following data:<pre class="language-json"><code class="language-json">
<span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Wesley<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> San Francisco<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-2</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Beverly<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">51</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> Copernicus City<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-3</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Kevin Garnett<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">43</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> Greenville<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> myFirstSet<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">fetch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>age<span class="token operator">?</span>lt<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> mySecondSet<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">fetch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span> age<span class="token operator">?</span>gt<span class="token operator">:</span> <span class="token number">50</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">hometown</span><span class="token operator">:</span> <span class="token maybe-class-name">Greenville</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>... will come back with following data:<section id="myfirstset"class="level5"><h5><code>myFirstSet</code>:</h5><pre class="language-json"><code class="language-json"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Wesley<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> San Francisco<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span></code></pre></section><section id="mysecondset"class="level5"><h5><code>mySecondSet</code>:</h5><pre class="language-json"><code class="language-json"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-2</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Beverly<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">51</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> Copernicus City<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-3</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Kevin Garnett<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">43</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> Greenville<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span></code></pre></section></section><section id="returns-18"class="level4"><h4>Returns</h4><p>A promise which resolves to a generator of objects that meet the <code>query</code> criteria.<p>The total number of items will not exceed the defined using <code>buffer</code> and `pages. Max. number of items<p>Iterating through the generator yields arrays containing objects, each array of max length <code>buffer</code>.</section><section id="example-using-buffer-pages"class="level4"><h4>Example using buffer, pages</h4><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">myQuery<span class="token punctuation">,</span> bar</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>

  items <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token method function property-access">fetch</span><span class="token punctuation">(</span>myQuery<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token comment">// items is up to the limit length (10*20)</span>

  <span class="token keyword control-flow">for</span> <span class="token keyword control-flow">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> subArray <span class="token keyword">of</span> items<span class="token punctuation">)</span> <span class="token comment">// each subArray is up to the buffer length, 20</span>
    <span class="token function">bar</span><span class="token punctuation">(</span>subArray<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><tabitem value="new"><p><strong><code>async fetch(query, options)</code></strong></p></tabitem></section><section id="parameters-23"class="level4"><h4>Parameters</h4><ul><li><strong>query</strong>: is a single <a href="https://docs.deta.sh/docs/base/queries/">query object (<code>dict</code>)</a> or list of queries. If omitted, you will get all the items in the database (up to 1mb).<li><strong>options</strong>: optional params:<ul><li><code>limit</code>: the limit of the number of items you want to retreive, min value <code>1</code> if used.<li><code>last</code>: the last key seen in a previous paginated response, provide this in a subsequent call to fetch further items.</ul></ul><blockquote>Upto 1 MB of data is retrieved before filtering with the query. Thus, in some cases you might get an empty list of items but still the `last` key evaluated in the response.<p>To apply the query through all the items in your base, you have to call fetch until <code>last</code> is empty.</blockquote></section><section id="returns-19"class="level4"><h4>Returns</h4><p>A promise which resolves to an object with the following attributes:<ul><li><p><code>count</code> : The number of items in the response.<li><p><code>last</code>: The last key seen in the fetch response. If <code>last</code> is not <code>undefined</code> further items are to be retreived.<li><p><code>items</code>: The list of items retreived.</ul></section><section id="example"class="level4"><h4>Example</h4><p>For the examples, let's assume we have a <strong>Base</strong> with the following data:<pre class="language-json"><code class="language-json">
<span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Wesley<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> San Francisco<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-2</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Beverly<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">51</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> Copernicus City<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-3</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Kevin Garnett<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">43</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> Greenville<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">items</span><span class="token operator">:</span> myFirstSet <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">fetch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>age<span class="token operator">?</span>lt<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">items</span><span class="token operator">:</span> mySecondSet <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">fetch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span> age<span class="token operator">?</span>gt<span class="token operator">:</span> <span class="token number">50</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">hometown</span><span class="token operator">:</span> <span class="token maybe-class-name">Greenville</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><p>... will come back with following data:<section id="myfirstset-1"class="level5"><h5><code>myFirstSet</code>:</h5><pre class="language-json"><code class="language-json"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Wesley<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> San Francisco<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span></code></pre></section><section id="mysecondset-1"class="level5"><h5><code>mySecondSet</code>:</h5><pre class="language-json"><code class="language-json"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-2</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Beverly<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">51</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> Copernicus City<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-3</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Kevin Garnett<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">43</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> Greenville<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span></code></pre></section></section><section id="fetch-all-items"class="level4"><h4>Fetch All Items</h4><pre class="language-js"><code class="language-js"><span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> allItems <span class="token operator">=</span> res<span class="token punctuation">.</span><span class="token property-access">items</span><span class="token punctuation">;</span>

<span class="token comment">// continue fetching until last is not seen</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span><span class="token property-access">last</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  res <span class="token operator">=</span> <span class="token keyword control-flow">await</span> db<span class="token punctuation">.</span><span class="token method function property-access">fetch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">last</span><span class="token operator">:</span> res<span class="token punctuation">.</span><span class="token property-access">last</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  allItems <span class="token operator">=</span> allItems<span class="token punctuation">.</span><span class="token method function property-access">concat</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span><span class="token property-access">items</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><tabitem value="py"><p>&#x3C;Tabs groupId=py-version defaultValue=new values={[ { label: 'version &#x3C; 1.0.0', value: 'legacy', }, { label: 'version >= 1.0.0', value: 'new', }, ] }></p><tabitem value="legacy"><p><strong><code>fetch(query=None, buffer=None, pages=10):</code></strong></p></tabitem></tabitem></section><section id="parameters-24"class="level4"><h4>Parameters</h4><ul><li><strong>query</strong>: is a single <a href="https://docs.deta.sh/docs/base/queries/">query object (<code>dict</code>)</a> or list of queries. If omitted, you will get all the items in the database (up to 1mb).<li><strong>pages</strong>: how many pages of items should be returned.<li><strong>buffer</strong>: the number of items which will be returned for each iteration (aka page) on the return iterable. This is useful when your query is returning more 1mb of data, so you could buffer the results in smaller chunks.</ul></section><section id="code-example-23"class="level4"><h4>Code Example</h4><p>For the examples, let's assume we have a <strong>Base</strong> with the following data:<pre class="language-json"><code class="language-json">
<span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Wesley<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> San Francisco<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-2</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Beverly<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">51</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> Copernicus City<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-3</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Kevin Garnett<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">43</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> Greenville<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><pre class="language-py"><code class="language-py">my_first_set <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>db<span class="token punctuation">.</span>fetch<span class="token punctuation">(</span><span class="token punctuation">{</span>age?lt<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
my_second_set <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>db<span class="token punctuation">.</span>fetch<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span>age?gt<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>hometown<span class="token punctuation">:</span> Greenville<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>... will come back with following data:<section id="my_first_set"class="level5"><h5><code>my_first_set</code>:</h5><pre class="language-json"><code class="language-json"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Wesley<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> San Francisco<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span></code></pre></section><section id="my_second_set"class="level5"><h5><code>my_second_set</code>:</h5><pre class="language-json"><code class="language-json"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-2</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Beverly<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">51</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> Copernicus City<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-3</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Kevin Garnett<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">43</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> Greenville<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span></code></pre></section></section><section id="returns-20"class="level4"><h4>Returns</h4><p>A generator of objects that meet the <code>query</code> criteria.<p>The total number of items will not exceed the defined using <code>buffer</code> and `pages. Max. number of items<p>Iterating through the generator yields lists containing objects, each list of max length <code>buffer</code>.</section><section id="example-using-buffer-pages-1"class="level4"><h4>Example using buffer, pages</h4><pre class="language-py"><code class="language-py"><span class="token keyword">def</span> <span class="token function">foo</span><span class="token punctuation">(</span>my_query<span class="token punctuation">,</span> bar<span class="token punctuation">)</span><span class="token punctuation">:</span>
  items <span class="token operator">=</span> db<span class="token punctuation">.</span>fetch<span class="token punctuation">(</span>my_query<span class="token punctuation">,</span> pages<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token builtin">buffer</span><span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token comment"># items is up to the limit length (10*20)</span>

  <span class="token keyword">for</span> sub_list <span class="token keyword">in</span> items<span class="token punctuation">:</span> <span class="token comment"># each sub_list is up to the buffer length, 10</span>
    bar<span class="token punctuation">(</span>sub_list<span class="token punctuation">)</span></code></pre><tabitem value="new"><p><strong><code>fetch(query=None, limit=1000, last=None):</code></strong></p></tabitem></section><section id="parameters-25"class="level4"><h4>Parameters</h4><ul><li><strong>query</strong>: is a single <a href="https://docs.deta.sh/docs/base/queries/">query object (<code>dict</code>)</a> or list of queries. If omitted, you will get all the items in the database (up to 1mb or max 1000 items).<li><strong>limit</strong>: the limit of the number of items you want to retreive, min value <code>1</code> if used<li><strong>last</strong>: the last key seen in a previous paginated response</ul><blockquote>Upto 1 MB of data is retrieved before filtering with the query. Thus, in some cases you might get an empty list of items but still the `last` key evaluated in the response.<p>To apply the query through all the items in your base, you have to call fetch until <code>last</code> is empty.</blockquote></section><section id="returns-21"class="level4"><h4>Returns</h4><p>Returns an instance of a <code>FetchResponse</code> class which has the following properties.<ul><li><p><code>count</code> : The number of items in the response.<li><p><code>last</code>: The last key seen in the fetch response. If <code>last</code> is not <code>None</code> further items are to be retreived<li><p><code>items</code>: The list of items retreived.</ul></section><section id="code-example-24"class="level4"><h4>Code Example</h4><p>For the examples, let's assume we have a <strong>Base</strong> with the following data:<pre class="language-json"><code class="language-json">
<span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Wesley<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> San Francisco<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-2</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Beverly<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">51</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> Copernicus City<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-3</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Kevin Garnett<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">43</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> Greenville<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><pre class="language-py"><code class="language-py">first_fetch_res <span class="token operator">=</span> db<span class="token punctuation">.</span>fetch<span class="token punctuation">(</span><span class="token punctuation">{</span>age?lt<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
second_fetch_res <span class="token operator">=</span> db<span class="token punctuation">.</span>fetch<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span>age?gt<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>hometown<span class="token punctuation">:</span> Greenville<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><p>... will come back with following data:<section id="first_fetch_resitems"class="level5"><h5><code>first_fetch_res.items</code>:</h5><pre class="language-json"><code class="language-json"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Wesley<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> San Francisco<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span></code></pre></section><section id="second_fetch_resitems"class="level5"><h5><code>second_fetch_res.items</code>:</h5><pre class="language-json"><code class="language-json"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-2</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Beverly<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">51</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> Copernicus City<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-3</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Kevin Garnett<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">43</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> Greenville<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span></code></pre></section></section><section id="fetch-all-items-1"class="level4"><h4>Fetch All Items</h4><pre class="language-py"><code class="language-py">res <span class="token operator">=</span> db<span class="token punctuation">.</span>fetch<span class="token punctuation">(</span><span class="token punctuation">)</span>
all_items <span class="token operator">=</span> res<span class="token punctuation">.</span>items

<span class="token comment"># fetch until last is 'None'</span>
<span class="token keyword">while</span> res<span class="token punctuation">.</span>last<span class="token punctuation">:</span>
  res <span class="token operator">=</span> db<span class="token punctuation">.</span>fetch<span class="token punctuation">(</span>last<span class="token operator">=</span>res<span class="token punctuation">.</span>last<span class="token punctuation">)</span>
  all_items <span class="token operator">+=</span> res<span class="token punctuation">.</span>items</code></pre><tabitem value="go"><tabs groupid="go-version"defaultvalue="new"values="{["{=""label:=""&#x27;version=""&#x3c;=""1.0.0&#x27;,=""value:=""&#x27;legacy&#x27;,=""},="">= 1.0.0', value: 'new', }, ] }><tabitem value="legacy"><p><strong><code>Fetch(i *FetchInput) error</code></strong></p></tabitem></tabs></tabitem></section><section id="parameters-26"class="level4"><h4>Parameters</h4><ul><li><p><strong>i</strong>: is a pointer to a <code>FetchInput</code><pre class="language-go"><code class="language-go"><span class="token comment">// FetchInput input to Fetch operation</span>
<span class="token keyword">type</span> FetchInput <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  <span class="token comment">// filters to apply to items</span>
  <span class="token comment">// A nil value applies no queries and fetches all items</span>
  Q Query
  <span class="token comment">// the destination to store the results</span>
  Dest <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// the maximum number of items to fetch</span>
  <span class="token comment">// value of 0 or less applies no limit</span>
  Limit <span class="token builtin">int</span>
  <span class="token comment">// the last key evaluated in a paginated response</span>
  <span class="token comment">// leave empty if not a subsequent fetch request</span>
  LastKey <span class="token builtin">string</span>
<span class="token punctuation">}</span>  </code></pre><ul><li><code>Q</code>: fetch query, is of type <code>deta.Query</code> which is a <code>[]map[string]interface{}</code><li><code>Dest</code>: the results will be stored into the value pointed by <code>Dest</code><li><code>Limit</code>: the maximum number of items to fetch, value of <code>0</code> or less applies no limit<li><code>LastKey</code>: the last key evaluated in a paginated response, leave empty if not a subsequent fetch request</ul></ul></section><section id="code-example-25"class="level4"><h4>Code Example</h4><pre class="language-go"><code class="language-go"><span class="token keyword">import</span> <span class="token punctuation">(</span>
    github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Key <span class="token builtin">string</span> <span class="token string">`json:key`</span>
    Name <span class="token builtin">string</span> <span class="token string">`json:name`</span>
    Age <span class="token builtin">int</span> <span class="token string">`json:age`</span>
    Hometown <span class="token builtin">string</span> <span class="token string">`json:hometown`</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// errors ignored for brevity</span>
    d<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> deta<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>project key<span class="token punctuation">)</span>
    db<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> deta<span class="token punctuation">.</span><span class="token function">NewBase</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span>

    <span class="token comment">// query to get users with age less than 30</span>
    query <span class="token operator">:=</span> deta<span class="token punctuation">.</span>Query<span class="token punctuation">{</span>
      <span class="token punctuation">{</span>age?lt<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// variabe to store the results</span>
    <span class="token keyword">var</span> results <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>User

    <span class="token comment">// fetch items</span>
    <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">Fetch</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span>deta<span class="token punctuation">.</span>FetchInput<span class="token punctuation">{</span>
      Q<span class="token punctuation">:</span> query<span class="token punctuation">,</span>
      Dest<span class="token punctuation">:</span> <span class="token operator">&#x26;</span>results<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to fetch items<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>... <code>results</code> will have the following data:<pre class="language-json"><code class="language-json"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Wesley<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> San Francisco<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-3</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Kevin Garnett<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">43</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> Greenville<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span></code></pre></section><section id="paginated-example"class="level4"><h4>Paginated example</h4><pre class="language-go"><code class="language-go"><span class="token keyword">import</span> <span class="token punctuation">(</span>
    github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Key <span class="token builtin">string</span> <span class="token string">`json:key`</span>
    Name <span class="token builtin">string</span> <span class="token string">`json:name`</span>
    Age <span class="token builtin">int</span> <span class="token string">`json:age`</span>
    Hometown <span class="token builtin">string</span> <span class="token string">`json:hometown`</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// errors ignored for brevity</span>
    d<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> deta<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>project key<span class="token punctuation">)</span>
    db<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> deta<span class="token punctuation">.</span><span class="token function">NewBase</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span>

    <span class="token comment">// query to get users with age less than 30</span>
    query <span class="token operator">:=</span> deta<span class="token punctuation">.</span>Query<span class="token punctuation">{</span>
      <span class="token punctuation">{</span>age?lt<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// variabe to store the results</span>
    <span class="token keyword">var</span> results <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>User

    <span class="token comment">// variable to store the page</span>
    <span class="token keyword">var</span> page <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>User

    <span class="token comment">// fetch input </span>
    i <span class="token operator">:=</span> <span class="token operator">&#x26;</span>deta<span class="token punctuation">.</span>FetchInput<span class="token punctuation">{</span>
      Q<span class="token punctuation">:</span> query<span class="token punctuation">,</span>      
      Dest<span class="token punctuation">:</span> <span class="token operator">&#x26;</span>page<span class="token punctuation">,</span>
      Limit<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// limit provided so each page will only have one item</span>
    <span class="token punctuation">}</span> 
    
    <span class="token comment">// fetch items</span>
    lastKey<span class="token punctuation">,</span> err <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">Fetch</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to fetch items<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span> 
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// append page items to results</span>
    results <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>allResults<span class="token punctuation">,</span> page<span class="token operator">...</span><span class="token punctuation">)</span>

    <span class="token comment">// get all pages</span>
    <span class="token keyword">for</span> lastKey <span class="token operator">!=</span> <span class="token punctuation">{</span>
      <span class="token comment">// provide the last key in the fetch input</span>
      i<span class="token punctuation">.</span>LastKey <span class="token operator">=</span> lastKey

      <span class="token comment">// fetch</span>
      lastKey<span class="token punctuation">,</span> err <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">Fetch</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
      <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
          fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to fetch items<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
          <span class="token keyword">return</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// append page items to all results</span>
      results <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>allResults<span class="token punctuation">,</span> page<span class="token operator">...</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><tabitem value="new"><p><strong><code>Fetch(i *FetchInput) error</code></strong></p></tabitem></section><section id="parameters-27"class="level4"><h4>Parameters</h4><ul><li><p><strong>i</strong>: is a pointer to a <code>FetchInput</code><pre class="language-go"><code class="language-go"><span class="token comment">// FetchInput input to Fetch operation</span>
<span class="token keyword">type</span> FetchInput <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  <span class="token comment">// filters to apply to items</span>
  <span class="token comment">// A nil value applies no queries and fetches all items</span>
  Q Query
  <span class="token comment">// the destination to store the results</span>
  Dest <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// the maximum number of items to fetch</span>
  <span class="token comment">// value of 0 or less applies no limit</span>
  Limit <span class="token builtin">int</span>
  <span class="token comment">// the last key evaluated in a paginated response</span>
  <span class="token comment">// leave empty if not a subsequent fetch request</span>
  LastKey <span class="token builtin">string</span>
<span class="token punctuation">}</span>  </code></pre><ul><li><code>Q</code>: fetch query, is of type <code>deta.Query</code> which is a <code>[]map[string]interface{}</code><li><code>Dest</code>: the results will be stored into the value pointed by <code>Dest</code><li><code>Limit</code>: the maximum number of items to fetch, value of <code>0</code> or less applies no limit<li><code>LastKey</code>: the last key evaluated in a paginated response, leave empty if not a subsequent fetch request</ul></ul></section><section id="code-example-26"class="level4"><h4>Code Example</h4><pre class="language-go"><code class="language-go"><span class="token keyword">import</span> <span class="token punctuation">(</span>
	fmt

	github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span><span class="token operator">/</span>deta
	github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span><span class="token operator">/</span>service<span class="token operator">/</span>base
<span class="token punctuation">)</span>

<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Key <span class="token builtin">string</span> <span class="token string">`json:key`</span>
  Name <span class="token builtin">string</span> <span class="token string">`json:name`</span>
  Age <span class="token builtin">int</span> <span class="token string">`json:age`</span>
  Hometown <span class="token builtin">string</span> <span class="token string">`json:hometown`</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	d<span class="token punctuation">,</span> err <span class="token operator">:=</span> deta<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>deta<span class="token punctuation">.</span><span class="token function">WithProjectKey</span><span class="token punctuation">(</span>project_key<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to init <span class="token builtin">new</span> Deta instance<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	db<span class="token punctuation">,</span> err <span class="token operator">:=</span> base<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> users<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to init <span class="token builtin">new</span> Base instance<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// query to get users with age less than 30</span>
	query <span class="token operator">:=</span> base<span class="token punctuation">.</span>Query<span class="token punctuation">{</span>
		<span class="token punctuation">{</span>age?lt<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// variabe to store the results</span>
	<span class="token keyword">var</span> results <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>User

	<span class="token comment">// fetch items</span>
	<span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">Fetch</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span>base<span class="token punctuation">.</span>FetchInput<span class="token punctuation">{</span>
		Q<span class="token punctuation">:</span>    query<span class="token punctuation">,</span>
		Dest<span class="token punctuation">:</span> <span class="token operator">&#x26;</span>results<span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to fetch items<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>... <code>results</code> will have the following data:<pre class="language-json"><code class="language-json"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Wesley<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> San Francisco<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> key<span class="token number">-3</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> Kevin Garnett<span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">43</span><span class="token punctuation">,</span>
    hometown<span class="token operator">:</span> Greenville<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span></code></pre></section><section id="paginated-example-1"class="level4"><h4>Paginated example</h4><pre class="language-go"><code class="language-go"><span class="token keyword">import</span> <span class="token punctuation">(</span>
	fmt

	github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span><span class="token operator">/</span>deta
	github<span class="token punctuation">.</span>com<span class="token operator">/</span>deta<span class="token operator">/</span>deta<span class="token operator">-</span><span class="token keyword">go</span><span class="token operator">/</span>service<span class="token operator">/</span>base
<span class="token punctuation">)</span>

<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Key      <span class="token builtin">string</span>   <span class="token string">`json:key`</span> <span class="token comment">// json struct tag 'key' used to denote the key</span>

	Username <span class="token builtin">string</span>   <span class="token string">`json:username`</span>
	Active   <span class="token builtin">bool</span>     <span class="token string">`json:active`</span>
	Age      <span class="token builtin">int</span>      <span class="token string">`json:age`</span>
	Likes    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token string">`json:likes`</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	d<span class="token punctuation">,</span> err <span class="token operator">:=</span> deta<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>deta<span class="token punctuation">.</span><span class="token function">WithProjectKey</span><span class="token punctuation">(</span>project_key<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to init <span class="token builtin">new</span> Deta instance<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	db<span class="token punctuation">,</span> err <span class="token operator">:=</span> base<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> users<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to init <span class="token builtin">new</span> Base instance<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// query to get users with age less than 30</span>
	query <span class="token operator">:=</span> base<span class="token punctuation">.</span>Query<span class="token punctuation">{</span>
		<span class="token punctuation">{</span>age?lt<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// variabe to store the results</span>
	<span class="token keyword">var</span> results <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>User

	<span class="token comment">// variable to store the page</span>
	<span class="token keyword">var</span> page <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>User

	<span class="token comment">// fetch input</span>
	i <span class="token operator">:=</span> <span class="token operator">&#x26;</span>base<span class="token punctuation">.</span>FetchInput<span class="token punctuation">{</span>
		Q<span class="token punctuation">:</span>     query<span class="token punctuation">,</span>
		Dest<span class="token punctuation">:</span>  <span class="token operator">&#x26;</span>page<span class="token punctuation">,</span>
		Limit<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// limit provided so each page will only have one item</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// fetch items</span>
	lastKey<span class="token punctuation">,</span> err <span class="token operator">:=</span> db<span class="token punctuation">.</span><span class="token function">Fetch</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to fetch items<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// append page items to results</span>
	results <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>results<span class="token punctuation">,</span> page<span class="token operator">...</span><span class="token punctuation">)</span>

	<span class="token comment">// get all pages</span>
	<span class="token keyword">for</span> lastKey <span class="token operator">!=</span>  <span class="token punctuation">{</span>
		<span class="token comment">// provide the last key in the fetch input</span>
		i<span class="token punctuation">.</span>LastKey <span class="token operator">=</span> lastKey

		<span class="token comment">// fetch</span>
		lastKey<span class="token punctuation">,</span> err <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">Fetch</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>failed to fetch items<span class="token punctuation">:</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
			<span class="token keyword">return</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// append page items to all results</span>
		results <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>results<span class="token punctuation">,</span> page<span class="token operator">...</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section><section id="returns-22"class="level4"><h4>Returns</h4><p>Returns an <code>error</code>. Possible error values:<ul><li><code>ErrBadDestination</code>: bad destination, results could not be stored onto <code>dest</code><li><code>ErrBadRequest</code>: the fetch request caused a bad request response from the server<li><code>ErrUnauthorized</code>: unauthorized<li><code>ErrInternalServerError</code>: internal server error</ul></section></tabitem></tabitem></tabs></section></section><section id="issues"class="level2"><h2>Issues</h2><p>If you run into any issues, consider reporting them in our <a href="https://github.com/orgs/deta/discussions">Github Discussions</a>. <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section>