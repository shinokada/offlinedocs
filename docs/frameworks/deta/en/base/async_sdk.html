<!doctype html><html id="async_sdk"lang="en"><meta charset="utf-8"><title>Deta Base Python Async SDK</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><p>The Deta Base Python Async SDK can be used for reading and writing data asynchronously with Deta Base in Python.<blockquote>These are docs for an alpha version of the Python Deta Base Async SDK. The SDK API may change in a stable release.</blockquote><section id="installing"class="level2"><h2>Installing</h2><pre class="language-text"><code class="language-text">pip install deta[async]==1.1.0a2</code></pre></section><section id="instantiating"class="level2"><h2>Instantiating</h2><pre class="language-py"><code class="language-py"><span class="token keyword">from</span> deta <span class="token keyword">import</span> Deta

<span class="token comment"># initialize with a project key</span>
<span class="token comment"># you can also init without specfying the project key explicitly</span>
<span class="token comment"># the sdk looks for the DETA_PROJECT_KEY env var in that case</span>
deta <span class="token operator">=</span> Deta<span class="token punctuation">(</span>project_key<span class="token punctuation">)</span>

<span class="token comment"># create an async base client</span>
async_db <span class="token operator">=</span> deta<span class="token punctuation">.</span>AsyncBase<span class="token punctuation">(</span>base_name<span class="token punctuation">)</span></code></pre></section><section id="methods"class="level2"><h2>Methods</h2><p>The <strong><code>AsyncBase</code></strong> class offers the same API to interact with your Base as the <strong><code>Base</code></strong> class:<section id="put"class="level3"><h3>Put</h3><pre class="language-py"><code class="language-py">put<span class="token punctuation">(</span>
	data<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>Union<span class="token punctuation">[</span><span class="token builtin">dict</span><span class="token punctuation">,</span> <span class="token builtin">list</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
	key<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
	<span class="token operator">*</span><span class="token punctuation">,</span>
	expire_in<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
	expire_at<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>Union<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">,</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">]</span>
<span class="token punctuation">)</span></code></pre><ul><li><strong>data</strong> (required): The data to be stored.<li><strong>key</strong> (optional): The key to store the data under. It will be auto-generated if not provided.<li><strong>expire_in</strong> (optional) - Accepts: <code>int</code> and <code>None</code><ul><li>Description: seconds after which the item will expire in, see also <a href="#./expiring_items">expiring items</a></ul><li><strong>expire_at</strong> (optional) - Accepts: <code>int</code>, <code>float</code>, <code>datetime.datetime</code> and <code>None</code><ul><li>Description: time at which the item will expire in, can provide the timestamp directly(<code>int</code> or <code>float</code>) or a <a href="https://docs.python.org/3/library/datetime.html">datetime.datetime</a> object, see also <a href="./expiring_items">expiring items</a></ul></ul><section id="example"class="level4"><h4>Example</h4><pre class="language-py"><code class="language-py"><span class="token keyword">import</span> asyncio
<span class="token keyword">from</span> deta <span class="token keyword">import</span> Deta

async_db <span class="token operator">=</span> Deta<span class="token punctuation">(</span>project_key<span class="token punctuation">)</span><span class="token punctuation">.</span>AsyncBase<span class="token punctuation">(</span>base_name<span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">put_item</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
	item <span class="token operator">=</span> <span class="token punctuation">{</span>msg<span class="token punctuation">:</span> hello<span class="token punctuation">}</span>
	<span class="token keyword">await</span> async_db<span class="token punctuation">.</span>put<span class="token punctuation">(</span>item<span class="token punctuation">,</span> test<span class="token punctuation">)</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>put item<span class="token punctuation">:</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span>

	<span class="token comment"># put expiring items</span>
	<span class="token comment"># expire item in 300 seconds</span>
	<span class="token keyword">await</span> async_db<span class="token punctuation">.</span>put<span class="token punctuation">(</span>item<span class="token punctuation">,</span> expire_in<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>

	<span class="token comment"># with expire at</span>
	expire_at <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>fromisoformat<span class="token punctuation">(</span><span class="token number">2023</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span>01T00<span class="token punctuation">:</span><span class="token number">00</span><span class="token punctuation">:</span><span class="token number">00</span><span class="token punctuation">)</span>
	<span class="token keyword">await</span> async_db<span class="token punctuation">.</span>put<span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token builtin">max</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">28</span><span class="token punctuation">}</span><span class="token punctuation">,</span> max28<span class="token punctuation">,</span> expire_at<span class="token operator">=</span>expire_at<span class="token punctuation">)</span>

	<span class="token comment"># close connection</span>
	<span class="token keyword">await</span> async_db<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

loop <span class="token operator">=</span> asyncio<span class="token punctuation">.</span>get_event_loop<span class="token punctuation">(</span><span class="token punctuation">)</span>
loop<span class="token punctuation">.</span>run_until_complete<span class="token punctuation">(</span>put_item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></section></section><section id="get"class="level3"><h3>Get</h3><pre class="language-py"><code class="language-py">get<span class="token punctuation">(</span>key<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span></code></pre><ul><li><strong>key</strong> (required): The key of the item to be retrieved.</ul><section id="example-1"class="level4"><h4>Example</h4><pre class="language-py"><code class="language-py"><span class="token keyword">import</span> asyncio
<span class="token keyword">from</span> deta <span class="token keyword">import</span> Deta

async_db <span class="token operator">=</span> Deta<span class="token punctuation">(</span>project_key<span class="token punctuation">)</span><span class="token punctuation">.</span>AsyncBase<span class="token punctuation">(</span>base_name<span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">get_item</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
	item <span class="token operator">=</span> <span class="token keyword">await</span> async_db<span class="token punctuation">.</span>get<span class="token punctuation">(</span>my_key<span class="token punctuation">)</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>got item<span class="token punctuation">:</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span>

	<span class="token comment"># close connection</span>
	<span class="token keyword">await</span> async_db<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

loop <span class="token operator">=</span> asyncio<span class="token punctuation">.</span>get_event_loop<span class="token punctuation">(</span><span class="token punctuation">)</span>
loop<span class="token punctuation">.</span>run_until_complete<span class="token punctuation">(</span>get_item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></section></section><section id="delete"class="level3"><h3>Delete</h3><pre class="language-py"><code class="language-py">delete<span class="token punctuation">(</span>key<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span></code></pre><ul><li><strong>key</strong> (required): The key of the item to delete.</ul><section id="example-2"class="level4"><h4>Example</h4><pre class="language-py"><code class="language-py"><span class="token keyword">import</span> asyncio
<span class="token keyword">from</span> deta <span class="token keyword">import</span> Deta

async_db <span class="token operator">=</span> Deta<span class="token punctuation">(</span>project_key<span class="token punctuation">)</span><span class="token punctuation">.</span>AsyncBase<span class="token punctuation">(</span>base_name<span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">del_item</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token keyword">await</span> async_db<span class="token punctuation">.</span>delete<span class="token punctuation">(</span>my<span class="token operator">-</span>key<span class="token punctuation">)</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>Deleted item<span class="token punctuation">)</span>
	
	<span class="token comment"># close connection</span>
	<span class="token keyword">await</span> async_db<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

loop <span class="token operator">=</span> asyncio<span class="token punctuation">.</span>get_event_loop<span class="token punctuation">(</span><span class="token punctuation">)</span>
loop<span class="token punctuation">.</span>run_until_complete<span class="token punctuation">(</span>del_item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></section></section><section id="insert"class="level3"><h3>Insert</h3><p><code>insert</code> is unique from <code>put</code> in that it will raise an error if the <code>key</code> already exists in the database, whereas <code>put</code> overwrites the item.<pre class="language-py"><code class="language-py">insert<span class="token punctuation">(</span>
	data<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>Union<span class="token punctuation">[</span><span class="token builtin">dict</span><span class="token punctuation">,</span> <span class="token builtin">list</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
	key<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
	<span class="token operator">*</span><span class="token punctuation">,</span>
	expire_in<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
	expire_at<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>Union<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">,</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
<span class="token punctuation">)</span></code></pre><ul><li><strong>data</strong> (required): The data to be stored.<li><strong>key</strong> (optional): The key to store the data under, will be auto generated if not provided.<li><strong>expire_in</strong> (optional) - Accepts: <code>int</code> and <code>None</code><ul><li>Description: seconds after which the item will expire in, see also <a href="./expiring_items">expiring items</a></ul><li><strong>expire_at</strong> (optional) - Accepts: <code>int</code>, <code>float</code>, <code>datetime.datetime</code> and <code>None</code><ul><li>Description: time at which the item will expire in, can provide the timestamp directly(<code>int</code> or <code>float</code>) or a <a href="https://docs.python.org/3/library/datetime.html">datetime.datetime</a> object, see also <a href="./expiring_items">expiring items</a></ul></ul><section id="example-3"class="level4"><h4>Example</h4><pre class="language-py"><code class="language-py"><span class="token keyword">import</span> asyncio
<span class="token keyword">from</span> deta <span class="token keyword">import</span> Deta

async_db <span class="token operator">=</span> Deta<span class="token punctuation">(</span>project_key<span class="token punctuation">)</span><span class="token punctuation">.</span>AsyncBase<span class="token punctuation">(</span>base_name<span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">insert_item</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
	item <span class="token operator">=</span> <span class="token punctuation">{</span>msg<span class="token punctuation">:</span> hello<span class="token punctuation">}</span>
	<span class="token keyword">await</span> async_db<span class="token punctuation">.</span>insert<span class="token punctuation">(</span>item<span class="token punctuation">,</span> test<span class="token punctuation">)</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>inserted item<span class="token punctuation">:</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span>

	<span class="token comment"># put expiring items</span>
    <span class="token comment"># expire item in 300 seconds</span>
    <span class="token keyword">await</span> async_db<span class="token punctuation">.</span>insert<span class="token punctuation">(</span>item<span class="token punctuation">,</span> expire_in<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>

    <span class="token comment"># with expire at</span>
    expire_at <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>fromisoformat<span class="token punctuation">(</span><span class="token number">2023</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span>01T00<span class="token punctuation">:</span><span class="token number">00</span><span class="token punctuation">:</span><span class="token number">00</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> async_db<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token builtin">max</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">28</span><span class="token punctuation">}</span><span class="token punctuation">,</span> max28<span class="token punctuation">,</span> expire_at<span class="token operator">=</span>expire_at<span class="token punctuation">)</span>

	<span class="token comment"># close connection</span>
	<span class="token keyword">await</span> async_db<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

loop <span class="token operator">=</span> asyncio<span class="token punctuation">.</span>get_event_loop<span class="token punctuation">(</span><span class="token punctuation">)</span>
loop<span class="token punctuation">.</span>run_until_complete<span class="token punctuation">(</span>insert_item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></section></section><section id="put-many"class="level3"><h3>Put Many</h3><pre class="language-py"><code class="language-py">put_many<span class="token punctuation">(</span>
	items<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>List<span class="token punctuation">[</span>typing<span class="token punctuation">.</span>Union<span class="token punctuation">[</span><span class="token builtin">dict</span><span class="token punctuation">,</span> <span class="token builtin">list</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token operator">*</span><span class="token punctuation">,</span> 
	expire_in<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
	expire_at<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>Union<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">,</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
<span class="token punctuation">)</span></code></pre><ul><li><strong>items</strong> (required): list of items to be stored.<li><strong>expire_in</strong> (optional) - Accepts: <code>int</code> and <code>None</code><ul><li>Description: seconds after which the item will expire in, see also <a href="./expiring_items">expiring items</a></ul><li><strong>expire_at</strong> (optional) - Accepts: <code>int</code>, <code>float</code>, <code>datetime.datetime</code> and <code>None</code><ul><li>Description: time at which the item will expire in, can provide the timestamp directly(<code>int</code> or <code>float</code>) or a <a href="https://docs.python.org/3/library/datetime.html">datetime.datetime</a> object, see also <a href="./expiring_items">expiring items</a></ul></ul><section id="example-4"class="level4"><h4>Example</h4><pre class="language-py"><code class="language-py"><span class="token keyword">import</span> asyncio
<span class="token keyword">from</span> deta <span class="token keyword">import</span> Deta

async_db <span class="token operator">=</span> Deta<span class="token punctuation">(</span>project_key<span class="token punctuation">)</span><span class="token punctuation">.</span>AsyncBase<span class="token punctuation">(</span>base_name<span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">put_items</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
	items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>key<span class="token punctuation">:</span> one<span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>key<span class="token punctuation">:</span> two<span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
	<span class="token keyword">await</span> async_db<span class="token punctuation">.</span>put_many<span class="token punctuation">(</span>items<span class="token punctuation">)</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>put items<span class="token punctuation">:</span><span class="token punctuation">,</span> items<span class="token punctuation">)</span>

	<span class="token comment"># put with expiring items</span>
	<span class="token comment"># expire in 300 seconds</span>
	<span class="token keyword">await</span> async_db<span class="token punctuation">.</span>put_many<span class="token punctuation">(</span>items<span class="token punctuation">,</span> expire_in<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>

	<span class="token comment"># with expire at</span>
    expire_at <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>fromisoformat<span class="token punctuation">(</span><span class="token number">2023</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span>01T00<span class="token punctuation">:</span><span class="token number">00</span><span class="token punctuation">:</span><span class="token number">00</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> async_db<span class="token punctuation">.</span>put_many<span class="token punctuation">(</span>items<span class="token punctuation">,</span> expire_at<span class="token operator">=</span>expire_at<span class="token punctuation">)</span>

	<span class="token comment"># close connection</span>
	<span class="token keyword">await</span> async_db<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

loop <span class="token operator">=</span> asyncio<span class="token punctuation">.</span>get_event_loop<span class="token punctuation">(</span><span class="token punctuation">)</span>
loop<span class="token punctuation">.</span>run_until_complete<span class="token punctuation">(</span>put_items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></section></section><section id="update"class="level3"><h3>Update</h3><pre class="language-py"><code class="language-py">update<span class="token punctuation">(</span>
	updates<span class="token punctuation">:</span><span class="token builtin">dict</span><span class="token punctuation">,</span> 
	key<span class="token punctuation">:</span><span class="token builtin">str</span><span class="token punctuation">,</span>
	<span class="token operator">*</span><span class="token punctuation">,</span>
	expire_in<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
	expire_at<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>Union<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">,</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
<span class="token punctuation">)</span></code></pre><ul><li><strong>updates</strong> (required): A dict describing the updates on the item, refer to <a href="/docs/base/sdk#update">updates</a> for more details.<li><strong>key</strong> (required): The key of the item to update.<li><strong>expire_in</strong> (optional) - Accepts: <code>int</code> and <code>None</code><ul><li>Description: seconds after which the item will expire in, see also <a href="./expiring_items">expiring items</a></ul><li><strong>expire_at</strong> (optional) - Accepts: <code>int</code>, <code>float</code>, <code>datetime.datetime</code> and <code>None</code><ul><li>Description: time at which the item will expire in, can provide the timestamp directly(<code>int</code> or <code>float</code>) or a <a href="https://docs.python.org/3/library/datetime.html">datetime.datetime</a> object, see also <a href="./expiring_items">expiring items</a></ul></ul><section id="example-5"class="level4"><h4>Example</h4><pre class="language-py"><code class="language-py"><span class="token keyword">import</span> asyncio
<span class="token keyword">from</span> deta <span class="token keyword">import</span> Deta

async_db <span class="token operator">=</span> Deta<span class="token punctuation">(</span>project_key<span class="token punctuation">)</span><span class="token punctuation">.</span>AsyncBase<span class="token punctuation">(</span>base_name<span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">update_item</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
	updates <span class="token operator">=</span> <span class="token punctuation">{</span>profile<span class="token punctuation">.</span>age<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span> likes<span class="token punctuation">:</span> async_db<span class="token punctuation">.</span>util<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ramen<span class="token punctuation">)</span><span class="token punctuation">}</span>
	<span class="token keyword">await</span> async_db<span class="token punctuation">.</span>update<span class="token punctuation">(</span>updates<span class="token punctuation">,</span> jimmy<span class="token punctuation">)</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>updated user jimmy<span class="token punctuation">)</span>

	<span class="token comment"># close connection</span>
	<span class="token keyword">await</span> async_db<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

loop <span class="token operator">=</span> asyncio<span class="token punctuation">.</span>get_event_loop<span class="token punctuation">(</span><span class="token punctuation">)</span>
loop<span class="token punctuation">.</span>run_until_complete<span class="token punctuation">(</span>update_item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></section></section><section id="fetch"class="level3"><h3>Fetch</h3><p><strong><code>fetch(query=None, limit=1000, last=None)</code></strong><ul><li><strong>query</strong> : a <a href="https://docs.deta.sh/docs/base/sdk/queries/">query or a list of queries</a><li><strong>limit</strong> : the limit of the number of items you want to recieve, min value <code>1</code> if used.<li><strong>last</strong>: the last key seen in a previous paginated response.</ul><section id="example-6"class="level4"><h4>Example</h4><pre class="language-py"><code class="language-py"><span class="token keyword">import</span> asyncio
<span class="token keyword">from</span> deta <span class="token keyword">import</span> Deta

async_db <span class="token operator">=</span> Deta<span class="token punctuation">(</span>project_key<span class="token punctuation">)</span><span class="token punctuation">.</span>AsyncBase<span class="token punctuation">(</span>base_name<span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">fetch_items</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
	query <span class="token operator">=</span> <span class="token punctuation">{</span>profile<span class="token punctuation">.</span>age?gt<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">}</span>
	res <span class="token operator">=</span> <span class="token keyword">await</span> async_db<span class="token punctuation">.</span>fetch<span class="token punctuation">(</span>query<span class="token punctuation">)</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>fetched items<span class="token punctuation">:</span> res<span class="token punctuation">.</span>items<span class="token punctuation">)</span>

	<span class="token comment"># close connection</span>
	<span class="token keyword">await</span> async_db<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

loop <span class="token operator">=</span> asyncio<span class="token punctuation">.</span>get_event_loop<span class="token punctuation">(</span><span class="token punctuation">)</span>
loop<span class="token punctuation">.</span>run_until_complete<span class="token punctuation">(</span>fetch_items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></section></section></section><section id="issues"class="level2"><h2>Issues</h2><p>If you run into any issues, consider reporting them in our <a href="https://github.com/orgs/deta/discussions">Github Discussions</a>. We also appreciate any feedback.<p><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section>