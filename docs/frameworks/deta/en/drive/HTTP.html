<!doctype html><html id="http"lang="en"><meta charset="utf-8"><title>HTTP API</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="sidebar_label"content="HTTP API"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><p>import Tabs from '@theme/Tabs'; import TabItem from '@theme/TabItem';<section id="general"class="level2"><h2>General</h2><blockquote>You can get your **Project Key** and your **Project ID** from your [Deta dashboard](https://web.deta.sh). You need these to talk with the Deta Drive API.</blockquote><section id="root-url"class="level3"><h3>Root URL</h3><p>This URL is the base for all your HTTP requests:<p><strong><code>https://drive.deta.sh/v1/{project_id}/{drive_name}</code></strong><blockquote><p>The <code>drive_name</code> is the name given to your drive. If you already have a <strong>Drive</strong>, then you can go ahead and provide it's name here. Additionally, you could provide any name here when doing any <code>PUT</code> or <code>POST</code> request and our backend will automatically create a new drive for you if it does not exist. There is no limit on how many Drives you can create.</blockquote></section><section id="auth"class="level3"><h3>Auth</h3><p>A <strong>Project Key</strong> <em>must</em> be provided in the request <strong>headers</strong> as a value for the <code>X-Api-Key</code> key for authentication and authorization.<p>Example <code>X-Api-Key: a0kjsdfjda_thisIsYourSecretKey</code></section><section id="file-names-and-directories"class="level3"><h3>File Names And Directories</h3><p>Each file needs a unique <code>name</code> which identifies the file. Directorial hierarchies are represented logically by the <code>name</code> of the file itself with the use of backslash <code>/</code>.<p>For example, if you want to store a file <code>world.txt</code> under the directory <code>hello</code> , the <code>name</code> of the file should be <code>hello/world.txt</code>.<p>The file name <strong>must not</strong> end with a <code>/</code>. This also means that you can not create an empty directory.<p>A directory ceases to exist if there are no more files in it. ## Endpoints ### Put File <code>POST /files?name={name}</code><p>Stores a smaller file in a single request. Use this endpoint if the file size is small enough to be sent in a single request. The file is overwritten if the file with given <code>name</code> already exists.<blockquote>We do not accept payloads larger than 10 MB on this endpoint. For larger uploads, use chunked uploads.</blockquote><p>&#x3C;Tabs defaultValue=request values={[ {label: 'Request', value:'request', }, {label: 'Response', value: 'response', }, ] }></p><tabitem value="request"><table><thead><tr><th>Headers<th>Required<th>Description<tbody><tr><td><code>Content-Type</code><td>No<td>The content type of the file. If the content type is not specified, the file <code>name</code> is used to figure out the content type. Defaults to <code>application/octet-stream</code> if the content type can not be figured out.</table><table><thead><tr><th>Query Params<th>Required<th>Description<tbody><tr><td><code>name</code><td>Yes<td>The <code>name</code> of the file. More <a href="#file-names-and-directories">here</a>.</table></tabitem><tabitem value="response"><section id="201-created"class="level4"><h4><code>201 Created</code></h4><pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json

<span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> file name<span class="token punctuation">,</span>
    <span class="token literal-property property">project_id</span><span class="token operator">:</span> deta project id<span class="token punctuation">,</span>
    <span class="token literal-property property">drive_name</span><span class="token operator">:</span> deta drive_name
<span class="token punctuation">}</span></code></pre></section><section id="client-errors"class="level4"><h4>Client Errors</h4><p><code>400 Bad Request</code><pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json
<span class="token punctuation">{</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// error messages</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><p><code>413 Payload Too Large</code><pre class="language-html"><code class="language-html">Content-Type: text/html
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span> 413 - Request Entity Too Large <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span></code></pre></section></tabitem></section><section id="initialize-chunked-upload"class="level3"><h3>Initialize Chunked Upload</h3><p>Initializes a chunked file upload. If the file is larger than 10 MB, use this endpoint to initialize a chunked file upload.<p><code>POST /uploads?name={name}</code><p>&#x3C;Tabs defaultValue=request values={[ {label: 'Request', value:'request', }, {label: 'Response', value: 'response', }, ] }></p><tabitem value="request"><table><thead><tr><th>Params<th>Required<th>Description<tbody><tr><td><code>name</code><td>Yes<td>The <code>name</code> of the file. More <a href="#file-names-and-directories">here</a>.</table></tabitem><tabitem value="response"><section id="202-accepted"class="level4"><h4><code>202 Accepted</code></h4><pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json

<span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> file name<span class="token punctuation">,</span>
    <span class="token literal-property property">upload_id</span><span class="token operator">:</span> a unique upload id
    <span class="token literal-property property">project_id</span><span class="token operator">:</span> deta project id<span class="token punctuation">,</span>
    <span class="token literal-property property">drive_name</span><span class="token operator">:</span> deta drive name
<span class="token punctuation">}</span></code></pre></section><section id="client-errors-1"class="level4"><h4>Client Errors</h4><p><code>400 Bad Request</code><pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json
<span class="token punctuation">{</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// error messages</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></section></tabitem></section><section id="upload-chunked-part"class="level3"><h3>Upload Chunked Part</h3><p>Uploads a chunked part.<p><code>POST /uploads/{upload_id}/parts?name={name}&#x26;part={part}</code><blockquote>Each chunk must be at least 5 MB and at most 10 MB. The final chunk can be less than 5 MB.</blockquote><p>&#x3C;Tabs defaultValue=request values={[ {label: 'Request', value:'request', }, {label: 'Response', value: 'response', }, ] }></p><tabitem value="request"><table><thead><tr><th>Params<th>Required<th>Description<tbody><tr><td><code>upload_id</code><td>Yes<td>The <code>upload_id</code> received after <a href="#initialize-chunked-upload">initiating a chunked upload</a><tr><td><code>name</code><td>Yes<td>The <code>name</code> of the file. More <a href="#file-names-and-directories">here</a>.<tr><td><code>part</code><td>Yes<td>The chunk part number, start with <code>1</code></table></tabitem><tabitem value="response"><section id="200-ok"class="level4"><h4><code>200 Ok</code></h4><pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json

<span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> file name<span class="token punctuation">,</span>
    <span class="token literal-property property">upload_id</span><span class="token operator">:</span> a unique upload id
    <span class="token literal-property property">part</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// upload part number</span>
    <span class="token literal-property property">project_id</span><span class="token operator">:</span> deta project id<span class="token punctuation">,</span>
    <span class="token literal-property property">drive_name</span><span class="token operator">:</span> deta drive name
<span class="token punctuation">}</span></code></pre></section><section id="client-errors-2"class="level4"><h4>Client Errors</h4><p><code>400 Bad Request</code><pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json
<span class="token punctuation">{</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// error messages</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><p><code>404 Not Found</code><pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json
<span class="token punctuation">{</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// error messages</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><p><code>413 Payload Too Large</code><pre class="language-html"><code class="language-html">Content-Type: text/html
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span> 413 Request Entity Too Large <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span></code></pre></section></tabitem></section><section id="end-chunked-upload"class="level3"><h3>End Chunked Upload</h3><p>End a chunked upload.<p><code>PATCH /uploads/{upload_id}?name={name}</code><p>&#x3C;Tabs defaultValue=request values={[ {label: 'Request', value:'request', }, {label: 'Response', value: 'response', }, ] }></p><tabitem value="request"><table><thead><tr><th>Params<th>Required<th>Description<tbody><tr><td><code>upload_id</code><td>Yes<td>The <code>upload_id</code> received after <a href="#initialize-chunked-upload">initiating a chunked upload</a><tr><td><code>name</code><td>Yes<td>The <code>name</code> of the file. More <a href="#file-names-and-directories">here</a>.</table></tabitem><tabitem value="response"><section id="200-ok-1"class="level4"><h4><code>200 Ok</code></h4><pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json

<span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> file name<span class="token punctuation">,</span>
    <span class="token literal-property property">upload_id</span><span class="token operator">:</span> a unique upload id
    <span class="token literal-property property">project_id</span><span class="token operator">:</span> deta project id<span class="token punctuation">,</span>
    <span class="token literal-property property">drive_name</span><span class="token operator">:</span> deta drive name
<span class="token punctuation">}</span></code></pre></section><section id="client-errors-3"class="level4"><h4>Client Errors</h4><p><code>400 Bad Request</code><pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json
<span class="token punctuation">{</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// error messages</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><p><code>404 Not Found</code><pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json
<span class="token punctuation">{</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// error messages</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></section></tabitem></section><section id="abort-chunked-upload"class="level3"><h3>Abort Chunked Upload</h3><p>Aboart a chunked upload.<p><code>DELETE /uploads/{upload_id}?name={name}</code><p>&#x3C;Tabs defaultValue=request values={[ {label: 'Request', value:'request', }, {label: 'Response', value: 'response', }, ] }></p><tabitem value="request"><table><thead><tr><th>Params<th>Required<th>Description<tbody><tr><td><code>upload_id</code><td>Yes<td>The <code>upload_id</code> received after <a href="#initialize-chunked-upload">initiating a chunked upload</a><tr><td><code>name</code><td>Yes<td>The <code>name</code> of the file. More <a href="#file-names-and-directories">here</a>.</table></tabitem><tabitem value="response"><section id="200-ok-2"class="level4"><h4><code>200 Ok</code></h4><pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json

<span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> file name<span class="token punctuation">,</span>
    <span class="token literal-property property">upload_id</span><span class="token operator">:</span> a unique upload id
    <span class="token literal-property property">project_id</span><span class="token operator">:</span> deta project id<span class="token punctuation">,</span>
    <span class="token literal-property property">drive_name</span><span class="token operator">:</span> deta drive name
<span class="token punctuation">}</span></code></pre></section><section id="client-errors-4"class="level4"><h4>Client Errors</h4><p><code>400 Bad Request</code><pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json
<span class="token punctuation">{</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// error messages</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><p><code>404 Not Found</code><pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json
<span class="token punctuation">{</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// error messages</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></section></tabitem></section><section id="download-file"class="level3"><h3>Download File</h3><p>Download a file from drive.<p><code>GET /files/download?name={name}</code><p>&#x3C;Tabs defaultValue=request values={[ {label: 'Request', value:'request', }, {label: 'Response', value: 'response', }, ] }></p><tabitem value="request"><table><thead><tr><th>Params<th>Required<th>Description<tbody><tr><td><code>name</code><td>Yes<td>The <code>name</code> of the file. More <a href="#file-names-and-directories">here</a>.</table></tabitem><tabitem value="response"><section id="200-ok-3"class="level4"><h4><code>200 Ok</code></h4><pre class="language-text"><code class="language-text">Accept-Ranges: bytes
Content-Type: {content_type}
Content-Length: {content_length}
{Body}</code></pre></section><section id="client-errors-5"class="level4"><h4>Client Errors</h4><p><code>400 Bad Request</code><pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json
<span class="token punctuation">{</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// error messages</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><p><code>404 Not Found</code><pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json
<span class="token punctuation">{</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// error messages</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></section></tabitem></section><section id="list-files"class="level3"><h3>List Files</h3><p>List file names from drive.<p><code>GET /files?limit={limit}&#x26;prefix={prefix}&#x26;last={last}</code><p>&#x3C;Tabs defaultValue=request values={[ {label: 'Request', value:'request', }, {label: 'Response', value: 'response', }, ] }></p><tabitem value="request"><table><thead><tr><th>Params<th>Required<th>Description<tbody><tr><td><code>limit</code><td>No<td>The <code>limit</code> of number of file names to get, defaults to <code>1000</code><tr><td><code>prefix</code><td>No<td>The <code>prefix</code> that each file name must have.<tr><td><code>last</code><td>No<td>The <code>last</code> file name seen in a paginated response.</table></tabitem><tabitem value="response"><section id="200-ok-4"class="level4"><h4><code>200 Ok</code></h4><p>The response is paginated based on the <code>limit</code> provided in the request. By default, maximum <code>1000</code> file names are sent.<p>If the response is paginated, the response contains a <code>paging</code> object with <code>size</code> and <code>last</code> keys; <code>size</code> is the number of file names in the response, and <code>last</code> is the last file name seen in the response. The value of <code>last</code> should be used in subsequent requests to continue recieving further pages.<pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json

<span class="token punctuation">{</span>
    <span class="token literal-property property">paging</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// the number of file names in the response</span>
        <span class="token literal-property property">last</span><span class="token operator">:</span> last file name <span class="token keyword">in</span> response
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">names</span><span class="token operator">:</span> <span class="token punctuation">[</span>file1<span class="token punctuation">,</span> file2<span class="token punctuation">,</span> <span class="token spread operator">...</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></section><section id="client-errors-6"class="level4"><h4>Client Errors</h4><p><code>400 Bad Request</code><pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json
<span class="token punctuation">{</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// error messages</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><p><code>404 Not Found</code><pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json
<span class="token punctuation">{</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// error messages</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></section></tabitem></section><section id="delete-files"class="level3"><h3>Delete Files</h3><p>Delete files from drive.<p><code>DELETE /files</code><p>&#x3C;Tabs defaultValue=request values={[ {label: 'Request', value:'request', }, {label: 'Response', value: 'response', }, ] }></p><tabitem value="request"><pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json
<span class="token punctuation">{</span>
    <span class="token literal-property property">names</span><span class="token operator">:</span> <span class="token punctuation">[</span>file_1<span class="token punctuation">,</span> file_2<span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><table><thead><tr><th>Params<th>Required<th>Description<tbody><tr><td><code>names</code><td>Yes<td>The <code>names</code> of the files to delete, maximum <code>1000</code> file names</table></tabitem><tabitem value="response"><section id="200-ok-5"class="level4"><h4><code>200 Ok</code></h4><pre class="language-js"><code class="language-js"><span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json

<span class="token punctuation">{</span>
    <span class="token literal-property property">deleted</span><span class="token operator">:</span> <span class="token punctuation">[</span>file_1<span class="token punctuation">,</span> file_2<span class="token punctuation">,</span> <span class="token spread operator">...</span><span class="token punctuation">]</span> <span class="token comment">// deleted file names</span>
    <span class="token literal-property property">failed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">file_3</span><span class="token operator">:</span> reason why file could not be deleted<span class="token punctuation">,</span>
        <span class="token literal-property property">file_4</span><span class="token operator">:</span> reason why file could not be deleted<span class="token punctuation">,</span>
        <span class="token comment">//...</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span></code></pre><blockquote>File names that did not exist will also be under `deleted`, `failed` will only contain names of files that existed but were not deleted for some reason</blockquote></section></tabitem></section></section><section id="issues"class="level2"><h2>Issues</h2><p>If you run into any issues, consider reporting them in our <a href="https://github.com/orgs/deta/discussions">Github Discussions</a>. <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section>