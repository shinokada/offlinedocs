<!doctype html><html lang="en"><meta charset="utf-8"><title>Routing</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="routing"><h1 id="routing">Routing</h1><p>At the heart of SvelteKit is a <em>filesystem-based router</em>. The routes of your app — i.e. the URL paths that users can access — are defined by the directories in your codebase:<ul><li><code>src/routes</code> is the root route<li><code>src/routes/about</code> creates an <code>/about</code> route<li><code>src/routes/blog/[slug]</code> creates a route with a <em>parameter</em>, <code>slug</code>, that can be used to load data dynamically when a user requests a page like <code>/blog/hello-world</code></ul><blockquote><p>You can change <code>src/routes</code> to a different directory by editing the <a href="configuration">project config</a>.</blockquote><p>Each route directory contains one or more <em>route files</em>, which can be identified by their <code>+</code> prefix.<p>We'll introduce these files in a moment in more detail, but here are a few simple rules to help you remember how SvelteKit's routing works:<ul><li>All files can run on the server<li>All files run on the client except <code>+server</code> files<li><code>+layout</code> and <code>+error</code> files apply to subdirectories as well as the directory they live in</ul><section class="level2"aria-labelledby="page"><h2 id="page">+page</h2></section><section class="level2"aria-labelledby="pagesvelte"><h2 id="pagesvelte">+page.svelte</h2><p>A <code>+page.svelte</code> component defines a page of your app. By default, pages are rendered both on the server (<a href="glossary#ssr">SSR</a>) for the initial request and in the browser (<a href="glossary#csr">CSR</a>) for subsequent navigation.<pre class="language-svelte"><code class="language-svelte">&#x3C;! file: src/routes/+page.svelte --->
&#x3C;h1>Hello and welcome to my site!&#x3C;/h1>
&#x3C;a href="/about">About my site&#x3C;/a></code></pre><pre class="language-svelte"><code class="language-svelte">&#x3C;! file: src/routes/about/+page.svelte --->
&#x3C;h1>About this site&#x3C;/h1>
&#x3C;p>TODO...&#x3C;/p>
&#x3C;a href="/">Home&#x3C;/a></code></pre><pre class="language-svelte"><code class="language-svelte">&#x3C;! file: src/routes/blog/[slug]/+page.svelte --->
&#x3C;script>
	/** @type {import('./$types').PageData} */
	export let data;
&#x3C;/script>

&#x3C;h1>{data.title}&#x3C;/h1>
&#x3C;div>{@html data.content}&#x3C;/div></code></pre><blockquote><p>Note that SvelteKit uses <code>&#x3C;a></code> elements to navigate between routes, rather than a framework-specific <code>&#x3C;Link></code> component.</blockquote></section><section class="level2"aria-labelledby="pagejs"><h2 id="pagejs">+page.js</h2><p>Often, a page will need to load some data before it can be rendered. For this, we add a <code>+page.js</code> module that exports a <code>load</code> function:<pre class="language-js"><code class="language-js"><span class="token comment">/// file: src/routes/blog/[slug]/+page.js</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> error <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@sveltejs/kit'</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./$types'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>PageLoad<span class="token punctuation">}</span></span> */</span>
<span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">load</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>params<span class="token punctuation">.</span><span class="token property-access">slug</span> <span class="token operator">===</span> <span class="token string">'hello-world'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
			# <span class="token string">'Hello world!'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">'Welcome to our blog. Lorem ipsum dolor sit amet...'</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">error</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">,</span> <span class="token string">'Not found'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>This function runs alongside <code>+page.svelte</code>, which means it runs on the server during server-side rendering and in the browser during client-side navigation. See <a href="load"><code>load</code></a> for full details of the API.<p>As well as <code>load</code>, <code>+page.js</code> can export values that configure the page's behaviour:<ul><li><code>export const prerender = true</code> or <code>false</code> or <code>'auto'</code><li><code>export const ssr = true</code> or <code>false</code><li><code>export const csr = true</code> or <code>false</code></ul><p>You can find more information about these in <a href="page-options">page options</a>.</section><section class="level2"aria-labelledby="pageserverjs"><h2 id="pageserverjs">+page.server.js</h2><p>If your <code>load</code> function can only run on the server — for example, if it needs to fetch data from a database or you need to access private <a href="modules#$env-static-private">environment variables</a> like API keys — then you can rename <code>+page.js</code> to <code>+page.server.js</code> and change the <code>PageLoad</code> type to <code>PageServerLoad</code>.<pre class="language-js"><code class="language-js"><span class="token comment">/// file: src/routes/blog/[slug]/+page.server.js</span>

<span class="token comment">// @filename: ambient.d.ts</span>
declare global <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token function-variable function">getPostFromDatabase</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">slug</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
		# string<span class="token punctuation">;</span>
		<span class="token literal-property property">content</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token exports"><span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">;</span>

<span class="token comment">// @filename: index.js</span>
<span class="token comment">// cut---</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> error <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@sveltejs/kit'</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./$types'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>PageServerLoad<span class="token punctuation">}</span></span> */</span>
<span class="token keyword module">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">load</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> post <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">getPostFromDatabase</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span><span class="token property-access">slug</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>post<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword control-flow">return</span> post<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">error</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">,</span> <span class="token string">'Not found'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>During client-side navigation, SvelteKit will load this data from the server, which means that the returned value must be serializable using <a href="https://github.com/rich-harris/devalue">devalue</a>. See <a href="load"><code>load</code></a> for full details of the API.<p>Like <code>+page.js</code>, <code>+page.server.js</code> can export <a href="page-options">page options</a> — <code>prerender</code>, <code>ssr</code> and <code>csr</code>.<p>A <code>+page.server.js</code> file can also export <em>actions</em>. If <code>load</code> lets you read data from the server, <code>actions</code> let you write data <em>to</em> the server using the <code>&#x3C;form></code> element. To learn how to use them, see the <a href="form-actions">form actions</a> section.</section><section class="level2"aria-labelledby="error"><h2 id="error">+error</h2><p>If an error occurs during <code>load</code>, SvelteKit will render a default error page. You can customise this error page on a per-route basis by adding an <code>+error.svelte</code> file:<pre class="language-svelte"><code class="language-svelte">&#x3C;! file: src/routes/blog/[slug]/+error.svelte --->
&#x3C;script>
	import { page } from '$app/stores';
&#x3C;/script>

&#x3C;h1>{$page.status}: {$page.error.message}&#x3C;/h1></code></pre><p>SvelteKit will 'walk up the tree' looking for the closest error boundary — if the file above didn't exist it would try <code>src/routes/blog/+error.svelte</code> and then <code>src/routes/+error.svelte</code> before rendering the default error page. If <em>that</em> fails (or if the error was thrown from the <code>load</code> function of the root <code>+layout</code>, which sits 'above' the root <code>+error</code>), SvelteKit will bail out and render a static fallback error page, which you can customise by creating a <code>src/error.html</code> file.<p>If the error occurs inside a <code>load</code> function in <code>+layout(.server).js</code>, the closest error boundary in the tree is an <code>+error.svelte</code> file <em>above</em> that layout (not next to it).<p>If no route can be found (404), <code>src/routes/+error.svelte</code> (or the default error page, if that file does not exist) will be used.<blockquote><p><code>+error.svelte</code> is <em>not</em> used when an error occurs inside <a href="hooks#server-hooks-handle"><code>handle</code></a> or a <a href="#server">+server.js</a> request handler.</blockquote><p>You can read more about error handling <a href="errors">here</a>.</section><section class="level2"aria-labelledby="layout"><h2 id="layout">+layout</h2><p>So far, we've treated pages as entirely standalone components — upon navigation, the existing <code>+page.svelte</code> component will be destroyed, and a new one will take its place.<p>But in many apps, there are elements that should be visible on <em>every</em> page, such as top-level navigation or a footer. Instead of repeating them in every <code>+page.svelte</code>, we can put them in <em>layouts</em>.</section><section class="level2"aria-labelledby="layoutsvelte"><h2 id="layoutsvelte">+layout.svelte</h2><p>To create a layout that applies to every page, make a file called <code>src/routes/+layout.svelte</code>. The default layout (the one that SvelteKit uses if you don't bring your own) looks like this...<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>slot</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>slot</span><span class="token punctuation">></span></span></code></pre><p>...but we can add whatever markup, styles and behaviour we want. The only requirement is that the component includes a <code>&#x3C;slot></code> for the page content. For example, let's add a nav bar:<pre class="language-html"><code class="language-html">/// file: src/routes/+layout.svelte
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>nav</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>a</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/about<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>a</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/settings<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Settings<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>a</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>nav</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>slot</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>slot</span><span class="token punctuation">></span></span></code></pre><p>If we create pages for <code>/</code>, <code>/about</code> and <code>/settings</code>...<pre class="language-html"><code class="language-html">/// file: src/routes/+page.svelte
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span></code></pre><pre class="language-html"><code class="language-html">/// file: src/routes/about/+page.svelte
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span></code></pre><pre class="language-html"><code class="language-html">/// file: src/routes/settings/+page.svelte
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span>Settings<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span></code></pre><p>...the nav will always be visible, and clicking between the three pages will only result in the <code>&#x3C;h1></code> being replaced.<p>Layouts can be <em>nested</em>. Suppose we don't just have a single <code>/settings</code> page, but instead have nested pages like <code>/settings/profile</code> and <code>/settings/notifications</code> with a shared submenu (for a real-life example, see <a href="https://github.com/settings">github.com/settings</a>).<p>We can create a layout that only applies to pages below <code>/settings</code> (while inheriting the root layout with the top-level nav):<pre class="language-svelte"><code class="language-svelte">&#x3C;! file: src/routes/settings/+layout.svelte --->
&#x3C;script>
	/** @type {import('./$types').LayoutData} */
	export let data;
&#x3C;/script>

&#x3C;h1>Settings&#x3C;/h1>

&#x3C;div class="submenu">
	{#each data.sections as section}
		&#x3C;a href="/settings/{section.slug}">{section.title}&#x3C;/a>
	{/each}
&#x3C;/div>

&#x3C;slot>&#x3C;/slot></code></pre><p>You can see how <code>data</code> is populated by looking at the <code>+layout.js</code> example in the next section just below.<p>By default, each layout inherits the layout above it. Sometimes that isn't what you want - in this case, <a href="advanced-routing#advanced-layouts">advanced layouts</a> can help you.</section><section class="level2"aria-labelledby="layoutjs"><h2 id="layoutjs">+layout.js</h2><p>Just like <code>+page.svelte</code> loading data from <code>+page.js</code>, your <code>+layout.svelte</code> component can get data from a <a href="load"><code>load</code></a> function in <code>+layout.js</code>.<pre class="language-js"><code class="language-js"><span class="token comment">/// file: src/routes/settings/+layout.js</span>
<span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./$types'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>LayoutLoad<span class="token punctuation">}</span></span> */</span>
<span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">sections</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span> <span class="token literal-property property">slug</span><span class="token operator">:</span> <span class="token string">'profile'</span><span class="token punctuation">,</span> # <span class="token string">'Profile'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">{</span> <span class="token literal-property property">slug</span><span class="token operator">:</span> <span class="token string">'notifications'</span><span class="token punctuation">,</span> # <span class="token string">'Notifications'</span> <span class="token punctuation">}</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>If a <code>+layout.js</code> exports <a href="page-options">page options</a> — <code>prerender</code>, <code>ssr</code> and <code>csr</code> — they will be used as defaults for child pages.<p>Data returned from a layout's <code>load</code> function is also available to all its child pages:<pre class="language-svelte"><code class="language-svelte">&#x3C;! file: src/routes/settings/profile/+page.svelte --->
&#x3C;script>
	/** @type {import('./$types').PageData} */
	export let data;

	console.log(data.sections); // [{ slug: 'profile', # 'Profile' }, ...]
&#x3C;/script></code></pre><blockquote><p>Often, layout data is unchanged when navigating between pages. SvelteKit will intelligently rerun <a href="load"><code>load</code></a> functions when necessary.</blockquote></section><section class="level2"aria-labelledby="layoutserverjs"><h2 id="layoutserverjs">+layout.server.js</h2><p>To run your layout's <code>load</code> function on the server, move it to <code>+layout.server.js</code>, and change the <code>LayoutLoad</code> type to <code>LayoutServerLoad</code>.<p>Like <code>+layout.js</code>, <code>+layout.server.js</code> can export <a href="page-options">page options</a> — <code>prerender</code>, <code>ssr</code> and <code>csr</code>.</section><section class="level2"aria-labelledby="server"><h2 id="server">+server</h2><p>As well as pages, you can define routes with a <code>+server.js</code> file (sometimes referred to as an 'API route' or an 'endpoint'), which gives you full control over the response. Your <code>+server.js</code> file exports functions corresponding to HTTP verbs like <code>GET</code>, <code>POST</code>, <code>PATCH</code>, <code>PUT</code>, <code>DELETE</code>, <code>OPTIONS</code>, and <code>HEAD</code> that take a <code>RequestEvent</code> argument and return a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response"><code>Response</code></a> object.<p>For example we could create an <code>/api/random-number</code> route with a <code>GET</code> handler:<pre class="language-js"><code class="language-js"><span class="token comment">/// file: src/routes/api/random-number/+server.js</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> error <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@sveltejs/kit'</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./$types'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>RequestHandler<span class="token punctuation">}</span></span> */</span>
<span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token constant">GET</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> url <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> min <span class="token operator">=</span> <span class="token known-class-name class-name">Number</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token property-access">searchParams</span><span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token string">'min'</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> max <span class="token operator">=</span> <span class="token known-class-name class-name">Number</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token property-access">searchParams</span><span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token string">'max'</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">const</span> d <span class="token operator">=</span> max <span class="token operator">-</span> min<span class="token punctuation">;</span>

	<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token operator">||</span> d <span class="token operator">&#x3C;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">error</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token string">'min and max must be numbers, and min must be less than max'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">const</span> random <span class="token operator">=</span> min <span class="token operator">+</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> d<span class="token punctuation">;</span>

	<span class="token keyword control-flow">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">(</span>random<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>The first argument to <code>Response</code> can be a <a href="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream"><code>ReadableStream</code></a>, making it possible to stream large amounts of data or create server-sent events (unless deploying to platforms that buffer responses, like AWS Lambda).<p>You can use the <a href="modules#sveltejs-kit-error"><code>error</code></a>, <a href="modules#sveltejs-kit-redirect"><code>redirect</code></a> and <a href="modules#sveltejs-kit-json"><code>json</code></a> methods from <code>@sveltejs/kit</code> for convenience (but you don't have to).<p>If an error is thrown (either <code>error(...)</code> or an unexpected error), the response will be a JSON representation of the error or a fallback error page — which can be customised via <code>src/error.html</code> — depending on the <code>Accept</code> header. The <a href="#error"><code>+error.svelte</code></a> component will <em>not</em> be rendered in this case. You can read more about error handling <a href="errors">here</a>.<blockquote><p>When creating an <code>OPTIONS</code> handler, note that Vite will inject <code>Access-Control-Allow-Origin</code> and <code>Access-Control-Allow-Methods</code> headers — these will not be present in production unless you add them.</blockquote></section><section class="level2"aria-labelledby="receiving-data"><h2 id="receiving-data">Receiving data</h2><p>By exporting <code>POST</code>/<code>PUT</code>/<code>PATCH</code>/<code>DELETE</code>/<code>OPTIONS</code>/<code>HEAD</code> handlers, <code>+server.js</code> files can be used to create a complete API:<pre class="language-svelte"><code class="language-svelte">&#x3C;! file: src/routes/add/+page.svelte --->
&#x3C;script>
	let a = 0;
	let b = 0;
	let total = 0;

	async function add() {
		const response = await fetch('/api/add', {
			method: 'POST',
			body: JSON.stringify({ a, b }),
			headers: {
				'content-type': 'application/json'
			}
		});

		total = await response.json();
	}
&#x3C;/script>

&#x3C;input type="number" bind:value={a}> +
&#x3C;input type="number" bind:value={b}> =
{total}

&#x3C;button on:click={add}>Calculate&#x3C;/button></code></pre><pre class="language-js"><code class="language-js"><span class="token comment">/// file: src/routes/api/add/+server.js</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> json <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@sveltejs/kit'</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./$types'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>RequestHandler<span class="token punctuation">}</span></span> */</span>
<span class="token keyword module">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token constant">POST</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> b <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> request<span class="token punctuation">.</span><span class="token method function property-access">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword control-flow">return</span> <span class="token function">json</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><blockquote><p>In general, <a href="form-actions">form actions</a> are a better way to submit data from the browser to the server.</blockquote><blockquote><p>If a <code>GET</code> handler is exported, a <code>HEAD</code> request will return the <code>content-length</code> of the <code>GET</code> handler's response body.</blockquote></section><section class="level2"aria-labelledby="fallback-method-handler"><h2 id="fallback-method-handler">Fallback method handler</h2><p>Exporting the <code>fallback</code> handler will match any unhandled request methods, including methods like <code>MOVE</code> which have no dedicated export from <code>+server.js</code>.<pre class="language-js"><code class="language-js"><span class="token comment">// @errors: 7031</span>
<span class="token comment">/// file: src/routes/api/add/+server.js</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> json<span class="token punctuation">,</span> text <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@sveltejs/kit'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token constant">POST</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> b <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> request<span class="token punctuation">.</span><span class="token method function property-access">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword control-flow">return</span> <span class="token function">json</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// This handler will respond to PUT, PATCH, DELETE, etc.</span>
<span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./$types'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>RequestHandler<span class="token punctuation">}</span></span> */</span>
<span class="token keyword module">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fallback</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword control-flow">return</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">I caught your </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>request<span class="token punctuation">.</span><span class="token property-access">method</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> request!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><blockquote><p>For <code>HEAD</code> requests, the <code>GET</code> handler takes precedence over the <code>fallback</code> handler.</blockquote></section><section class="level2"aria-labelledby="content-negotiation"><h2 id="content-negotiation">Content negotiation</h2><p><code>+server.js</code> files can be placed in the same directory as <code>+page</code> files, allowing the same route to be either a page or an API endpoint. To determine which, SvelteKit applies the following rules:<ul><li><code>PUT</code>/<code>PATCH</code>/<code>DELETE</code>/<code>OPTIONS</code> requests are always handled by <code>+server.js</code> since they do not apply to pages<li><code>GET</code>/<code>POST</code>/<code>HEAD</code> requests are treated as page requests if the <code>accept</code> header prioritises <code>text/html</code> (in other words, it's a browser page request), else they are handled by <code>+server.js</code>.<li>Responses to <code>GET</code> requests will include a <code>Vary: Accept</code> header, so that proxies and browsers cache HTML and JSON responses separately.</ul></section><section class="level2"aria-labelledby="types"><h2 id="types">$types</h2><p>Throughout the examples above, we've been importing types from a <code>$types.d.ts</code> file. This is a file SvelteKit creates for you in a hidden directory if you're using TypeScript (or JavaScript with JSDoc type annotations) to give you type safety when working with your root files.<p>For example, annotating <code>export let data</code> with <code>PageData</code> (or <code>LayoutData</code>, for a <code>+layout.svelte</code> file) tells TypeScript that the type of <code>data</code> is whatever was returned from <code>load</code>:<pre class="language-svelte"><code class="language-svelte">&#x3C;! file: src/routes/blog/[slug]/+page.svelte --->
&#x3C;script>
	/** @type {import('./$types').PageData} */
	export let data;
&#x3C;/script></code></pre><p>In turn, annotating the <code>load</code> function with <code>PageLoad</code>, <code>PageServerLoad</code>, <code>LayoutLoad</code> or <code>LayoutServerLoad</code> (for <code>+page.js</code>, <code>+page.server.js</code>, <code>+layout.js</code> and <code>+layout.server.js</code> respectively) ensures that <code>params</code> and the return value are correctly typed.<p>If you're using VS Code or any IDE that supports the language server protocol and TypeScript plugins then you can omit these types <em>entirely</em>! Svelte's IDE tooling will insert the correct types for you, so you'll get type checking without writing them yourself. It also works with our command line tool <code>svelte-check</code>.<p>You can read more about omitting <code>$types</code> in our <a href="https://svelte.dev/blog/zero-config-type-safety">blog post</a> about it.</section><section class="level2"aria-labelledby="other-files"><h2 id="other-files">Other files</h2><p>Any other files inside a route directory are ignored by SvelteKit. This means you can colocate components and utility modules with the routes that need them.<p>If components and modules are needed by multiple routes, it's a good idea to put them in <a href="modules#$lib"><code>$lib</code></a>.</section><section class="level2"aria-labelledby="further-reading"><h2 id="further-reading">Further reading</h2><ul><li><a href="https://learn.svelte.dev/tutorial/pages">Tutorial: Routing</a><li><a href="https://learn.svelte.dev/tutorial/get-handlers">Tutorial: API routes</a><li><a href="advanced-routing">Docs: Advanced routing</a> <span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></ul></section></section>