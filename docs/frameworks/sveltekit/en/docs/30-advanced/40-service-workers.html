<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Service workers</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css">
  </head>
  <body>
    <section id="service-workers" class="level1">
      <h1>Service workers</h1>
      <p>Service workers act as proxy servers that handle network requests inside your app. This makes it possible to make your app work offline, but even if you don't need offline support (or can't realistically implement it because of the type of app you're building), it's often worth using service workers to speed up navigation by precaching your built JS and CSS.</p>
      <p>In SvelteKit, if you have a <code>src/service-worker.js</code> file (or <code>src/service-worker.ts</code>, or <code>src/service-worker/index.js</code>, etc) it will be built with Vite and automatically registered. You can disable automatic registration if you need to register the service worker with your own logic (e.g. prompt user for update, configure periodic updates, use <code>workbox</code>, etc).</p>
      <blockquote>
        <p>You can change the <a href="../50-api-reference/10-configuration.html#files">location of your service worker</a> and <a href="../50-api-reference/10-configuration.html#serviceworker">disable automatic registration</a> in your project configuration.</p>
      </blockquote>
      <p>Inside the service worker you have access to the <a href="../50-api-reference/30-modules.html#$service-worker"><code>$service-worker</code> module</a>. If your Vite config specifies <code>define</code>, this will be applied to service workers as well as your server/client builds.</p>
      <p>The service worker is bundled for production, but not during development. For that reason, only browsers that support <a href="https://web.dev/es-modules-in-sw">modules in service workers</a> will be able to use them at dev time. If you are manually registering your service worker, you will need to pass the <code>{ type: 'module' }</code> option in development:</p>
      <pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> dev <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'$app/environment'</span><span class="token punctuation">;</span>

<span class="token dom variable">navigator</span><span class="token punctuation">.</span><span class="token property-access">serviceWorker</span><span class="token punctuation">.</span><span class="token method function property-access">register</span><span class="token punctuation">(</span><span class="token string">'/service-worker.js'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">type</span><span class="token operator">:</span> dev <span class="token operator">?</span> <span class="token string">'module'</span> <span class="token operator">:</span> <span class="token string">'classic'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>`<span class="token operator">&#x3C;</span>span style<span class="token operator">=</span><span class="token string">'float: footnote;'</span><span class="token operator">></span><span class="token operator">&#x3C;</span>a href<span class="token operator">=</span><span class="token string">"../../index.html#toc"</span><span class="token operator">></span><span class="token maybe-class-name">Go</span> to <span class="token constant">TOC</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token operator">&#x3C;</span><span class="token operator">/</span>span<span class="token operator">></span>
</code></pre>
    </section>
  </body>
</html>
