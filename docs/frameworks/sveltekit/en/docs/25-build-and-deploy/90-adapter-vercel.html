<!doctype html><html lang="en"><meta charset="utf-8"><title>Vercel</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="vercel"class="level1"><h1>Vercel</h1><p>To deploy to Vercel, use <a href="https://github.com/sveltejs/kit/tree/master/packages/adapter-vercel"><code>adapter-vercel</code></a>.<p>This adapter will be installed by default when you use <a href="adapter-auto"><code>adapter-auto</code></a>, but adding it to your project allows you to specify Vercel-specific options.<section id="usage"class="level2"><h2>Usage</h2><p>Install with <code>npm i -D @sveltejs/adapter-vercel</code>, then add the adapter to your <code>svelte.config.js</code>:<pre class="language-js"><code class="language-js"><span class="token comment">// @errors: 2307</span>
<span class="token comment">/// file: svelte.config.js</span>
<span class="token keyword module">import</span> <span class="token imports">adapter</span> <span class="token keyword module">from</span> <span class="token string">'@sveltejs/adapter-vercel'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">kit</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">// default options are shown</span>
		<span class="token literal-property property">adapter</span><span class="token operator">:</span> <span class="token function">adapter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token comment">// if true, will deploy the app using edge functions</span>
			<span class="token comment">// (https://vercel.com/docs/concepts/functions/edge-functions)</span>
			<span class="token comment">// rather than serverless functions</span>
			<span class="token literal-property property">edge</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

			<span class="token comment">// an array of dependencies that esbuild should treat</span>
			<span class="token comment">// as external when bundling functions</span>
			<span class="token literal-property property">external</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

			<span class="token comment">// if true, will split your app into multiple functions</span>
			<span class="token comment">// instead of creating a single one for the entire app</span>
			<span class="token literal-property property">split</span><span class="token operator">:</span> <span class="token boolean">false</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></section><section id="environment-variables"class="level2"><h2>Environment Variables</h2><p>Vercel makes a set of <a href="https://vercel.com/docs/concepts/projects/environment-variables#system-environment-variables">deployment-specific environment variables</a> available. Like other environment variables, these are accessible from <code>$env/static/private</code> and <code>$env/dynamic/private</code> (sometimes — more on that later), and inaccessible from their public counterparts. To access one of these variables from the client:<pre class="language-js"><code class="language-js"><span class="token comment">// @errors: 2305</span>
<span class="token comment">/// file: +layout.server.js</span>
<span class="token keyword module">import</span> <span class="token punctuation">{</span> <span class="token constant">VERCEL_COMMIT_REF</span> <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">'$env/static/private'</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./$types'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>LayoutServerLoad<span class="token punctuation">}</span></span> */</span>
<span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">deploymentGitBranch</span><span class="token operator">:</span> <span class="token constant">VERCEL_COMMIT_REF</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-svelte"><code class="language-svelte">/// file: +layout.svelte
&#x3C;script>
	/** @type {import('./$types').LayoutServerData} */
	export let data;
&#x3C;/script>

&#x3C;p>This staging environment was deployed from {data.deploymentGitBranch}.&#x3C;/p></code></pre><p>Since all of these variables are unchanged between build time and run time when building on Vercel, we recommend using <code>$env/static/private</code> — which will statically replace the variables, enabling optimisations like dead code elimination — rather than <code>$env/dynamic/private</code>. If you're deploying with <code>edge: true</code> you <em>must</em> use <code>$env/static/private</code>, as <code>$env/dynamic/private</code> and <code>$env/dynamic/public</code> are not currently populated in edge functions on Vercel.</section><section id="notes"class="level2"><h2>Notes</h2></section><section id="vercel-functions"class="level2"><h2>Vercel functions</h2><p>Vercel functions contained in the <code>/api</code> directory at the project's root will <em>not</em> be included in the deployment — these should be implemented as <a href="https://kit.svelte.dev../20-core-concepts/10-routing.html#server">server endpoints</a> in your SvelteKit app.</section><section id="node-version"class="level2"><h2>Node version</h2><p>Projects created before a certain date will default to using Node 14, while SvelteKit requires Node 16 or later. You can <a href="https://vercel.com/docs/concepts/functions/serverless-functions/runtimes/node-js#node.js-version">change the Node version in your project settings</a>.</section><section id="troubleshooting"class="level2"><h2>Troubleshooting</h2></section><section id="accessing-the-file-system"class="level2"><h2>Accessing the file system</h2><p>You can't access the file system through methods like <code>fs.readFileSync</code> in Serverless/Edge environments. If you need to access files that way, do that during building the app through <a href="https://kit.svelte.dev../20-core-concepts/40-page-options.html#prerender">prerendering</a>. If you have a blog for example and don't want to manage your content through a CMS, then you need to prerender the content (or prerender the endpoint from which you get it) and redeploy your blog everytime you add new content.<span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section>