<!doctype html><html lang="en"><meta charset="utf-8"><title>Netlify</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="netlify"><h1 id="netlify">Netlify</h1><p>To deploy to Netlify, use <a href="https://github.com/sveltejs/kit/tree/main/packages/adapter-netlify"><code>adapter-netlify</code></a>.<p>This adapter will be installed by default when you use <a href="adapter-auto"><code>adapter-auto</code></a>, but adding it to your project allows you to specify Netlify-specific options.<section class="level2"aria-labelledby="usage"><h2 id="usage">Usage</h2><p>Install with <code>npm i -D @sveltejs/adapter-netlify</code>, then add the adapter to your <code>svelte.config.js</code>:<pre class="language-js"><code class="language-js"><span class="token comment">// @errors: 2307</span>
<span class="token comment">/// file: svelte.config.js</span>
<span class="token keyword module">import</span> <span class="token imports">adapter</span> <span class="token keyword module">from</span> <span class="token string">'@sveltejs/adapter-netlify'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">kit</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">// default options are shown</span>
		<span class="token literal-property property">adapter</span><span class="token operator">:</span> <span class="token function">adapter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token comment">// if true, will create a Netlify Edge Function rather</span>
			<span class="token comment">// than using standard Node-based functions</span>
			<span class="token literal-property property">edge</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

			<span class="token comment">// if true, will split your app into multiple functions</span>
			<span class="token comment">// instead of creating a single one for the entire app.</span>
			<span class="token comment">// if `edge` is true, this option cannot be used</span>
			<span class="token literal-property property">split</span><span class="token operator">:</span> <span class="token boolean">false</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Then, make sure you have a <a href="https://docs.netlify.com/configure-builds/file-based-configuration">netlify.toml</a> file in the project root. This will determine where to write static assets based on the <code>build.publish</code> settings, as per this sample configuration:<pre class="language-toml"><code class="language-toml"><span class="token punctuation">[</span><span class="token table class-name">build</span><span class="token punctuation">]</span>
	<span class="token key property">command</span> <span class="token punctuation">=</span> <span class="token string">"npm run build"</span>
	<span class="token key property">publish</span> <span class="token punctuation">=</span> <span class="token string">"build"</span></code></pre><p>If the <code>netlify.toml</code> file or the <code>build.publish</code> value is missing, a default value of <code>"build"</code> will be used. Note that if you have set the publish directory in the Netlify UI to something else then you will need to set it in <code>netlify.toml</code> too, or use the default value of <code>"build"</code>.</section><section class="level2"aria-labelledby="node-version"><h2 id="node-version">Node version</h2><p>New projects will use the current Node LTS version by default. However, if you're upgrading a project you created a while ago it may be stuck on an older version. See <a href="https://docs.netlify.com/configure-builds/manage-dependencies/#node-js-and-javascript">the Netlify docs</a> for details on manually specifying a current Node version.</section><section class="level2"aria-labelledby="netlify-edge-functions"><h2 id="netlify-edge-functions">Netlify Edge Functions</h2><p>SvelteKit supports <a href="https://docs.netlify.com/netlify-labs/experimental-features/edge-functions/">Netlify Edge Functions</a>. If you pass the option <code>edge: true</code> to the <code>adapter</code> function, server-side rendering will happen in a Deno-based edge function that's deployed close to the site visitor. If set to <code>false</code> (the default), the site will deploy to Node-based Netlify Functions.<pre class="language-js"><code class="language-js"><span class="token comment">// @errors: 2307</span>
<span class="token comment">/// file: svelte.config.js</span>
<span class="token keyword module">import</span> <span class="token imports">adapter</span> <span class="token keyword module">from</span> <span class="token string">'@sveltejs/adapter-netlify'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">kit</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">adapter</span><span class="token operator">:</span> <span class="token function">adapter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token comment">// will create a Netlify Edge Function using Deno-based</span>
			<span class="token comment">// rather than using standard Node-based functions</span>
			<span class="token literal-property property">edge</span><span class="token operator">:</span> <span class="token boolean">true</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></section><section class="level2"aria-labelledby="netlify-alternatives-to-sveltekit-functionality"><h2 id="netlify-alternatives-to-sveltekit-functionality">Netlify alternatives to SvelteKit functionality</h2><p>You may build your app using functionality provided directly by SvelteKit without relying on any Netlify functionality. Using the SvelteKit versions of these features will allow them to be used in dev mode, tested with integration tests, and to work with other adapters should you ever decide to switch away from Netlify. However, in some scenarios you may find it beneficial to use the Netlify versions of these features. One example would be if you're migrating an app that's already hosted on Netlify to SvelteKit.</section><section class="level2"aria-labelledby="redirect-rules"><h2 id="redirect-rules">Redirect rules</h2><p>During compilation, redirect rules are automatically appended to your <code>_redirects</code> file. (If it doesn't exist yet, it will be created.) That means:<ul><li><code>[[redirects]]</code> in <code>netlify.toml</code> will never match as <code>_redirects</code> has a <a href="https://docs.netlify.com/routing/redirects/#rule-processing-order">higher priority</a>. So always put your rules in the <a href="https://docs.netlify.com/routing/redirects/#syntax-for-the-redirects-file"><code>_redirects</code> file</a>.<li><code>_redirects</code> shouldn't have any custom "catch all" rules such as <code>/* /foobar/:splat</code>. Otherwise the automatically appended rule will never be applied as Netlify is only processing <a href="https://docs.netlify.com/routing/redirects/#rule-processing-order">the first matching rule</a>.</ul></section><section class="level2"aria-labelledby="netlify-forms"><h2 id="netlify-forms">Netlify Forms</h2><ol><li>Create your Netlify HTML form as described <a href="https://docs.netlify.com/forms/setup/#html-forms">here</a>, e.g. as <code>/routes/contact/+page.svelte</code>. (Don't forget to add the hidden <code>form-name</code> input element!)<li>Netlify's build bot parses your HTML files at deploy time, which means your form must be <a href="https://kit.svelte.dev../20-core-concepts/40-page-options.html#prerender">prerendered</a> as HTML. You can either add <code>export const prerender = true</code> to your <code>contact.svelte</code> to prerender just that page or set the <code>kit.prerender.force: true</code> option to prerender all pages.<li>If your Netlify form has a <a href="https://docs.netlify.com/forms/setup/#success-messages">custom success message</a> like <code>&#x3C;form netlify ... action="/success"></code> then ensure the corresponding <code>/routes/success/+page.svelte</code> exists and is prerendered.</ol></section><section class="level2"aria-labelledby="netlify-functions"><h2 id="netlify-functions">Netlify Functions</h2><p>With this adapter, SvelteKit endpoints are hosted as <a href="https://docs.netlify.com/functions/overview/">Netlify Functions</a>. Netlify function handlers have additional context, including <a href="https://docs.netlify.com/visitor-access/identity/">Netlify Identity</a> information. You can access this context via the <code>event.platform.context</code> field inside your hooks and <code>+page.server</code> or <code>+layout.server</code> endpoints. These are <a href="https://docs.netlify.com/functions/overview/">serverless functions</a> when the <code>edge</code> property is <code>false</code> in the adapter config or <a href="https://docs.netlify.com/edge-functions/overview/#app">edge functions</a> when it is <code>true</code>.<pre class="language-js"><code class="language-js"><span class="token comment">// @errors: 2705 7006</span>
<span class="token comment">/// file: +page.server.js</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function">load</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> context <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token property-access">platform</span><span class="token punctuation">.</span><span class="token property-access">context</span><span class="token punctuation">;</span>
	<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// shows up in your functions log in the Netlify app</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Additionally, you can add your own Netlify functions by creating a directory for them and adding the configuration to your <code>netlify.toml</code> file. For example:<pre class="language-toml"><code class="language-toml"><span class="token punctuation">[</span><span class="token table class-name">build</span><span class="token punctuation">]</span>
	<span class="token key property">command</span> <span class="token punctuation">=</span> <span class="token string">"npm run build"</span>
	<span class="token key property">publish</span> <span class="token punctuation">=</span> <span class="token string">"build"</span>

<span class="token punctuation">[</span><span class="token table class-name">functions</span><span class="token punctuation">]</span>
	<span class="token key property">directory</span> <span class="token punctuation">=</span> <span class="token string">"functions"</span></code></pre></section><section class="level2"aria-labelledby="troubleshooting"><h2 id="troubleshooting">Troubleshooting</h2></section><section class="level2"aria-labelledby="accessing-the-file-system"><h2 id="accessing-the-file-system">Accessing the file system</h2><p>You can't use <code>fs</code> in edge deployments.<p>You <em>can</em> use it in serverless deployments, but it won't work as expected, since files are not copied from your project into your deployment. Instead, use the <code>read</code> function from <code>$app/server</code> to access your files. <code>read</code> does not work inside edge deployments (this may change in future).<p>Alternatively, you can <a href="https://kit.svelte.dev../20-core-concepts/40-page-options.html#prerender">prerender</a> the routes in question. <span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section>