<!doctype html><html lang="en"><meta charset="utf-8"><title>Frequently asked questions</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="frequently-asked-questions"><h1 id="frequently-asked-questions">Frequently asked questions</h1><section class="level2"aria-labelledby="other-resources"><h2 id="other-resources">Other resources</h2><p>Please see <a href="https://svelte.dev/faq">the Svelte FAQ</a> and <a href="https://github.com/sveltejs/vite-plugin-svelte/blob/main/docs/faq.md"><code>vite-plugin-svelte</code> FAQ</a> as well for the answers to questions deriving from those libraries.</section><section class="level2"aria-labelledby="what-can-i-make-with-sveltekit"><h2 id="what-can-i-make-with-sveltekit">What can I make with SvelteKit?</h2><p>SvelteKit can be used to create most kinds of applications. Out of the box, SvelteKit supports many features including:<ul><li>Dynamic page content with <a href="../20-core-concepts/20-load.html">load</a> functions and <a href="../20-core-concepts/10-routing.html#server">API routes</a>.<li>SEO-friendly dynamic content with <a href="../60-appendix/30-glossary.html#ssr">server-side rendering (SSR)</a>.<li>User-friendly progressively-enhanced interactive pages with SSR and <a href="../20-core-concepts/30-form-actions.html">Form Actions</a>.<li>Static pages with <a href="../20-core-concepts/40-page-options.html#prerender">prerendering</a>.</ul><p>SvelteKit can also be deployed to a wide spectrum of hosted architectures via <a href="../20-core-concepts/50-adapters.html">adapters</a>. In cases where SSR is used (or server-side logic is added without prerendering), those functions will be adapted to the target backend. Some examples include:<ul><li>Self-hosted dynamic web applications with a <a href="/docs/adapter-node">Node.js backend</a>.<li>Serverless web applications with backend loaders and APIs deployed as remote functions. See <a href="/docs/adapter-auto">zero-config deployments</a> for popular deployment options.<li><a href="/docs/adapter-static">Static pre-rendered sites</a> such as a blog or multi-page site hosted on a CDN or static host. Statically-generated sites are shipped without a backend.<li><a href="/docs/single-page-apps">Single-page Applications (SPAs)</a> with client-side routing and rendering for API-driven dynamic content. SPAs are shipped without a backend and are not server-rendered. This option is commonly chosen when bundling SvelteKit with an app written in PHP, .Net, Java, C, Golang, Rust, etc.<li>A mix of the above; some routes can be static, and some routes can use backend functions to fetch dynamic information. This can be configured with <a href="../20-core-concepts/40-page-options.html">page options</a> that includes the option to opt out of SSR.</ul><p>In order to support SSR, a JS backend — such as Node.js or Deno-based server, serverless function, or edge function — is required.<p>It is also possible to write custom adapters or leverage community adapters to deploy SvelteKit to more platforms such as specialized server environments, browser extensions, or native applications. See <a href="./integrations">integrations</a> for more examples and integrations.</section><section class="level2"aria-labelledby="how-do-i-use-hmr-with-sveltekit"><h2 id="how-do-i-use-hmr-with-sveltekit">How do I use HMR with SvelteKit?</h2><p>SvelteKit has HMR enabled by default powered by <a href="https://github.com/sveltejs/svelte-hmr">svelte-hmr</a>. If you saw <a href="https://svelte.dev/blog/whats-the-deal-with-sveltekit">Rich's presentation at the 2020 Svelte Summit</a>, you may have seen a more powerful-looking version of HMR presented. This demo had <code>svelte-hmr</code>'s <code>preserveLocalState</code> flag on. This flag is now off by default because it may lead to unexpected behaviour and edge cases. But don't worry, you are still getting HMR with SvelteKit! If you'd like to preserve local state you can use the <code>@hmr:keep</code> or <code>@hmr:keep-all</code> directives as documented on the <a href="https://github.com/sveltejs/svelte-hmr">svelte-hmr</a> page.</section><section class="level2"aria-labelledby="how-do-i-include-details-from-packagejson-in-my-application"><h2 id="how-do-i-include-details-from-packagejson-in-my-application">How do I include details from package.json in my application?</h2><p>You cannot directly require JSON files, since SvelteKit expects <a href="./configuration"><code>svelte.config.js</code></a> to be an ES module. If you'd like to include your application's version number or other information from <code>package.json</code> in your application, you can load JSON like so:<pre class="language-js"><code class="language-js"><span class="token comment">/// file: svelte.config.js</span>
<span class="token comment">// @filename: index.js</span>
<span class="token comment">/// &#x3C;reference types="@types/node" /></span>
<span class="token keyword module">import</span> <span class="token punctuation">{</span> <span class="token constant">URL</span> <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">'node:url'</span><span class="token punctuation">;</span>
<span class="token comment">// cut---</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> readFileSync <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'node:fs'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> fileURLToPath <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'node:url'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">fileURLToPath</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'package.json'</span><span class="token punctuation">,</span> <span class="token keyword module">import</span><span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token property-access">url</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> pkg <span class="token operator">=</span> <span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section class="level2"aria-labelledby="how-do-i-fix-the-error-im-getting-trying-to-include-a-package"><h2 id="how-do-i-fix-the-error-im-getting-trying-to-include-a-package">How do I fix the error I'm getting trying to include a package?</h2><p>Most issues related to including a library are due to incorrect packaging. You can check if a library's packaging is compatible with Node.js by entering it into <a href="https://publint.dev/">the publint website</a>.<p>Here are a few things to keep in mind when checking if a library is packaged correctly:<ul><li><code>exports</code> takes precedence over the other entry point fields such as <code>main</code> and <code>module</code>. Adding an <code>exports</code> field may not be backwards-compatible as it prevents deep imports.<li>ESM files should end with <code>.mjs</code> unless <code>"type": "module"</code> is set in which any case CommonJS files should end with <code>.cjs</code>.<li><code>main</code> should be defined if <code>exports</code> is not. It should be either a CommonJS or ESM file and adhere to the previous bullet. If a <code>module</code> field is defined, it should refer to an ESM file.<li>Svelte components should be distributed as uncompiled <code>.svelte</code> files with any JS in the package written as ESM only. Custom script and style languages, like TypeScript and SCSS, should be preprocessed as vanilla JS and CSS respectively. We recommend using <a href="./packaging"><code>svelte-package</code></a> for packaging Svelte libraries, which will do this for you.</ul><p>Libraries work best in the browser with Vite when they distribute an ESM version, especially if they are dependencies of a Svelte component library. You may wish to suggest to library authors that they provide an ESM version. However, CommonJS (CJS) dependencies should work as well since, by default, <a href="https://github.com/sveltejs/vite-plugin-svelte/blob/main/docs/faq.md#what-is-going-on-with-vite-and-pre-bundling-dependencies"><code>vite-plugin-svelte</code> will ask Vite to pre-bundle them</a> using <code>esbuild</code> to convert them to ESM.<p>If you are still encountering issues we recommend searching both <a href="https://github.com/vitejs/vite/issues">the Vite issue tracker</a> and the issue tracker of the library in question. Sometimes issues can be worked around by fiddling with the <a href="https://vitejs.dev/config/#dep-optimization-options"><code>optimizeDeps</code></a> or <a href="https://vitejs.dev/config/#ssr-options"><code>ssr</code></a> config values though we recommend this as only a short-term workaround in favor of fixing the library in question.</section><section class="level2"aria-labelledby="how-do-i-use-the-view-transitions-api-with-sveltekit"><h2 id="how-do-i-use-the-view-transitions-api-with-sveltekit">How do I use the view transitions API with SvelteKit?</h2><p>While SvelteKit does not have any specific integration with <a href="https://developer.chrome.com/docs/web-platform/view-transitions/">view transitions</a>, you can call <code>document.startViewTransition</code> in <a href="../50-api-reference/30-modules.html#$app-navigation-onnavigate"><code>onNavigate</code></a> to trigger a view transition on every client-side navigation.<pre class="language-js"><code class="language-js"><span class="token comment">// @errors: 2339 2810</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> onNavigate <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'$app/navigation'</span><span class="token punctuation">;</span>

<span class="token function">onNavigate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">navigation</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
	<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">startViewTransition</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>

	<span class="token keyword control-flow">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
		<span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">startViewTransition</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
			<span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword control-flow">await</span> navigation<span class="token punctuation">.</span><span class="token property-access">complete</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>For more, see <a href="https://svelte.dev/blog/view-transitions">"Unlocking view transitions"</a> on the Svelte blog.</section><section class="level2"aria-labelledby="how-do-i-use-x-with-sveltekit"><h2 id="how-do-i-use-x-with-sveltekit">How do I use X with SvelteKit?</h2><p>Make sure you've read the <a href="./integrations">documentation section on integrations</a>. If you're still having trouble, solutions to common issues are listed below.</section><section class="level2"aria-labelledby="how-do-i-setup-a-database"><h2 id="how-do-i-setup-a-database">How do I setup a database?</h2><p>Put the code to query your database in a <a href="./routing#server">server route</a> - don't query the database in .svelte files. You can create a <code>db.js</code> or similar that sets up a connection immediately and makes the client accessible throughout the app as a singleton. You can execute any one-time setup code in <code>hooks.js</code> and import your database helpers into any endpoint that needs them.</section><section class="level2"aria-labelledby="how-do-i-use-a-client-side-only-library-that-depends-on-document-or-window"><h2 id="how-do-i-use-a-client-side-only-library-that-depends-on-document-or-window">How do I use a client-side only library that depends on <code>document</code> or <code>window</code>?</h2><p>If you need access to the <code>document</code> or <code>window</code> variables or otherwise need code to run only on the client-side you can wrap it in a <code>browser</code> check:<pre class="language-js"><code class="language-js"><span class="token comment">/// &#x3C;reference types="@sveltejs/kit" /></span>
<span class="token comment">// cut---</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> browser <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'$app/environment'</span><span class="token punctuation">;</span>

<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>browser<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// client-only code here</span>
<span class="token punctuation">}</span></code></pre><p>You can also run code in <code>onMount</code> if you'd like to run it after the component has been first rendered to the DOM:<pre class="language-js"><code class="language-js"><span class="token comment">// @filename: ambient.d.ts</span>
<span class="token comment">// @lib: ES2015</span>
declare module <span class="token string">'some-browser-only-library'</span><span class="token punctuation">;</span>

<span class="token comment">// @filename: index.js</span>
<span class="token comment">// cut---</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> onMount <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'svelte'</span><span class="token punctuation">;</span>

<span class="token function">onMount</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">{</span> method <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'some-browser-only-library'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">method</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>If the library you'd like to use is side-effect free you can also statically import it and it will be tree-shaken out in the server-side build where <code>onMount</code> will be automatically replaced with a no-op:<pre class="language-js"><code class="language-js"><span class="token comment">// @filename: ambient.d.ts</span>
<span class="token comment">// @lib: ES2015</span>
declare module <span class="token string">'some-browser-only-library'</span><span class="token punctuation">;</span>

<span class="token comment">// @filename: index.js</span>
<span class="token comment">// cut---</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> onMount <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'svelte'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> method <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'some-browser-only-library'</span><span class="token punctuation">;</span>

<span class="token function">onMount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
	<span class="token function">method</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Finally, you may also consider using an <code>{#await}</code> block:<pre class="language-svelte"><code class="language-svelte">&#x3C;! file: index.svelte --->
&#x3C;script>
	import { browser } from '$app/environment';

	const ComponentConstructor = browser ?
		import('some-browser-only-library').then((module) => module.Component) :
		new Promise(() => {});
&#x3C;/script>

{#await ComponentConstructor}
	&#x3C;p>Loading...&#x3C;/p>
{:then component}
	&#x3C;svelte:component this={component} />
{:catch error}
	&#x3C;p>Something went wrong: {error.message}&#x3C;/p>
{/await}</code></pre></section><section class="level2"aria-labelledby="how-do-i-use-a-different-backend-api-server"><h2 id="how-do-i-use-a-different-backend-api-server">How do I use a different backend API server?</h2><p>You can use <a href="./load#making-fetch-requests"><code>event.fetch</code></a> to request data from an external API server, but be aware that you would need to deal with <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">CORS</a>, which will result in complications such as generally requiring requests to be preflighted resulting in higher latency. Requests to a separate subdomain may also increase latency due to an additional DNS lookup, TLS setup, etc. If you wish to use this method, you may find <a href="./hooks#server-hooks-handlefetch"><code>handleFetch</code></a> helpful.<p>Another approach is to set up a proxy to bypass CORS headaches. In production, you would rewrite a path like <code>/api</code> to the API server; for local development, use Vite's <a href="https://vitejs.dev/config/server-options.html#server-proxy"><code>server.proxy</code></a> option.<p>How to setup rewrites in production will depend on your deployment platform. If rewrites aren't an option, you could alternatively add an <a href="./routing#server">API route</a>:<pre class="language-js"><code class="language-js"><span class="token comment">/// file: src/routes/api/[...path]/+server.js</span>
<span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./$types'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>RequestHandler<span class="token punctuation">}</span></span> */</span>
<span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token constant">GET</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params<span class="token punctuation">,</span> url <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword control-flow">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://my-api-server.com/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token punctuation">.</span><span class="token property-access">path</span> <span class="token operator">+</span> url<span class="token punctuation">.</span><span class="token property-access">search</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>(Note that you may also need to proxy <code>POST</code>/<code>PATCH</code> etc requests, and forward <code>request.headers</code>, depending on your needs.)</section><section class="level2"aria-labelledby="how-do-i-use-middleware"><h2 id="how-do-i-use-middleware">How do I use middleware?</h2><p><code>adapter-node</code> builds a middleware that you can use with your own server for production mode. In dev, you can add middleware to Vite by using a Vite plugin. For example:<pre class="language-js"><code class="language-js"><span class="token comment">// @errors: 2322</span>
<span class="token comment">// @filename: ambient.d.ts</span>
declare module <span class="token string">'@sveltejs/kit/vite'</span><span class="token punctuation">;</span> <span class="token comment">// TODO this feels unnecessary, why can't it 'see' the declarations?</span>

<span class="token comment">// @filename: index.js</span>
<span class="token comment">// cut---</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> sveltekit <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@sveltejs/kit/vite'</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'vite'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Plugin<span class="token punctuation">}</span></span> */</span>
<span class="token keyword">const</span> myPlugin <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'log-request-middleware'</span><span class="token punctuation">,</span>
	<span class="token function">configureServer</span><span class="token punctuation">(</span><span class="token parameter">server</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		server<span class="token punctuation">.</span><span class="token property-access">middlewares</span><span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
			<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Got request </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span><span class="token property-access">url</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'vite'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>UserConfig<span class="token punctuation">}</span></span> */</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>myPlugin<span class="token punctuation">,</span> <span class="token function">sveltekit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> config<span class="token punctuation">;</span></code></pre><p>See <a href="https://vitejs.dev/guide/api-plugin.html#configureserver">Vite's <code>configureServer</code> docs</a> for more details including how to control ordering.</section><section class="level2"aria-labelledby="does-it-work-with-yarn-2"><h2 id="does-it-work-with-yarn-2">Does it work with Yarn 2?</h2><p>Sort of. The Plug'n'Play feature, aka 'pnp', is broken (it deviates from the Node module resolution algorithm, and <a href="https://github.com/yarnpkg/berry/issues/638">doesn't yet work with native JavaScript modules</a> which SvelteKit — along with an <a href="https://blog.sindresorhus.com/get-ready-for-esm-aa53530b3f77">increasing number of packages</a> — uses). You can use <code>nodeLinker: 'node-modules'</code> in your <a href="https://yarnpkg.com/configuration/yarnrc#nodeLinker"><code>.yarnrc.yml</code></a> file to disable pnp, but it's probably easier to just use npm or <a href="https://pnpm.io/">pnpm</a>, which is similarly fast and efficient but without the compatibility headaches.</section><section class="level2"aria-labelledby="how-do-i-use-with-yarn-3"><h2 id="how-do-i-use-with-yarn-3">How do I use with Yarn 3?</h2><p>Currently ESM Support within the latest Yarn (version 3) is considered <a href="https://github.com/yarnpkg/berry/pull/2161">experimental</a>.<p>The below seems to work although your results may vary.<p>First create a new application:<pre class="language-sh"><code class="language-sh">yarn create svelte myapp
cd myapp</code></pre><p>And enable Yarn Berry:<pre class="language-sh"><code class="language-sh">yarn set version berry
yarn install</code></pre><section class="level3"aria-labelledby="yarn-3-global-cache"><h3 id="yarn-3-global-cache">Yarn 3 global cache</h3><p>One of the more interesting features of Yarn Berry is the ability to have a single global cache for packages, instead of having multiple copies for each project on the disk. However, setting <code>enableGlobalCache</code> to true causes building to fail, so it is recommended to add the following to the <code>.yarnrc.yml</code> file:<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">nodeLinker</span><span class="token punctuation">:</span> node<span class="token punctuation">-</span>modules</code></pre><p>This will cause packages to be downloaded into a local node_modules directory but avoids the above problem and is your best bet for using version 3 of Yarn at this point in time. <span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section></section>