<!doctype html><html lang="ja"><meta charset="utf-8"><title>Single-page apps</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../Vivliostyle/read-html-download-pdf/docs/themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="single-page-apps"><h1 id="single-page-apps">Single-page apps</h1><p>SvelteKit アプリは、どんな adapter を使っていても、最上位のレイアウト(root layout)で SSR を無効にすることで、完全にクライアントレンダリングされるシングルページアプリ (SPA) にすることができます。<pre class="language-js"><code class="language-js"><span class="token comment">/// file: src/routes/+layout.js</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> ssr <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></code></pre><blockquote><p>ほとんどの場合、これはおすすめできません: SEO に悪影響を与え、知覚的なパフォーマンスが低下する傾向があり、もし JavaScript が失敗したり無効になっていたりする場合 (これは<a href="https://kryogenix.org/code/browser/everyonehasjs.html">あなたが思うより頻繁に</a>発生します)、ユーザーはアプリにアクセスできなくなります.</blockquote><p>サーバーサイドのロジック (すなわち <code>+page.server.js</code>、<code>+layout.server.js</code>、<code>+server.js</code> ファイル) がない場合は、<a href="adapter-static"><code>adapter-static</code></a> を使い <em>フォールバックページ(fallback page)</em> を追加することで SPA を作ることができます。<section class="level2"aria-labelledby="使い方"><h2 id="使い方">使い方</h2><p><code>npm i -D @sveltejs/adapter-static</code> でインストールし、それから <code>svelte.config.js</code> にこの adapter と以下のオプションを追加します:<pre class="language-js"><code class="language-js"><span class="token comment">// @errors: 2307</span>
<span class="token comment">/// file: svelte.config.js</span>
<span class="token keyword module">import</span> <span class="token imports">adapter</span> <span class="token keyword module">from</span> <span class="token string">'@sveltejs/adapter-static'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">kit</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">adapter</span><span class="token operator">:</span> <span class="token function">adapter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">fallback</span><span class="token operator">:</span> <span class="token string">'200.html'</span> <span class="token comment">// may differ from host to host</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>フォールバックページ(<code>fallback</code> page)とは、SvelteKit がページテンプレート(例: <code>app.html</code>)から作成する HTML ページで、アプリをロードし正しいルート(routes)にナビゲートします。例えば、静的 web ホスティングである <a href="https://surge.sh/help/adding-a-200-page-for-client-side-routing">Surge</a> では、静的なアセットやプリレンダリングページに対応しないリクエストを処理する <code>200.html</code> ファイルを追加する必要があります。<p>ホスティング環境によっては <code>index.html</code> であったり全く別のものであったりします — 使いたいプラットフォームのドキュメントをご参照ください。</section><section class="level2"aria-labelledby="apache"><h2 id="apache">Apache</h2><p>SPA を <a href="https://httpd.apache.org/">Apache</a> で実行する場合は、<code>static/.htaccess</code> ファイルを追加し、リクエストをフォールバックページ(fallback page)にルーティングする必要があります:<pre class="language-text"><code class="language-text">&#x3C;IfModule mod_rewrite.c>
	RewriteEngine On
	RewriteBase /
	RewriteRule ^200\.html$ - [L]
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteCond %{REQUEST_FILENAME} !-d
	RewriteRule . /200.html [L]
&#x3C;/IfModule></code></pre></section><section class="level2"aria-labelledby="ページを個別にプリレンダリングする"><h2 id="ページを個別にプリレンダリングする">ページを個別にプリレンダリングする</h2><p>特定のページをプリレンダリングしたい場合、アプリのその部分だけ <code>ssr</code> と <code>prerender</code> を再び有効にします:<pre class="language-js"><code class="language-js"><span class="token comment">/// file: src/routes/my-prerendered-page/+page.js</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> prerender <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> ssr <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>`<span class="token operator">&#x3C;</span>span style<span class="token operator">=</span><span class="token string">'float: footnote;'</span><span class="token operator">></span><span class="token operator">&#x3C;</span>a href<span class="token operator">=</span><span class="token string">"../../index.html#toc"</span><span class="token operator">></span><span class="token maybe-class-name">Go</span> to <span class="token constant">TOC</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token operator">&#x3C;</span><span class="token operator">/</span>span<span class="token operator">></span>
</code></pre></section></section>