<!doctype html><html lang="ja"><meta charset="utf-8"><title>SEO</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="seo"class="level1"><h1>SEO</h1><p>SEO で最も重要なのは、高品質なコンテンツを作ること、そしてそれが web 上で広くリンクされることです。しかし、ランクが高いサイトを構築するためにいくつか技術的に考慮すべきこともあります。<section id="out-of-the-box"class="level2"><h2>Out of the box</h2></section><section id="ssr"class="level2"><h2>SSR</h2><p>近年、検索エンジンはクライアントサイドの JavaScript でレンダリングされたコンテンツのインデックスを改善してきましたが、サーバーサイドレンダリングされたコンテンツのほうがより頻繁に、より確実にインデックスされます。SvelteKit はデフォルトで SSR を採用しています。<a href="hooks#server-hooks-handle"><code>handle</code></a> で無効にすることもできますが、適切な理由がない場合はそのままにしておきましょう。<blockquote><p>SvelteKit のレンダリングは高度な設定が可能です。必要であれば、<a href="https://developers.google.com/search../30-advanced/10-advanced-routing.html/javascript/dynamic-rendering">動的なレンダリング(dynamic rendering)</a> を実装することも可能です。一般的には推奨されません、SSR には SEO 以外のメリットもあるからです。</blockquote></section><section id="パフォーマンス"class="level2"><h2>パフォーマンス</h2><p><a href="https://web.dev/vitals/#core-web-vitals">Core Web Vitals</a> のような指標は検索エンジンのランクに影響を与えます。Svelte と SvelteKit はオーバーヘッドが最小限であるため、ハイパフォーマンスなサイトを簡単に構築できです。Google の <a href="https://pagespeed.web.dev/">PageSpeed Insights</a> や <a href="https://developers.google.com/web/tools/lighthouse">Lighthouse</a> で、ご自身のサイトをテストすることができます。</section><section id="urlの正規化"class="level2"><h2>URLの正規化</h2><p>SvelteKit は、末尾のスラッシュ(trailing slash)付きのパス名から、末尾のスラッシュが無いパス名にリダイレクトします (<a href="page-options#trailingslash">設定</a> で逆にできます)。URLの重複は、SEOに悪影響を与えます。</section><section id="manual-setup"class="level2"><h2>Manual setup</h2></section><section id="title-と-meta"class="level2"><h2>&#x3C;title> と &#x3C;meta></h2><p>全てのページで、よく練られたユニークな <code>&#x3C;title></code> と <code>&#x3C;meta name="description"></code> を <a href="https://svelte.jp/docs#template-syntax-svelte-head"><code>&#x3C;svelte:head></code></a> の内側に置くべきです。説明的な title と description の書き方に関するガイダンスと、検索エンジンにとってわかりやすいコンテンツを作るためのその他の方法については、Google の <a href="https://web.dev/lighthouse-seo/">Lighthouse SEO audits</a> のドキュメントで見つけることができます。<blockquote><p>A common pattern is to return SEO-related <code>data</code> from page <a href="load"><code>load</code></a> functions, then use it (as <a href="modules#$app-stores"><code>$page.data</code></a>) in a <code>&#x3C;svelte:head></code> in your root <a href="routing#layout">layout</a>.</blockquote></section><section id="構造化データ"class="level2"><h2>構造化データ</h2><p><a href="https://developers.google.com/search../30-advanced/10-advanced-routing.html/structured-data/intro-structured-data">構造化データ</a> は、検索エンジンがページのコンテンツを理解するのに役立ちます。<a href="https://github.com/sveltejs/svelte-preprocess"><code>svelte-preprocess</code></a> と一緒に構造化データを使用している場合は、明示的に <code>ld+json</code> データを保持する必要があります (これは <a href="https://github.com/sveltejs/svelte-preprocess/issues/305">将来変更される可能性があります</a>):<pre class="language-js"><code class="language-js"><span class="token comment">/// file: svelte.config.js</span>
<span class="token comment">// @filename: ambient.d.ts</span>
declare module <span class="token string">'svelte-preprocess'</span><span class="token punctuation">;</span>

<span class="token comment">// @filename: index.js</span>
<span class="token comment">// cut---</span>
<span class="token keyword module">import</span> <span class="token imports">preprocess</span> <span class="token keyword module">from</span> <span class="token string">'svelte-preprocess'</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'@sveltejs/kit'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Config<span class="token punctuation">}</span></span> */</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">preprocess</span><span class="token operator">:</span> <span class="token function">preprocess</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">preserve</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'ld+json'</span><span class="token punctuation">]</span>
		<span class="token comment">// ...</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> config<span class="token punctuation">;</span></code></pre></section><section id="サイトマップ"class="level2"><h2>サイトマップ</h2><p><a href="https://developers.google.com/search../30-advanced/10-advanced-routing.html/sitemaps/build-sitemap">サイトマップ</a> は、検索エンジンがサイト内のページの優先順位付けをするのに役立ちます、特にコンテンツの量が多い場合は。エンドポイントを使用してサイトマップを動的に作成できます:<pre class="language-js"><code class="language-js"><span class="token comment">/// file: src/routes/sitemap.xml/+server.js</span>
<span class="token keyword module">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token constant">GET</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword control-flow">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span>
		<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
		&#x3C;?xml version="1.0" encoding="UTF-8" ?>
		&#x3C;urlset
			xmlns="https://www.sitemaps.org/schemas/sitemap/0.9"
			xmlns:xhtml="https://www.w3.org/1999/xhtml"
			xmlns:mobile="https://www.google.com/schemas/sitemap-mobile/1.0"
			xmlns:news="https://www.google.com/schemas/sitemap-news/0.9"
			xmlns:image="https://www.google.com/schemas/sitemap-image/1.1"
			xmlns:video="https://www.google.com/schemas/sitemap-video/1.1"
		>
			&#x3C;!-- &#x3C;url> elements go here -->
		&#x3C;/urlset></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span><span class="token method function property-access">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/xml'</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section><section id="amp"class="level2"><h2>AMP</h2><p>現代の web 開発における不幸な現実として、サイトの <a href="https://amp.dev/">Accelerated Mobile Pages (AMP)</a> バージョンを作らなければならないときがある、というのがあります。SvelteKit では、<a href="configuration#inlinestylethreshold"><code>inlineStyleThreshold</code></a> オプションを設定することでこれを実現することができます…<pre class="language-js"><code class="language-js"><span class="token comment">/// file: svelte.config.js</span>
<span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'@sveltejs/kit'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Config<span class="token punctuation">}</span></span> */</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">kit</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">// since &#x3C;link rel="stylesheet"> isn't</span>
		<span class="token comment">// allowed, inline all styles</span>
		<span class="token literal-property property">inlineStyleThreshold</span><span class="token operator">:</span> <span class="token number">Infinity</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> config<span class="token punctuation">;</span></code></pre><p>…最上位(root)の <code>+layout.js</code>/<code>+layout.server.js</code> の <code>csr</code> を無効にします…<pre class="language-js"><code class="language-js"><span class="token comment">/// file: src/routes/+layout.server.js</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> csr <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></code></pre><p>…そして、<code>transformPageChunk</code> と、<code>@sveltejs/amp</code> からインポートできる <code>transform</code> を使用して、HTML を変換します:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token operator">*</span> <span class="token keyword module">as</span> amp</span> <span class="token keyword module">from</span> <span class="token string">'@sveltejs/amp'</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'@sveltejs/kit'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Handle<span class="token punctuation">}</span></span> */</span>
<span class="token keyword module">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> event<span class="token punctuation">,</span> resolve <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">let</span> buffer <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
	<span class="token keyword control-flow">return</span> <span class="token function">resolve</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">transformPageChunk</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> html<span class="token punctuation">,</span> done <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
			buffer <span class="token operator">+=</span> html<span class="token punctuation">;</span>
			<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> amp<span class="token punctuation">.</span><span class="token method function property-access">transform</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><blockquote><p><code>amphtml-validator</code> を使用して変換された HTML を検証するのに、<code>handle</code> hook を利用するのは良いアイデアですが、非常に遅くなってしまうので、ページをプリレンダリングするときだけにしてください。 <span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></blockquote></section></section>