<!doctype html><html lang="pt-br"><meta charset="utf-8"><title>The ModuleContainer class</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="navigation.title"content="Module Container"><meta name="description"content="Nuxt ModuleContainer Class"><meta name="category"content="internals-glossary"><link rel="stylesheet"href="../../../../../../../../../Vivliostyle/read-html-download-pdf/docs/themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="the-modulecontainer-class"><h1 id="the-modulecontainer-class">The ModuleContainer class</h1><hr><ul><li>Source: <strong><a href="https://github.com/nuxt/nuxt/blob/2.x-dev/packages/core/src/module.js">core/module.js</a></strong></ul><p>All <a href="./directory-structure/modules">modules</a> will be called within context of <code>ModuleContainer</code> instance.<section class="level2"aria-labelledby="tapable-plugins"><h2 id="tapable-plugins">Tapable plugins</h2><p>We can register hooks on certain life cycle events.<pre class="language-js"><code class="language-js">nuxt<span class="token punctuation">.</span><span class="token property-access">moduleContainer</span><span class="token punctuation">.</span><span class="token method function property-access">plugin</span><span class="token punctuation">(</span><span class="token string">'ready'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">moduleContainer</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// Do this after all modules where ready</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>Inside <a href="./directory-structure/modules">modules</a> context we can use this instead:<pre class="language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">plugin</span><span class="token punctuation">(</span><span class="token string">'ready'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">moduleContainer</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// Do this after all modules where ready</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>| Plugin | Arguments | When | | | | <code>ready</code> | moduleContainer | All modules in <code>nuxt.config.js</code> has been initialized |</section><section class="level2"aria-labelledby="methods"><h2 id="methods">Methods</h2><section class="level3"aria-labelledby="addvendor-vendor"><h3 id="addvendor-vendor">addVendor (vendor)</h3><p><strong>Deprecated as <code>vendor</code> isn't used anymore</strong><p>Adds to <code>options.build.vendor</code> and apply unique filter.</section><section class="level3"aria-labelledby="addtemplate-template"><h3 id="addtemplate-template">addTemplate (template)</h3><ul><li><strong>template</strong>: <code>String</code> or <code>Object</code><ul><li><code>src</code><li><code>options</code><li><code>fileName</code></ul></ul><p>Renders given template using <a href="https://lodash.com/docs/4.17.4#template">lodash template</a> during build into project <code>buildDir</code> (<code>.nuxt</code>).<p>If <code>fileName</code> is not provided or <code>template</code> is string, target file name defaults to <code>[dirName].[fileName].[pathHash].[ext]</code>.<p>This method returns final <code>{ dst, src, options }</code> object.</section><section class="level3"aria-labelledby="addplugin-template"><h3 id="addplugin-template">addPlugin (template)</h3><ul><li><strong>template</strong>: Object properties (<code>src</code>, <code>options</code>, <code>fileName</code>, <code>mode</code>).</ul><p>Registers a plugin using <code>addTemplate</code> and prepends it it to <code>plugins[]</code> array.<pre class="language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">addPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">src</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token method function property-access">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'templates/foo.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">fileName</span><span class="token operator">:</span> <span class="token string">'foo.server.js'</span> <span class="token comment">// [optional] only include in server bundle</span>
  <span class="token literal-property property">options</span><span class="token operator">:</span> moduleOptions
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p><strong>Note:</strong> You can use <code>mode</code> or <code>.client</code> and <code>.server</code> modifiers with <code>fileName</code> option to use plugin only in client or server side. (See <a href="./directory-structure/plugins#name-conventional-plugin">plugins</a> for all available options)<p>If you choose to specify a <code>fileName</code>, you can configure a custom path for the <code>fileName</code> too, so you can choose the folder structure inside <code>.nuxt</code> folder in order to prevent name collisioning:<pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token literal-property property">fileName</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token method function property-access">join</span><span class="token punctuation">(</span><span class="token string">'folder'</span><span class="token punctuation">,</span> <span class="token string">'foo.client.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// will result in `.nuxt/folder/foo.client.js`</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="addservermiddleware-middleware"><h3 id="addservermiddleware-middleware">addServerMiddleware (middleware)</h3><p>Pushes middleware into <a href="./configuration-glossary/configuration-servermiddleware">options.serverMiddleware</a>.</section><section class="level3"aria-labelledby="extendbuild-fn"><h3 id="extendbuild-fn">extendBuild (fn)</h3><p>Allows easily extending webpack build config by chaining <a href="./configuration-glossary/configuration-build#extend">options.build.extend</a> function.</section><section class="level3"aria-labelledby="extendroutes-fn"><h3 id="extendroutes-fn">extendRoutes (fn)</h3><p>Allows easily extending routes by chaining <a href="./configuration-glossary/configuration-router#extendroutes">options.build.extendRoutes</a> function.</section><section class="level3"aria-labelledby="addmodule-moduleopts-requireonce"><h3 id="addmodule-moduleopts-requireonce">addModule (moduleOpts, requireOnce)</h3><p><em>Async function</em><p>Registers a module. <code>moduleOpts</code> can be a string or an array (<code>[src, options]</code>). If <code>requireOnce</code> is <code>true</code> and the resolved module exports <code>meta</code>, it prevents registering same module twice.</section><section class="level3"aria-labelledby="requiremodule-moduleopts"><h3 id="requiremodule-moduleopts">requireModule (moduleOpts)</h3><p><em>Async function</em><p>Is a shortcut for <code>addModule(moduleOpts, true)</code></section></section><section class="level2"aria-labelledby="hooks"><h2 id="hooks">Hooks</h2><p>We can register hooks on certain life cycle events.<p>| Hook | Arguments | When | | | | <code>modules:before</code> | (moduleContainer, options) | Called before creating ModuleContainer class, useful to overload methods and options. | | <code>modules:done</code> | (moduleContainer) | Called when all modules have been loaded. | <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>