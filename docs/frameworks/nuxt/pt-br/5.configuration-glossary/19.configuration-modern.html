<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <title>The modern Property</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="navigation.title" content="modern">
    <meta name="description" content="Build and serve a modern bundle">
    <meta name="menu" content="modern">
    <meta name="category" content="configuration-glossary">
    <link rel="stylesheet" href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css">
  </head>
  <body>
    <section id="the-modern-property" class="level1">
      <h1>The modern property</h1>
      <p>Build and serve a modern bundle</p>
      <hr>
      <blockquote>
        <p>This feature is inspired by <a href="https://cli.vuejs.org/guide/browser-compatibility.html#modern-mode">vue-cli modern mode</a></p>
      </blockquote>
      <ul>
        <li>Type: <code>String</code> or <code>Boolean</code>
          <ul>
            <li>Default: false</li>
            <li>Possible values:
              <ul>
                <li><code>'client'</code>: Serve both, the modern bundle <code>&#x3C;script type="module"></code> and the legacy bundle <code>&#x3C;script nomodule></code> scripts, also provide a <code>&#x3C;link rel="modulepreload"></code> for the modern bundle. Every browser that understands the <code>module</code> type will load the modern bundle while older browsers fall back to the legacy (transpiled) one.</li>
                <li><code>'server'</code> or <code>true</code>: The Node.js server will check browser version based on the user agent and serve the corresponding modern or legacy bundle.</li>
                <li><code>false</code>: Disable modern build</li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
      <p>The two versions of bundles are:</p>
      <ol>
        <li>Modern bundle: targeting modern browsers that support ES modules</li>
        <li>Legacy bundle: targeting older browsers based on babel config (IE9 compatible by default).</li>
      </ol>
      <p><strong>Info:</strong></p>
      <ul>
        <li>Use command option <code>[--modern | -m]=[mode]</code> to build/start modern bundles:</li>
      </ul>
      <pre class="language-json{}[package.json]"><code class="language-json{}[package.json]">{
  "scripts": {
    "build:modern": "nuxt build --modern=server",
    "start:modern": "nuxt start --modern=server"
  }
}</code></pre>
      <p><strong>Note about <em>nuxt generate</em>:</strong> The <code>modern</code> property also works with the <code>nuxt generate</code> command, but in this case only the <code>client</code> option is honored and will be selected automatically when launching the <code>nuxt generate --modern</code> command without providing any values.</p>
      <ul>
        <li>Nuxt will automatically detect <code>modern</code> build in <code>nuxt start</code> when <code>modern</code> is not specified, auto-detected mode is:</li>
      </ul>
      <table>
        <thead>
          <tr>
            <th align="left">ssr</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td align="left">true</td>
          </tr>
          <tr>
            <td align="left">false</td>
          </tr>
        </tbody>
      </table>
      <ul>
        <li>Modern mode for <code>nuxt generate</code> can only be <code>client</code></li>
        <li>Use <a href="./configuration-glossary/configuration-render#crossorigin"><code>render.crossorigin</code></a> to set <code>crossorigin</code> attribute in <code>&#x3C;link></code> and <code>&#x3C;script></code></li>
      </ul>
      <blockquote>
        <p>
          Please refer <a href="https://philipwalton.com/articles/deploying-es2015-code-in-production-today/">Phillip Walton's excellent post</a> for more knowledge regarding modern builds.
          <span style="float: footnote;"><a href="../index.html#toc">Go to TOC</a></span>
        </p>
      </blockquote>
    </section>
  </body>
</html>
