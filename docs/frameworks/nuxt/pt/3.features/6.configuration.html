<!doctype html><html lang="pt"><meta charset="utf-8"><title>Configuração</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="description"content="Por predefinição, a Nuxt está configurada para abranger a maioria dos casos de uso. Esta configuração predefinida pode ser sobrescrita pelo ficheiro de configuração da Nuxt."><meta name="category"content="features"><meta name="csb_link_host_port"content="https://codesandbox.io/embed/github/nuxt-academy/guides-examples/tree/master/03_features/07_configuration_host_port?fontsize=14&#x26;hidenavigation=1&#x26;theme=dark"><meta name="csb_link_pre-processors"content="https://codesandbox.io/embed/github/nuxt-academy/guides-examples/tree/master/03_features/07_configuration_pre-processors?fontsize=14&#x26;hidenavigation=1&#x26;theme=dark"><link rel="stylesheet"type="text/css"href="../../../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="configuração"><h1 id="configuração">Configuração</h1><p>Por predefinição, a Nuxt está configurada para abranger a maioria dos casos de uso. Esta configuração predefinida pode ser sobrescrita pelo ficheiro <code>nuxt.config.js</code>.<hr><section class="level2"aria-labelledby="a-propriedade-css"><h2 id="a-propriedade-css">A Propriedade <code>css</code></h2><p>A Nuxt permite-nos definir os ficheiros, módulos e bibliotecas que quisermos definir globalmente (incluídos em todas as páginas).<section class="level4"aria-labelledby="warning"><h4 id="warning">Warning</h4><p>Caso queiramos utilizar a <code>sass</code> precisamos certificar-nos de que instalamos os pacotes <code>sass</code> e <code>sass-loader</code>.<p>No <code>nuxt.config.js</code>, adicionamos os recursos de folha de estilo em cascata:<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// Carregar um módulo de Node.js diretamente</span>
    <span class="token comment">// (neste exemplo é um ficheiro de Sass)</span>
    <span class="token string">'bulma'</span><span class="token punctuation">,</span>
    <span class="token comment">// ficheiro de CSS no projeto</span>
    <span class="token string">'~/assets/css/main.css'</span><span class="token punctuation">,</span>
    <span class="token comment">// ficheiro de SCSS no projeto</span>
    <span class="token string">'~/assets/css/main.scss'</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></section><section class="level4"aria-labelledby="warning-1"><h4 id="warning-1">Warning</h4><p>A Nuxt detetará automaticamente o tipo do ficheiro pela sua extensão e utilizará o carregador de pré-processador correto para a Webpack. Continuaremos a ter de instalar o carregador necessário se precisarmos de os utilizar.</section><section class="level3"aria-labelledby="extensões-de-estilo"><h3 id="extensões-de-estilo">Extensões de Estilo</h3><p>Podemos omitir a extensão do ficheiro para ficheiros CSS, SCSS, PostCSS, Less, Stylus e muitos mais listados no vetor <code>css</code> no nosso ficheiro de configuração da Nuxt:<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'~/assets/css/main'</span><span class="token punctuation">,</span> <span class="token string">'~/assets/css/animations'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><section class="level4"aria-labelledby="warning-2"><h4 id="warning-2">Warning</h4><p>Se tivermos dois ficheiros com o mesmo nome, por exemplo, <code>main.scss</code> e <code>main.css</code>, e não especificarmos uma extensão na entrada do vetor <code>css</code>, por exemplo, <code>css: ['~/assets/css/main']</code>, então apenas um dos ficheiros será carregado, dependendo da ordem da <code>styleExtensions</code>. Neste caso apenas o ficheiro <code>.css</code> será carregado e o ficheiro <code>.scss</code> será ignorado porque o <code>.css</code> vem primeiro no vetor da <code>styleExtensions</code> por predefinição.<p>Ordem predefinida: <code>['css', 'pcss', 'postcss', 'styl', 'stylus', 'scss', 'sass', 'less']</code>.</section></section></section><section class="level2"aria-labelledby="pré-processadores"><h2 id="pré-processadores">Pré-processadores</h2><p>Graças ao <a href="http://vue-loader.vuejs.org/en/configurations/pre-processors.html"><code>vue-loader</code></a>, podemos usar qualquer tipo de pré-processador para o nosso <code>&#x3C;template></code> ou <code>&#x3C;style></code>: usamos o atributo <code>lang</code>.<p>Exemplo do nosso <code>pages/index.vue</code> usando <a href="https://github.com/pugjs/pug">Pug</a> e <a href="http://sass-lang.com/">Sass</a>:<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pug<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  h1.red Hello {{ name }}!
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
  <span class="token selector"><span class="token class">.red</span></span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token color">red</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>style</span><span class="token punctuation">></span></span></code></pre><p>Para usar estes pré-processadores, precisamos os seus carregadores de Webpack:<pre class="language-bash"><code class="language-bash"><span class="token function">yarn</span> <span class="token function">add</span> --dev pug pug-plain-loader
<span class="token function">yarn</span> <span class="token function">add</span> --dev sass sass-loader@10</code></pre><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev pug pug-plain-loader
<span class="token function">npm</span> <span class="token function">install</span> --save-dev sass sass-loader@10</code></pre></section><section class="level2"aria-labelledby="recursos-externos"><h2 id="recursos-externos">Recursos Externos</h2><section class="level3"aria-labelledby="definições-globais"><h3 id="definições-globais">Definições Globais</h3><p>Podemos incluir os nossos recursos externos no objeto ou função <code>head</code>. Tal como descrita na <a href="./components-glossary/head/">documentação da interface de programação de aplicação da <code>head</code></a>, os exemplos seguintes mostram a utilização de <code>head</code> como um objeto e como uma função. Se quisermos usar valores do nosso componente <code>.vue</code> como propriedades computadas ou dados, podemos usar a função <code>head</code>, retornando o objeto <code>head</code> final. Também podemos passar para cada recurso uma <code>body: true</code> opcional para incluir o recurso antes do marcador de fechamento <code>&#x3C;/body></code>.<p>Incluímos os nossos recursos em <code>nuxt.config.js</code> (neste caso, no objeto <code>head</code>):<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">head</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">script</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">'https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">rel</span><span class="token operator">:</span> <span class="token string">'stylesheet'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">'https://fonts.googleapis.com/css?family=Roboto&#x26;display=swap'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="definições-locais"><h3 id="definições-locais">Definições Locais</h3><p>Incluímos os nossos recursos no nosso ficheiro <code>.vue</code> dentro do diretório <code>pages/</code> (neste caso, na função <code>head</code>):<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span>About page with jQuery and Roboto font<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
    <span class="token function">head</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">script</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">'https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">rel</span><span class="token operator">:</span> <span class="token string">'stylesheet'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">'https://fonts.googleapis.com/css?family=Roboto&#x26;display=swap'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
  <span class="token selector">h1</span> <span class="token punctuation">{</span>
    <span class="token property">font-family</span><span class="token punctuation">:</span> Roboto<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>style</span><span class="token punctuation">></span></span></code></pre></section></section><section class="level2"aria-labelledby="extensões-de-postcss"><h2 id="extensões-de-postcss">Extensões de PostCSS</h2><p>Se estiver presente, renomeamos ou eliminamos o <code>postcss.config.js</code> no nosso diretório de projeto. Depois, no nosso ficheiro <code>nuxt.config.js</code>, adicionamos o seguinte:<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">postcss</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// Adicionar os nomes de extensões como chaves e argumentos como valores.</span>
      <span class="token comment">// Instalá-los antes como dependências com `npm` ou `yarn`.</span>
      <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// Desativar uma extensão passando `false` como valor.</span>
        <span class="token string-property property">'postcss-url'</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token string-property property">'postcss-nested'</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string-property property">'postcss-responsive-type'</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string-property property">'postcss-hexrgba'</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">preset</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// Alterar as definições de `postcss-preset-env`</span>
        <span class="token literal-property property">autoprefixer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">grid</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section><section class="level2"aria-labelledby="jsx"><h2 id="jsx">JSX</h2><p>A Nuxt usa <a href="https://github.com/nuxt/nuxt/tree/2.x-dev/packages/babel-preset-app"><code>@nuxt/babel-preset-app</code></a>, o qual se baseia no <a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/babel-preset-app"><code>@vue/babel-preset-app</code></a> oficial para a configuração predefinida da Babel, para podermos usar a JSX nos nossos componentes.<p>Também podemos usar JSX no método <code>render</code> dos nossos componentes:<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'World'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token parameter">h</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>h1 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"red"</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>O ato de apelidar <code>createElement</code> como <code>h</code> é uma convenção comum que veremos no ecossistema da Vue, mas, na verdade, é opcional para a JSX, uma vez que esta <a href="https://github.com/vuejs/babel-plugin-transform-vue-jsx#h-auto-injection">injeta automaticamente</a> <code>const h = this.$createElement</code> em qualquer método e recuperador (não funções ou funções de seta) declarados na sintaxe da ES2015 que tem extensão de sintaxe de JavaScript, então podemos deixar de lado o parâmetro <code>(h)</code>.<p>Podemos saber mais sobre como utilizá-la na <a href="https://v2.vuejs.org/v2/guide/render-function.html#JSX">secção da extensão de sintaxe de JavaScript (JSX)</a> da documentação da Vue.js.</section><section class="level2"aria-labelledby="ignorar-ficheiros"><h2 id="ignorar-ficheiros">Ignorar Ficheiros</h2><section class="level3"aria-labelledby="nuxtignore"><h3 id="nuxtignore"><code>.nuxtignore</code></h3><p>Podemos utilizar um ficheiro <code>.nuxtignore</code> para permitir que a Nuxt ignore os ficheiros de <code>layout</code>, <code>page</code>, <code>store</code> e <code>middleware</code> no diretório raiz do nosso projeto (<code>rootDir</code>) durante a fase de construção. O ficheiro <code>.nuxtignore</code> está sujeito à mesma especificação que os ficheiros <code>.gitignore</code> e <code>.eslintignore</code>, em que cada linha é um padrão de globo indicando quais os ficheiros que devem ser ignorados.<pre class="language-markdown{}[.nuxtignore]"><code class="language-markdown{}[.nuxtignore]"># ignorar a disposição foo.vue

layouts/foo.vue

# ignorar os ficheiros de disposição cujo nome termina com -ignore.vue

layouts/*-ignore.vue

# ignorar a página bar.vue

pages/bar.vue

# ignorar a página dentro da pasta ignore

pages/ignore/*.vue

# ignorar o armazém de estado baz.js

store/baz.js

# ignorar os ficheiros de armazém de estado correspondentes a _.test._

store/ignore/_.test._

# ignorar os ficheiros de intermediários na pasta foo exceto foo/bar.js

middleware/foo/*.js !middleware/foo/bar.js</code></pre></section><section class="level3"aria-labelledby="a-propriedade-ignoreprefix"><h3 id="a-propriedade-ignoreprefix">A Propriedade <code>ignorePrefix</code></h3><p>Qualquer ficheiro em <code>pages/</code>, <code>layout/</code>, <code>middleware/</code> ou <code>store/</code> será ignorado durante a construção se o seu nome de ficheiro começar com o prefixo especificado por <code>ignorePrefix</code>.<p>Por predefinição, todos os ficheiros que comecem por <code>-</code> serão ignorados, tais como <code>store/-foo.js</code> e <code>pages/-bar.vue</code>. Isto permite a colocação de testes, utilitários e componentes com os seus chamadores sem serem convertidos em rotas, armazéns de estado, etc.</section><section class="level3"aria-labelledby="a-propriedade-ignore"><h3 id="a-propriedade-ignore">A Propriedade <code>ignore</code></h3><p>Mais personalizável do que <code>ignorePrefix</code>: todos os ficheiros que correspondem a padrões de globo especificados dentro de <code>ignore</code> serão ignorados na construção:<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  ignore: 'pages/bar.vue'
}</code></pre></section><section class="level3"aria-labelledby="ignoreoptions"><h3 id="ignoreoptions"><code>ignoreOptions</code></h3><p>O <code>nuxtignore</code> utiliza <code>node-ignore</code> nos bastidores, a <code>ignoreOptions</code> pode ser configurada como <code>options</code> do <code>node-ignore</code>:<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  ignoreOptions: {
    ignorecase: false
  }
}</code></pre></section></section><section class="level2"aria-labelledby="estender-a-configuração-da-webpack"><h2 id="estender-a-configuração-da-webpack">Estender a Configuração da Webpack</h2><p>Podemos estender a configuração da Webpack da Nuxt através da opção <code>extend</code> no nosso <code>nuxt.config.js</code>. A opção <code>extend</code> da propriedade <code>build</code> é um método que aceita dois argumentos. O primeiro argumento é o objeto <code>config</code> da Webpack exportado da configuração da Webpack da Nuxt. O segundo parâmetro é um objeto de contexto com as seguintes propriedades booleanas: <code>{ isDev, isClient, isServer, loaders }</code>.<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">extend</span><span class="token punctuation">(</span><span class="token parameter">config<span class="token punctuation">,</span> <span class="token punctuation">{</span> isDev<span class="token punctuation">,</span> isClient <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ..</span>
      config<span class="token punctuation">.</span><span class="token property-access">module</span><span class="token punctuation">.</span><span class="token property-access">rules</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(ttf|eot|svg|woff(2)?)(\?[a-z0-9=&#x26;.]+)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'file-loader'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token comment">// Definir o modo da Webpack para desenvolvimento se `isDev` for verdadeiro</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>isDev<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span><span class="token property-access">mode</span> <span class="token operator">=</span> <span class="token string">'development'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>O método <code>extend</code> é chamado duas vezes — uma para o pacote do cliente e outra para o pacote do servidor.<section class="level3"aria-labelledby="personalizar-a-configuração-dos-pedaços"><h3 id="personalizar-a-configuração-dos-pedaços">Personalizar a Configuração dos Pedaços</h3><p>Podemos querer ajustar um pouco a <a href="./configuration-glossary/configuration-build#optimization">configuração da otimização</a>, evitando uma reescrita do objeto predefinido:<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">extend</span><span class="token punctuation">(</span><span class="token parameter">config<span class="token punctuation">,</span> <span class="token punctuation">{</span> isClient <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>isClient<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span><span class="token property-access">optimization</span><span class="token punctuation">.</span><span class="token property-access">splitChunks</span><span class="token punctuation">.</span><span class="token property-access">maxSize</span> <span class="token operator">=</span> <span class="token number">200000</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="inspecionar-a-configuração-da-webpack"><h3 id="inspecionar-a-configuração-da-webpack">Inspecionar a Configuração da Webpack</h3><p>Para projetos complexos e depuração, às vezes é útil verificar como será a configuração final da Webpack. Felizmente, podemos executar o comando <code>nuxt webpack</code> de dentro do nosso projeto para gerar a configuração. Consultar este pedido de atualização de repositório <a href="https://github.com/nuxt/nuxt/pull/7029">#7029</a> para obter mais detalhes.</section><section class="level3"aria-labelledby="adicionar-extensões-de-webpack"><h3 id="adicionar-extensões-de-webpack">Adicionar Extensões de Webpack</h3><p>No nosso ficheiro <code>nuxt.config.js</code>, sob a opção <code>build</code>, podemos passar a opção <code>plugins</code> da Webpack, da mesma maneira que o faríamos <a href="https://webpack.js.org/configuration/plugins/">num ficheiro <code>webpack.config.js</code></a>.<p>Neste exemplo, adicionamos o método <a href="https://webpack.js.org/plugins/provide-plugin/"><code>ProvidePlugin</code></a> embutido da Webpack para carregar automaticamente módulos de JavaScript (<em>lodash</em> e <em>jQuery</em>) ao invés de ter que importá-los com <code>import</code> ou <code>require</code> em todos os lugares.<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports">webpack</span> <span class="token keyword module">from</span> <span class="token string">'webpack'</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// módulos globais</span>
        <span class="token literal-property property">$</span><span class="token operator">:</span> <span class="token string">'jquery'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">_</span><span class="token operator">:</span> <span class="token string">'lodash'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><blockquote><p>Nota: podemos não precisar de jQuery numa aplicação baseada em Vue.</blockquote><p>Com a Nuxt, também podemos controlar o contexto de execução das extensões: se estas devem ser executadas nas construções do <code>client</code> ou do <code>server</code> (ou diferenciar as construções de <code>dev</code> e <code>prod</code>) dentro da <a href="./configuration-glossary/configuration-build#extend"><code>build.extend</code></a>, onde também podemos passar manualmente as extensões da Webpack.</section><section class="level3"aria-labelledby="estender-a-webpack-para-carregar-ficheiros-de-áudio"><h3 id="estender-a-webpack-para-carregar-ficheiros-de-áudio">Estender a Webpack para Carregar Ficheiros de Áudio</h3><p>Os ficheiros de áudio devem ser processados pelo <code>file-loader</code>. Este carregador já está incluído na configuração predefinida da Webpack, mas não está configurado para lidar com os ficheiros de áudio. Precisamos de estender a sua configuração predefinida no <code>nuxt.config.js</code>:<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">extend</span><span class="token punctuation">(</span><span class="token parameter">config<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      config<span class="token punctuation">.</span><span class="token property-access">module</span><span class="token punctuation">.</span><span class="token property-access">rules</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(ogg|mp3|wav|mpe?g)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'[path][name].[ext]'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Agora podemos importar os ficheiros de áudio desta maneira <code>&#x3C;audio :src="require('@/assets/water.mp3')" controls>&#x3C;/audio></code>.<p>Se quisermos apenas escrever: <code>&#x3C;audio src="@/assets/water.mp3" controls>&#x3C;/audio></code>, precisamos dizer ao <code>vue-loader</code> para requerer automaticamente os nossos ficheiros de áudio quando os referenciarmos com o atributo <code>src</code>:<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">loaders</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">vue</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">transformAssetUrls</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">audio</span><span class="token operator">:</span> <span class="token string">'src'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">extend</span><span class="token punctuation">(</span><span class="token parameter">config<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      config<span class="token punctuation">.</span><span class="token property-access">module</span><span class="token punctuation">.</span><span class="token property-access">rules</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(ogg|mp3|wav|mpe?g)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'[path][name].[ext]'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section></section><section class="level2"aria-labelledby="editar-o-hospedeiro-e-a-porta"><h2 id="editar-o-hospedeiro-e-a-porta">Editar o Hospedeiro e a Porta</h2><p>Por predefinição, o hospedeiro do servidor de desenvolvimento da Nuxt é o <code>localhost</code>, o qual apenas pode ser acessado de dentro da máquina hospedeira. Para podermos ver a nossa aplicação noutro dispositivo temos de modificar o hospedeiro. Podemos modificar o nosso hospedeiro no nosso ficheiro <code>nuxt.config.js</code>.<p>O hospedeiro <code>'0.0.0.0'</code> é designado para dizer a Nuxt para resolver um endereço de hospedeiro, o qual é acessível a conexões <em>fora</em> da máquina hospedeira (por exemplo, rede local). Se ao hospedeiro for atribuído o valor de sequência de caracteres <code>'0'</code> (não <code>0</code>, que é falso), ou <code>'0.0.0.0'</code> o nosso endereço de protocolo de internet local será atribuída à nossa aplicação da Nuxt:<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'0'</span> <span class="token comment">// predefinida como: localhost</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Também podemos alterar o número da porta a partir da porta predefinida de <code>3000</code>:<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8000</span> <span class="token comment">// predefinida como: 3000</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><section class="level4"aria-labelledby="info"><h4 id="info">Info</h4><p>Se for atribuído à porta o valor de sequência de caracteres <code>'0'</code> (não <code>0</code>, que é falso), um número de porta aleatório será atribuído à nossa aplicação da Nuxt.<p>Embora possamos modificar isto no ficheiro <code>nuxt.config.js</code>, não é aconselhável fazê-lo, porque pode causar-nos problemas ao hospedar o nosso sítio. É muito melhor modificar o hospedeiro e a porta diretamente no comando de execução do desenvolvimento:<pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">HOST</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">PORT</span><span class="token operator">=</span><span class="token number">8000</span> <span class="token function">npm</span> run dev</code></pre><p>ou criar um programa no nosso <code>package.json</code>:<pre class="language-json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"dev:host"</span><span class="token operator">:</span> <span class="token string">"nuxt --hostname '0' --port 8000"</span>
<span class="token punctuation">}</span></code></pre></section></section><section class="level2"aria-labelledby="configuração-assíncrona"><h2 id="configuração-assíncrona">Configuração Assíncrona</h2><p>Embora seja melhor usar a configuração normal <code>export default {}</code>, podemos ter uma configuração assíncrona exportando uma função assíncrona que retorna o objeto de configuração:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports">axios</span> <span class="token keyword module">from</span> <span class="token string">'axios'</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword control-flow">await</span> axios<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token string">'https://api.nuxtjs.dev/posts'</span><span class="token punctuation">)</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">head</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> data<span class="token punctuation">.</span><span class="token property-access">title</span>
      <span class="token comment">//... o resto da configuração</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><section class="level4"aria-labelledby="warning-3"><h4 id="warning-3">Warning</h4><p>O módulo <code>axios</code> não pode ser utilizado no <code>nuxt.config.js</code>. Precisaremos importar o <code>axios</code> e configurá-lo novamente.</section></section><section class="level2"aria-labelledby="configurações-adicionais"><h2 id="configurações-adicionais">Configurações Adicionais</h2><section class="level4"aria-labelledby="next"><h4 id="next">Next</h4><p>O <code>nuxt.config.js</code> tem mais opções de personalização e configuração! Consultar todas as chaves no <a href="./configuration-glossary/configuration-build">glossário de configuração</a>.<p><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section></section>