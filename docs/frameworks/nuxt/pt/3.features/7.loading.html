<!doctype html><html lang="pt"><meta charset="utf-8"><title>Carregamento</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="description"content="De imediato, a Nuxt dá-nos o seu componente de barra de progresso de carregamento que é mostrado entre as rotas. Podemos personalizá-lo, desativá-lo ou até criar o nosso próprio componente de carregamento."><meta name="category"content="features"><meta name="csb_link"content="https://codesandbox.io/embed/github/nuxt-academy/guides-examples/tree/master/03_features/08_loading?fontsize=14&#x26;hidenavigation=1&#x26;theme=dark"><link rel="stylesheet"type="text/css"href="../../../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="carregamento"><h1 id="carregamento">Carregamento</h1><p>De imediato, a Nuxt dá-nos o seu componente de barra de progresso de carregamento que é mostrado entre as rotas. Podemos personalizá-lo, desativá-lo ou até criar o nosso próprio componente de carregamento.<hr><section class="level2"aria-labelledby="personalizar-a-barra-de-progresso"><h2 id="personalizar-a-barra-de-progresso">Personalizar a Barra de Progresso</h2><p>Entre outras propriedades, a cor, o tamanho, a duração e a direção da barra de progresso podem ser personalizadas de acordo com as necessidades da nossa aplicação. Isto é feito ao atualizar a propriedade <code>loading</code> do <code>nuxt.config.js</code> com as propriedades correspondentes.<p>Por exemplo, para definir uma barra de progresso azul com uma altura de <code>5px</code>, atualizamos o <code>nuxt.config.js</code> para o seguinte:<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'blue'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">'5px'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><section class="level4"aria-labelledby="info"><h4 id="info">Info</h4><p>Se não virmos a barra de carregamento quando nos deslocamos entre as rotas, o tempo de carregamento da página é suficientemente curto para ser ignorado pelos utilizadores. Se quisermos que a barra de carregamento apareça mesmo que o tempo for curto, tentamos <code>throttle: 0</code>.<p>Lista de propriedades para personalizar a barra de progresso.<p>| Chave | Tipo | Padrão | Descrição | | | | | <code>color</code> | <code>String</code> | <code>'black'</code> | Cor de folha de estilo da barra de progresso | | | <code>failedColor</code> | <code>String</code> | <code>'red'</code> | Cor de folha de estilo da barra de progresso quando um erro é acrescentado durante o desenho da rota (se os dados ou a busca de dados devolverem um erro, por exemplo). | | | <code>height</code> | <code>String</code> | <code>'2px'</code> | Altura da barra de progresso (utilizada na propriedade de estilo da barra de progresso). | | | <code>throttle</code> | <code>Number</code> | <code>200</code> | Em milissegundos, espera o tempo especificado antes de apresentar a barra de progresso. Útil para evitar que a barra fique intermitente. | | | <code>duration</code> | <code>Number</code> | <code>5000</code> | Em milissegundos, a duração máxima da barra de progresso, a Nuxt assume que a rota será desenhada antes de 5 segundos. | | | <code>continuous</code> | <code>Boolean</code> | <code>false</code> | Manter a animação da barra de progresso quando o carregamento demora mais do que a duração. | | | <code>css</code> | <code>Boolean</code> | <code>true</code> | Definir como <code>false</code> para remover os estilos predefinidos da barra de progresso (e adicionar os nossos próprios estilos). | | | <code>rtl</code> | <code>Boolean</code> | <code>false</code> | Definir a direção da barra de progresso da direita para a esquerda. | |</section></section><section class="level2"aria-labelledby="desativar-a-barra-de-progresso"><h2 id="desativar-a-barra-de-progresso">Desativar a Barra de Progresso</h2><p>Se não quisermos exibir a barra de progresso entre as rotas, adicionamos <code>loading: false</code> no nosso ficheiro <code>nuxt.config.js</code>:<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  loading: false
}</code></pre><p>A propriedade <code>loading</code> dá-nos a opção de desativar a barra de progresso de carregamento predefinida numa página específica:<pre class="language-html{}[pages/index.vue]"><code class="language-html{}[pages/index.vue]">&#x3C;template>
  &#x3C;h1>My page&#x3C;/h1>
&#x3C;/template>

&#x3C;script>
  export default {
    loading: false
  }
&#x3C;/script></code></pre></section><section class="level2"aria-labelledby="iniciar-programaticamente-a-barra-de-carregamento"><h2 id="iniciar-programaticamente-a-barra-de-carregamento">Iniciar Programaticamente a Barra de Carregamento</h2><p>A barra de carregamento também pode ser iniciada programaticamente nos nossos componentes, ao chamar <code>this.$nuxt.$loading.start()</code> para iniciar a barra de carregamento e <code>this.$nuxt.$loading.finish()</code> para terminá-la.<p>A propriedade <code>$loading</code> pode não estar imediatamente disponível para ser usada durante o processo de montagem do nosso componente de página. Para contornar isto, se quisermos iniciar o carregador no método <code>mounted</code>, precisamos envolver as nossas chamadas do método <code>$loading</code> dentro de <code>this.$nextTick</code> como mostrado abaixo:<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">$nuxt</span><span class="token punctuation">.</span><span class="token property-access">$loading</span><span class="token punctuation">.</span><span class="token method function property-access">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">$nuxt</span><span class="token punctuation">.</span><span class="token property-access">$loading</span><span class="token punctuation">.</span><span class="token method function property-access">finish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section><section class="level2"aria-labelledby="o-interior-da-barra-de-progresso"><h2 id="o-interior-da-barra-de-progresso">O Interior da Barra de Progresso</h2><p>Infelizmente, não é possível que o componente de carregamento saiba antecipadamente quanto tempo demorará a carregar uma nova página. Por isto, não é possível animar com exatidão a barra de progresso para 100% do tempo de carregamento.<p>O componente de carregamento da Nuxt resolve isto parcialmente, permitindo que definamos a <code>duration</code>, que deve ser definida como uma estimativa de quanto tempo o processo de carregamento levará. A menos que usemos um componente de carregamento personalizado, a barra de progresso sempre se moverá de 0% a 100% no tempo de <code>duration</code> (independentemente da progressão real). Quando o carregamento demorar mais do que o tempo de <code>duration</code>, a barra de progresso permanecerá em 100% até o carregamento terminar.<p>Podemos alterar o comportamento predefinido ao definir <code>continuous</code> como <code>true</code>. Depois de atingir 100%, a barra de progresso começará a diminuir para 0% novamente no tempo de <code>duration</code>. Se o carregamento ainda não estiver concluído depois de atingir 0%, aumentará novamente de 0% para 100%. O processo repete-se até ao fim do carregamento:<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">continuous</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p><em>Exemplo duma barra de progresso contínua:</em><figure><img src="/img/docs/api-continuous-loading.gif"alt="../docs/api-continuous-loading.gif"><figcaption aria-hidden="true">../docs/api-continuous-loading.gif</figcaption></figure></section><section class="level2"aria-labelledby="usar-um-componente-de-carregamento-personalizado"><h2 id="usar-um-componente-de-carregamento-personalizado">Usar um Componente de Carregamento Personalizado</h2><p>Também podemos criar o nosso próprio componente que a Nuxt chamará no lugar do componente predefinido da barra de progresso de carregamento. Para isto, precisamos dar um caminho ao nosso componente na opção <code>loading</code>. Então, o nosso componente será chamado diretamente pela Nuxt.<p>O nosso componente tem de expor alguns desses métodos:<p>| Método | Obrigatório | Descrição | | | | <code>start()</code> | Obrigatório | Chamada quando uma rota é alterada, é aqui que apresentamos o nosso componente. | | <code>finish()</code> | Obrigatório | Chamada quando uma rota é carregada (e os dados são obtidos), é aqui que escondemos o nosso componente. | | <code>fail(error)</code> | Opcional | Chamada quando não foi possível carregar uma rota (não foi possível obter os dados, por exemplo). | | <code>increase(num)</code> | Opcional | Chamada durante o carregamento do componente de rota, <code>num</code> é um número inteiro &#x3C; 100. |<p>Podemos criar o nosso componente personalizado em <code>components/LoadingBar.vue</code>:<pre class="language-html{}[components/LoadingBar.vue]"><code class="language-html{}[components/LoadingBar.vue]">&#x3C;template>
  &#x3C;div v-if="loading" class="loading-page">
    &#x3C;p>Loading...&#x3C;/p>
  &#x3C;/div>
&#x3C;/template>

&#x3C;script>
  export default {
    data: () => ({
      loading: false
    }),
    methods: {
      start() {
        this.loading = true
      },
      finish() {
        this.loading = false
      }
    }
  }
&#x3C;/script>

&#x3C;style scoped>
  .loading-page {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.8);
    text-align: center;
    padding-top: 200px;
    font-size: 30px;
    font-family: sans-serif;
  }
&#x3C;/style></code></pre><p>Depois, atualizamos o nosso <code>nuxt.config.js</code> para dizer a Nuxt para usar o nosso componente:<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  loading: '~/components/LoadingBar.vue'
}</code></pre></section><section class="level2"aria-labelledby="a-propriedade-do-indicador-de-carregamento"><h2 id="a-propriedade-do-indicador-de-carregamento">A Propriedade do Indicador de Carregamento</h2><p>Ao executar a Nuxt no modo de aplicação de página única, não existe conteúdo do lado do servidor no primeiro carregamento da página. Assim, em vez de mostrar uma página em branco enquanto a página carrega, a Nuxt dá-nos um componente giratório que podemos personalizar para adicionar as nossas próprias cores ou fundo e até mudar o indicador:<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  loadingIndicator: {
    name: 'circle',
    color: '#3B8070',
    background: 'white'
  }
}</code></pre></section><section class="level2"aria-labelledby="indicadores-embutidos"><h2 id="indicadores-embutidos">Indicadores Embutidos</h2><p>Estes indicadores são importados do incrível projeto <a href="http://tobiasahlin.com/spinkit">SpinKit</a>. Podemos consultar a sua página de demonstração para pré-visualizar os componentes giratórios. Para utilizar um destes componentes giratórios, só temos de adicionar o seu nome à propriedade <code>name</code>. Não é necessário importar ou instalar nada. Eis uma lista de indicadores embutidos que podemos utilizar:<ul><li><code>'circle'</code><li><code>'cube-grid'</code><li><code>'fading-circle'</code><li><code>'folding-cube'</code><li><code>'chasing-dots'</code><li><code>'nuxt'</code><li><code>'pulse'</code><li><code>'rectangle-bounce'</code><li><code>'rotating-plane'</code><li><code>'three-bounce'</code><li><code>'wandering-cubes'</code></ul><p>Os indicadores embutidos suportam as opções <code>color</code> e <code>background</code>.</section><section class="level2"aria-labelledby="indicadores-personalizados"><h2 id="indicadores-personalizados">Indicadores Personalizados</h2><p>Se precisarmos do nosso próprio indicador especial, um valor de sequência de caracteres (<code>String</code>) ou uma chave de nome (<code>Name</code>) também pode ser um caminho para um modelo de marcação de hipertexto do código-fonte do indicador! Todas as opções também são passadas para o modelo de marcação de hipertexto.<p>O <a href="https://github.com/nuxt/nuxt/tree/2.x-dev/packages/vue-app/template/views/loading">código-fonte</a> do componente de carregamento embutido da Nuxt também está disponível se precisarmos duma base! <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>