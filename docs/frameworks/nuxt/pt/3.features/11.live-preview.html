<!doctype html><html lang="pt"><meta charset="utf-8"><title>Modo de Pré-visualização</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="description"content="Pré-visualização em direto do estático do destino com o modo de pré-visualização."><meta name="category"content="features"><link rel="stylesheet"type="text/css"href="../../../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="modo-de-pré-visualização"><h1 id="modo-de-pré-visualização">Modo de Pré-visualização</h1><p>Pré-visualização em direto do estático do destino com o modo de pré-visualização.<hr><p>Com a Nuxt e a geração de sítio totalmente estático, podemos agora utilizar a pré-visualização em direto, que chamará a nossa interface de programação de aplicação ou o nosso sistema de gestão de conteúdo para que possamos ver as alterações em direto antes da implantação.<section class="level4"aria-labelledby="warning"><h4 id="warning">Warning</h4><p>Disponível apenas quando se utiliza <a href="./features/deployment-targets#hospedagem-est%C3%A1tica"><code>target:static</code></a><p>O modo de pré-visualização atualizará automaticamente os dados da página, uma vez que utiliza <code>$nuxt.refresh</code> e, por conseguinte, chama <code>nuxtServerInit</code>, <code>asyncData</code> e <code>fetch</code> no lado do cliente.<p>Para ativar a pré-visualização em direto, temos de adicionar a seguinte extensão:<pre class="language-js{}[plugins/preview.client.js]"><code class="language-js{}[plugins/preview.client.js]">export default function ({ query, enablePreview }) {
  if (query.preview) {
    enablePreview()
  }
}</code></pre></section><section class="level4"aria-labelledby="warning-1"><h4 id="warning-1">Warning</h4><p>A <code>enablePreview</code> só está disponível no objeto de contexto das extensões. As pré-visualizações são tratadas do lado do cliente e portanto, a extensão deve ser executada no cliente: <code>preview.client.js</code>.<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  plugins: ['~/plugins/preview.client.js']
}</code></pre><p>Depois de adicionarmos a extensão, podemos agora gerar o nosso sítio e servi-lo:<pre class="language-bash"><code class="language-bash"><span class="token function">yarn</span> generate
<span class="token function">yarn</span> start</code></pre><pre class="language-bash"><code class="language-bash">npx nuxt generate
npx nuxt start</code></pre><p>Depois, podemos ver a nossa página de pré-visualização adicionando o parâmetro de consulta ao fim da página que queremos ver imediatamente:<pre class="language-js"><code class="language-js"><span class="token operator">?</span>preview<span class="token operator">=</span><span class="token boolean">true</span></code></pre></section><section class="level4"aria-labelledby="warning-2"><h4 id="warning-2">Warning</h4><p>A <code>enablePreview</code> deve ser testada localmente com <code>yarn start</code> e não com <code>yarn dev</code>.</section><section class="level3"aria-labelledby="pré-visualizar-páginas-que-ainda-não-foram-geradas"><h3 id="pré-visualizar-páginas-que-ainda-não-foram-geradas">Pré-visualizar páginas que ainda não foram geradas</h3><p>Para as páginas que ainda não foram geradas, o retrocesso da aplicação de página única continuará a chamar a interface de programação de aplicação antes de mostrar a página 404, uma vez que estas páginas existem na interface de programação de aplicação, mas ainda não foram geradas.<p>Se tivermos definido uma função gatilho de validação, provavelmente teremos de a modificar para que não redirecione para a página 404 no modo de pré-visualização:<pre class="language-js"><code class="language-js"><span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params<span class="token punctuation">,</span> query <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>query<span class="token punctuation">.</span><span class="token property-access">preview</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="passar-dados-para-enablepreview"><h3 id="passar-dados-para-enablepreview">Passar Dados para <code>enablePreview</code></h3><p>Podemos passar dados para a função <code>enablePreview</code>. Estes dados estarão então disponíveis no auxiliar de contexto <code>$preview</code> e em <code>this.$preview</code>.</section><section class="level3"aria-labelledby="o-que-se-segue"><h3 id="o-que-se-segue">O Que Se Segue?</h3><section class="level4"aria-labelledby="next"><h4 id="next">Next</h4><p>Consultar o livro <a href="./directory-structure/nuxt">Estrutura do Diretório</a>.<p><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section></section>