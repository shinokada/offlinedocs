<!doctypehtml><html lang="pt"><meta charset="utf-8"><title>A propriedade server</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="navigation.title"content="server"><meta name="description"content="O Nuxt permite você definir as variáveis de conexão do servidor para a sua aplicação dentro do ficheiro nuxt.config.js."><meta name="menu"content="server"><meta name="category"content="configuration-glossary"><link rel="stylesheet"href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css"><section id="a-propriedade-server"class="level1"><h1>A propriedade server</h1><p>O Nuxt permite você definir as variáveis de conexão do servidor para a sua aplicação dentro do ficheiro <code>nuxt.config.js</code>.<hr><ul><li>Tipo: <code>Object</code></ul><section id="exemplo-básico"class="level2"><h2>Exemplo Básico:</h2><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  server: {
    port: 8000, // valor padrão: 3000
    host: '0.0.0.0', // valor padrão: localhost,
    timing: false
  }
}</code></pre><p>Isto permite você especificar o <a href="./features/configuration#editar-o-hospedeiro-e-a-porta">hospedeiro e a porta</a> para a sua instância de servidor do Nuxt.</section><section id="exemplo-usando-a-configuração-do-https"class="level2"><h2>Exemplo usando a configuração do HTTPS</h2><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">import path from 'path'
import fs from 'fs'

export default {
  server: {
    https: {
      key: fs.readFileSync(path.resolve(__dirname, 'server.key')),
      cert: fs.readFileSync(path.resolve(__dirname, 'server.crt'))
    }
  }
}</code></pre><p>Você pode encontrar informações adicionais sobre a criação de chaves e certificados de servidor no <code>localhost</code> no artigo <a href="https://letsencrypt.org/docs/certificates-for-localhost/">certificados para o <code>localhost</code></a>.</section><section id="exemplo-usando-configuração-do-sockets"class="level2"><h2>Exemplo usando configuração do sockets</h2><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  server: {
    socket: '/tmp/nuxt.socket'
  }
}</code></pre></section><section id="a-propriedade-timing"class="level2"><h2>A propriedade timing</h2><ul><li>Tipo: <code>Object</code> ou <code>Boolean</code><li>Valor padrão: <code>false</code></ul><p>A ativação da opção <code>server.timing</code> adiciona um intermediário para medir o tempo decorrido durante a renderização no lado do servidor e adiciona ele aos cabeçalhos como <code>Server-Timing</code><section id="exemplo-usando-a-configuração-do-timing"class="level3"><h3>Exemplo usando a configuração do timing</h3><p>O <code>server.timing</code> pode ser um objeto para fornecimento de opções. Atualmente, apenas o <code>total</code> é suportado (o qual rastreia diretamente o tempo todo gasto na renderização do lado do servidor)<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  server: {
    timing: {
      total: true
    }
  }
}</code></pre></section><section id="usando-a-api-do-timing"class="level3"><h3>Usando a API do timing</h3><p>A API do <code>timing</code> é também injetada dentro do <code>response</code> no lado do servidor quando o <code>server.time</code> estiver ativado.<section id="a-sintaxe"class="level4"><h4>A Sintaxe</h4><pre class="language-js"><code class="language-js">res<span class="token punctuation">.</span><span class="token property-access">timing</span><span class="token punctuation">.</span><span class="token method function property-access">start</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> description<span class="token punctuation">)</span>
res<span class="token punctuation">.</span><span class="token property-access">timing</span><span class="token punctuation">.</span><span class="token method function property-access">end</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span></code></pre></section><section id="exemplo-usando-o-timing-dentro-do-servermiddleware"class="level4"><h4>Exemplo usando o timing dentro do serverMiddleware</h4><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token property-access">timing</span><span class="token punctuation">.</span><span class="token method function property-access">start</span><span class="token punctuation">(</span><span class="token string">'midd'</span><span class="token punctuation">,</span> <span class="token string">'Middleware timing description'</span><span class="token punctuation">)</span>
  <span class="token comment">// operação no lado do servidor...</span>
  <span class="token comment">// ...</span>
  res<span class="token punctuation">.</span><span class="token property-access">timing</span><span class="token punctuation">.</span><span class="token method function property-access">end</span><span class="token punctuation">(</span><span class="token string">'midd'</span><span class="token punctuation">)</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><p>Depois o cabeçalho <code>server-timing</code> será incluído dentro do cabeçalho de resposta como:<pre class="language-bash"><code class="language-bash">Server-Timing: midd<span class="token punctuation">;</span><span class="token assign-left variable">desc</span><span class="token operator">=</span><span class="token string">"Middleware timing description"</span><span class="token punctuation">;</span><span class="token assign-left variable">dur</span><span class="token operator">=</span><span class="token number">2.4</span></code></pre><p>Recorra ao <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Server-Timing">MDN do server-timing</a> para mais detalhes. <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section></section></section>