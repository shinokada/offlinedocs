<!doctype html><html lang="pt"><meta charset="utf-8"><title>A classe ModuleContainer</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="navigation.title"content="Module Container"><meta name="description"content="A classe ModuleContainer do Nuxt"><meta name="category"content="internals-glossary"><link rel="stylesheet"type="text/css"href="../../../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="a-classe-modulecontainer"><h1 id="a-classe-modulecontainer">A classe ModuleContainer</h1><hr><ul><li>Código-fonte: <strong><a href="https://github.com/nuxt/nuxt/blob/2.x-dev/packages/core/src/module.js">core/module.js</a></strong></ul><p>Todos os <a href="./directory-structure/modules">módulos</a> serão chamados dentro do contexto da instância de <code>ModuleContainer</code>.<section class="level2"aria-labelledby="plugins-intercetáveis"><h2 id="plugins-intercetáveis">Plugins intercetáveis</h2><p>Nós podemos registar gatilhos em certos eventos do ciclo de vida.<pre class="language-js"><code class="language-js">nuxt<span class="token punctuation">.</span><span class="token property-access">moduleContainer</span><span class="token punctuation">.</span><span class="token method function property-access">plugin</span><span class="token punctuation">(</span><span class="token string">'ready'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">moduleContainer</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// Faça isso depois de todos módulos estiverem prontos</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>Dentro do contexto de <a href="./directory-structure/modules">módulos</a> nós podemos usar isso:<pre class="language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">plugin</span><span class="token punctuation">(</span><span class="token string">'ready'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">moduleContainer</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// Faça isso depois de todos módulos estiverem prontos</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>| Plugin | Argumentos | Quando | | | | <code>ready</code> | moduleContainer | Todos módulos dentro do ficheiro <code>nuxt.config.js</code> terem sido inicializados |</section><section class="level2"aria-labelledby="métodos"><h2 id="métodos">Métodos</h2><section class="level3"aria-labelledby="o-método-addvendor-vendor"><h3 id="o-método-addvendor-vendor">O método addVendor (vendor)</h3><p><strong>Depreciado visto que <code>vendor</code> não é mais usado</strong><p>Adiciona ao <code>options.build.vendor</code> e aplica filtro único.</section><section class="level3"aria-labelledby="addtemplate-template"><h3 id="addtemplate-template">addTemplate (template)</h3><ul><li><strong>template</strong>: <code>String</code> ou <code>Object</code><ul><li><code>src</code><li><code>options</code><li><code>fileName</code></ul></ul><p>Renderiza o modelo dado usando o <a href="https://lodash.com/docs/4.17.4#template">modelo do lodash</a> durante a construção dentro do projeto <code>buildDir</code> (<code>.nuxt</code>).<p>Se o <code>fileName</code> não for fornecido ou o <code>template</code> não for uma sequência de caracteres, o nome do ficheiro alvo é padronizado para <code>[dirName].[fileName].[pathHash].[ext]</code>.<p>Este método retorna o objeto final <code>{ dst, src, options }</code>.</section><section class="level3"aria-labelledby="o-método-addplugin-template"><h3 id="o-método-addplugin-template">O método addPlugin (template)</h3><ul><li><strong>template</strong>: propriedades de Objeto (<code>src</code>, <code>options</code>, <code>fileName</code>, <code>mode</code>).</ul><p>Regista um plugin usando o método <code>addTemplate</code> e adiciona ele no início do arranjo <code>plugins[]</code>.<pre class="language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">addPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">src</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token method function property-access">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'templates/foo.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">fileName</span><span class="token operator">:</span> <span class="token string">'foo.server.js'</span> <span class="token comment">// [opcional] apenas inclui o pacote do servidor</span>
  <span class="token literal-property property">options</span><span class="token operator">:</span> moduleOptions
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p><strong>Repare que:</strong> Você pode usar o <code>mode</code> ou os modificadores <code>.client</code> e <code>.server</code> com a opção <code>fileName</code> para usar o plugin apenas no lado do cliente ou servidor. (Consulte a secção <a href="./directory-structure/plugins#nomear-convencionalmente-o-plugin">plugins</a> para conhecer todas opções disponíveis)<p>Se você escolher especificar um <code>fileName</code>, você pode também configurar um caminho personalizado para <code>fileName</code>, assim você pode escolher a estrutura da pasta dentro da pasta <code>.nuxt</code> no sentido de prevenir a colisão de nome:<pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token literal-property property">fileName</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token method function property-access">join</span><span class="token punctuation">(</span><span class="token string">'folder'</span><span class="token punctuation">,</span> <span class="token string">'foo.client.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// resultará em `.nuxt/folder/foo.client.js`</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="o-método-addservermiddleware-middleware"><h3 id="o-método-addservermiddleware-middleware">O método addServerMiddleware (middleware)</h3><p>Empurra o intermediário dentro <a href="./configuration-glossary/configuration-servermiddleware">options.serverMiddleware</a>.</section><section class="level3"aria-labelledby="o-método-extendbuild-fn"><h3 id="o-método-extendbuild-fn">O método extendBuild (fn)</h3><p>Permite estender facilmente a configuração da construção do webpack pela encadeamento da função <a href="./configuration-glossary/configuration-build#a-propriedade-extend">options.build.extend</a>.</section><section class="level3"aria-labelledby="o-método-extendroutes-fn"><h3 id="o-método-extendroutes-fn">O método extendRoutes (fn)</h3><p>Permite estender facilmente as rotas pelo encadeamento da função <a href="./configuration-glossary/configuration-router#a-propriedade-extendroutes">options.build.extendRoutes</a>.</section><section class="level3"aria-labelledby="o-método-addmodule-moduleopts-requireonce"><h3 id="o-método-addmodule-moduleopts-requireonce">O método addModule (moduleOpts, requireOnce)</h3><p><em>Função assíncrona</em><p>Regista um módulo. O <code>moduleOpts</code> pode ser uma sequência de caracteres ou um arranjo (<code>[src, options]</code>). Se o <code>requireOnce</code> for <code>true</code> e o módulo resolvido exportar o <code>meta</code>, ele evita o registo do mesmo módulo duas vezes.</section><section class="level3"aria-labelledby="o-método-requiremodule-moduleopts"><h3 id="o-método-requiremodule-moduleopts">O método requireModule (moduleOpts)</h3><p><em>Função assíncrona</em><p>É um atalho para <code>addModule(moduleOpts, true)</code></section></section><section class="level2"aria-labelledby="os-gatilhos"><h2 id="os-gatilhos">Os gatilhos</h2><p>Nós podemos registar gatilhos em certos eventos do ciclo de vida.<p>| Gatilho | Argumentos | Quando | | | | <code>modules:before</code> | (moduleContainer, options) | Chamado antes da criação da classe ModuleContainer, útil para sobrecarregar métodos e opções. | | <code>modules:done</code> | (moduleContainer) | Chamado quando todos módulos tiverem sido carregados. | <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>