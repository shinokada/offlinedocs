<!doctype html><html lang="pt"><meta charset="utf-8"><title>Método de Validação</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="description"content="A Nuxt permite-nos definir um método de validação dentro do nosso componente de rota dinâmica."><meta name="navigation.title"content="Método Validate"><meta name="category"content="components-glossary"><link rel="stylesheet"type="text/css"href="../../../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="método-de-validação"><h1 id="método-de-validação">Método de Validação</h1><p>A Nuxt permite-nos definir um método de validação dentro do nosso componente de rota dinâmica.<hr><ul><li><strong>Tipo:</strong> <code>Function</code> ou <code>Async Function</code></ul><p>A <code>validate</code> é chamada sempre antes de navegar para uma nova rota. Será chamada uma vez do lado do servidor (na primeira requisição à aplicação de Nuxt) e do lado do cliente ao navegar para outras rotas. Este método recebe o objeto <a href="./internals-glossary/context"><code>context</code></a> como argumento:<pre class="language-js"><code class="language-js"><span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params<span class="token punctuation">,</span> query<span class="token punctuation">,</span> store <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token boolean">true</span> <span class="token comment">// se os parâmetros forem validos</span>
  <span class="token keyword control-flow">return</span> <span class="token boolean">false</span> <span class="token comment">// impedirá a Nuxt de desenhar a rota e exibirá a página de erro</span>
<span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token keyword">async</span> <span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params<span class="token punctuation">,</span> query<span class="token punctuation">,</span> store <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// aguardar as opções</span>
  <span class="token keyword control-flow">return</span> <span class="token boolean">true</span> <span class="token comment">// se os parâmetros forem validos</span>
  <span class="token keyword control-flow">return</span> <span class="token boolean">false</span> <span class="token comment">// impedirá a Nuxt de desenhar a rota e exibirá a página de erro</span>
<span class="token punctuation">}</span></code></pre><p>Também podemos retornar promessas:<pre class="language-js"><code class="language-js"><span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params<span class="token punctuation">,</span> query<span class="token punctuation">,</span> store <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><p>A Nuxt permite-nos definir um método de validação dentro do nosso componente de rota dinâmica (neste exemplo: <code>pages/users/_id.vue</code>).<p>Se o método <code>validate</code> não retornar <code>true</code>, a Nuxt carregará automaticamente a página de erro 404:<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Tem de ser um número</span>
    <span class="token keyword control-flow">return</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token method function property-access">test</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Também podemos verificar algum dado no nosso <a href="./directory-structure/store">armazém de estado</a>, por exemplo (preenchido pela <a href="./directory-structure/store##a-a%C3%A7%C3%A3o-nuxtserverinit"><code>nuxtServerInit</code></a> antes da ação):<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params<span class="token punctuation">,</span> store <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Verificar se `params.id` é uma categoria existente</span>
    <span class="token keyword control-flow">return</span> store<span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">categories</span><span class="token punctuation">.</span><span class="token method function property-access">some</span><span class="token punctuation">(</span><span class="token parameter">category</span> <span class="token arrow operator">=></span> category<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">===</span> params<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Também podemos lançar erros esperados ou inesperados durante a execução da função <code>validate</code>:<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params<span class="token punctuation">,</span> store <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Lançar um erro interno do servidor 500</span>
    <span class="token comment">// com uma mensagem personalizada</span>
    <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Under Construction!'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section>