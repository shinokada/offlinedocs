<!doctype html><html lang="ja"><meta charset="utf-8"><title>build プロパティ</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="navigation.title"content="build"><meta name="description"content="Nuxt では、webpack の設定をカスタマイズして web アプリケーションを思いのままに構築することができます。"><meta name="menu"content="build"><meta name="category"content="configuration-glossary"><link rel="stylesheet"type="text/css"href="../../../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="build-プロパティ"><h1 id="build-プロパティ">build プロパティ</h1><p>Nuxt では、webpack の設定をカスタマイズして web アプリケーションを思いのままに構築することができます。<hr><section class="level2"aria-labelledby="analyze"><h2 id="analyze">analyze</h2><blockquote><p>Nuxt では <a href="https://github.com/webpack-contrib/webpack-bundle-analyzer">webpack-bundle-analyzer</a> を使ってバンドルファイルと最適化の仕方を視覚化できます。</blockquote><ul><li>型: <code>Boolean</code> または <code>Object</code><li>デフォルト: <code>false</code></ul><p>オブジェクトの場合、利用できるプロパティについて<a href="https://github.com/webpack-contrib/webpack-bundle-analyzer#options-for-plugin">こちら</a>を参照してください。<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    analyze: true,
    // または
    analyze: {
      analyzerMode: 'static'
    }
  }
}</code></pre><section class="level4"aria-labelledby="info"><h4 id="info">Info</h4><p><strong>情報:</strong> <code>yarn nuxt build --analyze</code> または <code>yarn nuxt build -a</code> コマンドを使って、アプリケーションをビルドし、バンドルアナライザを <a href="http://localhost:8888">http://localhost:8888</a> で起動できます。<code>yarn</code> を使っていない場合は <code>npx</code> を使って実行できます。</section></section><section class="level2"aria-labelledby="corejs"><h2 id="corejs">corejs</h2><blockquote><p><a href="https://github.com/nuxt/nuxt/releases/tag/v2.14.0">Nuxt@2.14</a> 以降、Nuxt は <code>core-js</code> の現在のバージョンを自動的に検出します。また、使用するバージョンを指定することもできます。</blockquote><ul><li>型: <code>number</code> | <code>string</code> （有効な値は <code>'auto'</code>、<code>2</code> そして <code>3</code> です）<li>デフォルト: <code>'auto'</code></ul></section><section class="level2"aria-labelledby="babel"><h2 id="babel">babel</h2><blockquote><p>JavaScript や Vue ファイル用に Babel の設定をカスタマイズします。デフォルトでは <code>.babelrc</code> は無視されます。</blockquote><ul><li><p>型: <code>Object</code><li><p><code>babel-loader</code> <a href="https://github.com/babel/babel-loader#options">オプション</a>と babel <a href="https://babeljs.io/docs/en/options">オプション</a>を参照してください<li><p>デフォルト:<pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token literal-property property">babelrc</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">cacheDirectory</span><span class="token operator">:</span> <span class="token keyword nil">undefined</span><span class="token punctuation">,</span>
  <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@nuxt/babel-preset-app'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></ul><p><a href="https://github.com/nuxt/nuxt/blob/2.x-dev/packages/babel-preset-app/src/index.js">@nuxt/babel-preset-app</a>のデフォルトのターゲットは <code>client</code> ビルドでは <code>ie: '9'</code>、<code>server</code> ビルドでは <code>node: 'current'</code> です。<section class="level3"aria-labelledby="presets"><h3 id="presets">presets</h3><ul><li>型: <code>Function</code><li>引数:<ol><li><code>Object</code>: <ruby>isServer: true <rt>false</ruby><li><code>Array</code>:<ul><li>プリセット名 <code>@nuxt/babel-preset-app</code><li><code>@nuxt/babel-preset-app</code> の<a href="https://github.com/nuxt/nuxt/tree/2.x-dev/packages/babel-preset-app#options"><code>オプション</code></a></ul></ol></ul><p><strong>注意</strong>: <code>build.babel.presets</code> で設定されたプリセットはクライアントとサーバー両方のビルドに適用されます。ターゲットは（クライアント/サーバー）それぞれに応じて Nuxt によって設定されます。クライアントビルドとサーバービルドで異なるプリセットの設定をしたい場合は、関数として <code>presets</code> を使用してください：<blockquote><p>以下のカスタマイズの代わりにデフォルトのプリセットを使用することを<strong>強くおすすめします</strong></blockquote><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">babel</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">presets</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isServer <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> preset<span class="token punctuation">,</span> options <span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// change options directly</span>
        options<span class="token punctuation">.</span><span class="token property-access">targets</span> <span class="token operator">=</span> isServer <span class="token operator">?</span> <span class="token spread operator">...</span> <span class="token operator">:</span>  <span class="token spread operator">...</span>
        options<span class="token punctuation">.</span><span class="token property-access">corejs</span> <span class="token operator">=</span> <span class="token spread operator">...</span>
        <span class="token comment">// return nothing</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>またはプリセットのリスト全体を返すことによってデフォルトの値を上書きします：<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">babel</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">presets</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isServer <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>preset<span class="token punctuation">,</span> options<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">return</span> <span class="token punctuation">[</span>
          <span class="token punctuation">[</span>
            preset<span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">targets</span><span class="token operator">:</span> isServer <span class="token operator">?</span> <span class="token spread operator">...</span> <span class="token operator">:</span>  <span class="token spread operator">...</span><span class="token punctuation">,</span>
              <span class="token spread operator">...</span>options
            <span class="token punctuation">}</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span>
            <span class="token comment">// 他のプリセット</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section></section><section class="level2"aria-labelledby="cache"><h2 id="cache">cache</h2><ul><li>型: <code>Boolean</code><li>デフォルト: <code>false</code><li>⚠️ 実験的機能</ul><blockquote><p><a href="https://github.com/webpack-contrib/terser-webpack-plugin#options">terser-webpack-plugin</a> と <a href="https://github.com/webpack-contrib/cache-loader#cache-loader">cache-loader</a> を使ってキャッシュを有効化します</blockquote></section><section class="level2"aria-labelledby="csssourcemap"><h2 id="csssourcemap">cssSourceMap</h2><ul><li>型: <code>boolean</code><li>デフォルト: 開発モードでは <code>true</code>、プロダクションモードでは <code>false</code></ul><blockquote><p>CSS ソースマップのサポートを有効にします</blockquote></section><section class="level2"aria-labelledby="devmiddleware"><h2 id="devmiddleware">devMiddleware</h2><ul><li>型: <code>Object</code></ul><p>利用できるオプションは <a href="https://github.com/webpack/webpack-dev-middleware">webpack-dev-middleware</a> を参照してください。</section><section class="level2"aria-labelledby="devtools"><h2 id="devtools">devtools</h2><ul><li>型: <code>boolean</code><li>デフォルト: <code>false</code></ul><p><a href="https://github.com/vuejs/vue-devtools">vue-devtools</a> の検査を許可するかどうかを設定します。<p>既に nuxt.config.js などで有効化している場合は、このフラグに関係なく devtools が有効になります。</section><section class="level2"aria-labelledby="extend"><h2 id="extend">extend</h2><blockquote><p>クライアント及びサーバーのバンドルについて webpack の設定を手動で拡張します。</blockquote><ul><li>型: <code>Function</code></ul><p>extend メソッドは一度はサーバーのバンドルのため、一度はクライアントのバンドルのため、計二度呼び出されます。メソッドの引数は次のとおりです：<ol><li>webpack 設定オブジェクト<li>次のキーを持つオブジェクト（<code>loaders</code> を除きすべて真偽値）： <code>isDev</code>、<code>isClient</code>、<code>isServer</code>、<code>loaders</code></ol><section class="level4"aria-labelledby="warning"><h4 id="warning">Warning</h4><p><strong>警告:</strong> 提供される <code>isClient</code> と <code>isServer</code> は <a href="./internals-glossary/context"><code>context</code></a> で利用可能なキーとは別物です。これらのキーは非推奨では<strong>ありません。</strong>ここでは、<code>process.client</code> および <code>process.server</code> は <code>undefined</code> となるため使用しないでください<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    extend(config, { isClient }) {
      // クライアントのバンドルの webpack 設定のみを拡張する
      if (isClient) {
        config.devtool = 'source-map'
      }
    }
  }
}</code></pre><p>デフォルトの webpack の設定についてもう少し見たい場合は <a href="https://github.com/nuxt/nuxt/tree/2.x-dev/packages/webpack/src/config">webpack ディレクトリ</a>を参照してください。</section><section class="level3"aria-labelledby="extend-での-loaders"><h3 id="extend-での-loaders">extend での loaders</h3><p><code>loaders</code> は <a href="#loaders">build.loaders</a> と同じオブジェクト構造を持っているため、<code>extend</code> 内部の loaders のオプションを変えることができます。<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    extend(config, { isClient, loaders: { vue } }) {
      // クライアントのバンドルの webpack 設定のみを拡張する
      if (isClient) {
        vue.transformAssetUrls.video = ['src', 'poster']
      }
    }
  }
}</code></pre></section></section><section class="level2"aria-labelledby="extractcss"><h2 id="extractcss">extractCSS</h2><blockquote><p>Vue サーバーサイドレンダリング<a href="https://v2.ssr.vuejs.org/guide/css.html">ガイドライン</a>を使って共通の CSS を抽出できるようにします。</blockquote><ul><li>型: <code>Boolean</code> または <code>Object</code><li>デフォルト: <code>false</code></ul><p>内部で <a href="https://github.com/faceyspacey/extract-css-chunks-webpack-plugin/"><code>extract-css-chunks-webpack-plugin</code></a> が使われ、全ての CSS は別々のファイルに、通常はコンポーネントごとに 1 つ抽出されます。これは CSS と JavaScript を別々にキャッシュすることを可能にし、多くのグローバルまたは共通 CSS が存在する場合には試してみる価値があります。<p>例 (<code>nuxt.config.js</code>)：<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">extractCSS</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// またｈ</span>
    <span class="token literal-property property">extractCSS</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">ignoreOrder</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><section class="level4"aria-labelledby="info-1"><h4 id="info-1">Info</h4><p><strong>警告:</strong> Vue 2.5.18 以前では、このオプションを使用したときに重要な CSS のインポートが削除されるバグがありました。<p>全ての CSS を 1 つのファイルに抽出したい場合があります。このための回避策があります：</section><section class="level4"aria-labelledby="warning-1"><h4 id="warning-1">Warning</h4><p>全てのファイルを 1 つのファイルに抽出することはおすすめしません。複数の CSS ファイルに抽出する方が、キャッシングとプリロードの分離には適しています。また、必要なリソースのみをダウンロードして解決することによって、ページのパフォーマンスを向上させることもできます。<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">extractCSS</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">styles</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'styles'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(css|vue)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">enforce</span><span class="token operator">:</span> <span class="token boolean">true</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section></section><section class="level2"aria-labelledby="filenames"><h2 id="filenames">filenames</h2><blockquote><p>バンドルのファイル名をカスタマイズします。</blockquote><ul><li><p>型: <code>Object</code><li><p>デフォルト:<pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token function-variable function">app</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isDev<span class="token punctuation">,</span> isModern <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> isDev <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[name]</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>isModern <span class="token operator">?</span> <span class="token string">'.modern'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.js</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[contenthash:7]</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>isModern <span class="token operator">?</span> <span class="token string">'.modern'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token function-variable function">chunk</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isDev<span class="token punctuation">,</span> isModern <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> isDev <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[name]</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>isModern <span class="token operator">?</span> <span class="token string">'.modern'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.js</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[contenthash:7]</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>isModern <span class="token operator">?</span> <span class="token string">'.modern'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token function-variable function">css</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isDev <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> isDev <span class="token operator">?</span> <span class="token string">'[name].css'</span> <span class="token operator">:</span> <span class="token string">'css/[contenthash:7].css'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">img</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isDev <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> isDev <span class="token operator">?</span> <span class="token string">'[path][name].[ext]'</span> <span class="token operator">:</span> <span class="token string">'img/[name].[contenthash:7].[ext]'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">font</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isDev <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> isDev <span class="token operator">?</span> <span class="token string">'[path][name].[ext]'</span> <span class="token operator">:</span> <span class="token string">'fonts/[name].[contenthash:7].[ext]'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">video</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isDev <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> isDev <span class="token operator">?</span> <span class="token string">'[path][name].[ext]'</span> <span class="token operator">:</span> <span class="token string">'videos/[name].[contenthash:7].[ext]'</span>
<span class="token punctuation">}</span></code></pre></ul><p>この例ではチャンク名を数値の id に変更します：<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    filenames: {
      chunk: ({ isDev }) => (isDev ? '[name].js' : '[id].[contenthash].js')
    }
  }
}</code></pre><p>manifest の使い方をより理解するためにこの <a href="https://webpack.js.org/guides/code-splitting/">webpack ドキュメント</a>を参照してください。<section class="level4"aria-labelledby="warning-2"><h4 id="warning-2">Warning</h4><p>ハッシュ化されていないベースのファイル名を本番環境で使用する場合、ほとんどのブラウザはアセットをキャッシュし、最初のロード時には変更を検出しないので注意してください。</section></section><section class="level2"aria-labelledby="friendlyerrors"><h2 id="friendlyerrors">friendlyErrors</h2><ul><li>型: <code>Boolean</code><li>デフォルト: <code>true</code> (上書きが有効）</ul><p><a href="https://github.com/nuxt/friendly-errors-webpack-plugin">FriendlyErrorsWebpackPlugin</a> を使って上書きを有効にするか無効にするかを設定します。</section><section class="level2"aria-labelledby="hardsource"><h2 id="hardsource">hardSource</h2><ul><li>型: <code>Boolean</code><li>デフォルト: <code>false</code><li>⚠️ 実験的機能</ul><p>キャッシュを改善するために <a href="https://github.com/mzgoddard/hard-source-webpack-plugin">HardSourceWebpackPlugin</a> を有効にします。</section><section class="level2"aria-labelledby="hotmiddleware"><h2 id="hotmiddleware">hotMiddleware</h2><ul><li>型: <code>Object</code></ul><p>利用できるオプションは <a href="https://github.com/glenjamin/webpack-hot-middleware">webpack-hot-middleware</a> を参照してください。</section><section class="level2"aria-labelledby="htmlminify"><h2 id="htmlminify">html.minify</h2><ul><li>型: <code>Object</code><li>デフォルト:</ul><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token literal-property property">collapseBooleanAttributes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">decodeEntities</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">minifyCSS</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">minifyJS</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">processConditionalComments</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">removeEmptyAttributes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">removeRedundantAttributes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">trimCustomFragments</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">useShortDoctype</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span></code></pre><p><strong>注意:</strong> <code>html.minify</code> に変更を加えても、それらはデフォルトとマージされません！<p>ビルドプロセス中に作成された HTML ファイルを最小化するために使用される <a href="https://github.com/kangax/html-minifier">html-minifier</a> プラグインの設定（<em>すべてのモード</em> に適用されます）。</section><section class="level2"aria-labelledby="indicator"><h2 id="indicator">indicator</h2><blockquote><p>開発モードにおいて hot module replacement のビルドインジケータを表示する（<code>v2.8.0</code> 以上から利用可能）</blockquote><ul><li>型: <code>Boolean</code><li>デフォルト: <code>true</code></ul><figure><img src="https://user-images.githubusercontent.com/5158436/58500509-93ba0f80-8197-11e9-8524-e115c6d32571.gif"alt="nuxt-build-indicator"><figcaption aria-hidden="true">nuxt-build-indicator</figcaption></figure></section><section class="level2"aria-labelledby="loaders"><h2 id="loaders">loaders</h2><blockquote><p>Nuxt に統合された webpack loaders のカスタマイズオプション</blockquote><ul><li>型: <code>Object</code><li>デフォルト:</ul><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token literal-property property">file</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">fontUrl</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">1000</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imgUrl</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">1000</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">pugPlain</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">vue</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">transformAssetUrls</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">video</span><span class="token operator">:</span> <span class="token string">'src'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">source</span><span class="token operator">:</span> <span class="token string">'src'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">object</span><span class="token operator">:</span> <span class="token string">'src'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">embed</span><span class="token operator">:</span> <span class="token string">'src'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">cssModules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">localIdentName</span><span class="token operator">:</span> <span class="token string">'[local]_[hash:base64:5]'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">less</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">sass</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">indentedSyntax</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">scss</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">stylus</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">vueStyle</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><blockquote><p>注意: <code>nuxt.config.js</code> の設定で指定するだけでなく、<a href="#extend">build.extend</a> でも設定を変更することができます</blockquote><section class="level3"aria-labelledby="loadersfile"><h3 id="loadersfile">loaders.file</h3><blockquote><p>詳細は <a href="https://github.com/webpack-contrib/file-loader#options">file-loader オプション</a>を参照してください。</blockquote></section><section class="level3"aria-labelledby="loadersfonturl-と-loadersimgurl"><h3 id="loadersfonturl-と-loadersimgurl">loaders.fontUrl と loaders.imgUrl</h3><blockquote><p>詳細は <a href="https://github.com/webpack-contrib/url-loader#options">url-loader オプション</a>を参照してください。</blockquote></section><section class="level3"aria-labelledby="loaderspugplain"><h3 id="loaderspugplain">loaders.pugPlain</h3><blockquote><p>詳細は <a href="https://github.com/yyx990803/pug-plain-loader">pug-plain-loader</a> または <a href="https://pugjs.org/api/reference.html#options">Pug compiler オプション</a>を参照してください。</blockquote></section><section class="level3"aria-labelledby="loadersvue"><h3 id="loadersvue">loaders.vue</h3><blockquote><p>詳細は <a href="https://vue-loader.vuejs.org/options.html">vue-loader オプション</a> を参照してください。</blockquote></section><section class="level3"aria-labelledby="loaderscss-と-loaderscssmodules"><h3 id="loaderscss-と-loaderscssmodules">loaders.css と loaders.cssModules</h3><blockquote><p>詳細は <a href="https://github.com/webpack-contrib/css-loader#options">css-loader オプション</a>を参照してください。注意: cssModules は <a href="https://vue-loader.vuejs.org/guide/css-modules.html#css-modules">CSS Modules</a>を使うための loader オプションです。</blockquote></section><section class="level3"aria-labelledby="loadersless"><h3 id="loadersless">loaders.less</h3><blockquote><p>Less specific オプションは <code>loaders.less</code> を介して <code>less-loader</code> に渡すことができます。dash-case で利用可能な全てのオプションについては <a href="http://lesscss.org/usage/#command-line-usage-options">Less のドキュメント</a>を参照してください。</blockquote></section><section class="level3"aria-labelledby="loaderssass-と-loadersscss"><h3 id="loaderssass-と-loadersscss">loaders.sass と loaders.scss</h3><blockquote><p>利用可能な Sass のオプションについては <a href="https://github.com/sass/dart-sass#javascript-api">Sass ドキュメント</a>を参照してください。注意: <code>loaders.sass</code> は <a href="http://sass-lang.com/documentation/file.INDENTED_SYNTAX.html">Sass Indented Syntax</a>用です。</blockquote></section><section class="level3"aria-labelledby="loadersvuestyle"><h3 id="loadersvuestyle">loaders.vueStyle</h3><blockquote><p>詳細は <a href="https://github.com/vuejs/vue-style-loader#options">vue-style-loader オプション</a>を参照してください。</blockquote></section></section><section class="level2"aria-labelledby="optimization"><h2 id="optimization">optimization</h2><ul><li><p>型: <code>Object</code><li><p>デフォルト:<pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token literal-property property">minimize</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// terser-webpack-plugin</span>
    <span class="token comment">// optimize-css-assets-webpack-plugin</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">automaticNameDelimiter</span><span class="token operator">:</span> <span class="token string">'.'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token keyword nil">undefined</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></ul><p><code>dev</code> または <code>analyze</code> モードでは <code>splitChunks.name</code> のデフォルト値は <code>true</code> です。<p>カスタマイズされたプラグインの配列に <code>minimizer</code> を設定するか、<code>minimize</code> を <code>false</code> にすることで全ての minimizer を無効にできます。（<code>minimize</code> はデフォルトで開発用に無効になっています）<p><a href="https://webpack.js.org/configuration/optimization">Webpack の最適化</a>を参照してください。</section><section class="level2"aria-labelledby="optimizecss"><h2 id="optimizecss">optimizeCSS</h2><ul><li>型: <code>Object</code> または <code>Boolean</code><li>デフォルト:<ul><li><code>false</code><li>extractCSS が有効になるときは <code>{}</code></ul></ul><p>OptimizeCSSAssets プラグインのオプションです。<p><a href="https://github.com/NMFR/optimize-css-assets-webpack-plugin">NMFR/optimize-css-assets-webpack-plugin</a> を参照してください。</section><section class="level2"aria-labelledby="parallel"><h2 id="parallel">parallel</h2><ul><li>型: <code>Boolean</code><li>デフォルト: <code>false</code><li>⚠️ 実験的機能</ul><blockquote><p>webpack のビルドで <a href="https://github.com/webpack-contrib/thread-loader#thread-loader">thread-loader</a> を有効にする</blockquote></section><section class="level2"aria-labelledby="plugins"><h2 id="plugins">plugins</h2><blockquote><p>webpack プラグインを追加する</blockquote><ul><li>型: <code>Array</code><li>デフォルト: <code>[]</code></ul><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">import webpack from 'webpack'
import { version } from './package.json'
export default {
  build: {
    plugins: [
      new webpack.DefinePlugin({
        'process.VERSION': version
      })
    ]
  }
}</code></pre></section><section class="level2"aria-labelledby="postcss"><h2 id="postcss">postcss</h2><blockquote><p><a href="https://github.com/postcss/postcss-loader#usage">PostCSS Loader</a> プラグインをカスタマイズします</blockquote><ul><li><p>型: <code>Array</code>（レガシーな場合はデフォルトで上書きします）、<code>Object</code>（推奨）、<code>Function</code> または <code>Boolean</code><p><strong>注意:</strong> Nuxt は <a href="https://github.com/csstools/postcss-preset-env">PostCSS Preset Env</a>を適用しました。デフォルトでは、<a href="https://cssdb.org/">Stage 2 機能</a> と <a href="https://github.com/postcss/autoprefixer">Autoprefixer</a>が有効になっていますが、<code>build.postcss.preset</code> を使って設定できます。<li><p>デフォルト:<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">{
  plugins: {
    'postcss-import': {},
    'postcss-url': {},
    'postcss-preset-env': this.preset,
    'cssnano': { preset: 'default' } // 開発モードでは無効化されています
  },
  order: 'presetEnvAndCssnanoLast',
  preset: {
    stage: 2
  }
}</code></pre></ul><p>カスタムプラグイン設定は、デフォルトのプラグイン設定にマージされます (<code>Object</code> のかわりに <code>Array</code> を使っている場合を除きます）。<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    postcss: {
      plugins: {
        // `postcss-url` の無効化
        'postcss-url': false,
        // プラグインの追加
        'postcss-nested': {},
        'postcss-responsive-type': {},
        'postcss-hexrgba': {}
      },
      preset: {
        autoprefixer: {
          grid: true
        }
      }
    }
  }
}</code></pre><p>postcss の設定が <code>Object</code> の場合、プラグインの順番の定義に <code>order</code> が利用できます：<ul><li>型: <code>Array</code> (順序付けされたプラグイン名）、<code>String</code> （順序プリセット名）、 <code>Function</code><li>デフォルト: <code>cssnanoLast</code>（最後に <code>cssnano</code> を配置する）</ul><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    postcss: {
      // プリセット名
      order: 'cssnanoLast',
      // 順序付けされたプラグイン名
      order: ['postcss-import', 'postcss-preset-env', 'cssnano']
      // プラグインの順番を算出するための関数
      order: (names, presets) => presets.cssnanoLast(names)
    }
  }
}</code></pre><section class="level3"aria-labelledby="postcss-plugins-と-nuxtjstailwindcss"><h3 id="postcss-plugins-と-nuxtjstailwindcss">postcss plugins と @nuxtjs/tailwindcss</h3><p>@nuxtjs/tailwindcss の設定で postcss プラグイン（例えば postcss-pxtorem）を適用したい場合、順番を変更して最初に tailwindcss を読み込む必要があります。<p><strong>この設定は nuxt-purgecss には影響しません。</strong><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">import { join } from 'path'

export default {
  // ...
  build: {
    postcss: {
      plugins: {
        tailwindcss: join(__dirname, 'tailwind.config.js'),
        'postcss-pxtorem': {
          propList: ['*', '!border*']
        }
      }
    }
  }
}</code></pre></section></section><section class="level2"aria-labelledby="profile"><h2 id="profile">profile</h2><ul><li>型: <code>Boolean</code><li>デフォルト: コマンドライン引数 <code>--profile</code> で有効にします</ul><blockquote><p><a href="https://github.com/nuxt/webpackbar#profile">WebpackBar</a> の profiler で有効にします</blockquote></section><section class="level2"aria-labelledby="publicpath"><h2 id="publicpath">publicPath</h2><blockquote><p>Nuxt ではパフォーマンスの最大化のため dist ディレクトリ内のファイルを CDN にアップロードすることも可能です。そのためにはまず <code>publicPath</code> に CDN を指定します。</blockquote><ul><li>型: <code>String</code><li>デフォルト: <code>'/_nuxt/'</code></ul><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    publicPath: 'https://cdn.nuxtjs.org'
  }
}</code></pre><p>設定後、<code>nuxt build</code> を実行する際に <code>.nuxt/dist/client</code> ディレクトリの内容を CDN にアップロードしてください。<p>Nuxt v2.15 以降では、実行時にこのプロパティの値を変更すると、既にビルドされているアプリケーションの設定が上書きされます。</section><section class="level2"aria-labelledby="quiet"><h2 id="quiet">quiet</h2><blockquote><p>ビルド出力ログの大半を抑制します</blockquote><ul><li>型: <code>Boolean</code><li>デフォルト: <a href="https://github.com/blindmedia/std-env">std-env</a>によって <code>CI</code> または <code>test</code> 環境で検出された際に有効になります</ul></section><section class="level2"aria-labelledby="splitchunks"><h2 id="splitchunks">splitChunks</h2><ul><li><p>型: <code>Object</code><li><p>デフォルト:<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    splitChunks: {
      layouts: false,
      pages: true,
      commons: true
    }
  }
}</code></pre></ul><p><code>layout</code>、<code>pages</code> や <code>commons</code> で分割したコードの場合（共通ライブラリ:vue|vue-loader|vue-router|vuex...）</section><section class="level2"aria-labelledby="ssr"><h2 id="ssr">ssr</h2><blockquote><p>SSR レンダラー用の webpack バンドルを作成します。</blockquote><ul><li>型: <code>Boolean</code><li>デフォルト: ユニバーサルモードでのデフォルト値は <code>true</code>、spa モードでのデフォルト値は <code>false</code></ul><p>このオプションは、指定されていない場合は <code>mode</code> 値に基づいて自動的に設定されます。</section><section class="level2"aria-labelledby="standalone"><h2 id="standalone">standalone</h2><blockquote><p>サーバービルドにおいて依存関係をインラインでバンドル（アドバンスド）</blockquote><ul><li>型: <code>Boolean</code><li>デフォルト: <code>false</code></ul><p>このモードは通常サーバービルドで外部として保存される <code>node_modules</code> をバンドルします（<a href="https://github.com/nuxt/nuxt/pull/4661">詳細</a>）<section class="level4"aria-labelledby="warning-3"><h4 id="warning-3">Warning</h4><p>ランタイムの依存関係（モジュール、 <code>nuxt.config</code> 、サーバーミドルウェア、静的ディレクトリ）はバンドルされていません。この機能は、server-bundle での <a href="https://webpack.js.org/configuration/externals/">webpack-externals</a> の使用のみを無効にします。</section><section class="level4"aria-labelledby="info-2"><h4 id="info-2">Info</h4><p>コマンド <code>yarnnuxt build --standalone</code> を使用して、コマンドラインでこのモードを有効にすることができます。（ <code>yarn</code> を使用していない場合は、 <code>npx</code> を使用してコマンドを実行できます）</section></section><section class="level2"aria-labelledby="styleresources"><h2 id="styleresources">styleResources</h2><ul><li>型: <code>Object</code><li>デフォルト: <code>{}</code></ul><section class="level4"aria-labelledby="warning-4"><h4 id="warning-4">Warning</h4><p>このプロパティは非推奨です。パフォーマンスおよび開発体験の向上のために、代わりに <a href="https://github.com/nuxt-community/style-resources-module/">style-resources-module</a> を使ってください。<p>毎回インポートせずに変数やミックスインをページに挿入する必要がある場合に便利です。<p>Nuxt はこの動作を実現するために <a href="https://github.com/yenshih/style-resources-loader">https://github.com/yenshih/style-resources-loader</a> を使用しています。<p>特定のプリプロセッサ（<code>less</code>、<code>sass</code>、<code>scss</code> または <code>stylus</code>）に含めるパターン/パスを指定する必要があります：<p>ここではパスのエイリアス（<code>~</code> や <code>@</code>）を使用することができないため、相対パスまたは絶対パスを使用する必要があります。<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">{
  build: {
    styleResources: {
      scss: './assets/variables.scss',
      less: './assets/*.less',
      // sass: ...,
      // scss: ...
      options: {
        // https://github.com/yenshih/style-resources-loader#options の
        // `patterns` プロパティ以外を参照してください
      }
    }
  }
}</code></pre></section></section><section class="level2"aria-labelledby="templates"><h2 id="templates">templates</h2><blockquote><p>Nuxt では設定に基づいてレンダリングされる独自のテンプレートを提供できます。この機能はモジュールを使う場合にとりわけ便利です。</blockquote><ul><li>型: <code>Array</code></ul><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    templates: [
      {
        src: '~/modules/support/plugin.js', // `src` は絶対パスもしくは相対パスで指定してください
        dst: 'support.js', // `dst` は `.nuxt` ディレクトリからみた相対パスです
        options: {
          // Options は `options` キーとしてテンプレートに提供されます
          live_chat: false
        }
      }
    ]
  }
}</code></pre><p>テンプレートは <a href="https://lodash.com/docs/#template"><code>lodash.template</code></a> を使ってレンダリングされます。<a href="https://github.com/learn-co-students/javascript-lodash-templates-lab-v-000">こちら</a>でより詳細な使い方を知ることができます。</section><section class="level2"aria-labelledby="terser"><h2 id="terser">terser</h2><ul><li>型: <code>Object</code> または <code>Boolean</code><li>デフォルト:</ul><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">{
  parallel: true,
  cache: false,
  sourceMap: false,
  extractComments: {
    filename: 'LICENSES'
  },
  terserOptions: {
    output: {
      comments: /^\**!|@preserve|@license|@cc_on/
    }
  }
}</code></pre><p>Terser プラグインのオプションです。<code>false</code> を設定するとこのプラグインは無効になります。<p><code>sourceMap</code> を有効にすると、webpack の <code>config.devtool</code> が <code>source-map</code> に設定されている場合、各出力ファイルの最後に <code>//# sourceMappingURL</code> というリンクコメントが残ります。<p><a href="https://github.com/webpack-contrib/terser-webpack-plugin">webpack-contrib/terser-webpack-plugin</a>を参照してください</section><section class="level2"aria-labelledby="transpile"><h2 id="transpile">transpile</h2><ul><li>型: <code>Array&#x3C;String | RegExp | Function></code><li>デフォルト: <code>[]</code></ul><p>特定の依存関係を Babel でトランスパイルしたい場合、<code>build.transpile</code> を追加することができます。transpile の項目はパッケージ名や依存関係のファイル名にマッチする文字列または正規表現オブジェクトになります。<p><code>v2.9.0</code> からは条件付きでトランスパイルするために関数を使うこともできます。関数はオブジェクト（<code>{ isDev, isServer, isClient, isModern, isLegacy }</code>）を受け取ります：<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">{
  build: {
    transpile: [({ isLegacy }) => isLegacy &#x26;&#x26; 'ky']
  }
}</code></pre><p>この例では、Nuxt が<a href="./configuration-glossary/configuration-modern">modern mode</a>でない場合、<code>ky</code>は Babel によってトランスパイルされます。</section><section class="level2"aria-labelledby="vueloader"><h2 id="vueloader">vueLoader</h2><blockquote><p>注意: この設定は Nuxt 2.0 から削除されました。代わりに <a href="#loaders"><code>build.loaders.vue</code></a> を使ってください。</blockquote><ul><li><p>型: <code>Object</code><li><p>デフォルト:<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">{
  productionMode: !this.options.dev,
  transformAssetUrls: {
    video: 'src',
    source: 'src',
    object: 'src',
    embed: 'src'
  }
}</code></pre></ul><blockquote><p><a href="https://vue-loader.vuejs.org/options.html">Vue Loader オプション</a>を指定します。</blockquote></section><section class="level2"aria-labelledby="watch"><h2 id="watch">watch</h2><blockquote><p>監視や変更後に再生成を行うカスタムファイルを提供することができます。この機能は<a href="./directory-structure/modules">モジュール</a>を使用する場合にとりわけ便利です。</blockquote><ul><li>型: <code>Array&#x3C;String></code></ul><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    watch: ['~/.nuxt/support.js']
  }
}</code></pre></section><section class="level2"aria-labelledby="followsymlinks"><h2 id="followsymlinks">followSymlinks</h2><blockquote><p>デフォルトでは、ビルドプロセスはシンボリックリンク内のファイルをスキャンしません。この boolean 値はスキャンするかどうかを含むため、followSymlinks を true に設定すると例えば "pages" フォルダなどでフォルダ内のシンボリックリンクを使うことができます。</blockquote><ul><li>型: <code>Boolean</code></ul><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    followSymlinks: true
  }
}</code></pre><p><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>