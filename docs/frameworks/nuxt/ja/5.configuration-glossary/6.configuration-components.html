<!doctype html><html lang="ja"><meta charset="utf-8"><title>components プロパティ</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="navigation.title"content="components"><meta name="description"content="Nuxt v2.13 以上ではコンポーネントのスキャンと自動インポートができます。"><meta name="menu"content="components"><meta name="category"content="configuration-glossary"><link rel="stylesheet"type="text/css"href="../../../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="components-プロパティ"><h1 id="components-プロパティ">components プロパティ</h1><p>Nuxt v2.13 以上では @nuxt/components モジュールを使ってコンポーネントのスキャンと自動インポートができます。<hr><p>alert この機能は、Nuxt 2.10 - 2.12で使用することができます。手動でインストールして、<code>@nuxt/components</code> を <code>nuxt.config</code> 内の <code>buildModules</code> に追加するだけです。<ul><li>型: <code>Boolean</code> または <code>Array</code><li>デフォルト: <code>false</code></ul><p><code>true</code> またはオブジェクトオプションを設定したとき、Nuxt は <a href="https://github.com/nuxt/components">@nuxt/components</a> を組み込んでそして pages、layouts （および他のコンポーネント）内でコンポーネントを使用する際には、自動的にインポートされます。<section class="level4"aria-labelledby="info"><h4 id="info">Info</h4><p>詳しい使い方は、<a href="./features/component-discovery">自動検索の有効 ドキュメント</a>を参照してください。</section><section class="level2"aria-labelledby="設定"><h2 id="設定">設定</h2><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  // これは自動的に、`~/components` からコンポーネントを読み込みます
  components: true
}</code></pre><p><code>components: true</code> を設定すると、デフォルトでは、<code>~/components</code> ディレクトリが組み込まれます。<p>しかしながら、スキャンするディレクトリを追加することで、自動検測の動作をカスタマイズすることができます：<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  components: [
    // { path: '~/components' } に相当
    '~/components',
    { path: '~/components/other', extensions: ['vue'] }
  ]
}</code></pre><section class="level4"aria-labelledby="パス"><h4 id="パス">パス</h4><p>各項目は、文字列またはオブジェクトのいずれかです。文字列の値は、<code>{ path }</code>に対するショートカットです。</section><section class="level4"aria-labelledby="info-1"><h4 id="info-1">Info</h4><p>ディレクトリの順番や重複を心配する必要はありません。コンポーネントモジュールが処理してくれます。(各ファイルは最長のパスで一度だけ照合されます)</section><section class="level3"aria-labelledby="path"><h3 id="path">path</h3><ul><li>必須項目<li>型: <code>String</code></ul><p>コンポーネントを含むディレクトリへのパス（絶対または相対）。<p>Nuxt のエイリアス (<code>~</code> や <code>@</code>) を使ってプロジェクト内のディレクトリを参照したり、npm パッケージのパスを直接使用することができます（プロジェクト内で <code>require</code> を使用するのと同様です）。</section><section class="level3"aria-labelledby="extensions"><h3 id="extensions">extensions</h3><ul><li>型: <code>Array&#x3C;string></code><li>デフォルト:<ul><li>Nuxt ビルダー (<code>builder.supportedExtensions</code>) によって拡張子がサポート済み<li>デフォルトは拡張子 <code>['vue', 'js']</code> がサポート、 または <code>['vue', 'js', 'ts', 'tsx']</code> は環境次第</ul></ul><p><strong>例:</strong> 複数ファイルコンポーネント構造をサポート<p>SFC を <code>.js</code>、<code>.vue</code>、<code>.css</code> に分割したい場合は、<code>.vue</code> ファイルのみをスキャンすることも可能です：<pre class="language-text"><code class="language-text">| components
---| componentC
| componentC.vue
| componentC.js
| componentC.scss</code></pre><pre class="language-js"><code class="language-js"><span class="token comment">// nuxt.config.js</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'~/components'</span><span class="token punctuation">,</span> <span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="pattern"><h3 id="pattern">pattern</h3><ul><li>型: <code>string</code> (<a href="https://github.com/isaacs/node-glob#glob-primer">glob パターン</a>)<li>デフォルト: <code>**/*.${extensions.join(',')}</code></ul><p>指定された <code>path</code> において、このパターンにマッチするファイルのみが含まれます。</section><section class="level3"aria-labelledby="ignore"><h3 id="ignore">ignore</h3><ul><li>型: <code>Array</code><li>要素: <code>string</code> (<a href="https://github.com/isaacs/node-glob#glob-primer">glob パターン</a>)<li>デフォルト: <code>[]</code></ul><p>指定された <code>path</code> 内のファイルを除外するパターン</section><section class="level3"aria-labelledby="prefix"><h3 id="prefix">prefix</h3><ul><li>型: <code>String</code><li>デフォルト: <code>''</code> (プリフィックスなし)</ul><p>マッチするすべてのコンポーネントのプリフィックス<p>以下の例では、<code>awesome/</code> ディレクトリ内のコンポーネントの名前に、<code>awesome-</code> / <code>Awesome</code>というプレフィックスを追加しています。<pre class="language-js"><code class="language-js"><span class="token comment">// nuxt.config.js</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'~/components'</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'~/components/awesome/'</span><span class="token punctuation">,</span> <span class="token literal-property property">prefix</span><span class="token operator">:</span> <span class="token string">'awesome'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><pre class="language-bash"><code class="language-bash"><span class="token operator">|</span> components/
---<span class="token operator">|</span> awesome/
<span class="token operator">|</span> Button.vue
---<span class="token operator">|</span> Button.vue</code></pre><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>AwesomeButton</span><span class="token punctuation">></span></span>Click on me 🤘<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>AwesomeButton</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span><span class="token punctuation">></span></span>Click on me<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span></code></pre></section><section class="level3"aria-labelledby="pathprefix"><h3 id="pathprefix">pathPrefix</h3><ul><li>型: <code>Boolean</code><li>デフォルト: <code>true</code></ul><p>コンポーネント名の前に、そのパスを付加する。</section><section class="level3"aria-labelledby="watch"><h3 id="watch">watch</h3><ul><li>型: <code>Boolean</code><li>デフォルト: <code>true</code></ul><p>指定された <code>path</code> を監視して、ファイルの追加や削除などの変更をする。</section><section class="level3"aria-labelledby="transpile"><h3 id="transpile">transpile</h3><ul><li>型: <code>Boolean</code><li>デフォルト: <code>'auto'</code></ul><p>指定された <code>path</code> を <a href="./configuration-glossary/configuration-build#transpile"><code>build.transpile</code></a> を使ってトランスパイルする。デフォルト (<code>'auto'</code>) では、<code>node_modules/</code> が <code>path</code> にある場合、<code>transpile: true</code> を設定します。</section><section class="level3"aria-labelledby="level"><h3 id="level">level</h3><ul><li>型: <code>Number</code><li>デフォルト: <code>0</code></ul><p>レベルは、2つの異なるディレクトリにある同じ名前のコンポーネントの上書きを許可するために使用されます。これは、ユーザーが自分のコンポーネントを上書きできるようにしたいライブラリの作成者や、カスタムテーマの作成者にとって便利です。<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'~/components'</span><span class="token punctuation">,</span> <span class="token comment">// デフォルトレベルは 0</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'my-theme/components'</span><span class="token punctuation">,</span> <span class="token literal-property property">level</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><p><code>~/components</code>にあるコンポーネントは、<code>my-theme/components</code> にある同じ名前のコンポーネントを上書きします。値の小さいものが優先されます。</section></section><section class="level2"aria-labelledby="高度"><h2 id="高度">高度</h2><section class="level3"aria-labelledby="コンポーネントの上書き"><h3 id="コンポーネントの上書き">コンポーネントの上書き</h3><p><a href="#level">level</a> オプションを使ってコンポーネントを上書きする方法があります。これは、モジュールやテーマの作者にとって非常に便利です。<p>以下の構造を考え：<pre class="language-bash"><code class="language-bash"><span class="token operator">|</span> node_modules/
---<span class="token operator">|</span> my-theme/
<span class="token operator">|</span> components/
<span class="token operator">|</span> Header.vue
<span class="token operator">|</span> components/
---<span class="token operator">|</span> Header.vue</code></pre><p>そして、<code>nuxt.config</code> で定義すると：<pre class="language-js"><code class="language-js"><span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">'~/components'</span><span class="token punctuation">,</span> <span class="token comment">// デフォルトレベルは 0</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'node_modules/my-theme/components'</span><span class="token punctuation">,</span> <span class="token literal-property property">level</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span></code></pre><p><code>components/Header.vue</code> は、最下層が優先されるので、テーマコンポーネントを上書きします。</section><section class="level3"aria-labelledby="ライブラリ作者"><h3 id="ライブラリ作者">ライブラリ作者</h3><p>tree-shaking とコンポーネントの自動登録機能を備えた Vue コンポーネントライブラリの作成が超簡単になりました✨。<p>このモジュールは、<code>components:dirs</code> という名前のフックを公開しているので、Nuxtモジュールでのユーザー設定を必要とせずに、ディレクトリリストを簡単に拡張することができます。<p>以下のようなディレクトリ構造を想像してみてください：<pre class="language-bash"><code class="language-bash"><span class="token operator">|</span> node_modules/
---<span class="token operator">|</span> awesome-ui/
<span class="token operator">|</span> components/
<span class="token operator">|</span> Alert.vue
<span class="token operator">|</span> Button.vue
<span class="token operator">|</span> nuxt.js
<span class="token operator">|</span> pages/
---<span class="token operator">|</span> index.vue
<span class="token operator">|</span> nuxt.config.js</code></pre><p>それから、<code>awesome-ui/nuxt.js</code> で、<code>components:dir</code> というフックを使うことができます：<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> join <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'path'</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">nuxt</span><span class="token punctuation">.</span><span class="token method function property-access">hook</span><span class="token punctuation">(</span><span class="token string">'components:dirs'</span><span class="token punctuation">,</span> <span class="token parameter">dirs</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// ./components の dir をリストに追加する</span>
    dirs<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'components'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">prefix</span><span class="token operator">:</span> <span class="token string">'awesome'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><p>これで完成です。これで、あなたのプロジェクトでは、<code>nuxt.config.js</code> で ui ライブラリを Nuxt モジュールとしてインポートすることができます：<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">buildModules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@nuxt/components'</span><span class="token punctuation">,</span> <span class="token string">'awesome-ui/nuxt'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><p>そして、モジュールのコンポーネント（プレフィックスは <code>awesome-</code> ）を直接使用して、私たちの <code>pages/index.vue</code> を作成します：<pre class="language-vue"><code class="language-vue">&#x3C;template>
  &#x3C;div>
    My &#x3C;AwesomeButton>UI button&#x3C;/AwesomeButton>!
    &#x3C;awesome-alert>Here's an alert!&#x3C;/awesome-alert>
  &#x3C;/div>
&#x3C;/template></code></pre><p>これは、使用されている場合にのみ自動的にコンポーネントをインポートし、<code>node_modules/awesome-ui/components/</code> でコンポーネントを更新する際に HMR をサポートします。<p><strong>次</strong>: 作成した<code>awesome-ui</code>モジュールを <a href="https://www.npmjs.com">npm</a> に公開して、他の Nuxters と共有しましょう✨。 <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section></section>