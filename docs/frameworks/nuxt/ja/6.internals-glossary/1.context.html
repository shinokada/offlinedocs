<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>コンテキスト</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="context は、Nuxt から Vue コンポーネントに追加のオブジェクト/パラメータを提供し、特別な Nuxt ライフサイクル内で使用できます。">
    <meta name="category" content="internals-glossary">
    <link rel="stylesheet" href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css">
  </head>
  <body>
    <section id="コンテキスト" class="level1">
      <h1>コンテキスト</h1>
      <p><code>context</code> は、Nuxt から Vue コンポーネントに追加のオブジェクト/パラメータを提供し、<a href="./features/data-fetching#async-data"><code>asyncData</code></a>、<a href="./features/data-fetching"><code>fetch</code></a>、<a href="./directory-structure/plugins"><code>plugins</code></a>、<a href="./directory-structure/middleware#router-middleware"><code>middleware</code></a> そして <a href="./directory-structure/store#the-nuxtserverinit-action"><code>nuxtServerInit</code></a> のような特別な Nuxt ライフサイクル内で使用できます。</p>
      <hr>
      <blockquote>
        <p><em>注意: ここで言う "コンテキスト" と、<a href="https://vuex.vuejs.org/guide/actions.html"><code>Vuex のアクション</code></a>の中で使用できる <code>context</code> オブジェクトを混同しないでください。2 つは無関係です。</em></p>
      </blockquote>
      <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ユニバーサルなキー</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>
    app<span class="token punctuation">,</span>
    store<span class="token punctuation">,</span>
    route<span class="token punctuation">,</span>
    params<span class="token punctuation">,</span>
    query<span class="token punctuation">,</span>
    env<span class="token punctuation">,</span>
    isDev<span class="token punctuation">,</span>
    isHMR<span class="token punctuation">,</span>
    redirect<span class="token punctuation">,</span>
    error<span class="token punctuation">,</span>
    $config
  <span class="token punctuation">}</span> <span class="token operator">=</span> context
  <span class="token comment">// サーバーサイド</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token property-access">server</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> beforeNuxtRender <span class="token punctuation">}</span> <span class="token operator">=</span> context
  <span class="token punctuation">}</span>
  <span class="token comment">// クライアントサイド</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token property-access">client</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword module">from</span><span class="token punctuation">,</span> nuxtState <span class="token punctuation">}</span> <span class="token operator">=</span> context
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      <section id="ユニバーサルなキー" class="level2">
        <h2>ユニバーサルなキー</h2>
        <p>これらのキーは、クライアントサイドとサーバーサイドの両方で使用できます。</p>
        <section id="app" class="level3">
          <h3>app</h3>
          <p><code>app</code> (<em>NuxtAppOptions</em>)</p>
          <p>すべてのプラグインを含むルート Vue インスタンスのオプション。たとえば <code>i18n</code> を使用している場合は <code>context.app.i18n</code> で <code>$i18n</code> にアクセスできます。</p>
        </section>
        <section id="store" class="level3">
          <h3>store</h3>
          <p><code>store</code> (<a href="https://vuex.vuejs.org/api/#vuex-store-instance-properties"><em>Vuex Store</em></a>)</p>
          <p>Vuex の Store インスタンス。<strong><a href="./directory-structure/store">Vuex ストア</a>が設定されている場合のみ使用できます</strong>。</p>
        </section>
        <section id="route" class="level3">
          <h3>route</h3>
          <p><code>route</code> (<a href="https://v3.router.vuejs.org/ja/api/#the-route-object"><em>Vue Router Route</em></a>)</p>
          <p>Vue Router の route インスタンス。</p>
        </section>
        <section id="params" class="level3">
          <h3>params</h3>
          <p><code>params</code> (<em>Object</em>)</p>
          <p><code>route.params</code> のエイリアス。</p>
        </section>
        <section id="query" class="level3">
          <h3>query</h3>
          <p><code>query</code> (<em>Object</em>)</p>
          <p><code>route.query</code> のエイリアス。</p>
        </section>
        <section id="env" class="level3">
          <h3>env</h3>
          <p><code>env</code> (<em>Object</em>)</p>
          <p><code>nuxt.config.js</code> で設定された環境変数。<a href="./configuration-glossary/configuration-env">env API</a>を参照してください。</p>
        </section>
        <section id="isdev" class="level3">
          <h3>isDev</h3>
          <p><code>isDev</code> (<em>Boolean</em>)</p>
          <p>開発モードであるかどうかを示す真偽値で、本番環境で一部のデータをキャッシュするのに役立ちます。</p>
        </section>
        <section id="ishmr" class="level3">
          <h3>isHMR</h3>
          <p><code>isHMR</code> (<em>Boolean</em>)</p>
          <p>メソッド/ミドルウェアが webpack の hot module replacement から呼び出されたかどうかを示す真偽値（<em>開発モードのクライアントサイドでのみ true</em>）。</p>
        </section>
        <section id="redirect" class="level3">
          <h3>redirect</h3>
          <p><code>redirect</code> (<em>Function</em>)</p>
          <p>ユーザーを別のルートにリダイレクトするには、このメソッドを使用してください。ステータスコードはサーバーサイドで使用され、デフォルトは <code>302</code> です。 <code>redirect([status,] path [, query])</code>。</p>
          <p>例：</p>
          <pre class="language-js{}[]"><code class="language-js{}[]">redirect(302, '/login')
redirect({ name: 'slug', params: { slug: mySlug } })
redirect('https://vuejs.org')</code></pre>
          <p>Location プロパティの詳細については、<a href="https://github.com/vuejs/vue-router/blob/64d60c01920405f0b93e00a401c73868b08ee6e5/types/router.d.ts#L161-L169">Vue Router のドキュメント</a>を参照してください。</p>
          <section id="info" class="level4">
            <h4>Info</h4>
            <p>ハイドレーションエラー（クライアントの内容が、サーバーが返すものと異なってしまう）のため、<a href="./directory-structure/plugins#client-or-server-side-only">クライアントサイド限定の Nuxt プラグイン</a>の中では <code>redirect</code> や <code>error</code> を使用することはできません。</p>
            <p>有効な回避策は、<code>window.onNuxtReady(() => { window.$nuxt.$router.push('/your-route') })</code> を使用することです。</p>
          </section>
        </section>
        <section id="error" class="level3">
          <h3>error</h3>
          <p><code>error</code> (<em>Function</em>)</p>
          <p>エラーページを表示するには、このメソッドを使用してください。例: <code>error(params)</code>。<code>params</code> には <code>statusCode</code> と <code>message</code> プロパティが必要です。</p>
        </section>
        <section id="config" class="level3">
          <h3><code>$config</code></h3>
          <p><code>$config</code> (<em>Object</em>)</p>
          <p>実際の<a href="./configuration-glossary/configuration-runtime-config">ランタイム設定</a>。</p>
        </section>
      </section>
      <section id="サーバーサイドのキー" class="level2">
        <h2>サーバーサイドのキー</h2>
        <p>これらのキーはサーバーサイドでのみ使用できます。</p>
        <section id="req" class="level3">
          <h3>req</h3>
          <p><code>req</code> (<a href="https://nodejs.org/api/http.html#http_class_http_incomingmessage"><em>http.Request</em></a>)</p>
          <p>Node.js サーバーからのリクエスト。Nuxt がミドルウェアとして使われる場合、リクエストオブジェクトは使用しているフレームワークによって異なる可能性があります。<br><strong><code>nuxt generate</code> では使用できません。</strong></p>
        </section>
        <section id="res" class="level3">
          <h3>Res</h3>
          <p><code>res</code> (<a href="https://nodejs.org/api/http.html#http_class_http_serverresponse"><em>http.Response</em></a>)</p>
          <p>Node.js サーバーからのレスポンス。Nuxt がミドルウェアとして使われる場合、レスポンスオブジェクトは使用しているフレームワークによって異なる可能性があります。<br><strong><code>nuxt generate</code> では使用できません。</strong></p>
        </section>
        <section id="beforenuxtrender" class="level3">
          <h3>beforeNuxtRender</h3>
          <p><code>beforeNuxtRender(fn)</code> (<em>Function</em>)</p>
          <p>クライアントサイドでレンダリングされた <code>__NUXT__</code> 変数を更新するには、このメソッドを使用してください。<code>fn</code>（非同期にもできます）は <code>{ Components, nuxtState }</code> で呼び出されます。<a href="https://github.com/nuxt/nuxt.js/blob/cf6b0df45f678c5ac35535d49710c606ab34787d/test/fixtures/basic/pages/special-state.vue">例</a>を参照してください。</p>
        </section>
      </section>
      <section id="クライアントサイドのキー" class="level2">
        <h2>クライアントサイドのキー</h2>
        <p>これらのキーはクライアントサイドでのみ使用できます。</p>
        <section id="from" class="level3">
          <h3>from</h3>
          <p><code>from</code> (<a href="https://v3.router.vuejs.org/ja/api/#the-route-object"><em>Vue Router Route</em></a>)</p>
          <p>遷移元の route。</p>
        </section>
        <section id="nuxtstate" class="level3">
          <h3>nuxtState</h3>
          <p><code>nuxtState</code> <em>(Object)</em></p>
          <p>
            Nuxt の状態。ハイドレーション前のクライアントサイドで Nuxt の状態を取得するために <code>beforeNuxtRender</code> を使うプラグインに便利です。<strong><code>universal</code> モードでのみ使用できます。</strong>
            <span style="float: footnote;"><a href="../index.html#toc">Go to TOC</a></span>
          </p>
        </section>
      </section>
    </section>
  </body>
</html>
