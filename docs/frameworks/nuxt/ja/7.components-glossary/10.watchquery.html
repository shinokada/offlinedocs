<!doctypehtml><html lang="ja"><meta charset="utf-8"><title>watchQuery プロパティ</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="description"content="クエリ文字列を監視し、変更時にコンポーネントメソッドを実行します（asyncData、fetch、validate、layout など）"><meta name="navigation.title"content="WatchQuery Property"><meta name="category"content="components-glossary"><link rel="stylesheet"href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css"><section id="watchquery-プロパティ"class="level1"><h1>watchQuery プロパティ</h1><p>クエリ文字列を監視し、変更時にコンポーネントメソッドを実行します（asyncData、fetch、validate、layout など）<hr><ul><li><strong>型:</strong> <code>Boolean</code> または <code>Array</code> または <code>Function</code> (デフォルト: <code>[]</code>)</ul><p><code>watchQuery</code> キーを設定し、監視するクエリ文字列を設定します。定義した文字列に変更が生じると、全てのコンポーネントメソッド（asyncData、fetch、validate、layout などが呼ばれます。パフォーマンス向上のため、監視はデフォルトで無効になっています。<p>すべてのクエリ文字列に対して監視を設定したい場合は <code>watchQuery: true</code> を設定してください。<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">watchQuery</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'page'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><p>より洗練された監視のために <code>watchQuery(newQuery, oldQuery)</code> 関数を使用することもできます。<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token function">watchQuery</span><span class="token punctuation">(</span><span class="token parameter">newQuery<span class="token punctuation">,</span> oldQuery</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 古いクエリ文字列に `bar` が含まれている場合コンポーネントメソッドのみを実行し、</span>
    <span class="token comment">// そして、新しいクエリ文字列には `foo` が含まれる</span>
    <span class="token keyword control-flow">return</span> newQuery<span class="token punctuation">.</span><span class="token property-access">foo</span> <span class="token operator">&#x26;&#x26;</span> oldQuery<span class="token punctuation">.</span><span class="token property-access">bar</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><section id="warning"class="level4"><h4>Warning</h4><p><strong>警告</strong>: v2.12 で導入された新しい <code>fetch</code> フックは <code>watchQuery</code> の影響を受けません。詳しくは<a href="./features/data-fetching#fetch-%E3%83%95%E3%83%83%E3%82%AF">クエリ文字列の変化のリスニング</a>を参照してください。<p><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>