<!doctype html><html lang="ja"><meta charset="utf-8"><title>page transition プロパティ</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="description"content="Nuxt では <transition> コンポーネントを使って、ページ間を遷移する際のトランジション/アニメーションの作成することができます。"><meta name="navigation"content="[object Object]"><meta name="category"content="components-glossary"><link rel="stylesheet"href="../../../../../../../../../Vivliostyle/read-html-download-pdf/docs/themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="page-transition-プロパティ"><h1 id="page-transition-プロパティ">page transition プロパティ</h1><p>Nuxt では <a href="https://v2.vuejs.org/v2/guide/transitions.html#Transitioning-Single-Elements-Components"><code>&#x3C;transition></code></a> コンポーネントを使って、ページ間を遷移する際のトランジション/アニメーションの作成することができます。<hr><ul><li><strong>型:</strong> <code>String</code> または <code>Object</code> または <code>Function</code></ul><p>特定のルートに対してカスタムトランジションを設定するには、ページコンポーネントに <code>transition</code> キーを追加してください。<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// 文字列を指定できます</span>
  <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token string">''</span>
  <span class="token comment">// またはオブジェクト</span>
  <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// または関数</span>
  <span class="token function">transition</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword module">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><section class="level2"aria-labelledby="文字列"><h2 id="文字列">文字列</h2><p>もし <code>transition</code> キーが文字列で設定された場合は <code>transition.name</code> として用いられます。<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token string">'test'</span>
<span class="token punctuation">}</span></code></pre><p>Nuxt はこれらの設定を使ってコンポーネントを以下のように設定します：<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>transition</span><span class="token punctuation">></span></span></code></pre></section><section class="level2"aria-labelledby="オブジェクト"><h2 id="オブジェクト">オブジェクト</h2><p>もし <code>transition</code> キーがオブジェクトで設定された場合：<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'out-in'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Nuxt はこれらの設定を使ってコンポーネントを以下のように設定します：<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test<span class="token punctuation">"</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>out-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>transition</span><span class="token punctuation">></span></span></code></pre><p><code>transition</code> オブジェクトが持てるプロパティは以下の通りです：<p>| キー | 型 | デフォルト | 定義 | | | | <code>name</code> | <code>String</code> | <code>"page"</code> | すべてのルートトランジションに適用されるトランジション名です。 | | <code>mode</code> | <code>String</code> | <code>"out-in"</code> | すべてのルートに適用されるトランジションモードです。詳細は <a href="https://v2.vuejs.org/v2/guide/transitions.html#Transition-Modes">Vue.js のドキュメント</a>を参照してください。| | <code>css</code> | <code>Boolean</code> | <code>true</code> | CSS トランジションクラスを適用するかどうかを設定します。デフォルトは <code>true</code> です、もし <code>false</code> に設定した場合コンポーネントのイベント経由で登録された JavaScript フックのみがトリガーとなります。| | <code>duration</code> | <code>Integer</code> | n/a | トランジションが適用される時間（ミリ秒）です。<a href="https://v2.vuejs.org/v2/guide/transitions.html#Explicit-Transition-Durations">Vue.js のドキュメント</a>を参照してください。 | | <code>type</code> | <code>String</code> | n/a | トランジション終了のタイミングを判定するために待ち受けるトランジションのイベントタイプを指定します。指定可能な値は <code>"transition"</code> または <code>"animation"</code> です。デフォルトではより期間の長いほうのタイプが自動的に検出されます。| | <code>enterClass</code> | <code>String</code> | n/a | トランジションクラスの開始状態です。<a href="https://v2.vuejs.org/v2/guide/transitions.html#Custom-Transition-Classes">Vue.js のドキュメント</a>を参照してください。| | <code>enterToClass</code> | <code>String</code> | n/a | トランジションの終了状態です。<a href="https://v2.vuejs.org/v2/guide/transitions.html#Custom-Transition-Classes">Vue.js のドキュメント</a>を参照してください。| | <code>enterActiveClass</code> | <code>String</code> | n/a | トランジション中に適用されるクラスです。<a href="https://v2.vuejs.org/v2/guide/transitions.html#Custom-Transition-Classes">Vue.js のドキュメント</a>を参照してください。| | <code>leaveClass</code> | <code>String</code> | n/a | トランジションクラスの開始状態です。<a href="https://v2.vuejs.org/v2/guide/transitions.html#Custom-Transition-Classes">Vue.js のドキュメント</a>を参照してください。 | | <code>leaveToClass</code> | <code>String</code> | n/a | トランジションの終了状態です。<a href="https://v2.vuejs.org/v2/guide/transitions.html#Custom-Transition-Classes">Vue.js のドキュメント</a>を参照してください。| | <code>leaveActiveClass</code> | <code>String</code> | n/a | トランジション中に適用されるクラスです。<a href="https://v2.vuejs.org/v2/guide/transitions.html#Custom-Transition-Classes">Vue.js のドキュメント</a>を参照してください。|<p>page <code>transition</code> プロパティでメソッドを定義することもできます。これらは <a href="https://v2.vuejs.org/v2/guide/transitions.html#JavaScript-Hooks">JavaScript フック用</a>です：<ul><li><code>beforeEnter(el)</code><li><code>enter(el, done)</code><li><code>afterEnter(el)</code><li><code>enterCancelled(el)</code><li><code>beforeLeave(el)</code><li><code>leave(el, done)</code><li><code>afterLeave(el)</code><li><code>leaveCancelled(el)</code></ul><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">afterLeave</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'afterLeave'</span><span class="token punctuation">,</span> el<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p><em>注意: JavaScript のみのトランジションに <code>css: false</code> を明示的に追加して Vue が CSS の検出をスキップできるようにすることもいい考えです。これにより CSS ルールが誤ってトランジションに干渉するのを防ぎます。</em><section class="level3"aria-labelledby="トランジションモード"><h3 id="トランジションモード">トランジションモード</h3><p><strong>ページ用のデフォルトのトランジションモードは Vue.js のデフォルトモードとは異なります。</strong> <code>transition</code> モードはデフォルトで <code>out-in</code> が設定されます。もしトランジションの開始と終了を同時に実行したい場合モードを空文字 <code>mode: ''</code> に設定する必要があります。<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">''</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section></section><section class="level2"aria-labelledby="関数"><h2 id="関数">関数</h2><p>もし <code>transition</code> キーが関数で設定された場合：<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token function">transition</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword module">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword module">from</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token string">'slide-left'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">+</span>to<span class="token punctuation">.</span><span class="token property-access">query</span><span class="token punctuation">.</span><span class="token property-access">page</span> <span class="token operator">&#x3C;</span> <span class="token operator">+</span><span class="token keyword module">from</span><span class="token punctuation">.</span><span class="token property-access">query</span><span class="token punctuation">.</span><span class="token property-access">page</span> <span class="token operator">?</span> <span class="token string">'slide-right'</span> <span class="token operator">:</span> <span class="token string">'slide-left'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>トランジションは各ページ遷移時に適用されます：<ul><li><code>/</code> to <code>/posts</code> => <code>slide-left</code>,<li><code>/posts</code> to <code>/posts?page=3</code> => <code>slide-left</code>,<li><code>/posts?page=3</code> to <code>/posts?page=2</code> => <code>slide-right</code>. <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></ul></section></section>