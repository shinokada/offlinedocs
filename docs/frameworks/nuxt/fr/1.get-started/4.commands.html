<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <title>Commandes et déploiement</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Nuxt est livré avec un ensemble de commandes utiles, à la fois pour le développement et la production.">
    <meta name="position" content="4">
    <meta name="category" content="get-started">
    <link rel="stylesheet" href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css">
  </head>
  <body>
    <p>Nuxt est livré avec un ensemble de commandes utiles, à la fois pour le développement et la production.</p>
    <section id="utilisation-dans-packagejson" class="level2">
      <h2>Utilisation dans package.json</h2>
      <p>Vous devriez mettre ces commandes dans <code>package.json</code>:</p>
      <pre class="language-json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"nuxt"</span><span class="token punctuation">,</span>
  <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"nuxt build"</span><span class="token punctuation">,</span>
  <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"nuxt start"</span><span class="token punctuation">,</span>
  <span class="token property">"generate"</span><span class="token operator">:</span> <span class="token string">"nuxt generate"</span>
<span class="token punctuation">}</span></code></pre>
      <p>Ensuite, vous pouvez lancer vos commandes via <code>yarn &#x3C;command></code> ou <code>npm run &#x3C;command></code> (exemple: <code>yarn dev</code> / <code>npm run dev</code>).</p>
    </section>
    <section id="environment-de-développement" class="level2">
      <h2>Environment de développement</h2>
      <p>Pour lancer Nuxt en mode développement avec <a href="https://webpack.js.org/concepts/hot-module-replacement/">le module de remplacement à chaud</a> sur <code>http://localhost:3000</code>:</p>
      <pre class="language-bash"><code class="language-bash"><span class="token function">yarn</span> dev</code></pre>
      <pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> run dev</code></pre>
    </section>
    <section id="liste-des-commandes" class="level2">
      <h2>Liste des commandes</h2>
      <p>Vous pouvez exécuter différentes commandes en fonction de la <a href="./features/deployment-targets">cible</a>:</p>
      <section id="target-server-default-value" class="level3">
        <h3>target: <code>server</code> (default value)</h3>
        <ul>
          <li><strong>nuxt dev</strong> - Lancez le serveur de développement.</li>
          <li><strong>nuxt build</strong> - Créez et optimisez votre application avec Webpack pour la production.</li>
          <li><strong>nuxt start</strong> - Démarrez le serveur de production (après avoir lancé <code>nuxt build</code>). Utiliser pour un hébergement Node.js comme Heroku, Digital Ocean, etc.</li>
        </ul>
      </section>
      <section id="target-static" class="level3">
        <h3>target: <code>static</code></h3>
        <ul>
          <li><strong>nuxt dev</strong> - Lancez le serveur de développement.</li>
          <li><strong>nuxt generate</strong> - Construisez l'application (si nécessaire), générez chaque route sous forme de fichier HTML et exportez statiquement vers le répertoire <code>dist/</code> (utilisé pour l'hébergement statique).</li>
          <li><strong>nuxt start</strong> - servir le répertoire <code>dist/</code> comme le ferait votre hébergement statique (Netlify, Vercel, Surge, etc.), idéal pour les tests avant le déploiement.</li>
        </ul>
      </section>
    </section>
    <section id="webpack-config-inspection" class="level2">
      <h2>Webpack Config Inspection</h2>
      <p>Vous pouvez inspecter la configuration webpack utilisée par nuxt pour créer un projet similaire à <a href="https://cli.vuejs.org/guide/webpack.html#inspecting-the-project-s-webpack-config">vue inspect</a>.</p>
      <ul>
        <li><strong>nuxt webpack [query...]</strong></li>
      </ul>
      <p><strong>Arguments:</strong></p>
      <ul>
        <li><code>--name</code>: nom du bundle à inspecter (client, serveur, moderne)</li>
        <li><code>--dev</code>: inspecter la configuration webpack pour le mode dev</li>
        <li><code>--depth</code>: inspecter en profondeur. La valeur par défaut est 2 pour empêcher la sortie verbeuse.</li>
        <li><code>--no-colors</code>: désactiver les couleurs ANSI (désactivées par défaut lorsque TTY n'est pas disponible ou quand piping vers un fichier)</li>
      </ul>
      <p><strong>Exemples:</strong></p>
      <ul>
        <li><code>nuxt webpack</code></li>
        <li><code>nuxt webpack devtool</code></li>
        <li><code>nuxt webpack resolve alias</code></li>
        <li><code>nuxt webpack module rules</code></li>
        <li><code>nuxt webpack module rules test=.jsx</code></li>
        <li><code>nuxt webpack module rules test=.pug oneOf use.0=raw</code></li>
        <li><code>nuxt webpack plugins constructor.name=WebpackBar options reporter</code></li>
        <li><code>nuxt webpack module rules loader=vue-</code></li>
        <li><code>nuxt webpack module rules "loader=.*-loader"</code></li>
      </ul>
    </section>
    <section id="déploiement-de-production" class="level2">
      <h2>Déploiement de production</h2>
      <p>Nuxt vous permet de choisir entre les déploiements de serveur ou statique.</p>
      <section id="déploiement-de-serveur" class="level3">
        <h3>Déploiement de serveur</h3>
        <p>Pour déployer une application SSR, nous utilisons <code>target: server</code>, où serveur est la valeur par défaut.</p>
        <pre class="language-bash"><code class="language-bash"><span class="token function">yarn</span> build</code></pre>
        <pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> run build</code></pre>
        <p>Nuxt créera un répertoire <code>.nuxt</code> avec tout ce qu'il contient prêt à être déployé sur votre serveur d'hébergement.</p>
        <section id="info" class="level4">
          <h4>Info</h4>
          <p>nous recommandons de mettre <code>.nuxt</code> dans <code>.npmignore</code> ou <code>.gitignore</code>.</p>
          <p>Une fois votre application créée, vous pouvez utiliser la commande <code>start</code> pour voir une version de production de votre application.</p>
          <pre class="language-bash"><code class="language-bash"><span class="token function">yarn</span> start</code></pre>
          <pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> run start</code></pre>
        </section>
      </section>
      <section id="déploiement-statique-pré-rendu" class="level3">
        <h3>Déploiement statique (Pré-rendu)</h3>
        <p>Nuxt vous donne la possibilité d'héberger votre application Web sur n'importe quel hébergement statique.</p>
        <p>Pour déployer un site statique généré, assurez-vous d'avoir <code>target: static</code> dans votre <code>nuxt.config.js</code>.(Pour Nuxt >= 2.13:)</p>
        <pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  target: 'static'
}</code></pre>
        <pre class="language-bash"><code class="language-bash"><span class="token function">yarn</span> generate</code></pre>
        <pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> run generate</code></pre>
        <p>Nuxt créera un répertoire <code>dist /</code> avec tout ce qu'il contient prêt à être déployé sur un service d'hébergement statique.</p>
        <p>Depuis Nuxt v2.13, un robot d'exploration est installé qui va maintenant explorer vos liens et générer vos routes lorsque vous utilisez la commande <code>nuxt generate</code> basée sur ces derniers.</p>
        <section id="info-1" class="level4">
          <h4>Info</h4>
          <p><strong>Attention:</strong> les routes dynamiques sont ignorées par la commande <code>generate</code> lors de l'utilisation Nuxt &#x3C;= v2.12: <a href="./configuration-glossary/configuration-generate">API de configuration de la génération</a></p>
        </section>
        <section id="info-2" class="level4">
          <h4>Info</h4>
          <p>Lors de la génération de votre application Web avec <code>nuxt generate</code>, <a href="./internals-glossary/context">le contexte</a> donnée à <a href="./features/data-fetching#async-data">asyncData</a> et <a href="./features/data-fetching#the-fetch-hook">fetch</a> n'aura pas <code>req</code> et <code>res</code>.</p>
        </section>
        <section id="échec-en-cas-derreur" class="level4">
          <h4><strong>Échec en cas d'erreur</strong></h4>
          <p>Pour renvoyer un code d'état différent de zéro lorsqu'une erreur de page est rencontrée et laisser le CI/CD échouer lors du déploiement ou de la construction, vous pouvez utiliser l'argument <code>--fail-on-error</code>.</p>
          <pre class="language-bash"><code class="language-bash"><span class="token function">yarn</span> generate --fail-on-error</code></pre>
          <pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> run generate --fail-on-error</code></pre>
        </section>
      </section>
    </section>
    <section id="et-après" class="level2">
      <h2>Et après?</h2>
      <section id="next" class="level4">
        <h4>Next</h4>
        <p>Lisez notre <a href="/deployments">FAQ</a> pour trouver des exemples de déploiements sur des hôtes connus.</p>
        <p><span style="float: footnote;"><a href="../index.html#toc">Go to TOC</a></span></p>
      </section>
    </section>
  </body>
</html>
