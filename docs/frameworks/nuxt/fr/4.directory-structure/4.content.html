<!doctype html><html lang="fr"><meta charset="utf-8"><title>content</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="navigation.title"content="content"><meta name="description"content="Augmentez le potentiel de votre application Nuxt avec le module &#x60;@nuxt/content&#x60; grâce auquel on peut écrire dans un répertoire &#x60;content/&#x60; et récupérer du Markdown, JSON, YAML et des fichiers CSV à travers une API dans le style de MongoDB, qui remplit donc le rôle d&#x27;un **CMS headless basé sur Git**."><meta name="category"content="directory-structure"><link rel="stylesheet"href="../../../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="content"><h1 id="content">content</h1><p>Augmentez le potentiel de votre application Nuxt avec le module <code>@nuxt/content</code> grâce auquel on peut écrire dans un répertoire <code>content/</code> et récupérer du Markdown, JSON, YAML et des fichiers CSV à travers une API dans le style de MongoDB, qui remplit donc le rôle d'un <strong>CMS headless basé sur Git</strong>.<hr><p><img src="../docs/nuxt-content.svg"><section class="level3"aria-labelledby="rechargement-à-chaud-lors-du-développement"><h3 id="rechargement-à-chaud-lors-du-développement">Rechargement à chaud lors du développement</h3><p>En développement, le module <code>content</code> est super rapide quand il s'agit de rechargement à chaud car il ne doit pas passer par Webpack lorsque l'on fait des changements à nos fichiers markdown. On peut aussi écouter l'événement <code>content:update</code> et créer un plugin qui à chaque fois que l'on va mettre à jour un fichier dans le répertoire <code>content</code>, va propager une méthode <code>fetchCategories</code> par exemple.<section class="level4"aria-labelledby="next"><h4 id="next">Next</h4><p>Se référer à la <a href="https://content.nuxtjs.org/advanced#handling-hot-reload">documentation du module content</a> pour davantage de détails.</section></section><section class="level3"aria-labelledby="afficher-le-contenu"><h3 id="afficher-le-contenu">Afficher le contenu</h3><p>On peut directement utiliser le composant <code>&#x3C;nuxt-content></code> dans notre template pour afficher le corps de la page.<pre class="language-html{}[pages/blog/_slug.vue]"><code class="language-html{}[pages/blog/_slug.vue]">&#x3C;template>
  &#x3C;article>
    &#x3C;nuxt-content :document="article" />
  &#x3C;/article>
&#x3C;/template></code></pre><section class="level4"aria-labelledby="next-1"><h4 id="next-1">Next</h4><p>Se référer à la <a href="https://content.nuxtjs.org/displaying#component">documentation du module content</a> pour davantage de détails.</section></section><section class="level3"aria-labelledby="styliser-votre-contenu"><h3 id="styliser-votre-contenu">Styliser votre contenu</h3><p>En fonction de ce que l'on va utiliser pour styliser notre application, on pourrait avoir besoin d'écrire un peu de style pour afficher notre markdown proprement.<p>Le composant <code>&#x3C;nuxt-content></code> va automatiquement ajouter une classe <code>.nuxt-content</code>, afin que nous puissions personnaliser nos styles.<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
  <span class="token selector"><span class="token class">.nuxt-content</span> h2</span> <span class="token punctuation">{</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">28</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector"><span class="token class">.nuxt-content</span> p</span> <span class="token punctuation">{</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>style</span><span class="token punctuation">></span></span></code></pre><section class="level4"aria-labelledby="next-2"><h4 id="next-2">Next</h4><p>Se référer à la <a href="https://content.nuxtjs.org/displaying#style">documentation du module content</a> pour davantage de détails.</section></section><section class="level3"aria-labelledby="gérer-les-formats-markdown-csv-yaml-json5"><h3 id="gérer-les-formats-markdown-csv-yaml-json5">Gérer les formats Markdown, CSV, YAML, JSON(5)</h3><p>This module converts your .md files into a JSON AST tree structure, stored in a body variable. You can also add a YAML front matter block to your markdown files or a .yaml file which will be injected into the document. You can also add a json/json5 file which can also be injected into the document. And you can use a .csv file where rows will be assigned to the body variable.<p>Ce module convertit nos fichiers <code>.md</code> en une structure arborescente de type <a href="https://astexplorer.net/#/gist/6e328cf76a27ca85e552c9cb583cdd74/1077c8842337972509a29bc9063d17bf90a1a492">JSON AST</a>, stockée dans une variable <code>body</code>.<pre class="language-md"><code class="language-md"><span class="token front-matter-block"><span class="token punctuation">---</span>
<span class="token front-matter yaml language-yaml">title: Mon premier article de blog
description: Apprendre à se servir de @nuxt/content pour créer un blog</span>
<span class="token punctuation">---</span></span></code></pre><section class="level4"aria-labelledby="next-3"><h4 id="next-3">Next</h4><p>Se référer à la <a href="https://content.nuxtjs.org/writing#markdown">documentation du module content</a> pour davantage de détails.</section></section><section class="level3"aria-labelledby="composants-vue-dans-le-markdown"><h3 id="composants-vue-dans-le-markdown">Composants Vue dans le markdown</h3><p>On peut utiliser les composants Vue directement dans les fichiers markdown. Il faudra cependant utiliser les composants sous leur écriture <code>kebab-case</code> et non avec des balises auto-fermantes.<pre class="language-html{}[components/global/InfoBox.vue]"><code class="language-html{}[components/global/InfoBox.vue]">&#x3C;template>
  &#x3C;div class="p-4 mb-4 text-white bg-blue-500">
    &#x3C;p>&#x3C;slot name="info-box">default&#x3C;/slot>&#x3C;/p>
  &#x3C;/div>
&#x3C;/template></code></pre><pre class="language-html{}[content/articles/my-first-blog-post.md]"><code class="language-html{}[content/articles/my-first-blog-post.md]">&#x3C;info-box>
  &#x3C;template #info-box>
    This is a vue component inside markdown using slots
  &#x3C;/template>
&#x3C;/info-box></code></pre><section class="level4"aria-labelledby="next-4"><h4 id="next-4">Next</h4><p>Se référer à la <a href="https://content.nuxtjs.org/writing#vue-components">documentation du module content</a> pour davantage de détails.</section></section><section class="level3"aria-labelledby="api-entièrement-recherchable"><h3 id="api-entièrement-recherchable">API entièrement recherchable</h3><p>On peut utiliser <code>$content()</code> pour lister, filtrer et chercher notre contenu facilement.<pre class="language-html{}[pages/blog/index.vue]"><code class="language-html{}[pages/blog/index.vue]">&#x3C;script>
  export default {
    async asyncData({ $content, params }) {
      const articles = await $content('articles', params.slug)
        .only(['title', 'description', 'img', 'slug', 'author'])
        .sortBy('createdAt', 'asc')
        .fetch()

      return {
        articles
      }
    }
  }
&#x3C;/script></code></pre><section class="level4"aria-labelledby="next-5"><h4 id="next-5">Next</h4><p>Se référer à la <a href="https://content.nuxtjs.org/fetching#methods">documentation du module content</a> pour davantage de détails.</section></section><section class="level3"aria-labelledby="articles-précédents-et-suivants"><h3 id="articles-précédents-et-suivants">Articles précédents et suivants</h3><p>Le module <code>content</code> inclut un <code>.surround(slug)</code> qui nous permet de récupérer facilement les articles précédents et suivants.<pre class="language-js"><code class="language-js"><span class="token keyword">async</span> <span class="token function">asyncData</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> $content<span class="token punctuation">,</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> article <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">$content</span><span class="token punctuation">(</span><span class="token string">'articles'</span><span class="token punctuation">,</span> params<span class="token punctuation">.</span><span class="token property-access">slug</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token punctuation">[</span>prev<span class="token punctuation">,</span> next<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">$content</span><span class="token punctuation">(</span><span class="token string">'articles'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token method function property-access">only</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'slug'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token method function property-access">sortBy</span><span class="token punctuation">(</span><span class="token string">'createdAt'</span><span class="token punctuation">,</span> <span class="token string">'asc'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token method function property-access">surround</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span><span class="token property-access">slug</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token method function property-access">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
      article<span class="token punctuation">,</span>
      prev<span class="token punctuation">,</span>
      next
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>prev-next</span> <span class="token attr-name">:prev</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>prev<span class="token punctuation">"</span></span> <span class="token attr-name">:next</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>next<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><section class="level4"aria-labelledby="next-6"><h4 id="next-6">Next</h4><p>Se référer à la <a href="https://content.nuxtjs.org/fetching#surroundslug-options">documentation du module content</a> pour davantage de détails.</section></section><section class="level3"aria-labelledby="recherche-par-texte-complet"><h3 id="recherche-par-texte-complet">Recherche par texte complet</h3><p>Le module <code>content</code> possède une recherche par texte complet afin que l'on puisse rechercher simplement dans nos fichiers markdown sans avoir à installer quoi que ce soit d'autre.<pre class="language-html{}[components/AppSearchInput.vue]"><code class="language-html{}[components/AppSearchInput.vue]">&#x3C;script>
  export default {
    data() {
      return {
        searchQuery: '',
        articles: []
      }
    },
    watch: {
      async searchQuery(searchQuery) {
        if (!searchQuery) {
          this.articles = []
          return
        }
        this.articles = await this.$content('articles')
          .limit(6)
          .search(searchQuery)
          .fetch()
      }
    }
  }
&#x3C;/script></code></pre><section class="level4"aria-labelledby="next-7"><h4 id="next-7">Next</h4><p>Se référer à la <a href="https://content.nuxtjs.org/fetching#searchfield-value">documentation du module content</a> pour davantage de détails.</section></section><section class="level3"aria-labelledby="surbrillance-de-la-syntaxe"><h3 id="surbrillance-de-la-syntaxe">Surbrillance de la syntaxe</h3><p>Ce module va automatiquement envelopper les blocks de code et y appliquer les classes de <a href="https://prismjs.com/">PrismJS</a>. On peut bien sûr ajouter un thème PrismJS différent voire même le désactiver totalement.<pre class="language-bash"><code class="language-bash"><span class="token function">yarn</span> <span class="token function">add</span> prism-themes</code></pre><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> prism-themes</code></pre><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">content: {
  markdown: {
    prism: {
      theme: 'prism-themes/themes/prism-material-oceanic.css'
    }
  }
}</code></pre><section class="level4"aria-labelledby="next-8"><h4 id="next-8">Next</h4><p>Se référer à la <a href="https://content.nuxtjs.org/writing#syntax-highlighting">documentation du module content</a> pour davantage de détails.</section></section><section class="level3"aria-labelledby="personnaliser-le-parsing-du-markdown"><h3 id="personnaliser-le-parsing-du-markdown">Personnaliser le parsing du markdown</h3><p>À l'origine, le markdown ne supporte pas la surbrillance des lignes que ce soit dans les blocks de code ou dans les noms de fichiers. Le module <code>content</code> permet cela avec sa propre syntaxe. Les lignes numérotées seront ajoutées à une balise <code>pre</code> dans l'attribut data-line et le nom du fichier sera converti en un <code>span</code> avec une classe <code>filename</code>, afin d'être stylisé.<section class="level4"aria-labelledby="next-9"><h4 id="next-9">Next</h4><p>Se référer à la <a href="https://content.nuxtjs.org/writing#codeblocks">documentation du module content</a> pour davantage de détails.</section></section><section class="level3"aria-labelledby="génération-dune-table-des-matières"><h3 id="génération-dune-table-des-matières">Génération d'une table des matières</h3><p>Une propriété <code>toc</code> (pour Table of Contents) contenant un tableau, sera injectée dans notre document, listant tous les entêtes avec leurs titres et identifiants, afin que l'on puisse les lier.<pre class="language-html{}[pages/blog/_slug.vue]"><code class="language-html{}[pages/blog/_slug.vue]">&#x3C;nav>
  &#x3C;ul>
    &#x3C;li v-for="link of article.toc" :key="link.id">
      &#x3C;NuxtLink :to="`#${link.id}`">{{ link.text }}&#x3C;/NuxtLink>
    &#x3C;/li>
  &#x3C;/ul>
&#x3C;/nav></code></pre><section class="level4"aria-labelledby="next-10"><h4 id="next-10">Next</h4><p>Se référer à la <a href="https://content.nuxtjs.org/writing#table-of-contents">documentation du module content</a> pour davantage de détails.</section></section><section class="level3"aria-labelledby="un-querybuilder-dapi-puissant"><h3 id="un-querybuilder-dapi-puissant">Un QueryBuilder d'API puissant</h3><p>Le module <code>content</code> possède un puissant QueryBuilder d'API (similaire à MongoDB) qui nous permet de facilement voir le JSON de chaque répertoire à l'URL <code>http://localhost:3000/_content/</code>. L'extrémité est accessible via des requêtes <code>GET</code> et <code>POST</code>, on peut donc utiliser des query params.<p><code>http://localhost:3000/_content/articles?only=title&#x26;only=description&#x26;limit=10</code><section class="level4"aria-labelledby="next-11"><h4 id="next-11">Next</h4><p>Se référer à la <a href="https://content.nuxtjs.org/advanced/#api-endpoint">documentation du module content</a> pour davantage de détails.</section></section><section class="level3"aria-labelledby="personnaliser-avec-des-hooks"><h3 id="personnaliser-avec-des-hooks">Personnaliser avec des hooks</h3><p>On peut utiliser des hooks pour personnaliser le module afin d'ajouter de la data au document avant que ce dernier ne soit stocké.<section class="level4"aria-labelledby="next-12"><h4 id="next-12">Next</h4><p>Se référer à la <a href="https://content.nuxtjs.org/advanced#hooks">documentation du module content</a> pour davantage de détails.</section></section><section class="level3"aria-labelledby="intégration-avec-nuxtjsfeed"><h3 id="intégration-avec-nuxtjsfeed">Intégration avec @nuxtjs/feed</h3><p>Dans le cas d'articles, le contenu peut être utilisé pour générer un fil d'actualité en utilisant le module <a href="https://www.npmjs.com/package/@nuxtjs/feed">@nuxtjs/feed</a>.<section class="level4"aria-labelledby="next-13"><h4 id="next-13">Next</h4><p>Se référer à la <a href="https://content.nuxtjs.org/integrations/#nuxtjsfeed">documentation du module content</a> pour davantage de détails.</section></section><section class="level3"aria-labelledby="support-pour-la-génération-de-site-statique"><h3 id="support-pour-la-génération-de-site-statique">Support pour la génération de site statique</h3><p>Ce module marche avec la génération de site statique en utilisant <code>nuxt generate</code>. Toutes les routes seront automatiquement générées grâce à la fonctionnalité du crawler de Nuxt.<section class="level4"aria-labelledby="warning"><h4 id="warning">Warning</h4><p>Si on utilise Nuxt avec une version &#x3C;2.13 et que l'on a besoin de spécifier des routes dynamiques, il faut utiliser la méthode <code>generate</code> avec le module <code>@nuxt/content</code> de manière programmatique.</section><section class="level4"aria-labelledby="next-14"><h4 id="next-14">Next</h4><p>Se référer à la <a href="https://content.nuxtjs.org/advanced#programmatic-usage">documentation du module content</a> pour davantage de détails.</section></section><section class="level3"aria-labelledby="prochaine-étape"><h3 id="prochaine-étape">Prochaine étape</h3><section class="level4"aria-labelledby="next-15"><h4 id="next-15">Next</h4><p>Pour voir le tutoriel sur <a href="/tutorials/creating-blog-with-nuxt-content">comment créer un blog avec du contenu Nuxt</a></section><section class="level4"aria-labelledby="next-16"><h4 id="next-16">Next</h4><p>Pour voir la documentation complète du <a href="https://content.nuxtjs.org/">module content</a><p><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section></section>