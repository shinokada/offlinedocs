<!doctype html><html lang="fr"><meta charset="utf-8"><title>assets</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="description"content="Le répertoire &#x60;assets&#x60; contient les ressources comme des fichiers Stylus, du SASS, des images ou des polices de caractères."><meta name="category"content="directory-structure"><meta name="csb_link"content="https://codesandbox.io/embed/github/nuxt-academy/guides-examples/tree/master/04_directory_structure/02_assets?fontsize=14&#x26;hidenavigation=1&#x26;theme=dark"><meta name="videoScript"content="assets-video.md"><link rel="stylesheet"href="../../../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="assets"><h1 id="assets">assets</h1><p>Le répertoire <code>assets</code> contient les ressources comme des fichiers Stylus, du SASS, des images ou des polices de caractères.<hr><section class="level2"aria-labelledby="images"><h2 id="images">Images:</h2><p>À l'intérieur de nos templates <code>vue</code>, si nous avons besoin de faire un lien vers notre répertoire <code>assets</code> (ressources), il faut utiliser <code>~/assets/notre_image.png</code> (avec un slash avant les <code>assets</code>).<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>~/assets/notre_image.png<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>template</span><span class="token punctuation">></span></span></code></pre><p>À l'intérieur de nos fichiers <code>CSS</code>, si nous avons besoin de faire un lien vers notre répertoire <code>assets</code> (ressources), il faut utiliser <code>~/assets/banniere.svg</code> (sans le slash).<pre class="language-css"><code class="language-css"><span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'~assets/banniere.svg'</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></code></pre><p>Si l'on travaille avec des images dynamiques, on aura besoin d'utiliser <code>require</code>.<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>require(`~/assets/img/${image}.jpg`)<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><section class="level4"aria-labelledby="next"><h4 id="next">Next</h4><p>Voir les <a href="./directory-structure/assets#webpack-assets">ressources webpack</a>.</section></section><section class="level2"aria-labelledby="styles"><h2 id="styles">Styles:</h2><p>Nuxt nous permet de définir les fichiers/modules/librairies CSS que nous souhaitons utiliser de manière globale (dans chaque page). Dans le fichier de config <code>nuxt.config.js</code>, on peut spécifier cela grâce à la propriété <code>css</code>:<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  css: [
    // charge un module Node.js directement (ici un fichier SASS)
    'bulma',
    // un fichier CSS dans le projet
    '~/assets/css/main.css',
    // un fichier SCSS dans le projet
    '~/assets/css/main.scss'
  ]
}</code></pre><section class="level3"aria-labelledby="sass"><h3 id="sass">Sass</h3><section class="level4"aria-labelledby="info"><h4 id="info">Info</h4><p>Dans le cas où l'on veut utiliser <code>SASS</code>, il faut bien faire attention à installer les packages <code>node-sass</code> et <code>sass-loader</code>.<pre class="language-bash"><code class="language-bash"><span class="token function">yarn</span> <span class="token function">add</span> --dev sass sass-loader@10</code></pre><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev sass sass-loader@10</code></pre><p>Nuxt va automatiquement deviner le type de fichier grâce à son extension et utiliser le loader webpack approprié pour le pré-processeur. Nous aurons cependant besoin d'installer le loader requis si nous avons besoin de l'utiliser.</section></section></section><section class="level2"aria-labelledby="fonts"><h2 id="fonts">Fonts:</h2><p>On peut utiliser des polices de caractères locales en les ajoutant dans le répertoire des ressources. Une fois ajoutées, on peut y avoir accès dans notre CSS en utilisant <code>@font-face</code>.<pre class="language-text"><code class="language-text">-| assets
----| fonts
| DMSans-Regular.ttf
| DMSans-Bold.ttf</code></pre><pre class="language-css{}[assets/main.css]"><code class="language-css{}[assets/main.css]">@font-face {
  font-family: 'DM Sans';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('~assets/fonts/DMSans-Regular.ttf') format('truetype');
}

@font-face {
  font-family: 'DM Sans';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url('~assets/fonts/DMSans-Bold.ttf') format('truetype');
}</code></pre><section class="level4"aria-labelledby="info-1"><h4 id="info-1">Info</h4><p>Les fichiers CSS ne sont pas chargés automatiquement. Ajoutez-les en utilisant la <a href="https://v2.nuxt.com/docs/configuration-glossary/configuration-css/">propriété css</a>.</section><section class="level4"aria-labelledby="next-1"><h4 id="next-1">Next</h4><p>Pour ajouter des polices de caractères externes telles que des Google Fonts, se référer le chapitre sur le <a href="./features/meta-tags-seo#external-resources">SEO et les méta tags</a>.</section></section><section class="level2"aria-labelledby="ressources-de-webpack"><h2 id="ressources-de-webpack">Ressources de Webpack</h2><p>Par défaut, Nuxt utilise les <code>vue-loader</code>, <code>file-loader</code> et <code>url-loader</code> de Webpack pour délivrer les ressources. On peut aussi utiliser le répertoire statique pour les ressources, ce dernier ne doit cependant pas passer par Webpack.</section><section class="level2"aria-labelledby="webpack"><h2 id="webpack">Webpack</h2><p>Le compilateur de templates de Vue s'occupe de process le style (avec <code>css-loader</code>) et les fichiers de templates (grâce à <a href="http://vue-loader.vuejs.org/"><code>vue-loader</code></a>). Durant ce processus, toutes les URL des ressources telles que <code>&#x3C;img src="..."></code>, <code>background: url(...)</code> et les <code>@import</code> CSS sont résolues en tant que dépendances de modules.<p>Par exemple, avec cette arborescence de fichiers:<pre class="language-text"><code class="language-text">-| assets/
----| image.png
-| pages/
----| index.vue</code></pre><p>Si dans notre CSS, on utilise <code>url('~assets/image.png')</code>, ceci sera traduit en <code>require('~/assets/image.png')</code>.<section class="level4"aria-labelledby="warning"><h4 id="warning">Warning</h4><p>L'alias <code>~/</code> ne sera pas résolu correctement dans les fichiers CSS. Il faut bien utiliser <code>~assets</code> (<strong>sans le slash</strong>) dans les références CSS <code>url</code>, ex: <code>background: url("~assets/banniere.svg")</code>.<p>Si on référence cette image dans notre fichier <code>pages/index.vue</code>:<pre class="language-html{}[pages/index.vue]"><code class="language-html{}[pages/index.vue]">&#x3C;template>
  &#x3C;img src="~/assets/image.png" />
&#x3C;/template></code></pre><p>Ce sera compilé en:<pre class="language-js"><code class="language-js"><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">attrs</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'~/assets/image.png'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>Parce que <code>.png</code> n'est pas un fichier JavaScript, Nuxt s'occupe tout seul de demander à Webpack d'utiliser <a href="https://github.com/webpack/file-loader">file-loader</a> et <a href="https://github.com/webpack/url-loader">url-loader</a> pour s'occuper de ce format.<p>Les bénéfices de ces loaders sont les suivants:<p><code>file-loader</code> s'occupe de définir où copier et placer la ressource, ainsi que comment la nommer en utilisant des hash pour une meilleure mise en cache. En production, on pourra bénéficier d'une mise en cache sur le long terme par défaut !<p><code>url-loader</code> permet de transformer un fichier en une seule ligne de data URL encodé en base-64 s'il est en dessous d'un certain seuil. Ceci permet de réduire le nombre de requêtes HTTP pour des fichiers anodins. Si la taille du fichier est plus grosse que le seuil fixé, il va utiliser <code>file-loader</code> en solution de repli.<p>Pour ces deux loaders, la configuration par défaut est la suivante:<pre class="language-js"><code class="language-js"><span class="token comment">// https://github.com/nuxt/nuxt/blob/2.x-dev/packages/webpack/src/config/base.js#L382-L411</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpe?g|gif|svg|webp|avif)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">esModule</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// 1kB</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'img/[name].[contenthash:7].[ext]'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff2?|eot|ttf|otf)(\?.*)?$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
       <span class="token literal-property property">esModule</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
       <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// 1kB</span>
       <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'fonts/[name].[contenthash:7].[ext]'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(webm|mp4|ogv)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">esModule</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'videos/[name].[contenthash:7].[ext]'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><p>Ce qui veut dire que n'importe quel fichier en dessous de 1 Ko sera mis sur une seule ligne de data URL encodé en base-64. Autrement, l'image/police de caractères sera copiée dans le répertoire correspondant (à l'intérieur du répertoire <code>.nuxt</code>) avec un nom comprenant le hash d'une version pour une meilleure mise en cache.<p>Lorsqu'on lancera l'application <code>nuxt</code> avec un template tel que <code>pages/index.vue</code>:<pre class="language-html{}[pages/index.vue]"><code class="language-html{}[pages/index.vue]">&#x3C;template>
  &#x3C;img src="@/assets/notre_image.png" />
&#x3C;/template></code></pre><p>Cela sera transformé en:<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/_nuxt/img/notre_image.0c61159.png<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><p>Si on souhaite changer la configuration d'un des loaders, on trouvera plus de détails à la page de <a href="./configuration-glossary/configuration-build#extend"><code>build.extend</code></a>.</section></section><section class="level2"aria-labelledby="les-alias"><h2 id="les-alias">Les Alias</h2><p>Par défaut le répertoire des sources (<code>srcDir</code>) et le répertoire racine (<code>rootDir</code>) sont les mêmes. On peut utiliser l'alias <code>~</code> pour le répertoire des sources. Au lieu d'écrire des chemins relatifs tels que <code>../assets/notre_image.png</code>, on peut écrire <code>~/assets/notre_image.png</code> à la place.<p>Les deux donneront le même résultat.<pre class="language-html{}[components/Avatar.vue]"><code class="language-html{}[components/Avatar.vue]">&#x3C;template>
  &#x3C;div>
    &#x3C;img src="../assets/notre_image.png" />
    &#x3C;img src="~/assets/notre_image.png" />
  &#x3C;/div>
&#x3C;/template></code></pre><p>Nous recommandons l'usage de <code>~</code> en tant qu'alias. <code>@</code> est toujours supporté mais il ne marchera pas dans certains cas tel que les images de background dans le CSS.<p>On peut utiliser <code>~~</code> ou <code>@@</code> pour le répertoire racine.<section class="level4"aria-labelledby="info-2"><h4 id="info-2">Info</h4><p>Astuce: Pour avoir accès à <code>~</code> sur un clavier espagnol, il faut utiliser <code>Option</code> + <code>ñ</code> sur Mac OS ou (<code>Alt gr</code> + <code>4</code>) sur Windows.<p><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section></section>