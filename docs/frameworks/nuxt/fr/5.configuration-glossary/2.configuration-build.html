<!doctype html><html lang="fr"><meta charset="utf-8"><title>La propriété build</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="navigation.title"content="build"><meta name="description"content="Nuxt nous permet de personnaliser la configuration de webpack afin de build notre application Web comme on l&#x27;entend."><meta name="menu"content="build"><meta name="category"content="configuration-glossary"><link rel="stylesheet"href="../../../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="la-propriété-build"><h1 id="la-propriété-build">La propriété build</h1><blockquote><p>Nuxt nous permet de personnaliser la configuration de webpack afin de build notre application Web comme on l'entend.</blockquote><hr><section class="level2"aria-labelledby="analyze"><h2 id="analyze">analyze</h2><blockquote><p>Nuxt utilise <a href="https://github.com/webpack-contrib/webpack-bundle-analyzer">webpack-bundle-analyzer</a> pour nous permettre de visualiser les bundles et trouver comment les optimiser.</blockquote><ul><li>Type: <code>Boolean</code> ou <code>Object</code><li>Par défaut: <code>false</code></ul><p>Si c'est un objet, les propriétés disponibles sont visibles <a href="https://github.com/webpack-contrib/webpack-bundle-analyzer#options-for-plugin">ici</a>.<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    analyze: true,
    // ou
    analyze: {
      analyzerMode: 'static'
    }
  }
}</code></pre><section class="level4"aria-labelledby="info"><h4 id="info">Info</h4><p><strong>Info</strong>: on peut utiliser la commande <code>yarn nuxt build --analyze</code> ou bien <code>yarn nuxt build -a</code> pour build notre application et lancer l'analyseur des bundles sur <a href="http://localhost:8888">http://localhost:8888</a>. Si on n'utilise pas <code>yarn</code>, on peut exécuter la commande avec <code>npx</code>.</section></section><section class="level2"aria-labelledby="corejs"><h2 id="corejs">corejs</h2><blockquote><p>Depuis <a href="https://github.com/nuxt/nuxt/releases/tag/v2.14.0">Nuxt@2.14</a>, Nuxt va automatiquement détecter la version actuelle de <code>core-js</code> dans notre projet. On peut bien sûr aussi lui spécifier la version que l'on veut utiliser.</blockquote><ul><li>Type: <code>number</code> | <code>string</code> (Les valeurs disponibles sont <code>'auto'</code>, <code>2</code> et <code>3</code>)<li>Default: <code>'auto'</code></ul></section><section class="level2"aria-labelledby="babel"><h2 id="babel">babel</h2><blockquote><p>Permet de personnaliser la configuration Babel pour le JavaScript et les fichiers Vue. <code>.babelrc</code> est ignoré par défaut.</blockquote><ul><li><p>Type: <code>Object</code><li><p>Voir les <a href="https://github.com/babel/babel-loader#options">options</a> de <code>babel-loader</code> et les <a href="https://babeljs.io/docs/en/options">options</a> de <code>babel</code>.<li><p>Par défaut:<pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token literal-property property">babelrc</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">cacheDirectory</span><span class="token operator">:</span> <span class="token keyword nil">undefined</span><span class="token punctuation">,</span>
  <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@nuxt/babel-preset-app'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></ul><p>Les cibles par défaut de <a href="https://github.com/nuxt/nuxt/blob/2.x-dev/packages/babel-preset-app/src/index.js">@nuxt/babel-preset-app</a> sont <code>ie: '9'</code> dans le build <code>client</code>, et <code>node: 'current'</code> dans le build <code>serveur</code>.<section class="level3"aria-labelledby="presets"><h3 id="presets">presets</h3><ul><li>Type: <code>Function</code><li>Argument:<ol><li><code>Object</code>: <ruby>isServer: true <rt>false</ruby><li><code>Array</code>:<ul><li>nom du preset <code>@nuxt/babel-preset-app</code><li><a href="https://github.com/nuxt/nuxt/tree/2.x-dev/packages/babel-preset-app#options"><code>options</code></a> de <code>@nuxt/babel-preset-app</code></ul></ol></ul><p><strong>Note</strong>: Les presets configurés dans <code>build.babel.presets</code> seront appliqués tant au build du client que celui du serveur. La cible sera choisie par Nuxt en conséquence (client/serveur). Si on veut configurer le preset différemment, il faut utiliser <code>presets</code> en tant que fonction:<blockquote><p>Nous recommandons <strong>très chaudement</strong> d'utiliser la configuration par défaut au lieu du code plus bas</blockquote><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">babel</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">presets</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isServer <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> preset<span class="token punctuation">,</span> options <span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// on change directement les options</span>
        options<span class="token punctuation">.</span><span class="token property-access">targets</span> <span class="token operator">=</span> isServer <span class="token operator">?</span> <span class="token spread operator">...</span> <span class="token operator">:</span>  <span class="token spread operator">...</span>
        options<span class="token punctuation">.</span><span class="token property-access">corejs</span> <span class="token operator">=</span> <span class="token spread operator">...</span>
        <span class="token comment">// renvoie rien</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>On peut aussi écraser les valeurs par défaut en retournant la liste complète des presets:<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">babel</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">presets</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isServer <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>preset<span class="token punctuation">,</span> options<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">return</span> <span class="token punctuation">[</span>
          <span class="token punctuation">[</span>
            preset<span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">buildTarget</span><span class="token operator">:</span> isServer <span class="token operator">?</span> <span class="token spread operator">...</span> <span class="token operator">:</span> <span class="token spread operator">...</span><span class="token punctuation">,</span>
              <span class="token spread operator">...</span>options
            <span class="token punctuation">}</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span>
            <span class="token comment">// d'autres presets</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section></section><section class="level2"aria-labelledby="cache"><h2 id="cache">cache</h2><ul><li>Type: <code>Boolean</code><li>Par défaut: <code>false</code><li>⚠️ Expérimental</ul><blockquote><p>Active le cache de <a href="https://github.com/webpack-contrib/terser-webpack-plugin#options">terser-webpack-plugin</a> et de <a href="https://github.com/webpack-contrib/cache-loader#cache-loader">cache-loader</a></blockquote></section><section class="level2"aria-labelledby="csssourcemap"><h2 id="csssourcemap">cssSourceMap</h2><ul><li>Type: <code>boolean</code><li>Par défaut: <code>true</code> pour le développement et <code>false</code> pour la production.</ul><blockquote><p>Active le support du CSS Source Map</blockquote></section><section class="level2"aria-labelledby="devmiddleware"><h2 id="devmiddleware">devMiddleware</h2><ul><li>Type: <code>Object</code></ul><p>Voir <a href="https://github.com/webpack/webpack-dev-middleware">webpack-dev-middleware</a> pour les options disponibles.</section><section class="level2"aria-labelledby="devtools"><h2 id="devtools">devtools</h2><ul><li>Type: <code>boolean</code><li>Par défaut: <code>false</code></ul><p>Définit le droit d'afficher l'inspection des <a href="https://github.com/vuejs/vue-devtools">vue-devtools</a>.<p>Si cela a déjà été activé grâce au fichier <code>nuxt.config.js</code> ou autrement, les devtools seront activés, peu importe le flag.</section><section class="level2"aria-labelledby="extend"><h2 id="extend">extend</h2><blockquote><p>Permet de personnaliser manuellement la configuration de Webpack pour les bundles client et serveur.</blockquote><ul><li>Type: <code>Function</code></ul><p><code>extend</code> est appelé deux fois, une fois pour le bundle du serveur, et une fois pour celui du client. Les arguments de la méthode sont:<ol><li>L'objet de configuration Webpack<li>L'objet avec les clés suivantes (tous sont des booléens sauf <code>loaders</code>): <code>isDev</code>, <code>isClient</code>, <code>isServer</code> et <code>loaders</code>.</ol><section class="level4"aria-labelledby="warning"><h4 id="warning">Warning</h4><p><strong>Attention</strong>: Les clés <code>isClient</code> et <code>isServer</code> fournies n'ont rien à voir avec celles présentes dans le <a href="./internals-glossary/context"><code>context</code></a>. Elles ne sont <strong>pas</strong> dépréciées. Il ne faut en outre pas utiliser <code>process.client</code> et <code>process.server</code> ici car ils seront <code>undefined</code> à ce niveau.<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    extend(config, { isClient }) {
      // personnalisation de la configuration Webpack seulement pour le bundle client
      if (isClient) {
        config.devtool = 'source-map'
      }
    }
  }
}</code></pre><p>Si on souhaite en savoir davantage sur la configuration Webpack par défaut, il faut aller jeter un coup d'œil au <a href="https://github.com/nuxt/nuxt/tree/2.x-dev/packages/webpack/src/config">répertoire de Webpack</a>.</section><section class="level3"aria-labelledby="les-loaders-dans-extend"><h3 id="les-loaders-dans-extend">Les loaders dans extend</h3><p>Les <code>loaders</code> ont la même structure au niveau de l'objet que <a href="#loaders">build.loaders</a>, on peut donc changer les options des <code>loaders</code> à l'intérieur d'<code>extend</code>.<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    extend(config, { isClient, loaders: { vue } }) {
      // personnalisation de la configuration Webpack seulement pour le bundle client
      if (isClient) {
        vue.transformAssetUrls.video = ['src', 'poster']
      }
    }
  }
}</code></pre></section></section><section class="level2"aria-labelledby="extractcss"><h2 id="extractcss">extractCSS</h2><blockquote><p>Permet le <code>Common CSS Extraction</code> en utilisant les <a href="https://v2.ssr.vuejs.org/guide/css.html">directives</a> du package <code>Vue Server Renderer</code>.</blockquote><ul><li>Type: <code>Boolean</code> ou <code>Object</code><li>Par défaut: <code>false</code></ul><p>L'usage de <a href="https://github.com/faceyspacey/extract-css-chunks-webpack-plugin/"><code>extract-css-chunks-webpack-plugin</code></a> se fait de manière implicite, en séparant notre CSS dans des fichiers séparés, un par composant en général. Cela permet de mettre en cache notre CSS et notre JavaScript séparément et est sans doute quelque chose à essayer dans le cas où on possède beaucoup de CSS global ou partagé.<p>Exemple (<code>nuxt.config.js</code>):<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">extractCSS</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// ou</span>
    <span class="token literal-property property">extractCSS</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">ignoreOrder</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><section class="level4"aria-labelledby="info-1"><h4 id="info-1">Info</h4><p><strong>Note</strong>: Il y avait un bug avant Vue 2.5.18 qui enlevait les imports critiques de CSS lors de l'usage de cette option.<p>On pourrait souhaiter extraire tout notre CSS dans un seul fichier. Il y a une solution pour cela:</section><section class="level4"aria-labelledby="warning-1"><h4 id="warning-1">Warning</h4><p>Ce n'est pas recommandé de tout extraire dans un seul fichier. Extraire dans plusieurs fichiers CSS est meilleur pour la mise en cache et l'isolation dans le cas d'un préchargement. Cela peut aussi améliorer la performance de la page en ne téléchargeant que les ressources dont on a besoin.<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">extractCSS</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">styles</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'styles'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(css|vue)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">enforce</span><span class="token operator">:</span> <span class="token boolean">true</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section></section><section class="level2"aria-labelledby="filenames"><h2 id="filenames">filenames</h2><blockquote><p>Permet de personnaliser le nom des fichiers des bundles.</blockquote><ul><li><p>Type: <code>Object</code><li><p>Par défault:<pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token function-variable function">app</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isDev<span class="token punctuation">,</span> isModern <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> isDev <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[name]</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>isModern <span class="token operator">?</span> <span class="token string">'.modern'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.js</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[contenthash:7]</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>isModern <span class="token operator">?</span> <span class="token string">'.modern'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token function-variable function">chunk</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isDev<span class="token punctuation">,</span> isModern <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> isDev <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[name]</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>isModern <span class="token operator">?</span> <span class="token string">'.modern'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.js</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[contenthash:7]</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>isModern <span class="token operator">?</span> <span class="token string">'.modern'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token function-variable function">css</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isDev <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> isDev <span class="token operator">?</span> <span class="token string">'[name].css'</span> <span class="token operator">:</span> <span class="token string">'css/[contenthash:7].css'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">img</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isDev <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> isDev <span class="token operator">?</span> <span class="token string">'[path][name].[ext]'</span> <span class="token operator">:</span> <span class="token string">'img/[name].[contenthash:7].[ext]'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">font</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isDev <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> isDev <span class="token operator">?</span> <span class="token string">'[path][name].[ext]'</span> <span class="token operator">:</span> <span class="token string">'fonts/[name].[contenthash:7].[ext]'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">video</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isDev <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> isDev <span class="token operator">?</span> <span class="token string">'[path][name].[ext]'</span> <span class="token operator">:</span> <span class="token string">'videos/[name].[contenthash:7].[ext]'</span>
<span class="token punctuation">}</span></code></pre></ul><p>Cet exemple change les noms originaux des fragments en des identifiants numériques:<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    filenames: {
      chunk: ({ isDev }) => (isDev ? '[name].js' : '[id].[contenthash].js')
    }
  }
}</code></pre><p>Pour comprendre un peu mieux l'utilisation des <code>manifests</code>, il faut se référer à la <a href="https://webpack.js.org/guides/code-splitting/">documentation de Webpack</a>.<section class="level4"aria-labelledby="warning-2"><h4 id="warning-2">Warning</h4><p>Il faut bien faire attention lorsque l'on utilise des noms de fichiers non hashés en production car la plupart des navigateurs vont mettre en cache la ressource et ne détecteront pas les modifications lors du premier chargement.</section></section><section class="level2"aria-labelledby="friendlyerrors"><h2 id="friendlyerrors">friendlyErrors</h2><ul><li>Type: <code>Boolean</code><li>Par défaut: <code>true</code> (Affichage sympa activé)</ul><p>Active ou désactive les indications claires et précises fournies par <a href="https://github.com/nuxt/friendly-errors-webpack-plugin">FriendlyErrorsWebpackPlugin</a>.</section><section class="level2"aria-labelledby="hardsource"><h2 id="hardsource">hardSource</h2><ul><li>Type: <code>Boolean</code><li>Par défaut: <code>false</code><li>⚠️ Expérimental</ul><p>Active le plugin <a href="https://github.com/mzgoddard/hard-source-webpack-plugin">HardSourceWebpackPlugin</a> pour une mise en cache améliorée.</section><section class="level2"aria-labelledby="hotmiddleware"><h2 id="hotmiddleware">hotMiddleware</h2><ul><li>Type: <code>Object</code></ul><p>Se référer à <a href="https://github.com/glenjamin/webpack-hot-middleware">webpack-hot-middleware</a> pour les options disponibles.</section><section class="level2"aria-labelledby="htmlminify"><h2 id="htmlminify">html.minify</h2><ul><li>Type: <code>Object</code><li>Par défault:</ul><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token literal-property property">collapseBooleanAttributes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">decodeEntities</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">minifyCSS</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">minifyJS</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">processConditionalComments</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">removeEmptyAttributes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">removeRedundantAttributes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">trimCustomFragments</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">useShortDoctype</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span></code></pre><p><strong>Attention</strong>: si l'on fait des changements à <code>html.minify</code>, il ne seront pas fusionnés avec les valeurs par défaut !<p>La configuration pour le plugin <a href="https://github.com/kangax/html-minifier">html-minifier</a> est là pour minifier les fichiers HTML créés durant le processus de build (la minification sera appliqueé pour <em>tous les modes</em>).</section><section class="level2"aria-labelledby="indicator"><h2 id="indicator">indicator</h2><blockquote><p>Affiche un indicateur de build pour le Hot Module Replacement (HMR) lors du développement. Disponible depuis la <code>v2.8.0</code>.</blockquote><ul><li>Type: <code>Boolean</code><li>Par défault: <code>true</code></ul><figure><img src="https://user-images.githubusercontent.com/5158436/58500509-93ba0f80-8197-11e9-8524-e115c6d32571.gif"alt="nuxt-build-indicator"><figcaption aria-hidden="true">nuxt-build-indicator</figcaption></figure></section><section class="level2"aria-labelledby="loaders"><h2 id="loaders">loaders</h2><blockquote><p>Permet de personnaliser les options de Nuxt par rapport aux loaders intégrés.</blockquote><ul><li>Type: <code>Object</code><li>Par défault:</ul><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token literal-property property">file</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">fontUrl</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">1000</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imgUrl</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">1000</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">pugPlain</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">vue</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">transformAssetUrls</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">video</span><span class="token operator">:</span> <span class="token string">'src'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">source</span><span class="token operator">:</span> <span class="token string">'src'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">object</span><span class="token operator">:</span> <span class="token string">'src'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">embed</span><span class="token operator">:</span> <span class="token string">'src'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">cssModules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">localIdentName</span><span class="token operator">:</span> <span class="token string">'[local]_[hash:base64:5]'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">less</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">sass</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">indentedSyntax</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">scss</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">stylus</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">vueStyle</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><blockquote><p>Note: en plus de spécifier la configuration d ans un fichier <code>nuxt.config.js</code>, cela peut aussi être modifié par <a href="#extend">build.extend</a>.</blockquote><section class="level3"aria-labelledby="loadersfile"><h3 id="loadersfile">loaders.file</h3><blockquote><p>Davantage de détails dans les <a href="https://github.com/webpack-contrib/file-loader#options">options de file-loader</a>.</blockquote></section><section class="level3"aria-labelledby="loadersfonturl-and-loadersimgurl"><h3 id="loadersfonturl-and-loadersimgurl">loaders.fontUrl and loaders.imgUrl</h3><blockquote><p>Davantage de détails dans les <a href="https://github.com/webpack-contrib/url-loader#options">options d'url-loader</a>.</blockquote></section><section class="level3"aria-labelledby="loaderspugplain"><h3 id="loaderspugplain">loaders.pugPlain</h3><blockquote><p>Davantage de détails dans le <a href="https://github.com/yyx990803/pug-plain-loader">pug-plain-loader</a> ou <a href="https://pugjs.org/api/reference.html#options">les options du compilateur Pug</a>.</blockquote></section><section class="level3"aria-labelledby="loadersvue"><h3 id="loadersvue">loaders.vue</h3><blockquote><p>Davantage de détails dans les <a href="https://vue-loader.vuejs.org/options.html">options de vue-loader</a>.</blockquote></section><section class="level3"aria-labelledby="loaderscss-and-loaderscssmodules"><h3 id="loaderscss-and-loaderscssmodules">loaders.css and loaders.cssModules</h3><blockquote><p>Davantage de détails dans les <a href="https://github.com/webpack-contrib/css-loader#options">options du css-loader</a>.</blockquote><p>Note: les <a href="https://vue-loader.vuejs.org/guide/css-modules.html#css-modules">CSS modules</a> sont des options pour le loader.</section><section class="level3"aria-labelledby="loadersless"><h3 id="loadersless">loaders.less</h3><blockquote><p>On peut passer des options spécifique à Less au <code>less-loader</code> via <code>loaders.less</code>. Se référer à la documentation de <a href="http://lesscss.org/usage/#command-line-usage-options">Less</a> pour toutes les options disponibles.</blockquote></section><section class="level3"aria-labelledby="loaderssass-et-loadersscss"><h3 id="loaderssass-et-loadersscss">loaders.sass et loaders.scss</h3><blockquote><p>Se référer à la documentation de <a href="https://github.com/sass/node-sass/blob/master/README.md#options">Node Sass</a> pour toutes les options disponibles de Sass.</blockquote><blockquote><p>Note: <code>loaders.sass</code> est utilisé pour la <a href="http://sass-lang.com/documentation/file.INDENTED_SYNTAX.html">Syntaxe Indentée de Sass</a>.</blockquote></section><section class="level3"aria-labelledby="loadersvuestyle"><h3 id="loadersvuestyle">loaders.vueStyle</h3><blockquote><p>Davantage de détails dans les options de <a href="https://github.com/vuejs/vue-style-loader#options">vue-style-loader</a>.</blockquote></section></section><section class="level2"aria-labelledby="optimization"><h2 id="optimization">optimization</h2><ul><li><p>Type: <code>Object</code><li><p>Par défault:<pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token literal-property property">minimize</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// terser-webpack-plugin</span>
    <span class="token comment">// optimize-css-assets-webpack-plugin</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">automaticNameDelimiter</span><span class="token operator">:</span> <span class="token string">'.'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token keyword nil">undefined</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></ul><p>La valeur par défaut de <code>splitChunks.name</code> est <code>true</code> dans le mode <code>dev</code> ou bien <code>analyze</code>.<p>On peut définir <code>minimizer</code> à un tableau personnalisé de plugins ou définir <code>minimize</code> à <code>false</code> pour désactiver tous les minimiseurs. (<code>minimize</code> est désactivé lors du développement par défaut)<p>Se référer à la documentation sur <a href="https://webpack.js.org/configuration/optimization">l'optimisation de Webpack</a>.</section><section class="level2"aria-labelledby="optimizecss"><h2 id="optimizecss">optimizeCSS</h2><ul><li>Type: <code>Object</code> ou <code>Boolean</code><li>Par défault:<ul><li><code>false</code><li><code>{}</code> lorsque extractCSS est activé</ul></ul><p>Les options du plugin OptimizeCSSAssets.<p>Se référer à <a href="https://github.com/NMFR/optimize-css-assets-webpack-plugin">NMFR/optimize-css-assets-webpack-plugin</a>.</section><section class="level2"aria-labelledby="parallel"><h2 id="parallel">parallel</h2><ul><li>Type: <code>Boolean</code><li>Par défaut: <code>false</code><li>⚠️ Expérimental</ul><blockquote><p>Active le <a href="https://github.com/webpack-contrib/thread-loader#thread-loader">thread-loader</a> lors du build de Webpack.</blockquote></section><section class="level2"aria-labelledby="plugins"><h2 id="plugins">plugins</h2><blockquote><p>Ajoute des plugins Webpack</blockquote><ul><li>Type: <code>Array</code><li>Par défault: <code>[]</code></ul><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">import webpack from 'webpack'
import { version } from './package.json'
export default {
  build: {
    plugins: [
      new webpack.DefinePlugin({
        'process.VERSION': version
      })
    ]
  }
}</code></pre></section><section class="level2"aria-labelledby="postcss"><h2 id="postcss">postcss</h2><blockquote><p>Permet de personnaliser les plugins du <a href="https://github.com/postcss/postcss-loader#usage">PostCSS Loader</a>.</blockquote><ul><li>Type: <code>Array</code> (legacy, écrasera les valeurs par défaut), <code>Object</code> (recommandé), <code>Function</code> ou <code>Boolean</code></ul><p><strong>Note</strong>: Nuxt a appliqué <a href="https://github.com/csstools/postcss-preset-env">PostCSS Preset Env</a>. Par défaut, cela active les <a href="https://cssdb.org/">fonctionnalités du niveau 2</a> et l'<a href="https://github.com/postcss/autoprefixer">Autoprefixer</a>, on peut utiliser <code>build.postcss.preset</code> pour le configurer.<ul><li><p>Par défault:<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">{
  plugins: {
    'postcss-import': {},
    'postcss-url': {},
    'postcss-preset-env': this.preset,
    'cssnano': { preset: 'default' } // désactivé lors du développement
  },
  order: 'presetEnvAndCssnanoLast',
  preset: {
    stage: 2
  }
}</code></pre></ul><p>Les paramètres personnalisés du plugin seront fusionnés avec les valeurs par défaut des plugins (à moins qu'on n'utilise un <code>Array</code> au lieu d'un <code>Object</code>).<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    postcss: {
      plugins: {
        // désactive `postcss-url`
        'postcss-url': false,
        // ajouter quelques plugins
        'postcss-nested': {},
        'postcss-responsive-type': {},
        'postcss-hexrgba': {}
      },
      preset: {
        autoprefixer: {
          grid: true
        }
      }
    }
  }
}</code></pre><p>Si la configuration postCSS est un <code>Object</code>, <code>order</code> peut être utilisé pour définir l'ordre du plugin:<ul><li>Type: <code>Array</code> (nom des plugins rangés), <code>String</code> (rangé selon le nom du preset), <code>Function</code><li>Par défaut: <code>cssnanoLast</code> (<code>cssnano</code> est en dernier)</ul><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    postcss: {
      // nom du preset
      order: 'cssnanoLast',
      // nom des plugins rangés
      order: ['postcss-import', 'postcss-preset-env', 'cssnano']
      // fonction pour déterminer l'ordre du plugin
      order: (names, presets) => presets.cssnanoLast(names)
    }
  }
}</code></pre><section class="level3"aria-labelledby="plugins-postcss-et-nuxt-tailwindcss"><h3 id="plugins-postcss-et-nuxt-tailwindcss">plugins postcss et nuxt-tailwindcss</h3><p>Si l'on souhaite appliquer un plugin postCSS (ex: <code>postcss-pxtorem</code>) sur une configuration de <code>nuxt-tailwindcss</code>, on doit changer l'ordre et charger <code>tailwindcss</code> en premier.<p><strong>Cette configuration n'a pas d'impact sur <code>nuxt-purgecss</code>.</strong><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">import { join } from 'path'

export default {
  // ...
  build: {
    postcss: {
      plugins: {
        tailwindcss: join(__dirname, 'tailwind.config.js'),
        'postcss-pxtorem': {
          propList: ['*', '!border*']
        }
      }
    }
  }
}</code></pre></section></section><section class="level2"aria-labelledby="profile"><h2 id="profile">profile</h2><ul><li>Type: <code>Boolean</code><li>Par défault: activé avec l'argument <code>--profile</code> dans la ligne de commande</ul><blockquote><p>Active le profiler dans <a href="https://github.com/nuxt/webpackbar#profile">WebpackBar</a></blockquote></section><section class="level2"aria-labelledby="publicpath"><h2 id="publicpath">publicPath</h2><blockquote><p>Nuxt nous permet de téléverser les fichiers présents dans notre répertoire <code>dist</code> jusqu'à notre CDN pour des performances maximales, il suffit de définir l'URL de notre CDN dans <code>publicPath</code>.</blockquote><ul><li>Type: <code>String</code><li>Default: <code>'/_nuxt/'</code></ul><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    publicPath: 'https://cdn.nuxtjs.org'
  }
}</code></pre><p>Ensuite, lorsque on lance <code>nuxt build</code>, il suffit de téléverser le contenu du répertoire <code>.nuxt/dist/client</code> dans notre CDN et voilà !</section><section class="level2"aria-labelledby="quiet"><h2 id="quiet">quiet</h2><blockquote><p>Supprime la majeure partie de la journalisation des builds</blockquote><ul><li>Type: <code>Boolean</code><li>Par défault: Activé lorsque l'environment détecté par <a href="https://github.com/blindmedia/std-env">std-env</a> est égal à <code>CI</code> ou <code>test</code>.</ul></section><section class="level2"aria-labelledby="splitchunks"><h2 id="splitchunks">splitChunks</h2><ul><li><p>Type: <code>Object</code><li><p>Par défault:<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    splitChunks: {
      layouts: false,
      pages: true,
      commons: true
    }
  }
}</code></pre></ul><p>Si séparation de code pour <code>layout</code>, <code>pages</code> et <code>commons</code> (bibliothèques communes: vue|vue-loader|vue-router|vuex...).</section><section class="level2"aria-labelledby="ssr"><h2 id="ssr">ssr</h2><blockquote><p>Crée un bundle Webpack spécial pour le rendu côté serveur.</blockquote><ul><li>Type: <code>Boolean</code><li>Par défault: <code>true</code> pour le mode universel et <code>false</code> pour notre soirée SPA</ul><p>Cette option est automatiquement définie en se basant sur la valeur de <code>mode</code> si rien n'est fourni.</section><section class="level2"aria-labelledby="standalone"><h2 id="standalone">standalone</h2><blockquote><p>Dépendances du groupe de serveurs en ligne (avancé)</blockquote><ul><li>Type: <code>Boolean</code><li>Default: <code>false</code></ul><p>Ce mode regroupe des <code>node_modules</code> qui sont normalement conservés en tant qu'externes dans la construction du serveur (<a href="https://github.com/nuxt/nuxt/pull/4661">plus d'informations</a>).<section class="level4"aria-labelledby="warning-3"><h4 id="warning-3">Warning</h4><p>Les dépendances d'exécution (modules, <code>nuxt.config</code>, middleware du serveur et répertoire statique) ne sont pas regroupées. Cette fonctionnalité désactive uniquement l'utilisation de <a href="https://webpack.js.org/configuration/externals/">webpack-externes</a> for server-bundle.</section><section class="level4"aria-labelledby="info-2"><h4 id="info-2">Info</h4><p>Vous pouvez utiliser la commande <code>yarn nuxt build --standalone</code> pour activer ce mode sur la ligne de commande. (Si vous n'utilisez pas <code>yarn</code>, vous pouvez exécuter la commande avec <code>npx</code>.)</section></section><section class="level2"aria-labelledby="styleresources"><h2 id="styleresources">styleResources</h2><ul><li>Type: <code>Object</code><li>Par défault: <code>{}</code></ul><section class="level4"aria-labelledby="warning-4"><h4 id="warning-4">Warning</h4><p><strong>Attention</strong>: cette propriété est dépréciée. Il faudrait utiliser le module <a href="https://github.com/nuxt-community/style-resources-module/">style-resources-module</a> à la place, pour avoir des performances accrues et une meilleure DX !<p>Ceci est utile lorsque on a besoin d'injecter certains variables ou mixins à l'intérieur de nos pages sans avoir besoin de les importer à chaque fois.<p>Nuxt utilise <a href="https://github.com/yenshih/style-resources-loader">https://github.com/yenshih/style-resources-loader</a> pour réussir ce comportement.<p>Il y a besoin de spécifier un schéma/un chemin si on veut la partager pour les pre-processors nuls et ajoute des: <code>less</code>, <code>sass</code>, <code>scss</code> ou <code>stylus</code>.<p>On ne peut pas utiliser d'alias de chemin (<code>~</code> ou <code>@</code>), on aura besoin d'utiliser des chemins relatifs ou absolus.<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">{
  build: {
    styleResources: {
      scss: './assets/variables.scss',
      less: './assets/*.less',
      // sass: ...,
      // scss: ...
      options: {
        // Voir https://github.com/yenshih/style-resources-loader#options
        // Sauf la propriété `patterns`
      }
    }
  }
}</code></pre></section></section><section class="level2"aria-labelledby="templates"><h2 id="templates">templates</h2><blockquote><p>Nuxt nous permet d'utiliser nos propres templates qui seront render basés sur les <a href="./directory-structure/modules">modules</a>.</blockquote><ul><li>Type: <code>Array</code></ul><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    templates: [
      {
        src: '~/modules/support/plugin.js', // `src` peut être relatif ou absolu
        dst: 'support.js', // `dst` est relative au project `.nuxt` dir
        options: {
          // Les options sont passés aux templates grâce à la clé `options`
          live_chat: false
        }
      }
    ]
  }
}</code></pre><p>Les templates sont render en utilisant <a href="https://lodash.com/docs/#template"><code>lodash.template</code></a>, cela permet d'en savoir plus sur les otages et leur mentalité/adresse psk c'est sincère.</section><section class="level2"aria-labelledby="terser"><h2 id="terser">terser</h2><ul><li>Type: <code>Object</code> ou <code>Boolean</code><li>Par défault:</ul><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">{
  parallel: true,
  cache: false,
  sourceMap: false,
  extractComments: {
    filename: 'LICENSES'
  },
  terserOptions: {
    output: {
      comments: /^\**!|@preserve|@license|@cc_on/
    }
  }
}</code></pre><p>Options du plugin Terser. Il suffit de mettre un <code>false</code> pour désactiver le plugin.<p>L'activation de <code>sourceMap</code> laissera le commentaire de liaison <code>//# sourceMappingURL</code> à la fin de chaque fichier de sortie si webpack <code>config.devtool</code> est défini sur <code>source-map</code>.<p>Voir <a href="https://github.com/webpack-contrib/terser-webpack-plugin">webpack-contrib/terser-webpack-plugin</a>.</section><section class="level2"aria-labelledby="transpile"><h2 id="transpile">transpile</h2><ul><li>Type: <code>Array&#x3C;String | RegExp | Function></code><li>Par défault: <code>[]</code></ul><p>Si on veut transpiler certaines dépendances spécifiques avec Babel, on peut les ajouter dans <code>build.transpile</code>. Chaque item transpilé peut être un nom de package, une chaîne de caractères ou un objet regex pour matcher le nom du fichier avec la dépendance que l'on souhaite.<p>Depuis <code>v2.9.0</code>, on peut aussi utiliser une fonction pour rendre la transpilation conditionnelle, la fonction recevra un objet (<code>{ isDev, isServer, isClient, isModern, isLegacy }</code>):<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">{
  build: {
    transpile: [({ isLegacy }) => isLegacy &#x26;&#x26; 'ky']
  }
}</code></pre><p>Dans cet exemple, <code>ky</code> sera transpilé par Babel si Nuxt n'est pas en <a href="./configuration-glossary/configuration-modern">mode moderne</a>.</section><section class="level2"aria-labelledby="vueloader"><h2 id="vueloader">vueLoader</h2><blockquote><p>Note: Cette configuration a été enlevée depuis Nuxt 2.0, il faut maintenant utiliser <a href="#loaders"><code>build.loaders.vue</code></a> à la place.</blockquote><ul><li><p>Type: <code>Object</code><li><p>Par défault:<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">{
  productionMode: !this.options.dev,
  transformAssetUrls: {
    video: 'src',
    source: 'src',
    object: 'src',
    embed: 'src'
  }
}</code></pre></ul><blockquote><p>Pour spécifier les options <a href="https://vue-loader.vuejs.org/options.html">Vue Loader Options</a>.</blockquote></section><section class="level2"aria-labelledby="watch"><h2 id="watch">watch</h2><blockquote><p>On peut fournir nos propres fichiers personnalisés à surveiller avant de régénérer après des modifications. Cette fonctionnalité est surtout utile à utiliser avec <a href="./directory-structure/modules">modules</a>.</blockquote><ul><li>Type: <code>Array&#x3C;String></code></ul><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    watch: ['~/.nuxt/support.js']
  }
}</code></pre></section><section class="level2"aria-labelledby="followsymlinks"><h2 id="followsymlinks">followSymlinks</h2><blockquote><p>Par défaut, le build process ne scan pas les fichiers avec des liens symboliques. Ce booléen les inclut, et nous permet donc d'avoir des liens symboliques à l'intérieur des répertoires tels que <code>pages</code> par exemple.</blockquote><ul><li>Type: <code>Boolean</code></ul><pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  build: {
    followSymlinks: true
  }
}</code></pre><p><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>