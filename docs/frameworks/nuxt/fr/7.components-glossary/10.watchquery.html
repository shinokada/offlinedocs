<!doctype html><html lang="fr"><meta charset="utf-8"><title>La propriété watchQuery</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="description"content="Surveille les query strings et exécute des méthodes de composant lors d&#x27;un changement (asyncData, fetch(context), validate, layout, ...)"><meta name="navigation.title"content="La propriété watchQuery"><meta name="category"content="components-glossary"><link rel="stylesheet"href="../../../../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="la-propriété-watchquery"class="level1"><h1>La propriété watchQuery</h1><p>Surveille les query strings et exécute des méthodes de composant lors d'un changement (asyncData, fetch(context), validate, layout, ...).<hr><ul><li><strong>Type:</strong> <code>Boolean</code> ou <code>Array</code> ou <code>Function</code> (par défaut: <code>[]</code>)</ul><p>Utilisez la propriété <code>watchQuery</code> pour surveiller les query strings. Si les strings changent, toutes les méthodes du composant (asyncData, fetch(context), validate, layout, ...) seront appelées. La surveillance est désactivée par défaut pour des raisons de performance.<p>Si l'on souhaite surveiller toutes les query strings, il faut définir <code>watchQuery: true</code>.<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">watchQuery</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'page'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><p>On peut aussi utiliser la fonction <code>watchQuery(nouvelleRequete, ancienneRequete)</code> pour avoir une surveillance plus précise.<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token function">watchQuery</span><span class="token punctuation">(</span><span class="token parameter">nouvelleRequete<span class="token punctuation">,</span> ancienneRequete</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Exécute seulement les méthodes du composant dans le cas où l'ancienne query string</span>
    <span class="token comment">// contenait la chaîne de caractères `bar` et la nouvelle `foo`</span>
    <span class="token keyword control-flow">return</span> nouvelleRequete<span class="token punctuation">.</span><span class="token property-access">foo</span> <span class="token operator">&#x26;&#x26;</span> ancienneRequete<span class="token punctuation">.</span><span class="token property-access">bar</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><section id="warning"class="level4"><h4>Warning</h4><p>Le nouveau hook <code>fetch</code> (disponible depuis la version 2.12) n'est pas affecté par <code>watchQuery</code>. Pour plus d'informations, se référer aux <a href="./features/data-fetching#the-fetch-hook">changements sur la surveillance des query strings</a>.<p><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>