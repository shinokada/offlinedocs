<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <title>La propriété transition</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Nuxt utilise le composant <transition> pour nous permettre de créer et appliquer de superbes transitions/animations lors de la navigation entre les pages.">
    <meta name="navigation.title" content="La propriété transition">
    <meta name="category" content="components-glossary">
    <link rel="stylesheet" href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css">
  </head>
  <body>
    <section id="la-propriété-transition" class="level1">
      <h1>La propriété transition</h1>
      <p>Nuxt utilise le composant <a href="https://vuejs.org/v2/guide/transitions.html#Transitioning-Single-Elements-Components"><code>&#x3C;transition></code></a> pour nous permettre de créer et appliquer de superbes transitions/animations lors de la navigation entre les pages.</p>
      <hr>
      <ul>
        <li><strong>Type:</strong> <code>String</code> ou <code>Object</code> ou <code>Function</code></li>
      </ul>
      <p>Pour définir une transition personnalisée pour une route spécifique, il suffit d'ajouter la propriété <code>transition</code> au composant page.</p>
      <pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// Peut être une chaîne de caractères</span>
  <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token string">''</span>
  <span class="token comment">// Ou un Objet</span>
  <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// Ou une fonction</span>
  <span class="token function">transition</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword module">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      <section id="chaîne-de-caractères" class="level2">
        <h2>Chaîne de caractères</h2>
        <p>Si le paramètre <code>transition</code> est défini en tant que chaîne de caractères, il sera utilisé sous la forme <code>transition.name</code>.</p>
        <pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token string">'test'</span>
<span class="token punctuation">}</span></code></pre>
        <p>Nuxt va utiliser ces paramètres pour définir le composant comme suit:</p>
        <pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>transition</span><span class="token punctuation">></span></span></code></pre>
      </section>
      <section id="objet" class="level2">
        <h2>Objet</h2>
        <p>Si la propriété <code>transition</code> est définie en tant qu'objet:</p>
        <pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'out-in'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
        <p>Nuxt va utiliser ces paramètres pour définir le composant comme suit:</p>
        <pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test<span class="token punctuation">"</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>out-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>transition</span><span class="token punctuation">></span></span></code></pre>
        <p>L'objet <code>transition</code> peut avoir les propriétés suivantes:</p><!-- The ToC below seems so wrong, in the english version too.. -->
        <p>
          | Propriété | Type | Par défaut | Définition |
          | |
          | <code>name</code> | <code>String</code> | <code>"page"</code> | Le nom de la transition appliquée à toutes les transitions de routes. |
          | <code>mode</code> | <code>String</code> | <code>"out-in"</code> | Le mode qui s'applique aux transitions sur toutes les routes, se référer à la <a href="https://vuejs.org/v2/guide/transitions.html#Transition-Modes">documentation de Vue.js</a>. |
          | <code>css</code> | <code>Boolean</code> | <code>true</code> | Définit l'application ou non des classes CSS sur les transitions. Si définit à <code>false</code>, seulement les hooks JavaScript définis par des événements seront exécutés. |
          | <code>duration</code> | <code>Integer</code> | non défini | La durée (en millisecondes) appliquée à la transition, voir la <a href="https://vuejs.org/v2/guide/transitions.html#Explicit-Transition-Durations">documentation de Vue.js</a>. |
          | <code>type</code> | <code>String</code> | non défini | Spécifie le type des événements de transition à attendre pour déterminer la fin d'une transition. Les valeurs disponibles sont <code>"transition"</code> et <code>"animation"</code>. Par défaut, le type qui a la plus longue durée sera choisi. |
          | <code>enterClass</code> | <code>String</code> | non défini | Le state du départ d'une classe de transition. Voir la <a href="https://vuejs.org/v2/guide/transitions.html#Custom-Transition-Classes">documentation de Vue.js</a>. |
          | <code>enterToClass</code> | <code>String</code> | non défini | Le state de fin d'une classe de transition. Voir la <a href="https://vuejs.org/v2/guide/transitions.html#Custom-Transition-Classes">documentation de Vue.js</a>. |
          | <code>enterActiveClass</code> | <code>String</code> | non défini | La classe appliquée pendant l'intégralité de la durée de la transition. Voir la <a href="https://vuejs.org/v2/guide/transitions.html#Custom-Transition-Classes">documentation de Vue.js</a>. |
          | <code>leaveClass</code> | <code>String</code> | non défini | Le state du départ d'une classe de transition. Voir la <a href="https://vuejs.org/v2/guide/transitions.html#Custom-Transition-Classes">documentation de Vue.js</a>. |
          | <code>leaveToClass</code> | <code>String</code> | non défini | Le state de fin d'une classe de transition. Voir la <a href="https://vuejs.org/v2/guide/transitions.html#Custom-Transition-Classes">documentation de Vue.js</a>. |
          | <code>leaveActiveClass</code> | <code>String</code> | non défini | La classe appliquée pendant l'intégralité de la durée de la transition. Voir la <a href="https://vuejs.org/v2/guide/transitions.html#Custom-Transition-Classes">documentation de Vue.js</a>. |
        </p>
        <p>On peut aussi définir des méthodes dans la propriété <code>transition</code> de la page, celles-ci sont pour des <a href="https://vuejs.org/v2/guide/transitions.html#JavaScript-Hooks">hooks JavaScript</a>:</p>
        <ul>
          <li><code>beforeEnter(élément)</code></li>
          <li><code>enter(élément, terminé)</code></li>
          <li><code>afterEnter(élément)</code></li>
          <li><code>enterCancelled(élément)</code></li>
          <li><code>beforeLeave(élément)</code></li>
          <li><code>leave(élément, terminé)</code></li>
          <li><code>afterLeave(élément)</code></li>
          <li><code>leaveCancelled(élément)</code></li>
        </ul>
        <pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">afterLeave</span><span class="token punctuation">(</span><span class="token parameter">élément</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'afterLeave'</span><span class="token punctuation">,</span> élément<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
        <p><em>Note: une bonne pratique serait d'explicitement déclarer <code>css:false</code> pour des transitions uniquement en JavaScript, ainsi Vue pourra ignorer la détection du CSS. Cela prévient de plus de potentiels conflits accidentels avec des règles CSS.</em></p>
        <section id="mode-de-transition" class="level3">
          <h3>Mode de transition</h3>
          <p><strong>Le mode de transition par défaut pour les pages est différent de celui de Vue.js</strong>. Il est défini à <code>out-in</code>. Si l'on souhaite exécuter les transitions entrantes et sortantes simultanément, il faut passer le mode à une chaîne de caractères vide <code>mode: ''</code>.</p>
          <pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">''</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
        </section>
      </section>
      <section id="fonction" class="level2">
        <h2>Fonction</h2>
        <p>Si la propriété <code>transition</code> est définie en tant que fonction:</p>
        <pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token function">transition</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword module">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword module">from</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token string">'slide-left'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">+</span>to<span class="token punctuation">.</span><span class="token property-access">query</span><span class="token punctuation">.</span><span class="token property-access">page</span> <span class="token operator">&#x3C;</span> <span class="token operator">+</span><span class="token keyword module">from</span><span class="token punctuation">.</span><span class="token property-access">query</span><span class="token punctuation">.</span><span class="token property-access">page</span> <span class="token operator">?</span> <span class="token string">'slide-right'</span> <span class="token operator">:</span> <span class="token string">'slide-left'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
        <p>Voici ce que cela va générer comme transitions lors de la navigation:</p>
        <ul>
          <li><code>/</code> to <code>/posts</code> => <code>slide-left</code></li>
          <li><code>/posts</code> to <code>/posts?page=3</code> => <code>slide-left</code></li>
          <li>
            <code>/posts?page=3</code> to <code>/posts?page=2</code> => <code>slide-right</code>
            <span style="float: footnote;"><a href="../index.html#toc">Go to TOC</a></span>
          </li>
        </ul>
      </section>
    </section>
  </body>
</html>
