<!doctypehtml><html lang="fr"><meta charset="utf-8"><title>Le Contexte</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="description"content="Le &#x60;context&#x60; fournit des objets/paramètres en plus aux composants Vue et est disponible dans des lifecycles Nuxt spéciaux comme par exemple &#x60;asyncData&#x60;, &#x60;fetch&#x60;, &#x60;plugins&#x60;, &#x60;middleware&#x60; et &#x60;nuxtServerInit&#x60;."><meta name="category"content="internals-glossary"><link rel="stylesheet"href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css"><section id="le-contexte"class="level1"><h1>Le Contexte</h1><p>Le <code>context</code> fournit des objets/paramètres en plus aux composants Vue et est disponible dans des lifecycles Nuxt spéciaux comme par exemple <a href="./internals-glossary/context"><code>asyncData</code></a>, <a href="./features/data-fetching"><code>fetch</code></a>, <a href="./directory-structure/plugins"><code>plugins</code></a>, <a href="./directory-structure/middleware#router-middleware"><code>middleware</code></a> et <a href="./directory-structure/store#the-nuxtserverinit-action"><code>nuxtServerInit</code></a>.<hr><blockquote><p><em>Note: Le "context" auquel on fait référence ici ne doit pas être confondu avec l'objet <code>context</code> disponible dans les <a href="https://vuex.vuejs.org/guide/actions.html"><code>actions Vuex</code></a>. Les deux n'ont rien à voir.</em></blockquote><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Paramètres universels</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>
    app<span class="token punctuation">,</span>
    store<span class="token punctuation">,</span>
    route<span class="token punctuation">,</span>
    params<span class="token punctuation">,</span>
    query<span class="token punctuation">,</span>
    env<span class="token punctuation">,</span>
    isDev<span class="token punctuation">,</span>
    isHMR<span class="token punctuation">,</span>
    redirect<span class="token punctuation">,</span>
    error<span class="token punctuation">,</span>
    $config
  <span class="token punctuation">}</span> <span class="token operator">=</span> context
  <span class="token comment">// Côté serveur</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token property-access">server</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> beforeNuxtRender <span class="token punctuation">}</span> <span class="token operator">=</span> context
  <span class="token punctuation">}</span>
  <span class="token comment">// Côté client</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token property-access">client</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword module">from</span><span class="token punctuation">,</span> nuxtState <span class="token punctuation">}</span> <span class="token operator">=</span> context
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><section id="paramètres-universels"class="level2"><h2>Paramètres universels</h2><p>Ce sont les paramètres qui sont disponibles côté client et côté serveur.<section id="app"class="level3"><h3>app</h3><p><code>app</code> (<em>NuxtAppOptions</em>)<p>L'instance principale de Vue avec les options qui incluent tous vos plugins. Par exemple, lorsque l'on utilise <code>i18n</code>, on peut avoir accès à <code>$i18n</code> grâce à <code>context.app.i18n</code>.</section><section id="store"class="level3"><h3>store</h3><p><code>store</code> (<a href="https://vuex.vuejs.org/api/#vuex-store-instance-properties"><em>Store Vuex</em></a>)<p>L'instance du Store Vuex. <strong>Disponible uniquement si le <a href="./directory-structure/store">store vuex</a> a été défini</strong>.</section><section id="route"class="level3"><h3>route</h3><p><code>route</code> (<a href="https://v3.router.vuejs.org/fr/api/#the-route-object"><em>Vue Router Route</em></a>)<p>L'instance du Routeur de Vue.</section><section id="params"class="level3"><h3>params</h3><p><code>params</code> (<em>Objet</em>)<p>Un alias de <code>route.params</code>.</section><section id="query"class="level3"><h3>query</h3><p><code>query</code> (<em>Objet</em>)<p>Un alias de <code>route.query</code>.</section><section id="env"class="level3"><h3>env</h3><p><code>env</code> (<em>Objet</em>)<p>Variables d'environnement définies dans le fichier <code>nuxt.config.js</code>, se référer à l'<a href="./configuration-glossary/configuration-env">API env</a>.</section><section id="isdev"class="level3"><h3>isDev</h3><p><code>isDev</code> (<em>Booléen</em>)<p>Un booléen qui permet de savoir si l'on est en mode développement, cela peut être utile pour mettre en cache de la data en production.</section><section id="ishmr"class="level3"><h3>isHMR</h3><p><code>isHMR</code> (<em>Booléen</em>)<p>Un booléen qui permet de savoir si la méthode/middleware est appellé depuis le module de remplacement à chaud de webpack (<em>vrai seulement du côté client et en mode développement</em>).</section><section id="redirect"class="level3"><h3>redirect</h3><p><code>redirect</code> (<em>Fonction</em>)<p>Utilisez cette méthode pour rediriger l'utilisateur vers une autre route, le status code est utilisé du côté serveur, prend la valeur <code>302</code> par défaut. <code>redirect([status,] path [, query])</code>.<p>Exemples:<pre class="language-js{}[]"><code class="language-js{}[]">redirect(302, '/login')
redirect({ name: 'slug', params: { slug: mySlug } })
redirect('https://vuejs.org')</code></pre><p>Voir le <a href="https://github.com/vuejs/vue-router/blob/64d60c01920405f0b93e00a401c73868b08ee6e5/types/router.d.ts#L161-L169">Vue Router docs</a> more info on the Location property.<section id="info"class="level4"><h4>Info</h4><p>Il n'est pas possible d'utiliser <code>redirect</code> ou <code>error</code> dans <a href="./directory-structure/plugins#client-or-server-side-only">client-side Nuxt plugin</a> en raison d'erreurs d'hydratation (le contenu du client serait différent de ce qu'il attend du serveur).<p>Une solution de contournement valide serait d'utiliser <code>window.onNuxtReady(() => { window.$nuxt.$router.push('/votre-route') })</code></section></section><section id="error"class="level3"><h3>error</h3><p><code>error</code> (<em>Fonction</em>)<p>Utilisez cette méthode pour afficher la page d'erreur: <code>error(paramètres)</code>. Les <code>paramètres</code> doivent avoir les propriétés <code>statusCode</code> et <code>message</code>.</section><section id="config"class="level3"><h3><code>$config</code></h3><p><code>$config</code> (<em>Objet</em>)<p>La <a href="./configuration-glossary/configuration-runtime-config">configuration de l'exécution</a> même.</section></section><section id="paramètres-côté-serveur"class="level2"><h2>Paramètres côté serveur</h2><p>Ces paramètres ne sont disponibles que du côté serveur.<section id="req"class="level3"><h3>req</h3><p><code>req</code> (<a href="https://nodejs.org/api/http.html#http_class_http_incomingmessage"><em>http.Request</em></a>)<p>Requête provenant du serveur Node.js. Si Nuxt est utilisé en tant que middleware, l'objet de la requête risque d'être différent en fonction du framework que l'on utilise.<br><strong>Non disponible lors d'un <code>nuxt generate</code></strong>.</section><section id="res"class="level3"><h3>Res</h3><p><code>res</code> (<a href="https://nodejs.org/api/http.html#http_class_http_serverresponse"><em>http.Response</em></a>)<p>Réponse du serveur Node.js. Si Nuxt est utilisé en tant que middleware, l'objet de la réponse peut être différent en fonction du framework que l'on utilise.<br><strong>Non disponible lors d'un <code>nuxt generate</code></strong>.</section><section id="beforenuxtrender"class="level3"><h3>beforeNuxtRender</h3><p><code>beforeNuxtRender(fn)</code> (<em>Fonction</em>)<p>Utilisez cette méthode pour mettre à jour la variable <code>__NUXT__</code> render du côté client, <code>fn</code> (peut être asynchrone) est appelé avec <code>{ Components, nuxtState }</code>, voir cet <a href="https://github.com/nuxt/nuxt.js/blob/cf6b0df45f678c5ac35535d49710c606ab34787d/test/fixtures/basic/pages/special-state.vue">exemple</a>.</section></section><section id="paramètres-côté-client"class="level2"><h2>Paramètres côté client</h2><p>Ces paramètres ne sont disponibles que du côté client.<section id="from"class="level3"><h3>from</h3><p><code>from</code> (<a href="https://v3.router.vuejs.org/fr/api/#the-route-object"><em>Vue Router Route</em></a>)<p>La route d'où l'on vient.</section><section id="nuxtstate"class="level3"><h3>nuxtState</h3><p><code>nuxtState</code> <em>(Objet)</em><p>Le state de Nuxt, utile pour les plugins qui utilisent <code>beforeNuxtRender</code> pour avoir le state de Nuxt avant l'hydratation. <strong>Disponible uniquement dans le mode <code>universal</code></strong>. <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section></section>