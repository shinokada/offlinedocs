<!doctype html><html lang="en"><meta charset="utf-8"><title>Preview Mode</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="description"content="Live Preview for target static with the preview mode"><meta name="category"content="features"><link rel="stylesheet"href="../../../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="preview-mode"><h1 id="preview-mode">Preview mode</h1><p>Live Preview for target static with the preview mode<hr><p>With Nuxt and full static you can now use live preview out of the box which will call your API or your CMS so you can see the changes live before deploying.<section class="level4"aria-labelledby="warning"><h4 id="warning">Warning</h4><p>Only available when using <a href="./features/deployment-targets#static-hosting"><code>target:static</code></a><p>The preview mode will automatically refresh the page data as it uses <code>$nuxt.refresh</code> under the hood and therefore calls nuxtServerInit, asyncData and fetch on the client side.<p>In order to activate live preview you will need to add the following plugin:<pre class="language-js{}[plugins/preview.client.js]"><code class="language-js{}[plugins/preview.client.js]">export default function ({ query, enablePreview }) {
  if (query.preview) {
    enablePreview()
  }
}</code></pre></section><section class="level4"aria-labelledby="warning-1"><h4 id="warning-1">Warning</h4><p><code>enablePreview</code> is only available in the context object of plugins. Previews are handled client-side and thus the plugin should be run on the client: preview.client.js<pre class="language-js{}[nuxt.config.js]"><code class="language-js{}[nuxt.config.js]">export default {
  plugins: ['~/plugins/preview.client.js']
}</code></pre><p>Once you have added the plugin you can now generate your site and serve it.<pre class="language-bash"><code class="language-bash"><span class="token function">yarn</span> generate
<span class="token function">yarn</span> start</code></pre><pre class="language-bash"><code class="language-bash">npx nuxt generate
npx nuxt start</code></pre><p>Then you can see your preview page by adding the query param to the end of the page you want to see once:<pre class="language-js"><code class="language-js"><span class="token operator">?</span>preview<span class="token operator">=</span><span class="token boolean">true</span></code></pre></section><section class="level4"aria-labelledby="warning-2"><h4 id="warning-2">Warning</h4><p>enablePreview should be tested locally with yarn start and not yarn dev</section><section class="level3"aria-labelledby="previewing-pages-that-are-not-yet-generated"><h3 id="previewing-pages-that-are-not-yet-generated">Previewing pages that are not yet generated</h3><p>For pages that are not yet generated, SPA fallback will still call the API before showing the 404 page as these pages exist on the API but are not generated yet.<p>If you have set a validate hook, you will probably need to modify it so that it doesn't redirect to the 404 page in preview mode.<pre class="language-js"><code class="language-js"><span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params<span class="token punctuation">,</span> query <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>query<span class="token punctuation">.</span><span class="token property-access">preview</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="passing-data-to-enablepreview"><h3 id="passing-data-to-enablepreview">Passing data to enablePreview</h3><p>You can pass data to the <code>enablePreview</code> function. That data will then be available on the <code>$preview</code> context helper and on <code>this.$preview</code>.</section><section class="level3"aria-labelledby="whats-next"><h3 id="whats-next">What's next</h3><section class="level4"aria-labelledby="next"><h4 id="next">Next</h4><p>Check out the <a href="./directory-structure/nuxt">Directory Structure book</a><p><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section></section>