<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <title>The context</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="The context provides additional objects/params from Nuxt to Vue components and is available in special nuxt lifecycle areas.">
    <meta name="category" content="internals-glossary">
    <link rel="stylesheet" href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css">
  </head>
  <body>
    <section id="the-context" class="level1">
      <h1>The Context</h1>
      <p>The <code>context</code> provides additional objects/params from Nuxt to Vue components and is available in special nuxt lifecycle areas like <a href="./features/data-fetching#async-data"><code>asyncData</code></a>, <a href="./features/data-fetching"><code>fetch</code></a>, <a href="./directory-structure/plugins"><code>plugins</code></a>, <a href="./directory-structure/middleware#router-middleware"><code>middleware</code></a> and <a href="./directory-structure/store#the-nuxtserverinit-action"><code>nuxtServerInit</code></a>.</p>
      <hr>
      <blockquote>
        <p><em>Note: "The Context" we refer to here is not to be confused with the <code>context</code> object available in <a href="https://vuex.vuejs.org/guide/actions.html"><code>Vuex Actions</code></a>. The two are unrelated.</em></p>
      </blockquote>
      <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Universal keys</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>
    app<span class="token punctuation">,</span>
    store<span class="token punctuation">,</span>
    route<span class="token punctuation">,</span>
    params<span class="token punctuation">,</span>
    query<span class="token punctuation">,</span>
    env<span class="token punctuation">,</span>
    isDev<span class="token punctuation">,</span>
    isHMR<span class="token punctuation">,</span>
    redirect<span class="token punctuation">,</span>
    error<span class="token punctuation">,</span>
    $config
  <span class="token punctuation">}</span> <span class="token operator">=</span> context
  <span class="token comment">// Server-side</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token property-access">server</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> beforeNuxtRender <span class="token punctuation">}</span> <span class="token operator">=</span> context
  <span class="token punctuation">}</span>
  <span class="token comment">// Client-side</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token property-access">client</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword module">from</span><span class="token punctuation">,</span> nuxtState <span class="token punctuation">}</span> <span class="token operator">=</span> context
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      <section id="universal-keys" class="level2">
        <h2>Universal keys</h2>
        <p>These keys are available both on client-side and server-side.</p>
        <section id="app" class="level3">
          <h3>app</h3>
          <p><code>app</code> (<em>NuxtAppOptions</em>)</p>
          <p>The root Vue instance options that includes all your plugins. For example, when using <code>i18n</code>, you can get access to <code>$i18n</code> through <code>context.app.i18n</code>.</p>
        </section>
        <section id="store" class="level3">
          <h3>store</h3>
          <p><code>store</code> (<a href="https://vuex.vuejs.org/api/#vuex-store-instance-properties"><em>Vuex Store</em></a>)</p>
          <p>Vuex Store instance. <strong>Available only if the <a href="./directory-structure/store">vuex store</a> is set</strong>.</p>
        </section>
        <section id="route" class="level3">
          <h3>route</h3>
          <p><code>route</code> (<a href="https://v3.router.vuejs.org/api/#the-route-object"><em>Vue Router Route</em></a>)</p>
          <p>Vue Router route instance.</p>
        </section>
        <section id="params" class="level3">
          <h3>params</h3>
          <p><code>params</code> (<em>Object</em>)</p>
          <p>Alias of <code>route.params</code>.</p>
        </section>
        <section id="query" class="level3">
          <h3>query</h3>
          <p><code>query</code> (<em>Object</em>)</p>
          <p>Alias of <code>route.query</code>.</p>
        </section>
        <section id="env" class="level3">
          <h3>env</h3>
          <p><code>env</code> (<em>Object</em>)</p>
          <p>Environment variables set in <code>nuxt.config.js</code>, see <a href="./configuration-glossary/configuration-env">env API</a>.</p>
        </section>
        <section id="isdev" class="level3">
          <h3>isDev</h3>
          <p><code>isDev</code> (<em>Boolean</em>)</p>
          <p>Boolean to let you know if you're in dev mode, can be useful for caching some data in production.</p>
        </section>
        <section id="ishmr" class="level3">
          <h3>isHMR</h3>
          <p><code>isHMR</code> (<em>Boolean</em>)</p>
          <p>Boolean to let you know if the method/middleware is called from webpack hot module replacement (<em>true only on client-side in dev mode</em>).</p>
        </section>
        <section id="redirect" class="level3">
          <h3>redirect</h3>
          <p><code>redirect</code> (<em>Function</em>)</p>
          <p>Use this method to redirect the user to another route, the status code is used on the server-side, defaults to <code>302</code>. <code>redirect([status,] path [, query])</code>.</p>
          <p>Examples:</p>
          <pre class="language-js{}[]"><code class="language-js{}[]">redirect(302, '/login')
redirect({ name: 'slug', params: { slug: mySlug } })
redirect('https://vuejs.org')</code></pre>
          <p>See the <a href="https://github.com/vuejs/vue-router/blob/64d60c01920405f0b93e00a401c73868b08ee6e5/types/router.d.ts#L161-L169">Vue Router docs</a> more info on the Location property.</p>
          <section id="info" class="level4">
            <h4>Info</h4>
            <p>It's not possible to use <code>redirect</code> or <code>error</code> in <a href="./directory-structure/plugins#client-or-server-side-only">client-side Nuxt plugin</a> due to hydration errors (client content would be different from what it'd expect from the server).</p>
            <p>A valid workaround would be using <code>window.onNuxtReady(() => { window.$nuxt.$router.push('/your-route') })</code></p>
          </section>
        </section>
        <section id="error" class="level3">
          <h3>error</h3>
          <p><code>error</code> (<em>Function</em>)</p>
          <p>Use this method to show the error page: <code>error(params)</code>. The <code>params</code> should have the properties <code>statusCode</code> and <code>message</code>.</p>
        </section>
        <section id="config" class="level3">
          <h3><code>$config</code></h3>
          <p><code>$config</code> (<em>Object</em>)</p>
          <p>The actual <a href="./configuration-glossary/configuration-runtime-config">runtime config</a>.</p>
        </section>
      </section>
      <section id="server-side-keys" class="level2">
        <h2>Server-side keys</h2>
        <p>These keys are available only on the server-side.</p>
        <section id="req" class="level3">
          <h3>req</h3>
          <p><code>req</code> (<a href="https://nodejs.org/api/http.html#http_class_http_incomingmessage"><em>http.Request</em></a>)</p>
          <p>Request from the Node.js server. If Nuxt is used as a middleware, the request object might be different depending on the framework you're using.<br><strong>Not available via <code>nuxt generate</code></strong>.</p>
        </section>
        <section id="res" class="level3">
          <h3>Res</h3>
          <p><code>res</code> (<a href="https://nodejs.org/api/http.html#http_class_http_serverresponse"><em>http.Response</em></a>)</p>
          <p>Response from the Node.js server. If Nuxt is used as a middleware, the res object might be different depending on the framework you're using.<br><strong>Not available via <code>nuxt generate</code></strong>.</p>
        </section>
        <section id="beforenuxtrender" class="level3">
          <h3>beforeNuxtRender</h3>
          <p><code>beforeNuxtRender(fn)</code> (<em>Function</em>)</p>
          <p>Use this method to update <code>__NUXT__</code> variable rendered on client-side, the <code>fn</code> (can be asynchronous) is called with <code>{ Components, nuxtState }</code>, see <a href="https://github.com/nuxt/nuxt.js/blob/cf6b0df45f678c5ac35535d49710c606ab34787d/test/fixtures/basic/pages/special-state.vue">example</a>.</p>
        </section>
      </section>
      <section id="client-side-keys" class="level2">
        <h2>Client-side keys</h2>
        <p>These keys are available only on client-side.</p>
        <section id="from" class="level3">
          <h3>from</h3>
          <p><code>from</code> (<a href="https://v3.router.vuejs.org/api/#the-route-object"><em>Vue Router Route</em></a>)</p>
          <p>The route navigated from.</p>
        </section>
        <section id="nuxtstate" class="level3">
          <h3>nuxtState</h3>
          <p><code>nuxtState</code> <em>(Object)</em></p>
          <p>
            Nuxt state, useful for plugins which uses <code>beforeNuxtRender</code> to get the nuxt state on client-side before hydration. <strong>Available only in <code>universal</code> mode</strong>.
            <span style="float: footnote;"><a href="../index.html#toc">Go to TOC</a></span>
          </p>
        </section>
      </section>
    </section>
  </body>
</html>
