<!doctype html><html lang="en"><meta charset="utf-8"><title>Express 4.x changelog</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="layout"content="page"><meta name="menu"content="changelog"><meta name="redirect_from"content="/changelog/4x.html"><link rel="stylesheet"href="../../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="release-change-log"class="level1"><h1>Release Change Log</h1><section :=""id="4181"class="level2"><h2 :="">4.18.1 - Release date: 2022-04-29</h2><p>The 4.18.1 patch release includes the following bug fix:<ul><li markdown="1"class="changelog-item">Fix the condition where if an Express.js application is created with a very large stack of routes, and all of those routes are sync (call `next()` synchronously), then the request processing may hang.</ul><p>For a complete list of changes in this release, see <a href="https://github.com/expressjs/express/blob/master/History.md#4181--2022-04-29">History.md</a>.</section><section :=""id="4180"class="level2"><h2 :="">4.18.0 - Release date: 2022-04-25</h2><p>The 4.18.0 minor release includes bug fixes and some new features, including:<ul><li markdown="1"class="changelog-item">The [`app.get()` method](../4x/api.html#app.get) and the [`app.set()` method](../4x/api.html#app.set) now ignores properties directly on `Object.prototype` when getting a setting value.<li markdown="1"class="changelog-item">The [`res.cookie()` method](../4x/api.html#res.cookie) now accepts a "priority" option to set the Priority attribute on the Set-Cookie response header.<li markdown="1"class="changelog-item">The [`res.cookie()` method](../4x/api.html#res.cookie) now rejects an Invalid Date object provided as the "expires" option.<li markdown="1"class="changelog-item">The [`res.cookie()` method](../4x/api.html#res.cookie) now works when `null` or `undefined` is explicitly provided as the "maxAge" argument.<li markdown="1"class="changelog-item">Starting with this version, Express supports Node.js 18.x.<li markdown="1"class="changelog-item">The [`res.download()` method](../4x/api.html#res.download) now accepts a "root" option to match [`res.sendFile()`](../4x/api.html#res.sendFile).<li markdown="1"class="changelog-item">The [`res.download()` method](../4x/api.html#res.download) can be supplied with an `options` object without providing a `filename` argument, simplifying calls when the default `filename` is desired.<li markdown="1"class="changelog-item">The [`res.format()` method](../4x/api.html#res.format) now invokes the provided "default" handler with the same arguments as the type handlers (`req`, `res`, and `next`).<li markdown="1"class="changelog-item">The [`res.send()` method](../4x/api.html#res.send) will not attempt to send a response body when the response code is set to 205.<li markdown="1"class="changelog-item">The default error handler will now remove certain response headers that will break the error response rendering, if they were set previously.<li markdown="1"class="changelog-item">The status code 425 is now represented as the standard "Too Early" instead of "Unordered Collection".</ul><p>For a complete list of changes in this release, see <a href="https://github.com/expressjs/express/blob/master/History.md#4180--2022-04-25">History.md</a>.</section><section :=""id="4173"class="level2"><h2 :="">4.17.3 - Release date: 2022-02-16</h2><p>The 4.17.3 patch release includes one bug fix:<ul><li markdown="1"class="changelog-item">Update to [qs module](https://www.npmjs.com/package/qs) for a fix around parsing `__proto__` properties.</ul><p>For a complete list of changes in this release, see <a href="https://github.com/expressjs/express/blob/master/History.md#4173--2022-02-16">History.md</a>.</section><section :=""id="4172"class="level2"><h2 :="">4.17.2 - Release date: 2021-12-16</h2><p>The 4.17.2 patch release includes the following bug fixes:<ul><li markdown="1"class="changelog-item">Fix handling of `undefined` in `res.jsonp` when a callback is provided.<li markdown="1"class="changelog-item">Fix handling of `undefined` in `res.json` and `res.jsonp` when `"json escape"` is enabled.<li markdown="1"class="changelog-item">Fix handling of invalid values to the `maxAge` option of `res.cookie()`.<li markdown="1"class="changelog-item">Update to [jshttp/proxy-addr module](https://www.npmjs.com/package/proxy-addr) to use `req.socket` over deprecated `req.connection`.<li markdown="1"class="changelog-item">Starting with this version, Express supports Node.js 14.x.</ul><p>For a complete list of changes in this release, see <a href="https://github.com/expressjs/express/blob/master/History.md#4172--2021-12-16">History.md</a>.</section><section :=""id="4171"class="level2"><h2 :="">4.17.1 - Release date: 2019-05-25</h2><p>The 4.17.1 patch release includes one bug fix:<ul><li markdown="1"class="changelog-item">The change to the `res.status()` API has been reverted due to causing regressions in existing Express 4 applications.</ul><p>For a complete list of changes in this release, see <a href="https://github.com/expressjs/express/blob/master/History.md#4171--2019-05-25">History.md</a>.</section><section :=""id="4170"class="level2"><h2 :="">4.17.0 - Release date: 2019-05-16</h2><p>The 4.17.0 minor release includes bug fixes and some new features, including:<ul><li markdown="1"class="changelog-item">The `express.raw()` and `express.text()` middleware have been added to provide request body parsing for more raw request payloads. This uses the [expressjs/body-parser module](https://www.npmjs.com/package/body-parser) module underneath, so apps that are currently requiring the module separately can switch to the built-in parsers.<li markdown="1"class="changelog-item">The `res.cookie()` API now supports the `"none"` value for the `sameSite` option.<li markdown="1"class="changelog-item">When the `"trust proxy"` setting is enabled, the `req.hostname` now supports multiple `X-Forwarded-For` headers in a request.<li markdown="1"class="changelog-item">Starting with this version, Express supports Node.js 10.x and 12.x.<li markdown="1"class="changelog-item">The `res.sendFile()` API now provides and more immediate and easier to understand error when a non-string is passed as the `path` argument.<li markdown="1"class="changelog-item">The `res.status()` API now provides and more immediate and easier to understand error when `null` or `undefined` is passed as the argument.</ul><p>For a complete list of changes in this release, see <a href="https://github.com/expressjs/express/blob/master/History.md#4170--2019-05-16">History.md</a>.</section><section :=""id="4164"class="level2"><h2 :="">4.16.4 - Release date: 2018-10-10</h2><p>The 4.16.4 patch release includes various bug fixes:<ul><li markdown="1"class="changelog-item">Fix issue where `"Request aborted"` may be logged in `res.sendfile`.</ul><p>For a complete list of changes in this release, see <a href="https://github.com/expressjs/express/blob/master/History.md#4164--2018-10-10">History.md</a>.</section><section :=""id="4163"class="level2"><h2 :="">4.16.3 - Release date: 2018-03-12</h2><p>The 4.16.3 patch release includes various bug fixes:<ul><li markdown="1"class="changelog-item">Fix issue where a plain `%` at the end of the url in the `res.location` method or the `res.redirect` method would not get encoded as `%25`.<li markdown="1"class="changelog-item">Fix issue where a blank `req.url` value can result in a thrown error within the default 404 handling.<li markdown="1"class="changelog-item">Fix the generated HTML document for `express.static` redirect responses to properly include ``.</ul><p>For a complete list of changes in this release, see <a href="https://github.com/expressjs/express/blob/master/History.md#4163--2018-03-12">History.md</a>.</section><section :=""id="4162"class="level2"><h2 :="">4.16.2 - Release date: 2017-10-09</h2><p>The 4.16.2 patch release includes a regression bug fix:<ul><li markdown="1"class="changelog-item">Fix a `TypeError` that can occur in the `res.send` method when a `Buffer` is passed to `res.send` and the `ETag` header is already set on the response.</ul><p>For a complete list of changes in this release, see <a href="https://github.com/expressjs/express/blob/master/History.md#4162--2017-10-09">History.md</a>.</section><section :=""id="4161"class="level2"><h2 :="">4.16.1 - Release date: 2017-09-29</h2><p>The 4.16.1 patch release includes a regression bug fix:<ul><li markdown="1"class="changelog-item">Update to [pillarjs/send module](https://www.npmjs.com/package/send) to fix an edge case scenario regression that affected certain users of `express.static`.</ul><p>For a complete list of changes in this release, see <a href="https://github.com/expressjs/express/blob/master/History.md#4161--2017-09-29">History.md</a>.</section><section :=""id="4160"class="level2"><h2 :="">4.16.0 - Release date: 2017-09-28</h2><p>The 4.16.0 minor release includes security updates, bug fixes, performance enhancements, and some new features, including:<ul><li markdown="1"class="changelog-item">Update to [jshttp/forwarded module](https://www.npmjs.com/package/forwarded) to address a [vulnerability](https://npmjs.com/advisories/527). This may affect your application if the following APIs are used: `req.host`, `req.hostname`, `req.ip`, `req.ips`, `req.protocol`.<li markdown="1"class="changelog-item">Update a dependency of the [pillarjs/send module](https://www.npmjs.com/package/send) to address a [vulnerability](https://npmjs.com/advisories/535) in the `mime` dependency. This may affect your application if untrusted string input is passed to the following APIs: `res.type()`.<li markdown="1"class="changelog-item">The [pillarjs/send module](https://www.npmjs.com/package/send) has implemented a protection against the Node.js 8.5.0 [vulnerability](https://nodejs.org/en/blog/vulnerability/september-2017-path-validation/). Using any prior version of Express.js with Node.js 8.5.0 (that specific Node.js version) will make the following APIs vulnerable: `express.static`, `res.sendfile`, and `res.sendFile`.<li markdown="1"class="changelog-item">Starting with this version, Express supports Node.js 8.x.<li markdown="1"class="changelog-item">The new setting `"json escape"` can be enabled to escape characters in `res.json()`, `res.jsonp()` and `res.send()` responses that can trigger clients to sniff the response as HTML instead of honoring the `Content-Type`. This can help protect an Express app from a class of persistent XSS-based attacks.<li markdown="1"class="changelog-item">The [`res.download()` method](../4x/api.html#res.download) now accepts an optional `options` object.<li markdown="1"class="changelog-item">The `express.json()` and `express.urlencoded()` middleware have been added to provide request body parsing support out-of-the-box. This uses the [expressjs/body-parser module](https://www.npmjs.com/package/body-parser) module underneath, so apps that are currently requiring the module separately can switch to the built-in parsers.<li markdown="1"class="changelog-item">The [`express.static()` middleware](../4x/api.html#express.static) and [`res.sendFile()` method](../4x/api.html#res.sendFile) now support setting the `immutable` directive on the `Cache-Control` header. Setting this header with an appropriate `maxAge` will prevent supporting web browsers from sending any request to the server when the file is still in their cache.<li markdown="1"class="changelog-item">The [pillarjs/send module](https://www.npmjs.com/package/send) has an updated list of MIME types to better set the `Content-Type` of more files. There are 70 new types for file extensions.</ul><p>For a complete list of changes in this release, see <a href="https://github.com/expressjs/express/blob/master/History.md#4160--2017-09-28">History.md</a>.</section><section :=""id="4155"class="level2"><h2 :="">4.15.5 - Release date: 2017-09-24</h2><p>The 4.15.5 patch release includes security updates, some minor performance enhancements, and a bug fix:<ul><li markdown="1"class="changelog-item">Update to [debug module](https://www.npmjs.com/package/debug) to address a [vulnerability](https://snyk.io/vuln/npm:debug:20170905), but this issue does not impact Express.<li markdown="1"class="changelog-item">Update to [jshttp/fresh module](https://www.npmjs.com/package/fresh) to address a [vulnerability](https://npmjs.com/advisories/526). This will affect your application if the following APIs are used: `express.static`, `req.fresh`, `res.json`, `res.jsonp`, `res.send`, `res.sendfile` `res.sendFile`, `res.sendStatus`.<li markdown="1"class="changelog-item">Update to [jshttp/fresh module](https://www.npmjs.com/package/fresh) fixes handling of modified headers with invalid dates and makes parsing conditional headers (like `If-None-Match`) faster.</ul><p>For a complete list of changes in this release, see <a href="https://github.com/expressjs/express/blob/master/History.md#4155--2017-09-24">History.md</a>.</section><section :=""id="4154"class="level2"><h2 :="">4.15.4 - Release date: 2017-08-06</h2><p>The 4.15.4 patch release includes some minor bug fixes:<ul><li markdown="1"class="changelog-item">Fix array being set for `"trust proxy"` value being manipulated in certain conditions.</ul><p>For a complete list of changes in this release, see <a href="https://github.com/expressjs/express/blob/master/History.md#4154--2017-08-06">History.md</a>.</section><section :=""id="4153"class="level2"><h2 :="">4.15.3 - Release date: 2017-05-16</h2><p>The 4.15.3 patch release includes a security update and some minor bug fixes:<ul><li markdown="1"class="changelog-item">Update a dependency of the [pillarjs/send module](https://www.npmjs.com/package/send) to address a [vulnerability](https://snyk.io/vuln/npm:ms:20170412). This may affect your application if untrusted string input is passed to the `maxAge` option in the following APIs: `express.static`, `res.sendfile`, and `res.sendFile`.<li markdown="1"class="changelog-item">Fix error when `res.set` cannot add charset to `Content-Type`.<li markdown="1"class="changelog-item">Fix missing `` in HTML document.</ul><p>For a complete list of changes in this release, see <a href="https://github.com/expressjs/express/blob/master/History.md#4153--2017-05-16">History.md</a>.</section><section :=""id="4152"class="level2"><h2 :="">4.15.2 - Release date: 2017-03-06</h2><p>The 4.15.2 patch release includes a minor bug fix:<ul><li markdown="1"class="changelog-item">Fix regression parsing keys starting with `[` in the extended (default) query parser.</ul><p>For a complete list of changes in this release, see <a href="https://github.com/expressjs/express/blob/master/History.md#4152--2017-03-06">History.md</a>.</section><section :=""id="4151"class="level2"><h2 :="">4.15.1 - Release date: 2017-03-05</h2><p>The 4.15.1 patch release includes a minor bug fix:<ul><li markdown="1"class="changelog-item">Fix compatibility issue when using the datejs 1.x library where the [`express.static()` middleware](../4x/api.html#express.static) and [`res.sendFile()` method](../4x/api.html#res.sendFile) would incorrectly respond with 412 Precondition Failed.</ul><p>For a complete list of changes in this release, see <a href="https://github.com/expressjs/express/blob/master/History.md#4151--2017-03-05">History.md</a>.</section><section :=""id="4150"class="level2"><h2 :="">4.15.0 - Release date: 2017-03-01</h2><p>The 4.15.0 minor release includes bug fixes, performance improvements, and other minor feature additions, including:<ul><li markdown="1"class="changelog-item">Starting with this version, Express supports Node.js 7.x.<li markdown="1"class="changelog-item">The [`express.static()` middleware](../4x/api.html#express.static) and [`res.sendFile()` method](../4x/api.html#res.sendFile) now support the `If-Match` and `If-Unmodified-Since` request headers.<li markdown="1"class="changelog-item">Update to [jshttp/etag module](https://www.npmjs.com/package/etag) to generate the default ETags for responses which work when Node.js has [FIPS-compliant crypto enabled](https://nodejs.org/dist/latest/docs/api/cli.html#cli_enable_fips).<li markdown="1"class="changelog-item">Various auto-generated HTML responses like the default not found and error handlers will respond with complete HTML 5 documents and additional security headers.</ul><p>For a complete list of changes in this release, see <a href="https://github.com/expressjs/express/blob/master/History.md#4150--2017-03-01">History.md</a>.</section><section :=""id="4141"class="level2"><h2 :="">4.14.1 - Release date: 2017-01-28</h2><p>The 4.14.1 patch release includes bug fixes and performance improvements, including:<ul><li markdown="1"class="changelog-item">Update to [pillarjs/finalhandler module](https://www.npmjs.com/package/finalhandler) fixes an exception when Express handles an `Error` object which has a `headers` property that is not an object.</ul><p>For a complete list of changes in this release, see <a href="https://github.com/expressjs/express/blob/master/History.md#4141--2017-01-28">History.md</a>.</section><section :=""id="4140"class="level2"><h2 :="">4.14.0 - Release date: 2016-06-16</h2><p>The 4.14.0 minor release includes bug fixes, security update, performance improvements, and other minor feature additions, including:<ul><li markdown="1"class="changelog-item">Starting with this version, Express supports Node.js 6.x.<li markdown="1"class="changelog-item">Update to [jshttp/negotiator module](https://www.npmjs.com/package/negotiator) fixes a [regular expression denial of service vulnerability](https://npmjs.com/advisories/106).<li markdown="1"class="changelog-item">The [`res.sendFile()` method](../4x/api.html#res.sendFile) now accepts two new options: `acceptRanges` and `cacheControl`.<ul><li><p><code>acceptRanges</code> (defaut is <code>true</code>), enables or disables accepting ranged requests. When disabled, the response does not send the <code>Accept-Ranges</code> header and ignores the contents of the <code>Range</code> request header.<li><p><code>cacheControl</code>, (default is <code>true</code>), enables or disables the <code>Cache-Control</code> response header. Disabling it will ignore the <code>maxAge</code> option.<li><p><code>res.sendFile</code> has also been updated to handle <code>Range</code> header and redirections better.</ul><li markdown="1"class="changelog-item">The [`res.location()` method](../4x/api.html#res.location) and [`res.redirect()` method](../4x/api.html#res.redirect) will now URL-encode the URL string, if it is not already encoded.<li markdown="1"class="changelog-item">The performance of the [`res.json()` method](../4x/api.html#res.json) and [`res.jsonp()` method](../4x/api.html#res.jsonp) have been improved in the common cases.<li markdown="1"class="changelog-item">The [jshttp/cookie module](https://www.npmjs.com/package/cookie) (in addition to a number of other improvements) has been updated and now the [`res.cookie()` method](../4x/api.html#res.cookie) supports the `sameSite` option to let you specify the [SameSite cookie attribute](https://tools.ietf.org/html/draft-west-first-party-cookies-07). NOTE: This attribute has not yet been fully standardized, may change in the future, and many clients may ignore it.<p>The possible value for the <code>sameSite</code> option are:<ul><li><code>true</code>, which sets the <code>SameSite</code> attribute to <code>Strict</code> for strict same site enforcement.<li><code>false</code>, which does not set the <code>SameSite</code> attribute.<li><code>'lax'</code>, which sets the <code>SameSite</code> attribute to <code>Lax</code> for lax same site enforcement.<li><code>'strict'</code>, which sets the <code>SameSite</code> attribute to <code>Strict</code> for strict same site enforcement.</ul><li markdown="1"class="changelog-item">Absolute path checking on Windows, which was incorrect for some cases, has been fixed.<li markdown="1"class="changelog-item">IP address resolution with proxies has been greatly improved.<li markdown="1"class="changelog-item">The [`req.range()` method](../4x/api.html#req.range) options object now supports a `combine` option (`false` by default), which when `true`, combines overlapping and adjacent ranges and returns them as if they were specified that way in the header.</ul><p>For a complete list of changes in this release, see <a href="https://github.com/expressjs/express/blob/master/History.md#4140--2016-06-16">History.md</a>. <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>