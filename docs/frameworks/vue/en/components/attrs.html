<!doctypehtml><html lang="en"><meta charset="utf-8"><title>Fallthrough Attributes</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="outline"content="deep"><link rel="stylesheet"href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css"><section id="fallthrough-attributes"class="level1"><h1>Fallthrough Attributes</h1><blockquote><p>This page assumes you've already read the <a href="/guide/essentials/component-basics">Components Basics</a>. Read that first if you are new to components.</blockquote><section id="attribute-inheritance"class="level2"><h2>Attribute Inheritance</h2><p>A "fallthrough attribute" is an attribute or <code>v-on</code> event listener that is passed to a component, but is not explicitly declared in the receiving component's <a href="./props">props</a> or <a href="./events.html#declaring-emitted-events">emits</a>. Common examples of this include <code>class</code>, <code>style</code>, and <code>id</code> attributes.<p>When a component renders a single root element, fallthrough attributes will be automatically added to the root element's attributes. For example, given a <code>&#x3C;MyButton></code> component with the following template:<pre class="language-vue-html"><code class="language-vue-html">&#x3C;!-- template of &#x3C;MyButton> -->
&#x3C;button>click me&#x3C;/button></code></pre><p>And a parent using this component with:<pre class="language-vue-html"><code class="language-vue-html">&#x3C;MyButton class="large" /></code></pre><p>The final rendered DOM would be:<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>large<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>click me<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span></code></pre><p>Here, <code>&#x3C;MyButton></code> did not declare <code>class</code> as an accepted prop. Therefore, <code>class</code> is treated as a fallthrough attribute and automatically added to <code>&#x3C;MyButton></code>'s root element.<section id="class-and-style-merging"class="level3"><h3><code>class</code> and <code>style</code> Merging</h3><p>If the child component's root element already has existing <code>class</code> or <code>style</code> attributes, it will be merged with the <code>class</code> and <code>style</code> values that are inherited from the parent. Suppose we change the template of <code>&#x3C;MyButton></code> in the previous example to:<pre class="language-vue-html"><code class="language-vue-html">&#x3C;!-- template of &#x3C;MyButton> -->
&#x3C;button class="btn">click me&#x3C;/button></code></pre><p>Then the final rendered DOM would now become:<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn large<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>click me<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span></code></pre></section><section id="v-on-listener-inheritance"class="level3"><h3><code>v-on</code> Listener Inheritance</h3><p>The same rule applies to <code>v-on</code> event listeners:<pre class="language-vue-html"><code class="language-vue-html">&#x3C;MyButton @click="onClick" /></code></pre><p>The <code>click</code> listener will be added to the root element of <code>&#x3C;MyButton></code>, i.e. the native <code>&#x3C;button></code> element. When the native <code>&#x3C;button></code> is clicked, it will trigger the <code>onClick</code> method of the parent component. If the native <code>&#x3C;button></code> already has a <code>click</code> listener bound with <code>v-on</code>, then both listeners will trigger.</section><section id="nested-component-inheritance"class="level3"><h3>Nested Component Inheritance</h3><p>If a component renders another component as its root node, for example, we refactored <code>&#x3C;MyButton></code> to render a <code>&#x3C;BaseButton></code> as its root:<pre class="language-vue-html"><code class="language-vue-html">&#x3C;!-- template of &#x3C;MyButton/> that simply renders another component -->
&#x3C;BaseButton /></code></pre><p>Then the fallthrough attributes received by <code>&#x3C;MyButton></code> will be automatically forwarded to <code>&#x3C;BaseButton></code>.<p>Note that:<ol><li><p>Forwarded attributes do not include any attributes that are declared as props, or <code>v-on</code> listeners of declared events by <code>&#x3C;MyButton></code> - in other words, the declared props and listeners have been "consumed" by <code>&#x3C;MyButton></code>.<li><p>Forwarded attributes may be accepted as props by <code>&#x3C;BaseButton></code>, if declared by it.</ol></section></section><section id="disabling-attribute-inheritance"class="level2"><h2>Disabling Attribute Inheritance</h2><p>If you do <strong>not</strong> want a component to automatically inherit attributes, you can set <code>inheritAttrs: false</code> in the component's options.<div class="composition-api"><p>If using <code>&#x3C;script setup></code>, you will need to declare this option using a separate, normal <code>&#x3C;script></code> block:<pre class="language-vue"><code class="language-vue">&#x3C;script>
// use normal &#x3C;script> to declare options
export default {
  inheritAttrs: false
}
&#x3C;/script>

&#x3C;script setup>
// ...setup logic
&#x3C;/script></code></pre></div><p>The common scenario for disabling attribute inheritance is when attributes need to be applied to other elements besides the root node. By setting the <code>inheritAttrs</code> option to <code>false</code>, you can take full control over where the fallthrough attributes should be applied.<p>These fallthrough attributes can be accessed directly in template expressions as <code>$attrs</code>:<pre class="language-vue-html"><code class="language-vue-html">&#x3C;span>Fallthrough attributes: {{ $attrs }}&#x3C;/span></code></pre><p>The <code>$attrs</code> object includes all attributes that are not declared by the component's <code>props</code> or <code>emits</code> options (e.g., <code>class</code>, <code>style</code>, <code>v-on</code> listeners, etc.).<p>Some notes:<ul><li><p>Unlike props, fallthrough attributes preserve their original casing in JavaScript, so an attribute like <code>foo-bar</code> needs to be accessed as <code>$attrs['foo-bar']</code>.<li><p>A <code>v-on</code> event listener like <code>@click</code> will be exposed on the object as a function under <code>$attrs.onClick</code>.</ul><p>Using our <code>&#x3C;MyButton></code> component example from the <a href="#attribute-inheritance">previous section</a> - sometimes we may need to wrap the actual <code>&#x3C;button></code> element with an extra <code>&#x3C;div></code> for styling purposes:<pre class="language-vue-html"><code class="language-vue-html">&#x3C;div class="btn-wrapper">
  &#x3C;button class="btn">click me&#x3C;/button>
&#x3C;/div></code></pre><p>We want all fallthrough attributes like <code>class</code> and <code>v-on</code> listeners to be applied to the inner <code>&#x3C;button></code>, not the outer <code>&#x3C;div></code>. We can achieve this with <code>inheritAttrs: false</code> and <code>v-bind="$attrs"</code>:<pre class="language-vue-html{2}"><code class="language-vue-html{2}">&#x3C;div class="btn-wrapper">
  &#x3C;button class="btn" v-bind="$attrs">click me&#x3C;/button>
&#x3C;/div></code></pre><p>Remember that <a href="/guide/essentials/template-syntax.html#dynamically-binding-multiple-attributes"><code>v-bind</code> without an argument</a> binds all the properties of an object as attributes of the target element.</section><section id="attribute-inheritance-on-multiple-root-nodes"class="level2"><h2>Attribute Inheritance on Multiple Root Nodes</h2><p>Unlike components with a single root node, components with multiple root nodes do not have an automatic attribute fallthrough behavior. If <code>$attrs</code> are not bound explicitly, a runtime warning will be issued.<pre class="language-vue-html"><code class="language-vue-html">&#x3C;CustomLayout id="custom-layout" @click="changeValue" /></code></pre><p>If <code>&#x3C;CustomLayout></code> has the following multi-root template, there will be a warning because Vue cannot be sure where to apply the fallthrough attributes:<pre class="language-vue-html"><code class="language-vue-html">&#x3C;header>...&#x3C;/header>
&#x3C;main>...&#x3C;/main>
&#x3C;footer>...&#x3C;/footer></code></pre><p>The warning will be suppressed if <code>$attrs</code> is explicitly bound:<pre class="language-vue-html{2}"><code class="language-vue-html{2}">&#x3C;header>...&#x3C;/header>
&#x3C;main v-bind="$attrs">...&#x3C;/main>
&#x3C;footer>...&#x3C;/footer></code></pre></section><section id="accessing-fallthrough-attributes-in-javascript"class="level2"><h2>Accessing Fallthrough Attributes in JavaScript</h2><div class="composition-api"><p>If needed, you can access a component's fallthrough attributes in <code>&#x3C;script setup></code> using the <code>useAttrs()</code> API:<pre class="language-vue"><code class="language-vue">&#x3C;script setup>
import { useAttrs } from 'vue'

const attrs = useAttrs()
&#x3C;/script></code></pre><p>If not using <code>&#x3C;script setup></code>, <code>attrs</code> will be exposed as a property of the <code>setup()</code> context:<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// fallthrough attributes are exposed as ctx.attrs</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span><span class="token property-access">attrs</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Note that although the <code>attrs</code> object here always reflects the latest fallthrough attributes, it isn't reactive (for performance reasons). You cannot use watchers to observe its changes. If you need reactivity, use a prop. Alternatively, you can use <code>onUpdated()</code> to perform side effects with the latest <code>attrs</code> on each update.</div><div class="options-api"><p>If needed, you can access a component's fallthrough attributes via the <code>$attrs</code> instance property:<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">$attrs</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>