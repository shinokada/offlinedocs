<!doctype html><html lang="cn"><meta charset="utf-8"><title>编写扩展插件</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../Vivliostyle/read-html-download-pdf/docs/themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="write-an-addon"><h1 id="write-an-addon">编写扩展插件</h1><blockquote><p>自 v0.32.1 起可用</blockquote><section class="level2"aria-labelledby="capability"><h2 id="capability">扩展插件能力</h2><p>一个扩展插件可以自定义以下功能：<ul><li>全局样式（谨慎使用，它更通常作为 <a href="themes/use">主题</a> 的能力）<li>自定义布局或者重写现有布局<li>自定义组件或者重写现有组件<li>扩展 Windi CSS 配置<li>配置 Monaco、Prism 等工具</ul></section><section class="level2"aria-labelledby="conventions"><h2 id="conventions">约定</h2><p>扩展插件发布到 npm，需遵循以下约定：<ul><li>包名应该以 <code>slidev-addon-</code> 开头，例如：<code>slidev-addon-awesome</code><li>在主题 <code>package.json</code> 的 <code>keywords</code> 中添加 <code>slidev-addon</code> 和 <code>slidev</code> 关键词</ul></section><section class="level2"aria-labelledby="setup"><h2 id="setup">配置说明</h2><section class="level3"aria-labelledby="initialization"><h3 id="initialization">初始化</h3><p>如果想要创建扩展插件，请首先创建一个带有 <code>package.json</code> 文件的目录（你可以使用 <code>npm init</code>）。<p>然后，安装 Slidev 依赖项：<pre class="language-bash"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> -D @slidev/cli</code></pre></section><section class="level3"aria-labelledby="testing"><h3 id="testing">测试</h3><p>如果想要测试自己编写的扩展插件，你可以新建 <code>example.md</code> 并在其内填写一些内容。<p>你还可以在 <code>packages.json</code> 增加一些脚本以方便测试：<pre class="language-json"><code class="language-json"><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"slidev example.md"</span><span class="token punctuation">,</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"slidev build example.md"</span><span class="token punctuation">,</span>
    <span class="token property">"export"</span><span class="token operator">:</span> <span class="token string">"slidev export example.md"</span><span class="token punctuation">,</span>
    <span class="token property">"screenshot"</span><span class="token operator">:</span> <span class="token string">"slidev export example.md --format png"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>你只需在命令行中执行 <code>npm publish</code> 就可以发布自己的扩展插件，并不需要额外的构建过程（这意味着你可以直接发布 <code>.vue</code> 和 <code>.ts</code> 文件，Slidev 可以直接识别它们）。<p>扩展插件可以定制的范围与本地自定义相一致，可以参阅 <a href="custom/">自定义文档</a>。</section></section><section class="level2"aria-labelledby="addon-metadata"><h2 id="addon-metadata">扩展插件原数据</h2><section class="level3"aria-labelledby="slidev-version"><h3 id="slidev-version">Slidev 版本</h3><p>如果主题依赖于 Slidev 的某项新特性，你可以为主题设置最小的 Slidev 版本，以使你的主题可以正常工作：<pre class="language-json"><code class="language-json"><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token property">"engines"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"slidev"</span><span class="token operator">:</span> <span class="token string">">=0.32.1"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>如果用户使用的是旧版本的 Slidev，将会抛出错误。 <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section></section>