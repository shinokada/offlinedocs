<!doctype html><html lang="cn"><meta charset="utf-8"><title>配置自定义语法</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="配置自定义语法"><h1 id="配置自定义语法">配置自定义语法</h1><environment type="node"><p>Slidev 支持自定义 Markdown 语法。通过这种方式，你可以为你的幻灯片添加自定义的 Markdown 语法，以及自定义代码块的渲染。<p>首先，创建一个 <code>/setup/transformers.ts</code> 文件，内容如下：<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> <span class="token maybe-class-name">MarkdownTransformContext</span> <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">'@slidev/types'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> defineTransformersSetup <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@slidev/types'</span>

<span class="token keyword">function</span> <span class="token function">myCodeblock</span><span class="token punctuation">(</span>ctx<span class="token operator">:</span> <span class="token maybe-class-name">MarkdownTransformContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'在整个幻灯片中的索引：'</span><span class="token punctuation">,</span> ctx<span class="token punctuation">.</span><span class="token property-access">slide</span><span class="token punctuation">.</span><span class="token property-access">index</span><span class="token punctuation">)</span>
  ctx<span class="token punctuation">.</span><span class="token property-access">s</span><span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span>
    <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^```myblock *(\{[^\n]*\})?\n([\s\S]+?)\n```</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gm</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>full<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> options <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span> code <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">...</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineTransformersSetup</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
    pre<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    preCodeblock<span class="token operator">:</span> <span class="token punctuation">[</span>myCodeblock<span class="token punctuation">]</span><span class="token punctuation">,</span>
    postCodeblock<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    post<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>返回值是包含 <code>pre</code>、<code>preCodeblock</code>、<code>postCodeblock</code> 和 <code>post</code> 四个可选字段，每个字段的值是函数数组，将被调用以转换 Markdown 内容。它们的调用顺序为：<ol><li>来自你的项目的 <code>pre</code><li>来自插件和主题的 <code>pre</code><li>导入代码片段语法和 Shiki magic move<li>来自你的项目的 <code>preCodeblock</code><li>来自插件和主题的 <code>preCodeblock</code><li>内置的 Mermaid、Monaco 和 PlantUML 等特殊代码块<li>来自插件和主题的 <code>postCodeblock</code><li>来自你的项目的 <code>postCodeblock</code><li>其他内置的自定义语法，如代码块包装<li>来自插件和主题的 <code>post</code><li>来自你的项目的 <code>post</code> <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></ol></environment></section>