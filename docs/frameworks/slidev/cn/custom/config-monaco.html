<!doctype html><html lang="cn"><meta charset="utf-8"><title>配置 Monaco</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="configure-monaco"><h1 id="configure-monaco">配置 Monaco</h1><environment type="client"><p>创建一份包含以下内容的 <code>./setup/monaco.ts</code> 文件：<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> defineMonacoSetup <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@slidev/types'</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineMonacoSetup</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>monaco<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// 使用 `monaco` 配置</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>访问 <a href="https://github.com/Microsoft/monaco-editor">monaco-editor</a> 了解更多关于 Monaco 配置的相关信息。<section class="level2"aria-labelledby="typescript-types"><h2 id="typescript-types">TypeScript 类型</h2><p>当你使用 Monaco 编写 TypeScript 时，类型依赖将会自动安装到客户端.<pre class="language-md"><code class="language-md"><span class="token code"><span class="token punctuation">```</span><span class="token code-language">ts {monaco}</span>
<span class="token code-block language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> ref <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vue'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useMouse <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@vueuse/core'</span>

<span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="token punctuation">```</span></span></code></pre><p>在上面的例子中，确保 <code>vue</code> 和 <code>@vueuse/core</code> 作为 dependencies 或 devDependencies 安装在本地，Slidev 将处理其余部分，以使编辑器自动使用这些类型。当部署为 SPA 时，这些类型也将被打包用于静态托管。<section class="level3"aria-labelledby="additional-types"><h3 id="additional-types">附加类型</h3><p>Slidev 将扫描幻灯片中的所有 Monaco 代码块，并帮助你导入所用库的类型。如果它有遗漏遗漏，你可以显式指定额外的包来导入相应类型：<pre class="language-md"><code class="language-md"><span class="token front-matter-block"><span class="token punctuation">---</span>
<span class="token front-matter yaml language-yaml">monacoTypesAdditionalPackages:
  - lodash-es
  - foo</span>
<span class="token punctuation">---</span></span></code></pre></section><section class="level3"aria-labelledby="auto-type-acquisition"><h3 id="auto-type-acquisition">自动类型获取</h3><p>你可以通过在 headmatter 通过以下设置切换到从CDN加载类型：<pre class="language-md"><code class="language-md"><span class="token front-matter-block"><span class="token punctuation">---</span>
<span class="token front-matter yaml language-yaml">monacoTypesSource: ata</span>
<span class="token punctuation">---</span></span></code></pre><p>此功能由 <a href="https://github.com/microsoft/TypeScript-Website/tree/v2/packages/ata"><code>@typescript/ata</code></a> 提供支持并且完全在客户端上运行。</section></section><section class="level2"aria-labelledby="configure-themes"><h2 id="configure-themes">配置主题</h2><p>自 v0.48.0 起，在<a href="https://shiki.style/packages/monaco"><code>@shikijs/Monaco</code></a>驱动下，Monaco 将复用你在 <a href="custom/config-highlighter.html">Shiki 的设置文件</a> 中配置的 Shiki 主题。它将与你的其他代码块保持一致的风格。</section><section class="level2"aria-labelledby="configure-the-editor"><h2 id="configure-the-editor">配置编辑器</h2><blockquote><p>自 v0.43.0 起可用</blockquote><p>如果你想自定义 Monaco 编辑器，可以传递一个匹配 <a href="https://microsoft.github.io/monaco-editor/docs.html#interfaces/editor.IEditorOptions.html">Monaco IEditorOptions</a> 定义的 <code>editorOptions</code> 对象。<pre class="language-md"><code class="language-md"><span class="token code"><span class="token punctuation">```</span><span class="token code-language">ts {monaco} { editorOptions: { wordWrap:'on'} }</span>
<span class="token code-block language-ts"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'HelloWorld'</span><span class="token punctuation">)</span></span>
<span class="token punctuation">```</span></span></code></pre><p>或者，如果你想将这些选项应用于每个 Monaco 实例，你可以在 <code>defineMonacoSetup</code> 函数中返回它们<pre class="language-ts"><code class="language-ts"><span class="token comment">// ./setup/monaco.ts</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> defineMonacoSetup <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@slidev/types'</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineMonacoSetup</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
    editorOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
      wordWrap<span class="token operator">:</span> <span class="token string">'on'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></section><section class="level2"aria-labelledby="disabling"><h2 id="disabling">禁用</h2><p>从v0.48.0开始，Monaco编辑器默认启用，但只你有使用到时才会被捆绑打包。如果你想禁用它，你可以在幻灯片的 frontmatter 中将 <code>Monaco</code> 设置为 <code>false</code>：<pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span>
<span class="token key atrule">monaco</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 也可以是 'dev' 或 'build' 来有条件地启用它</span>
<span class="token punctuation">---</span></code></pre></section><section class="level2"aria-labelledby="configure-code-runners"><h2 id="configure-code-runners">配置代码运行器</h2><p>要配置Monaco Runner如何运行代码，或添加对自定义语言的支持，请参考 <a href="custom/config-code-runners">配置代码运行器</a>。 <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></environment></section>