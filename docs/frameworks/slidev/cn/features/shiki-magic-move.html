<!doctype html><html lang="cn"><meta charset="utf-8"><title>Shiki Magic Move</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="depends"content="guide/syntax#code-block,guide/animations"><meta name="relates"content="[object Object]"><meta name="since"content="v0.48.0"><meta name="tags"content="代码块,动画"><meta name="description"content="控制代码变化时的细粒度过渡，类似于 Keynote 中的 Magic Move 效果。
"><link rel="stylesheet"type="text/css"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="shiki-magic-move"><h1 id="shiki-magic-move">Shiki Magic Move</h1><p><a href="https://github.com/shikijs/shiki-magic-move">Shiki Magic Move</a> 让你能够控制代码变化时的细粒度过渡，类似于 Keynote 中的 Magic Move 效果。在 <a href="https://shiki-magic-move.netlify.app/">此处</a> 查看它是如何工作的。<p><video src="https://github.com/slidevjs/slidev/assets/11247099/79927794-27ba-4342-9911-9996cec889d6"controls rounded=""shadow=""w-full=""></video><p>在 Slidev 中，我们将 Magic Move 绑定到 <a href="guide/animations.html">点击事件</a> 中。它的语法是用<code>````md magic-move</code> 包裹代表每个步骤的代码块（注意是<strong>四个反引号</strong>）。这将被转换为一个根据动画步骤变化的代码快。<pre class="language-md"><code class="language-md"><span class="token code"><span class="token punctuation">```</span><span class="token code-language">`md magic-move</span>
<span class="token code-block language-md">```js
console.log(<span class="token code-snippet code keyword">`Step ${1}`</span>)</span>
<span class="token punctuation">```</span></span>
<span class="token code"><span class="token punctuation">```</span><span class="token code-language">js</span>
<span class="token code-block language-js"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Step </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span>
<span class="token punctuation">```</span></span>
<span class="token code"><span class="token punctuation">```</span><span class="token code-language">ts</span>
<span class="token code-block language-ts"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Step </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">3</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token keyword module">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span></span>
<span class="token punctuation">```</span></span>
````</code></pre><p>也可以将 Magic Move 和<linkinline link="features/line-highlighting">及<linkinline link="features/code-block-line-numbers">混合使用，例如：</linkinline></linkinline><pre class="language-md"><code class="language-md"><span class="token code"><span class="token punctuation">```</span><span class="token code-language">`md magic-move {at:4, lines: true} // [!code hl]</span>
<span class="token code-block language-md">```js {*|1|2-5} // [!code hl]
let count = 1
function add() {
  count++
}</span>
<span class="token punctuation">```</span></span>

在代码块之间的内容会被忽略，可以作为注释。

<span class="token code"><span class="token punctuation">```</span><span class="token code-language">js {*}{lines: false} // [!code hl]</span>
<span class="token code-block language-js"><span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> count <span class="token operator">+=</span> <span class="token number">1</span></span>
<span class="token punctuation">```</span></span>
````</code></pre><p><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section>