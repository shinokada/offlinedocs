<!doctype html><html lang="cn"><meta charset="utf-8"><title>报告器 | 指南</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="outline"content="deep"><link rel="stylesheet"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="报告器"><h1 id="报告器">报告器</h1><p>Vitest 提供了几种内置报告器，以不同格式显示测试输出，以及使用自定义报告器的能力。你可以使用 <code>--reporter</code> 命令行选项，或者在你的 <code>outputFile</code><a href="https://vitest.dev/config/#reporters">配置选项</a> 中加入 <code>reporters</code> 属性来选择不同的报告器。如果没有指定报告器，Vitest 将使用下文所述的默认报告器。<p>通过命令行使用报告器:<pre class="language-bash"><code class="language-bash">npx vitest --reporter<span class="token operator">=</span>verbose</code></pre><p>通过配置文件 <a href="/config/"><code>vitest.config.ts</code></a> 使用报告器:<pre class="language-ts"><code class="language-ts"><span class="token comment">/// &#x3C;reference types="vitest" /></span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vite'</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token punctuation">{</span>
    reporters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'verbose'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><section class="level2"aria-labelledby="报告器输出"><h2 id="报告器输出">报告器输出</h2><p>默认情况下，Vitest 的报告器会将输出打印到终端。当使用 <code>json</code> 、<code>html</code> 或 <code>junit</code> 报告器时，你可以在 Vite 配置文件中或通过 CLI 加入 <code>outputFile</code> <a href="https://vitest.dev/config/#outputfile">配置选项</a>，将测试输出写入文件。</p>code-group<pre class="language-bash"><code class="language-bash">npx vitest --reporter<span class="token operator">=</span>json --outputFile<span class="token operator">=</span>./test-output.json</code></pre><pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token punctuation">{</span>
    reporters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'json'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    outputFile<span class="token operator">:</span> <span class="token string">'./test-output.json'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></section><section class="level2"aria-labelledby="组合报告器"><h2 id="组合报告器">组合报告器</h2><p>你可以同时使用多个报告器，并以不同格式打印测试结果。<p>例如:<pre class="language-bash"><code class="language-bash">npx vitest --reporter<span class="token operator">=</span>json --reporter<span class="token operator">=</span>default</code></pre><pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token punctuation">{</span>
    reporters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'json'</span><span class="token punctuation">,</span> <span class="token string">'default'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    outputFile<span class="token operator">:</span> <span class="token string">'./test-output.json'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>上面的示例将同时把测试结果以默认样式打印到终端，和以 JSON 格式写入指定的输出文件。<p>使用多个报告器时，还可以指定多个输出文件，如下所示:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  reporters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'junit'</span><span class="token punctuation">,</span> <span class="token string">'json'</span><span class="token punctuation">,</span> <span class="token string">'verbose'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  outputFile<span class="token operator">:</span> <span class="token punctuation">{</span>
    junit<span class="token operator">:</span> <span class="token string">'./junit-report.xml'</span><span class="token punctuation">,</span>
    json<span class="token operator">:</span> <span class="token string">'./json-report.json'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>这个示例将编写单独的 JSON 和 XML 报告，并将详细报告打印到终端。</section><section class="level2"aria-labelledby="内置报告器"><h2 id="内置报告器">内置报告器</h2><section class="level3"aria-labelledby="默认报告器"><h3 id="默认报告器">默认报告器</h3><p>默认情况下（即未指定报告程序），Vitest 会在每个测试套件运行时分级显示结果，并在套件通过后折叠显示。所有测试运行结束后，最终终端输出将显示结果摘要和失败测试的详细信息。<p>项目中的测试输出示例:<pre class="language-bash"><code class="language-bash">✓ __tests__/file1.test.ts <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> 725ms
✓ __tests__/file2.test.ts <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> 746ms
  ✓ second <span class="token builtin class-name">test</span> <span class="token function">file</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> 746ms
    ✓ <span class="token number">1</span> + <span class="token number">1</span> should equal <span class="token number">2</span>
    ✓ <span class="token number">2</span> - <span class="token number">1</span> should equal <span class="token number">1</span></code></pre><p>测试完成后的最终输出:<pre class="language-bash"><code class="language-bash">✓ __tests__/file1.test.ts <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> 725ms
✓ __tests__/file2.test.ts <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> 746ms

 Test Files  <span class="token number">2</span> passed <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
      Tests  <span class="token number">4</span> passed <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
   Start at  <span class="token number">12</span>:34:32
   Duration  <span class="token number">1</span>.26s <span class="token punctuation">(</span>transform 35ms, setup 1ms, collect 90ms, tests <span class="token number">1</span>.47s, environment 0ms, prepare 267ms<span class="token punctuation">)</span></code></pre></section><section class="level3"aria-labelledby="基础报告器"><h3 id="基础报告器">基础报告器</h3><p>基础报告器会显示已运行的测试文件，以及整个套件运行结束后的结果摘要。单独的测试除非不合格，否则不列入报告。</p>code-group<pre class="language-bash"><code class="language-bash">npx vitest --reporter<span class="token operator">=</span>basic</code></pre><pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token punctuation">{</span>
    reporters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'basic'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>使用基础报告器的输出示例:<pre class="language-bash"><code class="language-bash">✓ __tests__/file1.test.ts <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> 725ms
✓ __tests__/file2.test.ts <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> 746ms

 Test Files  <span class="token number">2</span> passed <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
      Tests  <span class="token number">4</span> passed <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
   Start at  <span class="token number">12</span>:34:32
   Duration  <span class="token number">1</span>.26s <span class="token punctuation">(</span>transform 35ms, setup 1ms, collect 90ms, tests <span class="token number">1</span>.47s, environment 0ms, prepare 267ms<span class="token punctuation">)</span></code></pre></section><section class="level3"aria-labelledby="详细报告器"><h3 id="详细报告器">详细报告器</h3><p>采用与<code>默认报告器</code>相同的层次结构，但不会折叠已通过测试套件的子树。终端最终输出会显示所有已运行的测试，包括已通过的测试。</p>code-group<pre class="language-bash"><code class="language-bash">npx vitest --reporter<span class="token operator">=</span>verbose</code></pre><pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token punctuation">{</span>
    reporters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'verbose'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>测试套件通过后的终端最终输出示例:<pre class="language-bash"><code class="language-bash">✓ __tests__/file1.test.ts <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> 725ms
   ✓ first <span class="token builtin class-name">test</span> <span class="token function">file</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> 725ms
     ✓ <span class="token number">2</span> + <span class="token number">2</span> should equal <span class="token number">4</span>
     ✓ <span class="token number">4</span> - <span class="token number">2</span> should equal <span class="token number">2</span>
✓ __tests__/file2.test.ts <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> 746ms
  ✓ second <span class="token builtin class-name">test</span> <span class="token function">file</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> 746ms
    ✓ <span class="token number">1</span> + <span class="token number">1</span> should equal <span class="token number">2</span>
    ✓ <span class="token number">2</span> - <span class="token number">1</span> should equal <span class="token number">1</span>

 Test Files  <span class="token number">2</span> passed <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
      Tests  <span class="token number">4</span> passed <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
   Start at  <span class="token number">12</span>:34:32
   Duration  <span class="token number">1</span>.26s <span class="token punctuation">(</span>transform 35ms, setup 1ms, collect 90ms, tests <span class="token number">1</span>.47s, environment 0ms, prepare 267ms<span class="token punctuation">)</span></code></pre></section><section class="level3"aria-labelledby="dot-报告器"><h3 id="dot-报告器">Dot 报告器</h3><p>为每个已完成的测试打印一个点，以提供最少的输出，并显示所有已运行的测试。只提供失败测试的详细信息，以及套件的基本报告摘要。</p>code-group<pre class="language-bash"><code class="language-bash">npx vitest --reporter<span class="token operator">=</span>dot</code></pre><pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token punctuation">{</span>
    reporters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'dot'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>测试套件通过后的终端最终输出示例:<pre class="language-bash"><code class="language-bash"><span class="token punctuation">..</span><span class="token punctuation">..</span>

 Test Files  <span class="token number">2</span> passed <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
      Tests  <span class="token number">4</span> passed <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
   Start at  <span class="token number">12</span>:34:32
   Duration  <span class="token number">1</span>.26s <span class="token punctuation">(</span>transform 35ms, setup 1ms, collect 90ms, tests <span class="token number">1</span>.47s, environment 0ms, prepare 267ms<span class="token punctuation">)</span></code></pre></section><section class="level3"aria-labelledby="junit-报告器"><h3 id="junit-报告器">JUnit 报告器</h3><p>以 JUnit XML 格式输出测试结果报告。既可打印到终端，也可使用 <a href="##%E6%8A%A5%E5%91%8A%E5%99%A8%E8%BE%93%E5%87%BA"><code>outputFile</code></a> 配置选项写入 XML 文件。</p>code-group<pre class="language-bash"><code class="language-bash">npx vitest --reporter<span class="token operator">=</span>junit</code></pre><pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token punctuation">{</span>
    reporters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'junit'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>JUnit XML 报告示例:<pre class="language-xml"><code class="language-xml"><span class="token prolog">&#x3C;?xml version="1.0" encoding="UTF-8" ?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>testsuites</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vitest tests<span class="token punctuation">"</span></span> <span class="token attr-name">tests</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span> <span class="token attr-name">failures</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">errors</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">time</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.503<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>testsuite</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>__tests__/test-file-1.test.ts<span class="token punctuation">"</span></span> <span class="token attr-name">timestamp</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2023-10-19T17:41:58.580Z<span class="token punctuation">"</span></span> <span class="token attr-name">hostname</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>My-Computer.local<span class="token punctuation">"</span></span> <span class="token attr-name">tests</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span> <span class="token attr-name">failures</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">errors</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">skipped</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">time</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.013<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>testcase</span> <span class="token attr-name">classname</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>__tests__/test-file-1.test.ts<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>first test file <span class="token entity named-entity"title=">">&#x26;gt;</span> 2 + 2 should equal 4<span class="token punctuation">"</span></span> <span class="token attr-name">time</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.01<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>failure</span> <span class="token attr-name">message</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>expected 5 to be 4 // Object.is equality<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>AssertionError<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
AssertionError: expected 5 to be 4 // Object.is equality
 ❯ __tests__/test-file-1.test.ts:20:28
            <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>failure</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>testcase</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>testcase</span> <span class="token attr-name">classname</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>__tests__/test-file-1.test.ts<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>first test file <span class="token entity named-entity"title=">">&#x26;gt;</span> 4 - 2 should equal 2<span class="token punctuation">"</span></span> <span class="token attr-name">time</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>testcase</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>testsuite</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>testsuites</span><span class="token punctuation">></span></span></code></pre><p>输出的 XML 包含嵌套的 <code>testsuites</code> 和 <code>testcase</code> 标记。你可以使用环境变量 <code>VITEST_JUNIT_SUITE_NAME</code> 和 <code>VITEST_JUNIT_CLASSNAME</code> 分别配置它们的名称和类名属性。</section><section class="level3"aria-labelledby="json-报告器"><h3 id="json-报告器">JSON 报告器</h3><p>以 JSON 格式输出测试结果报告。既可打印到终端，也可使用 <a href="##%E6%8A%A5%E5%91%8A%E5%99%A8%E8%BE%93%E5%87%BA"><code>outputFile</code></a> 配置选项写入文件。</p>code-group<pre class="language-bash"><code class="language-bash">npx vitest --reporter<span class="token operator">=</span>json</code></pre><pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token punctuation">{</span>
    reporters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'json'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>JSON 报告示例:<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"numTotalTestSuites"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">"numPassedTestSuites"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">"numFailedTestSuites"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">"numPendingTestSuites"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">"numTotalTests"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">"numPassedTests"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">"numFailedTests"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">"numPendingTests"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">"numTodoTests"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">"startTime"</span><span class="token operator">:</span> <span class="token number">1697737019307</span><span class="token punctuation">,</span>
  <span class="token property">"success"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">"testResults"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"assertionResults"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">"ancestorTitles"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"first test file"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">"fullName"</span><span class="token operator">:</span> <span class="token string">" first test file 2 + 2 should equal 4"</span><span class="token punctuation">,</span>
          <span class="token property">"status"</span><span class="token operator">:</span> <span class="token string">"failed"</span><span class="token punctuation">,</span>
          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"2 + 2 should equal 4"</span><span class="token punctuation">,</span>
          <span class="token property">"duration"</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
          <span class="token property">"failureMessages"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"expected 5 to be 4 // Object.is equality"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">"location"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"line"</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
            <span class="token property">"column"</span><span class="token operator">:</span> <span class="token number">28</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"startTime"</span><span class="token operator">:</span> <span class="token number">1697737019787</span><span class="token punctuation">,</span>
      <span class="token property">"endTime"</span><span class="token operator">:</span> <span class="token number">1697737019797</span><span class="token punctuation">,</span>
      <span class="token property">"status"</span><span class="token operator">:</span> <span class="token string">"failed"</span><span class="token punctuation">,</span>
      <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"/root-directory/__tests__/test-file-1.test.ts"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="html-报告器"><h3 id="html-报告器">HTML 报告器</h3><p>生成 HTML 文件，通过交互式 <a href="/guide/ui">GUI</a> 查看测试结果。文件生成后，Vitest 将保持本地开发服务器运行，并提供一个链接，以便在浏览器中查看报告。<p>可使用 <a href="##%E6%8A%A5%E5%91%8A%E5%99%A8%E8%BE%93%E5%87%BA"><code>outputFile</code></a> 配置选项指定输出文件。如果没有提供 <code>outputFile</code> 选项，则会创建一个新的 HTML 文件。</p>code-group<pre class="language-bash"><code class="language-bash">npx vitest --reporter<span class="token operator">=</span>html</code></pre><pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token punctuation">{</span>
    reporters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'html'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><blockquote>该报告器需要安装 [`@vitest/ui`](/guide/ui) 。</blockquote></section><section class="level3"aria-labelledby="tap-报告器"><h3 id="tap-报告器">TAP 报告器</h3><p>按照 <a href="https://testanything.org/">Test Anything Protocol</a> (TAP)输出报告。</p>code-group<pre class="language-bash"><code class="language-bash">npx vitest --reporter<span class="token operator">=</span>tap</code></pre><pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token punctuation">{</span>
    reporters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'tap'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>TAP 报告示例:<pre class="language-bash"><code class="language-bash">TAP version <span class="token number">13</span>
<span class="token number">1</span><span class="token punctuation">..</span><span class="token number">1</span>
not ok <span class="token number">1</span> - __tests__/test-file-1.test.ts <span class="token comment"># time=14.00ms {</span>
    <span class="token number">1</span><span class="token punctuation">..</span><span class="token number">1</span>
    not ok <span class="token number">1</span> - first <span class="token builtin class-name">test</span> <span class="token function">file</span> <span class="token comment"># time=13.00ms {</span>
        <span class="token number">1</span><span class="token punctuation">..</span><span class="token number">2</span>
        not ok <span class="token number">1</span> - <span class="token number">2</span> + <span class="token number">2</span> should equal <span class="token number">4</span> <span class="token comment"># time=11.00ms</span>
            ---
            error:
                name: <span class="token string">"AssertionError"</span>
                message: <span class="token string">"expected 5 to be 4 // Object.is equality"</span>
            at: <span class="token string">"/root-directory/__tests__/test-file-1.test.ts:20:28"</span>
            actual: <span class="token string">"5"</span>
            expected: <span class="token string">"4"</span>
            <span class="token punctuation">..</span>.
        ok <span class="token number">2</span> - <span class="token number">4</span> - <span class="token number">2</span> should equal <span class="token number">2</span> <span class="token comment"># time=1.00ms</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="tap-扁平报告器"><h3 id="tap-扁平报告器">TAP 扁平报告器</h3><p>输出 TAP 扁平报告。与 <code>TAP Reporter</code> 一样，测试结果的格式遵循 TAP 标准，但测试套件的格式是扁平列表，而不是嵌套层次结构。</p>code-group<pre class="language-bash"><code class="language-bash">npx vitest --reporter<span class="token operator">=</span>tap-flat</code></pre><pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token punctuation">{</span>
    reporters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'tap-flat'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>TAP 扁平报告示例:<pre class="language-bash"><code class="language-bash">TAP version <span class="token number">13</span>
<span class="token number">1</span><span class="token punctuation">..</span><span class="token number">2</span>
not ok <span class="token number">1</span> - __tests__/test-file-1.test.ts <span class="token operator">></span> first <span class="token builtin class-name">test</span> <span class="token function">file</span> <span class="token operator">></span> <span class="token number">2</span> + <span class="token number">2</span> should equal <span class="token number">4</span> <span class="token comment"># time=11.00ms</span>
    ---
    error:
        name: <span class="token string">"AssertionError"</span>
        message: <span class="token string">"expected 5 to be 4 // Object.is equality"</span>
    at: <span class="token string">"/root-directory/__tests__/test-file-1.test.ts:20:28"</span>
    actual: <span class="token string">"5"</span>
    expected: <span class="token string">"4"</span>
    <span class="token punctuation">..</span>.
ok <span class="token number">2</span> - __tests__/test-file-1.test.ts <span class="token operator">></span> first <span class="token builtin class-name">test</span> <span class="token function">file</span> <span class="token operator">></span> <span class="token number">4</span> - <span class="token number">2</span> should equal <span class="token number">2</span> <span class="token comment"># time=0.00ms</span></code></pre></section><section class="level3"aria-labelledby="hanging-process-报告器"><h3 id="hanging-process-报告器">Hanging process 报告器</h3><p>展示任何妨碍 Vitest 安全退出的 hanging processes ，<code>hanging-process</code> 报告器本身不显示测试结果，但可与其他报告器结合使用，以便在测试运行时监控进程。使用这个报告器可能会消耗大量资源，因此通常应保留用于在 Vitest 无法正常退出进程的情况下进行调试的目的。</p>code-group<pre class="language-bash"><code class="language-bash">npx vitest --reporter<span class="token operator">=</span>hanging-process</code></pre><pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token punctuation">{</span>
    reporters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'hanging-process'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></section></section><section class="level2"aria-labelledby="自定义报告器"><h2 id="自定义报告器">自定义报告器</h2><p>你可以使用从 NPM 安装的第三方自定义报告器，方法是在 <code>reporter</code> 选项中指定它们的软件包名称:</p>code-group<pre class="language-bash"><code class="language-bash">npx vitest --reporter<span class="token operator">=</span>some-published-vitest-reporter</code></pre><pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token punctuation">{</span>
    reporters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'some-published-vitest-reporter'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>此外，你还可以定义自己的<a href="/advanced/reporters">自定义报告器</a>，并通过指定文件路径来使用它们:<pre class="language-bash"><code class="language-bash">npx vitest --reporter<span class="token operator">=</span>./path/to/reporter.ts</code></pre><p>自定义报告器应实现<a href="https://github.com/vitest-dev/vitest/blob/main/packages/vitest/src/types/reporter.ts">报告器接口</a>。 <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>