<!doctype html><html lang="cn"><meta charset="utf-8"><title>Debugging | Guide</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="调试"class="level1"><h1>调试</h1><section id="terminal"class="level2"><h2>Terminal</h2><p>在非集成开发环境下，为了调试一个测试文件，你可以使用 <a href="https://github.com/GoogleChromeLabs/ndb"><code>ndb</code></a>。仅仅在你的代码的任何位置添加一个 <code>debugger</code> 语句，然后运行 <code>ndb</code>：<pre class="language-sh"><code class="language-sh"># 全局安装 ndb
npm install -g ndb

# 或者使用 yarn
yarn global add ndb

# 在启用 debugger 的情况下运行测试
ndb npm run test</code></pre></section><section id="vscode"class="level2"><h2>VSCode</h2><p>&#x3C;&#x3C;&#x3C;&#x3C;&#x3C;&#x3C;&#x3C; HEAD 要在 VSCode 中调试测试文件，请创建以下启动配置。 ======= Quick way to debug tests in VSCode is via <code>JavaScript Debug Terminal</code>. Open a new <code>JavaScript Debug Terminal</code> and run <code>npm run test</code> or <code>vitest</code> directly. <em>this works with any code ran in Node, so will work with most JS testing frameworks</em><figure><img src="https://user-images.githubusercontent.com/5594348/212169143-72bf39ce-f763-48f5-822a-0c8b2e6a8484.png"alt="image"><figcaption aria-hidden="true">image</figcaption></figure><p>You can also add a dedicated launch configuration to debug a test file in VSCode:<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>b0400c7b9dbf7021658bb809c9f1399c75ec4e8b</blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token comment">// 想了解更多的信息, 请访问：https://go.microsoft.com/fwlink/?linkid=830387</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0.2.0"</span><span class="token punctuation">,</span>
  <span class="token property">"configurations"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"node"</span><span class="token punctuation">,</span>
      <span class="token property">"request"</span><span class="token operator">:</span> <span class="token string">"launch"</span><span class="token punctuation">,</span>
      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Debug Current Test File"</span><span class="token punctuation">,</span>
      <span class="token property">"autoAttachChildProcesses"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">"skipFiles"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"&#x3C;node_internals>/**"</span><span class="token punctuation">,</span> <span class="token string">"**/node_modules/**"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"program"</span><span class="token operator">:</span> <span class="token string">"${workspaceRoot}/node_modules/vitest/vitest.mjs"</span><span class="token punctuation">,</span>
      <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"run"</span><span class="token punctuation">,</span> <span class="token string">"${relativeFile}"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"smartStep"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">"console"</span><span class="token operator">:</span> <span class="token string">"integratedTerminal"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><p>然后在调试选项卡中确保选择 'Debug Current Test File'，然后你可以打开要调试的测试文件并按 F5 开始调试。</section><section id="intellij-idea"class="level2"><h2>IntelliJ IDEA</h2><p>创建一个 'Node.js' 运行配置。使用以下配置在调试模式下运行所有测试：<table><thead><tr><th>Setting<th>Value<tbody><tr><td>Working directory<td>/path/to/your-project-root<tr><td>JavaScript file<td>./node_modules/vitest/vitest.mjs<tr><td>Application parameters<td>run --threads false</table><p>然后在调试模式下运行此配置。IDE 将在编辑器中设置的 JS/TS 断点处停止。 <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>