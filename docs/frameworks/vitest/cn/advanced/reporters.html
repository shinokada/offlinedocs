<!doctype html><html lang="cn"><meta charset="utf-8"><title>扩展默认报告器 (Extending Reporters)</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="扩展默认报告器-extending-reporters"><h1 id="扩展默认报告器-extending-reporters">扩展默认报告器 (Extending Reporters)</h1><p>你可以从 <code>vitest/reporters</code> 导入报告器并扩展它们以创建您的自定义报告器。<section class="level2"aria-labelledby="扩展内置报告器-extending-built-in-reporters"><h2 id="扩展内置报告器-extending-built-in-reporters">扩展内置报告器 (Extending Built-in Reporters)</h2><p>一般来说，你不需要从头开始创建报告器。<code>vitest</code> 附带了几个可以扩展的默认报告程序。<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">DefaultReporter</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest/reporters'</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">MyDefaultReporter</span></span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token maybe-class-name">DefaultReporter</span></span> <span class="token punctuation">{</span>
  <span class="token comment">// do something</span>
<span class="token punctuation">}</span></code></pre><p>当然，你可以从头开始创建报告器。只需扩展 <code>BaseReporter</code> 类并实现你需要的方法即可。<p>这是自定义报告器的示例：<pre class="language-ts"><code class="language-ts"><span class="token comment">// ./custom-reporter.js</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">BaseReporter</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest/reporters'</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">CustomReporter</span></span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token maybe-class-name">BaseReporter</span></span> <span class="token punctuation">{</span>
  <span class="token function">onCollected</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> files <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">ctx</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token method function property-access">getFiles</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">watchFilters</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">reportTestSummary</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>或者实现 <code>Reporter</code> 接口：<pre class="language-ts"><code class="language-ts"><span class="token comment">// ./custom-reporter.js</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Reporter</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest/reporters'</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">CustomReporter</span></span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token maybe-class-name">Reporter</span></span> <span class="token punctuation">{</span>
  <span class="token function">onCollected</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// print something</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>然后你可以在 <code>vitest.config.ts</code> 文件中使用自定义报告器：<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest/config'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">CustomReporter</span></span> <span class="token keyword module">from</span> <span class="token string">'./custom-reporter.js'</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token punctuation">{</span>
    reporters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">CustomReporter</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></section><section class="level2"aria-labelledby="导出报告器-exported-reporters"><h2 id="导出报告器-exported-reporters">导出报告器 (Exported Reporters)</h2><p><code>vitest</code> 附带了一些<a href="/guide/reporters">内置报告器</a>，你可以开箱即用。<section class="level3"aria-labelledby="内置报告器"><h3 id="内置报告器">内置报告器:</h3><ol><li><code>BasicReporter</code><li><code>DefaultReporter</code><li><code>DotReporter</code><li><code>JsonReporter</code><li><code>VerboseReporter</code><li><code>TapReporter</code><li><code>JUnitReporter</code><li><code>TapFlatReporter</code><li><code>HangingProcessReporter</code></ol></section><section class="level3"aria-labelledby="基础抽象报告器"><h3 id="基础抽象报告器">基础抽象报告器:</h3><ol><li><code>BaseReporter</code></ol></section><section class="level3"aria-labelledby="接口报告器"><h3 id="接口报告器">接口报告器:</h3><ol><li><code>Reporter</code> <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></ol></section></section></section>