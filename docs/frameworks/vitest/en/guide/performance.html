<!doctype html><html lang="en"><meta charset="utf-8"><title>Performance</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="performance"><h1 id="performance">Performance</h1><p>By default Vitest runs every test file in an isolated environment based on the <a href="../config.html#pool">pool</a>:<ul><li><code>threads</code> pool runs every test file in a separate <a href="https://nodejs.org/api/worker_threads.html#class-worker"><code>Worker</code></a><li><code>forks</code> pool runs every test file in a separate <a href="https://nodejs.org/api/child_process.html#child_processforkmodulepath-args-options">forked child process</a><li><code>vmThreads</code> pool runs every test file in a separate <a href="https://nodejs.org/api/vm.html#vmcreatecontextcontextobject-options">VM context</a>, but it uses workers for parallelism</ul><p>This greatly increases test times, which might not be desirable for projects that don't rely on side effects and properly cleanup their state (which is usually true for projects with <code>node</code> environment). In this case disabling isolation will improve the speed of your tests. To do that, you can provide <code>--no-isolate</code> flag to the CLI or set <a href="../config.html#isolate"><code>test.isolate</code></a> property in the config to <code>false</code>. If you are using several pools at once with <code>poolMatchGlobs</code>, you can also disable isolation for a specific pool you are using.</p>code-group ```bash [CLI] vitest --no-isolate ``` ```ts [vitest.config.js] import { defineConfig } from 'vitest/config'<p>export default defineConfig({ test: { isolate: false, // you can also disable isolation only for specific pools poolOptions: { forks: { isolate: false, }, }, }, })<pre class="language-text"><code class="language-text">&#x3C;/blockquote>

&#x3C;/blockquote> note
If you are using `vmThreads` pool, you cannot disable isolation. Use `threads` pool instead to improve your tests performance.
&#x3C;/blockquote>

For some projects, it might also be desirable to disable parallelism to improve startup time. To do that, provide `--no-file-parallelism` flag to the CLI or set [`test.fileParallelism`](../config.html#fileParallelism) property in the config to `false`.

&#x3C;/blockquote> code-group
```bash [CLI]
vitest --no-file-parallelism</code></pre><pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest/config'</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token punctuation">{</span>
    fileParallelism<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section>