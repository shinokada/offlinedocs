<!doctypehtml><html lang="en"><meta charset="utf-8"><title>Coverage | Guide</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="https://raw.githubusercontent.com/shinokada/prism-coy-theme/main/theme_common.css"><section id="coverage"class="level1"><h1>Coverage</h1><p>Vitest supports Native code coverage via <a href="https://github.com/bcoe/c8"><code>c8</code></a> and instrumented code coverage via <a href="https://istanbul.js.org/"><code>istanbul</code></a>.<section id="coverage-providers"class="level2"><h2>Coverage Providers</h2><blockquote>Since Vitest v0.22.0</blockquote><p>Both <code>c8</code> and <code>istanbul</code> support are optional. By default, <code>c8</code> will be used.<p>You can select the coverage tool by setting <code>test.coverage.provider</code> to either <code>c8</code> or <code>istanbul</code>:<pre class="language-ts"><code class="language-ts"><span class="token comment">// vite.config.ts</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest/config'</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token punctuation">{</span>
    coverage<span class="token operator">:</span> <span class="token punctuation">{</span>
      provider<span class="token operator">:</span> <span class="token string">'istanbul'</span> <span class="token comment">// or 'c8'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>When you start the Vitest process, it will prompt you to install the corresponding support package automatically.<p>Or if you prefer to install them manually:<pre class="language-bash"><code class="language-bash"><span class="token comment"># For c8</span>
<span class="token function">npm</span> i -D @vitest/coverage-c8

<span class="token comment"># For istanbul</span>
<span class="token function">npm</span> i -D @vitest/coverage-istanbul</code></pre></section><section id="coverage-setup"class="level2"><h2>Coverage Setup</h2><p>To test with coverage enabled, you can pass the <code>--coverage</code> flag in CLI.<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"vitest"</span><span class="token punctuation">,</span>
    <span class="token property">"coverage"</span><span class="token operator">:</span> <span class="token string">"vitest run --coverage"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>To configure it, set <code>test.coverage</code> options in your config file:<pre class="language-ts"><code class="language-ts"><span class="token comment">// vite.config.ts</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest/config'</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token punctuation">{</span>
    coverage<span class="token operator">:</span> <span class="token punctuation">{</span>
      reporter<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">,</span> <span class="token string">'json'</span><span class="token punctuation">,</span> <span class="token string">'html'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></section><section id="custom-coverage-provider"class="level2"><h2>Custom Coverage Provider</h2><p>It's also possible to provide your custom coverage provider by passing an object to the <code>test.coverage.provider</code>:<pre class="language-ts"><code class="language-ts"><span class="token comment">// vite.config.ts</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest/config'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">CustomCoverageProvider</span></span> <span class="token keyword module">from</span> <span class="token string">'my-custom-coverage-provider'</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token punctuation">{</span>
    coverage<span class="token operator">:</span> <span class="token punctuation">{</span>
      provider<span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">CustomCoverageProvider</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>Please refer to the type definition for more details. <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>