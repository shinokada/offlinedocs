<!doctype html><html lang="en"><meta charset="utf-8"><title>Assertion API | Browser Mode</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="assertion-api"><h1 id="assertion-api">Assertion API</h1><p>Vitest bundles the <a href="https://github.com/testing-library/jest-dom"><code>@testing-library/jest-dom</code></a> library to provide a wide range of DOM assertions out of the box. For detailed documentation, you can read the <code>jest-dom</code> readme:<ul><li><a href="https://github.com/testing-library/jest-dom#toBeDisabled"><code>toBeDisabled</code></a><li><a href="https://github.com/testing-library/jest-dom#toBeEnabled"><code>toBeEnabled</code></a><li><a href="https://github.com/testing-library/jest-dom#toBeEmptyDOMElement"><code>toBeEmptyDOMElement</code></a><li><a href="https://github.com/testing-library/jest-dom#toBeInTheDocument"><code>toBeInTheDocument</code></a><li><a href="https://github.com/testing-library/jest-dom#toBeInvalid"><code>toBeInvalid</code></a><li><a href="https://github.com/testing-library/jest-dom#toBeRequired"><code>toBeRequired</code></a><li><a href="https://github.com/testing-library/jest-dom#toBeValid"><code>toBeValid</code></a><li><a href="https://github.com/testing-library/jest-dom#toBeVisible"><code>toBeVisible</code></a><li><a href="https://github.com/testing-library/jest-dom#toContainElement"><code>toContainElement</code></a><li><a href="https://github.com/testing-library/jest-dom#toContainHTML"><code>toContainHTML</code></a><li><a href="https://github.com/testing-library/jest-dom#toHaveAccessibleDescription"><code>toHaveAccessibleDescription</code></a><li><a href="https://github.com/testing-library/jest-dom#toHaveAccessibleErrorMessage"><code>toHaveAccessibleErrorMessage</code></a><li><a href="https://github.com/testing-library/jest-dom#toHaveAccessibleName"><code>toHaveAccessibleName</code></a><li><a href="https://github.com/testing-library/jest-dom#toHaveAttribute"><code>toHaveAttribute</code></a><li><a href="https://github.com/testing-library/jest-dom#toHaveClass"><code>toHaveClass</code></a><li><a href="https://github.com/testing-library/jest-dom#toHaveFocus"><code>toHaveFocus</code></a><li><a href="https://github.com/testing-library/jest-dom#toHaveFormValues"><code>toHaveFormValues</code></a><li><a href="https://github.com/testing-library/jest-dom#toHaveStyle"><code>toHaveStyle</code></a><li><a href="https://github.com/testing-library/jest-dom#toHaveTextContent"><code>toHaveTextContent</code></a><li><a href="https://github.com/testing-library/jest-dom#toHaveValue"><code>toHaveValue</code></a><li><a href="https://github.com/testing-library/jest-dom#toHaveDisplayValue"><code>toHaveDisplayValue</code></a><li><a href="https://github.com/testing-library/jest-dom#toBeChecked"><code>toBeChecked</code></a><li><a href="https://github.com/testing-library/jest-dom#toBePartiallyChecked"><code>toBePartiallyChecked</code></a><li><a href="https://github.com/testing-library/jest-dom#toHaveRole"><code>toHaveRole</code></a><li><a href="https://github.com/testing-library/jest-dom#toHaveErrorMessage"><code>toHaveErrorMessage</code></a></ul><p>If you are using TypeScript or want to have correct type hints in <code>expect</code>, make sure you have either <code>@vitest/browser/providers/playwright</code> or <code>@vitest/browser/providers/webdriverio</code> specified in your <code>tsconfig</code> depending on the provider you use. If you use the default <code>preview</code> provider, you can specify <code>@vitest/browser/matchers</code> instead.</p>code-group ```json [preview] { "compilerOptions": { "types": [ "@vitest/browser/matchers" ] } } ``` ```json [playwright] { "compilerOptions": { "types": [ "@vitest/browser/providers/playwright" ] } } ``` ```json [webdriverio] { "compilerOptions": { "types": [ "@vitest/browser/providers/webdriverio" ] } } ```<p>Tests in the browser might fail inconsistently due to their asynchronous nature. Because of this, it is important to have a way to guarantee that assertions succeed even if the condition is delayed (by a timeout, network request, or animation, for example). For this purpose, Vitest provides retriable assertions out of the box via the <a href="/api/expect#poll"><code>expect.poll</code></a> and <code>expect.element</code> APIs:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> page <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@vitest/browser/context'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'error banner is rendered'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">triggerError</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// @testing-library provides queries with built-in retry-ability</span>
  <span class="token comment">// It will try to find the banner until it's rendered</span>
  <span class="token keyword">const</span> banner <span class="token operator">=</span> page<span class="token punctuation">.</span><span class="token method function property-access">getByRole</span><span class="token punctuation">(</span><span class="token string">'alert'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">error</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// Vitest provides `expect.element` with built-in retry-ability</span>
  <span class="token comment">// It will check `element.textContent` until it's equal to "Error!"</span>
  <span class="token keyword control-flow">await</span> expect<span class="token punctuation">.</span><span class="token method function property-access">element</span><span class="token punctuation">(</span>banner<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveTextContent</span><span class="token punctuation">(</span><span class="token string">'Error!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><blockquote>`expect.element` is a shorthand for `expect.poll(() => element)` and works in exactly the same way.<p><code>toHaveTextContent</code> and all other <a href="https://github.com/testing-library/jest-dom"><code>@testing-library/jest-dom</code></a> assertions are still available on a regular <code>expect</code> without a built-in retry-ability mechanism:<pre class="language-ts"><code class="language-ts"><span class="token comment">// will fail immediately if .textContent is not `'Error!'`</span>
<span class="token function">expect</span><span class="token punctuation">(</span>banner<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveTextContent</span><span class="token punctuation">(</span><span class="token string">'Error!'</span><span class="token punctuation">)</span></code></pre></blockquote><span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section>