<!doctype html><html lang="en"><meta charset="utf-8"><title>Context API | Browser Mode</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="context-api"><h1 id="context-api">Context API</h1><p>Vitest exposes a context module via <code>@vitest/browser/context</code> entry point. As of 2.0, it exposes a small set of utilities that might be useful to you in tests.<section class="level2"aria-labelledby="userevent"><h2 id="userevent"><code>userEvent</code></h2><blockquote>The `userEvent` API is explained in detail at [Interactivity API](/guide/browser/interactivity-api).</blockquote><pre class="language-ts"><code class="language-ts"><span class="token doc-comment comment">/**
 * Handler for user interactions. The support is implemented by the browser provider (`playwright` or `webdriverio`).
 * If used with `preview` provider, fallbacks to simulated events via `@testing-library/user-event`.
 * <span class="token keyword">@experimental</span>
 */</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> userEvent<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">setup</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token maybe-class-name">UserEvent</span>
  <span class="token function-variable function">click</span><span class="token operator">:</span> <span class="token punctuation">(</span>element<span class="token operator">:</span> <span class="token maybe-class-name">Element</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">UserEventClickOptions</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token keyword">void</span><span class="token operator">></span>
  <span class="token function-variable function">dblClick</span><span class="token operator">:</span> <span class="token punctuation">(</span>element<span class="token operator">:</span> <span class="token maybe-class-name">Element</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">UserEventDoubleClickOptions</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token keyword">void</span><span class="token operator">></span>
  <span class="token function-variable function">tripleClick</span><span class="token operator">:</span> <span class="token punctuation">(</span>element<span class="token operator">:</span> <span class="token maybe-class-name">Element</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">UserEventTripleClickOptions</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token keyword">void</span><span class="token operator">></span>
  <span class="token function-variable function">selectOptions</span><span class="token operator">:</span> <span class="token punctuation">(</span>
    element<span class="token operator">:</span> <span class="token maybe-class-name">Element</span><span class="token punctuation">,</span>
    values<span class="token operator">:</span> <span class="token maybe-class-name">HTMLElement</span> <span class="token operator">|</span> <span class="token maybe-class-name">HTMLElement</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">UserEventSelectOptions</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token keyword">void</span><span class="token operator">></span>
  <span class="token function-variable function">keyboard</span><span class="token operator">:</span> <span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token keyword">void</span><span class="token operator">></span>
  <span class="token function-variable function">type</span><span class="token operator">:</span> <span class="token punctuation">(</span>element<span class="token operator">:</span> <span class="token maybe-class-name">Element</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">UserEventTypeOptions</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token keyword">void</span><span class="token operator">></span>
  <span class="token function-variable function">clear</span><span class="token operator">:</span> <span class="token punctuation">(</span>element<span class="token operator">:</span> <span class="token maybe-class-name">Element</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token keyword">void</span><span class="token operator">></span>
  <span class="token function-variable function">tab</span><span class="token operator">:</span> <span class="token punctuation">(</span>options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">UserEventTabOptions</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token keyword">void</span><span class="token operator">></span>
  <span class="token function-variable function">hover</span><span class="token operator">:</span> <span class="token punctuation">(</span>element<span class="token operator">:</span> <span class="token maybe-class-name">Element</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">UserEventHoverOptions</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token keyword">void</span><span class="token operator">></span>
  <span class="token function-variable function">unhover</span><span class="token operator">:</span> <span class="token punctuation">(</span>element<span class="token operator">:</span> <span class="token maybe-class-name">Element</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">UserEventHoverOptions</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token keyword">void</span><span class="token operator">></span>
  <span class="token function-variable function">fill</span><span class="token operator">:</span> <span class="token punctuation">(</span>element<span class="token operator">:</span> <span class="token maybe-class-name">Element</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">UserEventFillOptions</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token keyword">void</span><span class="token operator">></span>
  <span class="token function-variable function">dragAndDrop</span><span class="token operator">:</span> <span class="token punctuation">(</span>source<span class="token operator">:</span> <span class="token maybe-class-name">Element</span><span class="token punctuation">,</span> target<span class="token operator">:</span> <span class="token maybe-class-name">Element</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">UserEventDragAndDropOptions</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token keyword">void</span><span class="token operator">></span>
<span class="token punctuation">}</span></code></pre></section><section class="level2"aria-labelledby="commands"><h2 id="commands"><code>commands</code></h2><blockquote>This API is explained in detail at [Commands API](/guide/browser/commands).</blockquote><pre class="language-ts"><code class="language-ts"><span class="token doc-comment comment">/**
 * Available commands for the browser.
 * A shortcut to `server.commands`.
 */</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> commands<span class="token operator">:</span> <span class="token maybe-class-name">BrowserCommands</span></code></pre></section><section class="level2"aria-labelledby="page"><h2 id="page"><code>page</code></h2><p>The <code>page</code> export provides utilities to interact with the current <code>page</code>.<blockquote>While it exposes some utilities from Playwright's `page`, it is not the same object. Since the browser context is evaluated in the browser, your tests don't have access to Playwright's `page` because it runs on the server.<p>Use <a href="/guide/browser/commands">Commands API</a> if you need to have access to Playwright's <code>page</code> object.</blockquote><pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword">const</span> page<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token doc-comment comment">/**
   * Change the size of iframe's viewport.
   */</span>
  <span class="token function">viewport</span><span class="token punctuation">(</span>width<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token keyword">void</span><span class="token operator">></span>
  <span class="token doc-comment comment">/**
   * Make a screenshot of the test iframe or a specific element.
   * <span class="token keyword">@returns</span> Path to the screenshot file or path and base64.
   */</span>
  <span class="token function">screenshot</span><span class="token punctuation">(</span>options<span class="token operator">:</span> <span class="token maybe-class-name">Omit</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">ScreenshotOptions</span><span class="token punctuation">,</span> <span class="token string">'base64'</span><span class="token operator">></span> <span class="token operator">&#x26;</span> <span class="token punctuation">{</span> base64<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token builtin">string</span>
    base64<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token punctuation">}</span><span class="token operator">></span>
  <span class="token function">screenshot</span><span class="token punctuation">(</span>options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">ScreenshotOptions</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token builtin">string</span><span class="token operator">></span>
  <span class="token doc-comment comment">/**
   * Extend default `page` object with custom methods.
   */</span>
  <span class="token function">extend</span><span class="token punctuation">(</span>methods<span class="token operator">:</span> <span class="token maybe-class-name">Partial</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">BrowserPage</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">BrowserPage</span>
  <span class="token doc-comment comment">/**
   * Wrap an HTML element in a `Locator`. When querying for elements, the search will always return this element.
   */</span>
  <span class="token function">elementLocator</span><span class="token punctuation">(</span>element<span class="token operator">:</span> <span class="token maybe-class-name">Element</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Locator</span>

  <span class="token doc-comment comment">/**
   * Locator APIs. See its documentation for more details.
   */</span>
  <span class="token function">getByRole</span><span class="token punctuation">(</span>role<span class="token operator">:</span> <span class="token maybe-class-name">ARIARole</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">LocatorByRoleOptions</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Locator</span>
  <span class="token function">getByLabelText</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token known-class-name class-name">RegExp</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">LocatorOptions</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Locator</span>
  <span class="token function">getByTestId</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token known-class-name class-name">RegExp</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Locator</span>
  <span class="token function">getByAltText</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token known-class-name class-name">RegExp</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">LocatorOptions</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Locator</span>
  <span class="token function">getByPlaceholder</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token known-class-name class-name">RegExp</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">LocatorOptions</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Locator</span>
  <span class="token function">getByText</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token known-class-name class-name">RegExp</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">LocatorOptions</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Locator</span>
  <span class="token function">getByTitle</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token known-class-name class-name">RegExp</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">LocatorOptions</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Locator</span>
<span class="token punctuation">}</span></code></pre><blockquote>The `getBy*` API is explained at [Locators API](/guide/browser/locators).</blockquote></section><section class="level2"aria-labelledby="cdp"><h2 id="cdp"><code>cdp</code></h2><p>The <code>cdp</code> export returns the current Chrome DevTools Protocol session. It is mostly useful to library authors to build tools on top of it.<blockquote>CDP session works only with `playwright` provider and only when using `chromium` browser. You can read more about it in playwright's [`CDPSession`](https://playwright.dev/docs/api/class-cdpsession) documentation.</blockquote><pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function">cdp</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token maybe-class-name">CDPSession</span></code></pre></section><section class="level2"aria-labelledby="server"><h2 id="server"><code>server</code></h2><p>The <code>server</code> export represents the Node.js environment where the Vitest server is running. It is mostly useful for debugging or limiting your tests based on the environment.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword">const</span> server<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token doc-comment comment">/**
   * Platform the Vitest server is running on.
   * The same as calling `process.platform` on the server.
   */</span>
  platform<span class="token operator">:</span> <span class="token maybe-class-name">Platform</span>
  <span class="token doc-comment comment">/**
   * Runtime version of the Vitest server.
   * The same as calling `process.version` on the server.
   */</span>
  version<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token doc-comment comment">/**
   * Name of the browser provider.
   */</span>
  provider<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token doc-comment comment">/**
   * Name of the current browser.
   */</span>
  browser<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token doc-comment comment">/**
   * Available commands for the browser.
   */</span>
  commands<span class="token operator">:</span> <span class="token maybe-class-name">BrowserCommands</span>
  <span class="token doc-comment comment">/**
   * Serialized test config.
   */</span>
  config<span class="token operator">:</span> <span class="token maybe-class-name">SerializedConfig</span>
<span class="token punctuation">}</span></code></pre><p><span style="float:footnote"><a href="../../index.html#toc">Go to TOC</a></span></section></section>