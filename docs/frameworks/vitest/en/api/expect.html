<!doctype html><html lang="en"><meta charset="utf-8"><title>expect</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="expect"class="level1"><h1>expect</h1><p>The following types are used in the type signatures below<pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Awaitable</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token maybe-class-name">PromiseLike</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></code></pre><p><code>expect</code> is used to create assertions. In this context <code>assertions</code> are functions that can be called to assert a statement. Vitest provides <code>chai</code> assertions by default and also <code>Jest</code> compatible assertions build on top of <code>chai</code>.<p>For example, this code asserts that an <code>input</code> value is equal to <code>2</code>. If it's not, the assertion will throw an error, and the test will fail.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">const</span> input <span class="token operator">=</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">sqrt</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>

<span class="token function">expect</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">to</span><span class="token punctuation">.</span><span class="token method function property-access">equal</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// chai API</span>
<span class="token function">expect</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// jest API</span></code></pre><p>Technically this example doesn't use <a href="../api.html#test"><code>test</code></a> function, so in the console you will see Nodejs error instead of Vitest output. To learn more about <code>test</code>, please read <a href="/api/">Test API Reference</a>.<p>Also, <code>expect</code> can be used statically to access matchers functions, described later, and more.<blockquote>`expect` has no effect on testing types, if the expression doesn't have a type error. If you want to use Vitest as [type checker](/guide/testing-types), use [`expectTypeOf`](/api/expect-typeof) or [`assertType`](/api/assert-type).</blockquote><section id="not"class="level2"><h2>not</h2><p>Using <code>not</code> will negate the assertion. For example, this code asserts that an <code>input</code> value is not equal to <code>2</code>. If it's equal, the assertion will throw an error, and the test will fail.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">const</span> input <span class="token operator">=</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">sqrt</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>

<span class="token function">expect</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">not</span><span class="token punctuation">.</span><span class="token property-access">to</span><span class="token punctuation">.</span><span class="token method function property-access">equal</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// chai API</span>
<span class="token function">expect</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">not</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// jest API</span></code></pre></section><section id="tobe"class="level2"><h2>toBe</h2><ul><li><p><strong>Type:</strong> <code>(value: any) => Awaitable&#x3C;void></code><p><code>toBe</code> can be used to assert if primitives are equal or that objects share the same reference. It is equivalent of calling <code>expect(Object.is(3, 3)).toBe(true)</code>. If the objects are not the same, but you want to check if their structures are identical, you can use <a href="#toequal"><code>toEqual</code></a>.<p>For example, the code below checks if the trader has 13 apples.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">const</span> stock <span class="token operator">=</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'apples'</span><span class="token punctuation">,</span>
  count<span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'stock has 13 apples'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>stock<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>stock<span class="token punctuation">.</span><span class="token property-access">count</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'stocks are the same'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> refStock <span class="token operator">=</span> stock <span class="token comment">// same reference</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>stock<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span>refStock<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>Try not to use <code>toBe</code> with floating-point numbers. Since JavaScript rounds them, <code>0.1 + 0.2</code> is not strictly <code>0.3</code>. To reliably assert floating-point numbers, use <a href="#tobecloseto"><code>toBeCloseTo</code></a> assertion.</ul></section><section id="tobecloseto"class="level2"><h2>toBeCloseTo</h2><ul><li><p><strong>Type:</strong> <code>(value: number, numDigits?: number) => Awaitable&#x3C;void></code><p>Use <code>toBeCloseTo</code> to compare floating-point numbers. The optional <code>numDigits</code> argument limits the number of digits to check <em>after</em> the decimal point. For example:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

test<span class="token punctuation">.</span><span class="token method function property-access">fails</span><span class="token punctuation">(</span><span class="token string">'decimals are not equal in javascript'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">0.2</span> <span class="token operator">+</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span> <span class="token comment">// 0.2 + 0.1 is 0.30000000000000004</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'decimals are rounded to 5 after the point'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// 0.2 + 0.1 is 0.30000 | "000000000004" removed</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">0.2</span> <span class="token operator">+</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeCloseTo</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
  <span class="token comment">// nothing from 0.30000000000000004 is removed</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">0.2</span> <span class="token operator">+</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">not</span><span class="token punctuation">.</span><span class="token method function property-access">toBeCloseTo</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tobedefined"class="level2"><h2>toBeDefined</h2><ul><li><p><strong>Type:</strong> <code>() => Awaitable&#x3C;void></code><p><code>toBeDefined</code> asserts that the value is not equal to <code>undefined</code>. Useful use case would be to check if function <em>returned</em> anything.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">const</span> <span class="token function-variable function">getApples</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token number">3</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'function returned something'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getApples</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeDefined</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tobeundefined"class="level2"><h2>toBeUndefined</h2><ul><li><p><strong>Type:</strong> <code>() => Awaitable&#x3C;void></code><p>Opposite of <code>toBeDefined</code>, <code>toBeUndefined</code> asserts that the value <em>is</em> equal to <code>undefined</code>. Useful use case would be to check if function hasn't <em>returned</em> anything.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">function</span> <span class="token function">getApplesFromStock</span><span class="token punctuation">(</span>stock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>stock <span class="token operator">===</span> <span class="token string">'Bill'</span><span class="token punctuation">)</span>
    <span class="token keyword control-flow">return</span> <span class="token number">13</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'mary doesn\'t have a stock'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getApplesFromStock</span><span class="token punctuation">(</span><span class="token string">'Mary'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeUndefined</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tobetruthy"class="level2"><h2>toBeTruthy</h2><ul><li><p><strong>Type:</strong> <code>() => Awaitable&#x3C;void></code><p><code>toBeTruthy</code> asserts that the value is true when converted to boolean. Useful if you don't care for the value, but just want to know it can be converted to <code>true</code>.<p>For example, having this code you don't care for the return value of <code>stocks.getInfo</code> - it maybe a complex object, a string, or anything else. The code will still work.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Stocks</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./stocks'</span>
<span class="token keyword">const</span> stocks <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">Stocks</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
stocks<span class="token punctuation">.</span><span class="token method function property-access">sync</span><span class="token punctuation">(</span><span class="token string">'Bill'</span><span class="token punctuation">)</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>stocks<span class="token punctuation">.</span><span class="token method function property-access">getInfo</span><span class="token punctuation">(</span><span class="token string">'Bill'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  stocks<span class="token punctuation">.</span><span class="token method function property-access">sell</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">,</span> <span class="token string">'Bill'</span><span class="token punctuation">)</span></code></pre><p>So if you want to test that <code>stocks.getInfo</code> will be truthy, you could write:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Stocks</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./stocks'</span>
<span class="token keyword">const</span> stocks <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">Stocks</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'if we know Bill stock, sell apples to him'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  stocks<span class="token punctuation">.</span><span class="token method function property-access">sync</span><span class="token punctuation">(</span><span class="token string">'Bill'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>stocks<span class="token punctuation">.</span><span class="token method function property-access">getInfo</span><span class="token punctuation">(</span><span class="token string">'Bill'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>Everything in JavaScript is truthy, except <code>false</code>, <code>0</code>, <code>''</code>, <code>null</code>, <code>undefined</code>, and <code>NaN</code>.</ul></section><section id="tobefalsy"class="level2"><h2>toBeFalsy</h2><ul><li><p><strong>Type:</strong> <code>() => Awaitable&#x3C;void></code><p><code>toBeFalsy</code> asserts that the value is false when converted to boolean. Useful if you don't care for the value, but just want to know if it can be converted to <code>false</code>.<p>For example, having this code you don't care for the return value of <code>stocks.stockFailed</code> - it may return any falsy value, but the code will still work.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Stocks</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./stocks'</span>
<span class="token keyword">const</span> stocks <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">Stocks</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
stocks<span class="token punctuation">.</span><span class="token method function property-access">sync</span><span class="token punctuation">(</span><span class="token string">'Bill'</span><span class="token punctuation">)</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>stocks<span class="token punctuation">.</span><span class="token method function property-access">stockFailed</span><span class="token punctuation">(</span><span class="token string">'Bill'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  stocks<span class="token punctuation">.</span><span class="token method function property-access">sell</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">,</span> <span class="token string">'Bill'</span><span class="token punctuation">)</span></code></pre><p>So if you want to test that <code>stocks.stockFailed</code> will be falsy, you could write:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Stocks</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./stocks'</span>
<span class="token keyword">const</span> stocks <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">Stocks</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'if Bill stock hasn\'t failed, sell apples to him'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  stocks<span class="token punctuation">.</span><span class="token method function property-access">syncStocks</span><span class="token punctuation">(</span><span class="token string">'Bill'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>stocks<span class="token punctuation">.</span><span class="token method function property-access">stockFailed</span><span class="token punctuation">(</span><span class="token string">'Bill'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeFalsy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>Everything in JavaScript is truthy, except <code>false</code>, <code>0</code>, <code>''</code>, <code>null</code>, <code>undefined</code>, and <code>NaN</code>.</ul></section><section id="tobenull"class="level2"><h2>toBeNull</h2><ul><li><p><strong>Type:</strong> <code>() => Awaitable&#x3C;void></code><p><code>toBeNull</code> simply asserts if something is <code>null</code>. Alias for <code>.toBe(null)</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">function</span> <span class="token function">apples</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token keyword null nil">null</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'we don\'t have apples'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">apples</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tobenan"class="level2"><h2>toBeNaN</h2><ul><li><p><strong>Type:</strong> <code>() => Awaitable&#x3C;void></code><p><code>toBeNaN</code> simply asserts if something is <code>NaN</code>. Alias for <code>.toBe(NaN)</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span>

<span class="token keyword">function</span> <span class="token function">getApplesCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  i<span class="token operator">++</span>
  <span class="token keyword control-flow">return</span> i <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token number">NaN</span> <span class="token operator">:</span> i
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'getApplesCount has some unusual side effects...'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getApplesCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">not</span><span class="token punctuation">.</span><span class="token method function property-access">toBeNaN</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getApplesCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeNaN</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tobetypeof"class="level2"><h2>toBeTypeOf</h2><ul><li><p><strong>Type:</strong> <code>(c: 'bigint' | 'boolean' | 'function' | 'number' | 'object' | 'string' | 'symbol' | 'undefined') => Awaitable&#x3C;void></code><p><code>toBeTypeOf</code> asserts if an actual value is of type of received type.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>
<span class="token keyword">const</span> actual <span class="token operator">=</span> <span class="token string">'stock'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'stock is type of string'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>actual<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeTypeOf</span><span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tobeinstanceof"class="level2"><h2>toBeInstanceOf</h2><ul><li><p><strong>Type:</strong> <code>(c: any) => Awaitable&#x3C;void></code><p><code>toBeInstanceOf</code> asserts if an actual value is instance of received class.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Stocks</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./stocks'</span>
<span class="token keyword">const</span> stocks <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">Stocks</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'stocks are instance of Stocks'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>stocks<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeInstanceOf</span><span class="token punctuation">(</span><span class="token maybe-class-name">Stocks</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tobegreaterthan"class="level2"><h2>toBeGreaterThan</h2><ul><li><p><strong>Type:</strong> <code>(n: number | bigint) => Awaitable&#x3C;void></code><p><code>toBeGreaterThan</code> asserts if actual value is greater than received one. Equal values will fail the test.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getApples <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./stock'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'have more then 10 apples'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getApples</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeGreaterThan</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tobegreaterthanorequal"class="level2"><h2>toBeGreaterThanOrEqual</h2><ul><li><p><strong>Type:</strong> <code>(n: number | bigint) => Awaitable&#x3C;void></code><p><code>toBeGreaterThanOrEqual</code> asserts if actual value is greater than received one or equal to it.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getApples <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./stock'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'have 11 apples or more'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getApples</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeGreaterThanOrEqual</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tobelessthan"class="level2"><h2>toBeLessThan</h2><ul><li><p><strong>Type:</strong> <code>(n: number | bigint) => Awaitable&#x3C;void></code><p><code>toBeLessThan</code> asserts if actual value is less than received one. Equal values will fail the test.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getApples <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./stock'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'have less then 20 apples'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getApples</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeLessThan</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tobelessthanorequal"class="level2"><h2>toBeLessThanOrEqual</h2><ul><li><p><strong>Type:</strong> <code>(n: number | bigint) => Awaitable&#x3C;void></code><p><code>toBeLessThanOrEqual</code> asserts if actual value is less than received one or equal to it.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getApples <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./stock'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'have 11 apples or less'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getApples</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeLessThanOrEqual</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="toequal"class="level2"><h2>toEqual</h2><ul><li><p><strong>Type:</strong> <code>(received: any) => Awaitable&#x3C;void></code><p><code>toEqual</code> asserts if actual value is equal to received one or has the same structure, if it is an object (compares them recursively). You can see the difference between <code>toEqual</code> and <a href="#tobe"><code>toBe</code></a> in this example:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">const</span> stockBill <span class="token operator">=</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'apples'</span><span class="token punctuation">,</span>
  count<span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> stockMary <span class="token operator">=</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'apples'</span><span class="token punctuation">,</span>
  count<span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'stocks have the same properties'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>stockBill<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toEqual</span><span class="token punctuation">(</span>stockMary<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'stocks are not the same'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>stockBill<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">not</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span>stockMary<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><blockquote>A _deep equality_ will not be performed for `Error` objects. To test if something was thrown, use [`toThrowError`](#tothrowerror) assertion.</blockquote></ul></section><section id="tostrictequal"class="level2"><h2>toStrictEqual</h2><ul><li><p><strong>Type:</strong> <code>(received: any) => Awaitable&#x3C;void></code><p><code>toStrictEqual</code> asserts if the actual value is equal to the received one or has the same structure if it is an object (compares them recursively), and of the same type.<p>Differences from <a href="#toequal"><code>.toEqual</code></a>:<ul><li>Keys with <code>undefined</code> properties are checked. e.g. <code>{a: undefined, b: 2}</code> does not match <code>{b: 2}</code> when using <code>.toStrictEqual</code>.<li>Array sparseness is checked. e.g. <code>[, 1]</code> does not match <code>[undefined, 1]</code> when using <code>.toStrictEqual</code>.<li>Object types are checked to be equal. e.g. A class instance with fields <code>a</code> and<code>b</code> will not equal a literal object with fields <code>a</code> and <code>b</code>.</ul><pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Stock</span></span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">=</span> type
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'structurally the same, but semantically different'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">Stock</span></span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'apples'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">Stock</span></span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">not</span><span class="token punctuation">.</span><span class="token method function property-access">toStrictEqual</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'apples'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tocontain"class="level2"><h2>toContain</h2><ul><li><p><strong>Type:</strong> <code>(received: string) => Awaitable&#x3C;void></code><p><code>toContain</code> asserts if the actual value is in an array. <code>toContain</code> can also check whether a string is a substring of another string.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getAllFruits <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./stock'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'the fruit list contains orange'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getAllFruits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toContain</span><span class="token punctuation">(</span><span class="token string">'orange'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tocontainequal"class="level2"><h2>toContainEqual</h2><ul><li><p><strong>Type:</strong> <code>(received: any) => Awaitable&#x3C;void></code><p><code>toContainEqual</code> asserts if an item with a specific structure and values is contained in an array. It works like <a href="#toequal"><code>toEqual</code></a> inside for each element.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getFruitStock <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./stock'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'apple available'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getFruitStock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toContainEqual</span><span class="token punctuation">(</span><span class="token punctuation">{</span> fruit<span class="token operator">:</span> <span class="token string">'apple'</span><span class="token punctuation">,</span> count<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tohavelength"class="level2"><h2>toHaveLength</h2><ul><li><p><strong>Type:</strong> <code>(received: number) => Awaitable&#x3C;void></code><p><code>toHaveLength</code> asserts if an object has a <code>.length</code> property and it is set to a certain numeric value.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'toHaveLength'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveLength</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveLength</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">not</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveLength</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// doesn't have .length of 3</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> length<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveLength</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tohaveproperty"class="level2"><h2>toHaveProperty</h2><ul><li><p><strong>Type:</strong> <code>(key: any, received?: any) => Awaitable&#x3C;void></code><p><code>toHaveProperty</code> asserts if a property at provided reference <code>key</code> exists for an object.<p>You can provide an optional value argument also known as deep equality, like the <code>toEqual</code> matcher to compare the received property value.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">const</span> invoice <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">'isActive'</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string-property property">'P.O'</span><span class="token operator">:</span> <span class="token string">'12345'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'customer'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    first_name<span class="token operator">:</span> <span class="token string">'John'</span><span class="token punctuation">,</span>
    last_name<span class="token operator">:</span> <span class="token string">'Doe'</span><span class="token punctuation">,</span>
    <span class="token dom variable">location</span><span class="token operator">:</span> <span class="token string">'China'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">'total_amount'</span><span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>
  <span class="token string-property property">'items'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">'apples'</span><span class="token punctuation">,</span>
      quantity<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">'oranges'</span><span class="token punctuation">,</span>
      quantity<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'John Doe Invoice'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>invoice<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">'isActive'</span><span class="token punctuation">)</span> <span class="token comment">// assert that the key exists</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>invoice<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">'total_amount'</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span> <span class="token comment">// assert that the key exists and the value is equal</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>invoice<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">not</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">'account'</span><span class="token punctuation">)</span> <span class="token comment">// assert that this key does not exist</span>

  <span class="token comment">// Deep referencing using dot notation</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>invoice<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">'customer.first_name'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>invoice<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">'customer.last_name'</span><span class="token punctuation">,</span> <span class="token string">'Doe'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>invoice<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">not</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">'customer.location'</span><span class="token punctuation">,</span> <span class="token string">'India'</span><span class="token punctuation">)</span>

  <span class="token comment">// Deep referencing using an array containing the key</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>invoice<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">'items[0].type'</span><span class="token punctuation">,</span> <span class="token string">'apples'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>invoice<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveProperty</span><span class="token punctuation">(</span><span class="token string">'items.0.type'</span><span class="token punctuation">,</span> <span class="token string">'apples'</span><span class="token punctuation">)</span> <span class="token comment">// dot notation also works</span>

  <span class="token comment">// Deep referencing using an array containing the keyPath</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>invoice<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveProperty</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'items'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'type'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'apples'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>invoice<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveProperty</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'items'</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">,</span> <span class="token string">'type'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'apples'</span><span class="token punctuation">)</span> <span class="token comment">// string notation also works</span>

  <span class="token comment">// Wrap your key in an array to avoid the key from being parsed as a deep reference</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>invoice<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveProperty</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'P.O'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'12345'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tomatch"class="level2"><h2>toMatch</h2><ul><li><p><strong>Type:</strong> <code>(received: string | regexp) => Awaitable&#x3C;void></code><p><code>toMatch</code> asserts if a string matches a regular expression or a string.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'top fruits'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'top fruits include apple, orange and grape'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toMatch</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">apple</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'applefruits'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toMatch</span><span class="token punctuation">(</span><span class="token string">'fruit'</span><span class="token punctuation">)</span> <span class="token comment">// toMatch also accepts a string</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tomatchobject"class="level2"><h2>toMatchObject</h2><ul><li><p><strong>Type:</strong> <code>(received: object | array) => Awaitable&#x3C;void></code><p><code>toMatchObject</code> asserts if an object matches a subset of the properties of an object.<p>You can also pass an array of objects. This is useful if you want to check that two arrays match in their number of elements, as opposed to <code>arrayContaining</code>, which allows for extra elements in the received array.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">const</span> johnInvoice <span class="token operator">=</span> <span class="token punctuation">{</span>
  isActive<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  customer<span class="token operator">:</span> <span class="token punctuation">{</span>
    first_name<span class="token operator">:</span> <span class="token string">'John'</span><span class="token punctuation">,</span>
    last_name<span class="token operator">:</span> <span class="token string">'Doe'</span><span class="token punctuation">,</span>
    <span class="token dom variable">location</span><span class="token operator">:</span> <span class="token string">'China'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  total_amount<span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>
  items<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">'apples'</span><span class="token punctuation">,</span>
      quantity<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">'oranges'</span><span class="token punctuation">,</span>
      quantity<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> johnDetails <span class="token operator">=</span> <span class="token punctuation">{</span>
  customer<span class="token operator">:</span> <span class="token punctuation">{</span>
    first_name<span class="token operator">:</span> <span class="token string">'John'</span><span class="token punctuation">,</span>
    last_name<span class="token operator">:</span> <span class="token string">'Doe'</span><span class="token punctuation">,</span>
    <span class="token dom variable">location</span><span class="token operator">:</span> <span class="token string">'China'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'invoice has john personal details'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>johnInvoice<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toMatchObject</span><span class="token punctuation">(</span>johnDetails<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'the number of elements must match exactly'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// Assert that an array of object matches</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> baz<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toMatchObject</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> baz<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tothrowerror"class="level2"><h2>toThrowError</h2><ul><li><p><strong>Type:</strong> <code>(received: any) => Awaitable&#x3C;void></code><li><p><strong>Alias:</strong> <code>toThrow</code><p><code>toThrowError</code> asserts if a function throws an error when it is called.<p>You can provide an optional argument to test that a specific error is thrown:<ul><li>regular expression: error message matches the pattern<li>string: error message includes the substring</ul><blockquote>You must wrap the code in a function, otherwise the error will not be caught, and test will fail.</blockquote><p>For example, if we want to test that <code>getFruitStock('pineapples')</code> throws, we could write:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">function</span> <span class="token function">getFruitStock</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'pineapples'</span><span class="token punctuation">)</span>
    <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">DiabetesError</span></span><span class="token punctuation">(</span><span class="token string">'Pineapples is not good for people with diabetes'</span><span class="token punctuation">)</span>

  <span class="token comment">// Do some other stuff</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'throws on pineapples'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// Test that the error message says "diabetes" somewhere: these are equivalent</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">getFruitStock</span><span class="token punctuation">(</span><span class="token string">'pineapples'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toThrowError</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">diabetes</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">getFruitStock</span><span class="token punctuation">(</span><span class="token string">'pineapples'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toThrowError</span><span class="token punctuation">(</span><span class="token string">'diabetes'</span><span class="token punctuation">)</span>

  <span class="token comment">// Test the exact error message</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">getFruitStock</span><span class="token punctuation">(</span><span class="token string">'pineapples'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toThrowError</span><span class="token punctuation">(</span>
    <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^Pineapples is not good for people with diabetes$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><blockquote>To test async functions, use in combination with [rejects](#rejects).<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">getAsyncFruitStock</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token known-class-name class-name">Promise</span><span class="token punctuation">.</span><span class="token method function property-access">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'empty'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'throws on pineapples'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">await</span> <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">getAsyncFruitStock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">rejects</span><span class="token punctuation">.</span><span class="token method function property-access">toThrowError</span><span class="token punctuation">(</span><span class="token string">'empty'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></blockquote></ul></section><section id="tomatchsnapshot"class="level2"><h2>toMatchSnapshot</h2><ul><li><p><strong>Type:</strong> <code>&#x3C;T>(shape?: Partial&#x3C;T> | string, message?: string) => void</code><p>This ensures that a value matches the most recent snapshot.<p>You can provide an optional <code>hint</code> string argument that is appended to the test name. Although Vitest always appends a number at the end of a snapshot name, short descriptive hints might be more useful than numbers to differentiate multiple snapshots in a single it or test block. Vitest sorts snapshots by name in the corresponding <code>.snap</code> file.<blockquote>When snapshot mismatch and causing the test failing, if the mismatch is expected, you can press `u` key to update the snapshot for once. Or you can pass `-u` or `--update` CLI options to make Vitest always update the tests.</blockquote><pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'matches snapshot'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Set</span></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'snapshot'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>You can also provide a shape of an object, if you are testing just a shape of an object, and don't need it to be 100% compatible:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'matches snapshot'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Set</span></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'snapshot'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> expect<span class="token punctuation">.</span><span class="token method function property-access">any</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Set</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tomatchinlinesnapshot"class="level2"><h2>toMatchInlineSnapshot</h2><ul><li><p><strong>Type:</strong> <code>&#x3C;T>(shape?: Partial&#x3C;T> | string, snapshot?: string, message?: string) => void</code><p>This ensures that a value matches the most recent snapshot.<p>Vitest adds and updates the inlineSnapshot string argument to the matcher in the test file (instead of an external <code>.snap</code> file).<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'matches inline snapshot'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Set</span></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'snapshot'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token comment">// Vitest will update following content when updating the snapshot</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toMatchInlineSnapshot</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    {
      "foo": Set {
        "bar",
        "snapshot",
      },
    }
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>You can also provide a shape of an object, if you are testing just a shape of an object, and don't need it to be 100% compatible:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'matches snapshot'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Set</span></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'snapshot'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toMatchInlineSnapshot</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span> foo<span class="token operator">:</span> expect<span class="token punctuation">.</span><span class="token method function property-access">any</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Set</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    {
      "foo": Any&#x3C;Set>,
    }
  </span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tothrowerrormatchingsnapshot"class="level2"><h2>toThrowErrorMatchingSnapshot</h2><ul><li><p><strong>Type:</strong> <code>(message?: string) => void</code><p>The same as <a href="#tomatchsnapshot"><code>toMatchSnapshot</code></a>, but expects the same value as <a href="#tothrowerror"><code>toThrowError</code></a>.<p>If the function throws an <code>Error</code>, the snapshot will be the error message. Otherwise, snapshot will be the value thrown by the function.</ul></section><section id="tothrowerrormatchinginlinesnapshot"class="level2"><h2>toThrowErrorMatchingInlineSnapshot</h2><ul><li><p><strong>Type:</strong> <code>(snapshot?: string, message?: string) => void</code><p>The same as <a href="#tomatchinlinesnapshot"><code>toMatchInlineSnapshot</code></a>, but expects the same value as <a href="#tothrowerror"><code>toThrowError</code></a>.<p>If the function throws an <code>Error</code>, the snapshot will be the error message. Otherwise, snapshot will be the value thrown by the function.</ul></section><section id="tohavebeencalled"class="level2"><h2>toHaveBeenCalled</h2><ul><li><p><strong>Type:</strong> <code>() => Awaitable&#x3C;void></code><p>This assertion is useful for testing that a function has been called. Requires a spy function to be passed to <code>expect</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test<span class="token punctuation">,</span> vi <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">const</span> market <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">buy</span><span class="token punctuation">(</span>subject<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> amount<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'spy function'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> buySpy <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token method function property-access">spyOn</span><span class="token punctuation">(</span>market<span class="token punctuation">,</span> <span class="token string">'buy'</span><span class="token punctuation">)</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>buySpy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">not</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveBeenCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  market<span class="token punctuation">.</span><span class="token method function property-access">buy</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>buySpy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveBeenCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="tohavebeencalledtimes"class="level2"><h2>toHaveBeenCalledTimes</h2><ul><li><strong>Type</strong>: <code>(amount: number) => Awaitable&#x3C;void></code></ul><p>This assertion checks if a function was called a certain amount of times. Requires a spy function to be passed to <code>expect</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test<span class="token punctuation">,</span> vi <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">const</span> market <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">buy</span><span class="token punctuation">(</span>subject<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> amount<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'spy function called two times'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> buySpy <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token method function property-access">spyOn</span><span class="token punctuation">(</span>market<span class="token punctuation">,</span> <span class="token string">'buy'</span><span class="token punctuation">)</span>

  market<span class="token punctuation">.</span><span class="token method function property-access">buy</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
  market<span class="token punctuation">.</span><span class="token method function property-access">buy</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>buySpy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></section><section id="tohavebeencalledwith"class="level2"><h2>toHaveBeenCalledWith</h2><ul><li><strong>Type</strong>: <code>(...args: any[]) => Awaitable&#x3C;void></code></ul><p>This assertion checks if a function was called at least once with certain parameters. Requires a spy function to be passed to <code>expect</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test<span class="token punctuation">,</span> vi <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">const</span> market <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">buy</span><span class="token punctuation">(</span>subject<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> amount<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'spy function'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> buySpy <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token method function property-access">spyOn</span><span class="token punctuation">(</span>market<span class="token punctuation">,</span> <span class="token string">'buy'</span><span class="token punctuation">)</span>

  market<span class="token punctuation">.</span><span class="token method function property-access">buy</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
  market<span class="token punctuation">.</span><span class="token method function property-access">buy</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>buySpy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveBeenCalledWith</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>buySpy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveBeenCalledWith</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></section><section id="tohavebeenlastcalledwith"class="level2"><h2>toHaveBeenLastCalledWith</h2><ul><li><strong>Type</strong>: <code>(...args: any[]) => Awaitable&#x3C;void></code></ul><p>This assertion checks if a function was called with certain parameters at it's last invocation. Requires a spy function to be passed to <code>expect</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test<span class="token punctuation">,</span> vi <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">const</span> market <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">buy</span><span class="token punctuation">(</span>subject<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> amount<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'spy function'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> buySpy <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token method function property-access">spyOn</span><span class="token punctuation">(</span>market<span class="token punctuation">,</span> <span class="token string">'buy'</span><span class="token punctuation">)</span>

  market<span class="token punctuation">.</span><span class="token method function property-access">buy</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
  market<span class="token punctuation">.</span><span class="token method function property-access">buy</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>buySpy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">not</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveBeenLastCalledWith</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>buySpy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveBeenLastCalledWith</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></section><section id="tohavebeennthcalledwith"class="level2"><h2>toHaveBeenNthCalledWith</h2><ul><li><strong>Type</strong>: <code>(time: number, ...args: any[]) => Awaitable&#x3C;void></code></ul><p>This assertion checks if a function was called with certain parameters at the certain time. The count starts at 1. So, to check the second entry, you would write <code>.toHaveBeenNthCalledWith(2, ...)</code>.<p>Requires a spy function to be passed to <code>expect</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test<span class="token punctuation">,</span> vi <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">const</span> market <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">buy</span><span class="token punctuation">(</span>subject<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> amount<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'first call of spy function called with right params'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> buySpy <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token method function property-access">spyOn</span><span class="token punctuation">(</span>market<span class="token punctuation">,</span> <span class="token string">'buy'</span><span class="token punctuation">)</span>

  market<span class="token punctuation">.</span><span class="token method function property-access">buy</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
  market<span class="token punctuation">.</span><span class="token method function property-access">buy</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>buySpy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveBeenNthCalledWith</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'apples'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></section><section id="tohavereturned"class="level2"><h2>toHaveReturned</h2><ul><li><strong>Type</strong>: <code>() => Awaitable&#x3C;void></code></ul><p>This assertion checks if a function has successfully returned a value at least once (i.e., did not throw an error). Requires a spy function to be passed to <code>expect</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test<span class="token punctuation">,</span> vi <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">const</span> <span class="token function-variable function">getApplesPrice</span> <span class="token operator">=</span> <span class="token punctuation">(</span>amount<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token constant">PRICE</span> <span class="token operator">=</span> <span class="token number">10</span>
  <span class="token keyword control-flow">return</span> amount <span class="token operator">*</span> <span class="token constant">PRICE</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'spy function returned a value'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> getPriceSpy <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span>getApplesPrice<span class="token punctuation">)</span>

  <span class="token keyword">const</span> price <span class="token operator">=</span> <span class="token function">getPriceSpy</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>getPriceSpy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveReturned</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></section><section id="tohavereturnedtimes"class="level2"><h2>toHaveReturnedTimes</h2><ul><li><strong>Type</strong>: <code>(amount: number) => Awaitable&#x3C;void></code></ul><p>This assertion checks if a function has successfully returned a value exact amount of times (i.e., did not throw an error). Requires a spy function to be passed to <code>expect</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test<span class="token punctuation">,</span> vi <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'spy function returns a value two times'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sell <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span>product<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> product <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token function">sell</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">)</span>
  <span class="token function">sell</span><span class="token punctuation">(</span><span class="token string">'bananas'</span><span class="token punctuation">)</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>sell<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveReturnedTimes</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></section><section id="tohavereturnedwith"class="level2"><h2>toHaveReturnedWith</h2><ul><li><strong>Type</strong>: <code>(returnValue: any) => Awaitable&#x3C;void></code></ul><p>You can call this assertion to check if a function has successfully returned a value with certain parameters at least once. Requires a spy function to be passed to <code>expect</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test<span class="token punctuation">,</span> vi <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'spy function returns a product'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sell <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span>product<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> product <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token function">sell</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">)</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>sell<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveReturnedWith</span><span class="token punctuation">(</span><span class="token punctuation">{</span> product<span class="token operator">:</span> <span class="token string">'apples'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></section><section id="tohavelastreturnedwith"class="level2"><h2>toHaveLastReturnedWith</h2><ul><li><strong>Type</strong>: <code>(returnValue: any) => Awaitable&#x3C;void></code></ul><p>You can call this assertion to check if a function has successfully returned a value with certain parameters on it's last invoking. Requires a spy function to be passed to <code>expect</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test<span class="token punctuation">,</span> vi <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'spy function returns bananas on a last call'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sell <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span>product<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> product <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token function">sell</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">)</span>
  <span class="token function">sell</span><span class="token punctuation">(</span><span class="token string">'bananas'</span><span class="token punctuation">)</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>sell<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveLastReturnedWith</span><span class="token punctuation">(</span><span class="token punctuation">{</span> product<span class="token operator">:</span> <span class="token string">'bananas'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></section><section id="tohaventhreturnedwith"class="level2"><h2>toHaveNthReturnedWith</h2><ul><li><strong>Type</strong>: <code>(time: number, returnValue: any) => Awaitable&#x3C;void></code></ul><p>You can call this assertion to check if a function has successfully returned a value with certain parameters on a certain call. Requires a spy function to be passed to <code>expect</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test<span class="token punctuation">,</span> vi <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'spy function returns bananas on second call'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sell <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span>product<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> product <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token function">sell</span><span class="token punctuation">(</span><span class="token string">'apples'</span><span class="token punctuation">)</span>
  <span class="token function">sell</span><span class="token punctuation">(</span><span class="token string">'bananas'</span><span class="token punctuation">)</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>sell<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveNthReturnedWith</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> product<span class="token operator">:</span> <span class="token string">'bananas'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></section><section id="tosatisfy"class="level2"><h2>toSatisfy</h2><ul><li><strong>Type:</strong> <code>(predicate: (value: any) => boolean) => Awaitable&#x3C;void></code></ul><p>This assertion checks if a value satisfies a certain predicate.<pre class="language-ts"><code class="language-ts"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'toSatisfy()'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">isOdd</span> <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> value <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!==</span> <span class="token number">0</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'pass with 0'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toSatisfy</span><span class="token punctuation">(</span>isOdd<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'pass with negotiation'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">not</span><span class="token punctuation">.</span><span class="token method function property-access">toSatisfy</span><span class="token punctuation">(</span>isOdd<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></section><section id="resolves"class="level2"><h2>resolves</h2><ul><li><p><strong>Type:</strong> <code>Promisify&#x3C;Assertions></code><p><code>resolves</code> is intended to remove boilerplate when asserting asynchronous code. Use it to unwrap value from the pending promise and assert its value with usual assertions. If the promise rejects, the assertion will fail.<p>It returns the same <code>Assertions</code> object, but all matchers now return <code>Promise</code>, so you would need to <code>await</code> it. Also works with <code>chai</code> assertions.<p>For example, if you have a function, that makes an API call and returns some data, you may use this code to assert its return value:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">buyApples</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/buy/apples'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span>r <span class="token arrow operator">=></span> r<span class="token punctuation">.</span><span class="token method function property-access">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'buyApples returns new stock id'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// toEqual returns a promise now, so you HAVE to await it</span>
  <span class="token keyword control-flow">await</span> <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">buyApples</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">resolves</span><span class="token punctuation">.</span><span class="token method function property-access">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// jest API</span>
  <span class="token keyword control-flow">await</span> <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">buyApples</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">resolves</span><span class="token punctuation">.</span><span class="token property-access">to</span><span class="token punctuation">.</span><span class="token method function property-access">equal</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// chai API</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><blockquote>If the assertion is not awaited, then you will have a false-positive test that will pass every time. To make sure that assertions are actually called, you may use [`expect.assertions(number)`](#expect-assertions).</blockquote></ul></section><section id="rejects"class="level2"><h2>rejects</h2><ul><li><p><strong>Type:</strong> <code>Promisify&#x3C;Assertions></code><p><code>rejects</code> is intended to remove boilerplate when asserting asynchronous code. Use it to unwrap reason why the promise was rejected, and assert its value with usual assertions. If the promise successfully resolves, the assertion will fail.<p>It returns the same <code>Assertions</code> object, but all matchers now return <code>Promise</code>, so you would need to <code>await</code> it. Also works with <code>chai</code> assertions.<p>For example, if you have a function that fails when you call it, you may use this code to assert the reason:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">buyApples</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>id<span class="token punctuation">)</span>
    <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Error</span></span><span class="token punctuation">(</span><span class="token string">'no id'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'buyApples throws an error when no id provided'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// toThrow returns a promise now, so you HAVE to await it</span>
  <span class="token keyword control-flow">await</span> <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">buyApples</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">rejects</span><span class="token punctuation">.</span><span class="token method function property-access">toThrow</span><span class="token punctuation">(</span><span class="token string">'no id'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><blockquote>If the assertion is not awaited, then you will have a false-positive test that will pass every time. To make sure that assertions were actually called, you can use [`expect.assertions(number)`](#expect-assertions).</blockquote></ul></section><section id="expectassertions"class="level2"><h2>expect.assertions</h2><ul><li><p><strong>Type:</strong> <code>(count: number) => void</code><p>After the test has passed or failed verify that a certain number of assertions was called during a test. A useful case would be to check if an asynchronous code was called.<p>For example, if we have a function that asynchronously calls two matchers, we can assert that they were actually called.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">doAsync</span><span class="token punctuation">(</span><span class="token spread operator">...</span>cbs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">await</span> <span class="token known-class-name class-name">Promise</span><span class="token punctuation">.</span><span class="token method function property-access">all</span><span class="token punctuation">(</span>
    cbs<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>cb<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">{</span> index <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'all assertions are called'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  expect<span class="token punctuation">.</span><span class="token method function property-access">assertions</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token keyword">function</span> <span class="token function">callback1</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">callback2</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">await</span> <span class="token function">doAsync</span><span class="token punctuation">(</span>callback1<span class="token punctuation">,</span> callback2<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><blockquote>When using `assertions` with async concurrent tests, `expect` from the local [Test Context](/guide/test-context.md) must be used to ensure the right test is detected.</blockquote></ul></section><section id="expecthasassertions"class="level2"><h2>expect.hasAssertions</h2><ul><li><p><strong>Type:</strong> <code>() => void</code><p>After the test has passed or failed verify that at least one assertion was called during a test. A useful case would be to check if an asynchronous code was called.<p>For example, if you have a code that calls a callback, we can make an assertion inside a callback, but the test will always pass if we don't check if an assertion was called.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> db <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./db'</span>

<span class="token keyword">const</span> cbs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token keyword">function</span> <span class="token function">onSelect</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  cbs<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// after selecting from db, we call all callbacks</span>
<span class="token keyword">function</span> <span class="token function">select</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> db<span class="token punctuation">.</span><span class="token method function property-access">select</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token known-class-name class-name">Promise</span><span class="token punctuation">.</span><span class="token method function property-access">all</span><span class="token punctuation">(</span>
      cbs<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span>cb <span class="token arrow operator">=></span> <span class="token function">cb</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'callback was called'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  expect<span class="token punctuation">.</span><span class="token method function property-access">hasAssertions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">onSelect</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// should be called on select</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// if not awaited, test will fail</span>
  <span class="token comment">// if you don't have expect.hasAssertions(), test will pass</span>
  <span class="token keyword control-flow">await</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="expectanything"class="level2"><h2>expect.anything</h2><ul><li><p><strong>Type:</strong> <code>() => any</code><p>This asymmetric matcher, when used with equality check, will always return <code>true</code>. Useful, if you just want to be sure that the property exist.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'object has "apples" key'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> apples<span class="token operator">:</span> <span class="token number">22</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">{</span> apples<span class="token operator">:</span> expect<span class="token punctuation">.</span><span class="token method function property-access">anything</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="expectany"class="level2"><h2>expect.any</h2><ul><li><p><strong>Type:</strong> <code>(constructor: unknown) => any</code><p>This asymmetric matcher, when used with an equality check, will return <code>true</code> only if the value is an instance of a specified constructor. Useful, if you have a value that is generated each time, and you only want to know that it exists with a proper type.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> generateId <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./generators'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'"id" is a number'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token function">generateId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> expect<span class="token punctuation">.</span><span class="token method function property-access">any</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Number</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></ul></section><section id="expectarraycontaining"class="level2"><h2>expect.arrayContaining</h2><ul><li><p><strong>Type:</strong> <code>&#x3C;T>(expected: T[]) => any</code><p>When used with an equality check, this asymmetric matcher will return <code>true</code> if the value is an array and contains specified items.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'basket includes fuji'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> basket <span class="token operator">=</span> <span class="token punctuation">{</span>
    varieties<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">'Empire'</span><span class="token punctuation">,</span>
      <span class="token string">'Fuji'</span><span class="token punctuation">,</span>
      <span class="token string">'Gala'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    count<span class="token operator">:</span> <span class="token number">3</span>
  <span class="token punctuation">}</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>basket<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    count<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    varieties<span class="token operator">:</span> expect<span class="token punctuation">.</span><span class="token method function property-access">arrayContaining</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Fuji'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><blockquote>You can use `expect.not` with this matcher to negate the expected value.</blockquote></ul></section><section id="expectobjectcontaining"class="level2"><h2>expect.objectContaining</h2><ul><li><p><strong>Type:</strong> <code>(expected: any) => any</code><p>When used with an equality check, this asymmetric matcher will return <code>true</code> if the value has a similar shape.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'basket has empire apples'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> basket <span class="token operator">=</span> <span class="token punctuation">{</span>
    varieties<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'Empire'</span><span class="token punctuation">,</span>
        count<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>basket<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    varieties<span class="token operator">:</span> <span class="token punctuation">[</span>
      expect<span class="token punctuation">.</span><span class="token method function property-access">objectContaining</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Empire'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><blockquote>You can use `expect.not` with this matcher to negate the expected value.</blockquote></ul></section><section id="expectstringcontaining"class="level2"><h2>expect.stringContaining</h2><ul><li><p><strong>Type:</strong> <code>(expected: any) => any</code><p>When used with an equality check, this asymmetric matcher will return <code>true</code> if the value is a string and contains a specified substring.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'variety has "Emp" in its name'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> variety <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Empire'</span><span class="token punctuation">,</span>
    count<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>basket<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> expect<span class="token punctuation">.</span><span class="token method function property-access">stringContaining</span><span class="token punctuation">(</span><span class="token string">'Emp'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    count<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><blockquote>You can use `expect.not` with this matcher to negate the expected value.</blockquote></ul></section><section id="expectstringmatching"class="level2"><h2>expect.stringMatching</h2><ul><li><p><strong>Type:</strong> <code>(expected: any) => any</code><p>When used with an equality check, this asymmetric matcher will return <code>true</code> if the value is a string and contains a specified substring or if the string matches a regular expression.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'variety ends with "re"'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> variety <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Empire'</span><span class="token punctuation">,</span>
    count<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>basket<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> expect<span class="token punctuation">.</span><span class="token method function property-access">stringMatching</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">re$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    count<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><blockquote>You can use `expect.not` with this matcher to negate the expected value.</blockquote></ul></section><section id="expectaddsnapshotserializer"class="level2"><h2>expect.addSnapshotSerializer</h2><ul><li><p><strong>Type:</strong> <code>(plugin: PrettyFormatPlugin) => void</code><p>This method adds custom serializers that are called when creating a snapshot. This is an advanced feature - if you want to know more, please read a <a href="/guide/snapshot#custom-serializer">guide on custom serializers</a>.<p>If you are adding custom serializers, you should call this method inside <a href="../config.html#setupfiles"><code>setupFiles</code></a>. This will affect every snapshot.<blockquote>If you previously used Vue CLI with Jest, you might want to install [jest-serializer-vue](https://www.npmjs.com/package/jest-serializer-vue). Otherwise, your snapshots will be wrapped in a string, which cases `"` to be escaped.</blockquote></ul></section><section id="expectextend"class="level2"><h2>expect.extend</h2><ul><li><p><strong>Type:</strong> <code>(matchers: MatchersObject) => void</code><p>You can extend default matchers with your own. This function is used to extend the matchers object with custom matchers.<p>When you define matchers that way, you also create asymmetric matchers that can be used like <code>expect.stringContaining</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> expect<span class="token punctuation">,</span> test <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vitest'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'custom matchers'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  expect<span class="token punctuation">.</span><span class="token method function property-access">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">toBeFoo</span><span class="token operator">:</span> <span class="token punctuation">(</span>received<span class="token punctuation">,</span> expected<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>received <span class="token operator">!==</span> <span class="token string">'foo'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
          <span class="token function-variable function">message</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">expected </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>received<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> to be foo</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          pass<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'foo'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> expect<span class="token punctuation">.</span><span class="token method function property-access">toBeFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><blockquote>If you want your matchers to appear in every test, you should call this method inside [`setupFiles`](../config.html#setupFiles).</blockquote><p>This function is compatible with Jest's <code>expect.extend</code>, so any library that uses it to create custom matchers will work with Vitest.<p>If you are using TypeScript, you can extend default Matchers interface with the code bellow:<pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">CustomMatchers</span><span class="token operator">&#x3C;</span><span class="token constant">R</span> <span class="token operator">=</span> <span class="token builtin">unknown</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  <span class="token function">toBeFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">R</span>
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> global <span class="token punctuation">{</span>
  <span class="token keyword">namespace</span> <span class="token maybe-class-name">Vi</span> <span class="token punctuation">{</span>
    <span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">Assertion</span></span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token maybe-class-name">CustomMatchers</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">AsymmetricMatchersContaining</span></span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token maybe-class-name">CustomMatchers</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Note: augmenting jest.Matchers interface will also work.</span>

<span class="token punctuation">}</span></code></pre><blockquote>If you want to know more, checkout [guide on extending matchers](/guide/extending-matchers).</blockquote><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></ul></section></section>