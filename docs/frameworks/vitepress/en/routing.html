<!doctype html><html lang="en"><meta charset="utf-8"><title>Routing</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="outline"content="deep"><link rel="stylesheet"href="../../../../../Vivliostyle/read-html-download-pdf/docs/themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="routing"><h1 id="routing">Routing</h1><section class="level2"aria-labelledby="file-based-routing"><h2 id="file-based-routing">File-Based Routing</h2><p>VitePress uses file-based routing, which means the generated HTML pages are mapped from the directory structure of the source Markdown files. For example, given the following directory structure:<pre class="language-text"><code class="language-text">.
├─ guide
│  ├─ getting-started.md
│  └─ index.md
├─ index.md
└─ prologue.md</code></pre><p>The generated HTML pages will be:<pre class="language-text"><code class="language-text">index.md                  -->  /index.html (accessible as /)
prologue.md               -->  /prologue.html
guide/index.md            -->  /guide/index.html (accessible as /guide/)
guide/getting-started.md  -->  /guide/getting-started.html</code></pre><p>The resulting HTML can be hosted on any web server that can serve static files.</section><section class="level2"aria-labelledby="root-and-source-directory"><h2 id="root-and-source-directory">Root and Source Directory</h2><p>There are two important concepts in the file structure of a VitePress project: the <strong>project root</strong> and the <strong>source directory</strong>.<section class="level3"aria-labelledby="project-root"><h3 id="project-root">Project Root</h3><p>Project root is where VitePress will try to look for the <code>.vitepress</code> special directory. The <code>.vitepress</code> directory is a reserved location for VitePress' config file, dev server cache, build output, and optional theme customization code.<p>When you run <code>vitepress dev</code> or <code>vitepress build</code> from the command line, VitePress will use the current working directory as project root. To specify a sub-directory as root, you will need to pass the relative path to the command. For example, if your VitePress project is located in <code>./docs</code>, you should run <code>vitepress dev docs</code>:<pre class="language-text"><code class="language-text">.
├─ docs                    # project root
│  ├─ .vitepress           # config dir
│  ├─ getting-started.md
│  └─ index.md
└─ ...</code></pre><pre class="language-sh"><code class="language-sh">vitepress dev docs</code></pre><p>This is going to result in the following source-to-HTML mapping:<pre class="language-text"><code class="language-text">docs/index.md            -->  /index.html (accessible as /)
docs/getting-started.md  -->  /getting-started.html</code></pre></section><section class="level3"aria-labelledby="source-directory"><h3 id="source-directory">Source Directory</h3><p>Source directory is where your Markdown source files live. By default, it is the same as the project root. However, you can configure it via the <a href="../reference/site-config#srcdir"><code>srcDir</code></a> config option.<p>The <code>srcDir</code> option is resolved relative to project root. For example, with <code>srcDir: 'src'</code>, your file structure will look like this:<pre class="language-text"><code class="language-text">.                          # project root
├─ .vitepress              # config dir
└─ src                     # source dir
   ├─ getting-started.md
   └─ index.md</code></pre><p>The resulting source-to-HTML mapping:<pre class="language-text"><code class="language-text">src/index.md            -->  /index.html (accessible as /)
src/getting-started.md  -->  /getting-started.html</code></pre></section></section><section class="level2"aria-labelledby="linking-between-pages"><h2 id="linking-between-pages">Linking Between Pages</h2><p>You can use both absolute and relative paths when linking between pages. Note that although both <code>.md</code> and <code>.html</code> extensions will work, the best practice is to omit file extensions so that VitePress can generate the final URLs based on your config.<pre class="language-md"><code class="language-md"><span class="token comment">&#x3C;!-- Do --></span>
<span class="token url">[<span class="token content">Getting Started</span>](<span class="token url">./getting-started.html</span>)</span>
<span class="token url">[<span class="token content">Getting Started</span>](<span class="token url">../guide/getting-started</span>)</span>

<span class="token comment">&#x3C;!-- Don't --></span>
<span class="token url">[<span class="token content">Getting Started</span>](<span class="token url">./getting-started.md.html</span>)</span>
<span class="token url">[<span class="token content">Getting Started</span>](<span class="token url">./getting-started.html.html</span>)</span></code></pre><p>Learn more about linking to assets such images in <a href="asset-handling">Asset Handling</a>.</section><section class="level2"aria-labelledby="generating-clean-url"><h2 id="generating-clean-url">Generating Clean URL</h2><p>:::warning Server Support Required To serve clean URLs with VitePress, server-side support is required. :::<p>By default, VitePress resolves inbound links to URLs ending with <code>.html</code>. However, some users may prefer "Clean URLs" without the <code>.html</code> extension - for example, <code>example.com/path</code> instead of <code>example.com/path.html</code>.<p>Some servers or hosting platforms (for example Netlify or Vercel) provide the ability to map a URL like <code>/foo</code> to <code>/foo.html</code> if it exists, without a redirect:<ul><li>Netlify supports this by default.<li>Vercel requires enabling the <a href="https://vercel.com/docs/concepts/projects/project-configuration#cleanurls"><code>cleanUrls</code> option in <code>vercel.json</code></a>.</ul><p>If this feature is available to you, you can then also enable VitePress' own <a href="../reference/site-config#cleanurls"><code>cleanUrls</code></a> config option so that:<ul><li>Inbound links between pages are generated without the <code>.html</code> extension.<li>If current path ends with <code>.html</code>, the router will perform a client-side redirect to the extension-less path.</ul><p>If, however, you cannot configure your server with such support (e.g. GitHub pages), you will have to manually resort to the following directory structure:<pre class="language-text"><code class="language-text">.
├─ getting-started
│  └─ index.md
├─ installation
│  └─ index.md
└─ index.md</code></pre></section><section class="level2"aria-labelledby="route-rewrites"><h2 id="route-rewrites">Route Rewrites</h2><p>You can customize the mapping between the source directory structure and the generated pages. It's useful when you have a complex project structure. For example, let's say you have a monorepo with multiple packages, and would like to place documentations along with the source files like this:<pre class="language-text"><code class="language-text">.
├─ packages
│  ├─ pkg-a
│  │  └─ src
│  │      ├─ pkg-a-code.ts
│  │      └─ pkg-a-docs.md
│  └─ pkg-b
│     └─ src
│         ├─ pkg-b-code.ts
│         └─ pkg-b-docs.md</code></pre><p>And you want the VitePress pages to be generated like this:<pre class="language-text"><code class="language-text">packages/pkg-a/src/pkg-a-docs.md  -->  /pkg-a/index.html
packages/pkg-b/src/pkg-b-docs.md  -->  /pkg-b/index.html</code></pre><p>You can achieve this by configuring the <a href="../reference/site-config#rewrites"><code>rewrites</code></a> option like this:<pre class="language-ts"><code class="language-ts"><span class="token comment">// .vitepress/config.js</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  rewrites<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'packages/pkg-a/src/pkg-a-docs.md'</span><span class="token operator">:</span> <span class="token string">'pkg-a/index.md'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'packages/pkg-b/src/pkg-b-docs.md'</span><span class="token operator">:</span> <span class="token string">'pkg-b/index.md'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>The <code>rewrites</code> option also supports dynamic route parameters. In the above example, it would be verbose to list all the paths if you have many packages. Given that they all have the same file structure, you can simplify the config like this:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  rewrites<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'packages/:pkg/src/(.*)'</span><span class="token operator">:</span> <span class="token string">':pkg/index.md'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>The rewrite paths are compiled using the <code>path-to-regexp</code> package - consult <a href="https://github.com/pillarjs/path-to-regexp#parameters">its documentation</a> for more advanced syntax.<p>:::warning Relative Links with Rewrites<p>When rewrites are enabled, <strong>relative links should be based on the rewritten paths</strong>. For example, in order to create a relative link from <code>packages/pkg-a/src/pkg-a-code.md</code> to <code>packages/pkg-b/src/pkg-b-code.md</code>, you should use:<pre class="language-md"><code class="language-md"><span class="token url">[<span class="token content">Link to PKG B</span>](<span class="token url">../pkg-b/pkg-b-code</span>)</span></code></pre><p>:::</section><section class="level2"aria-labelledby="dynamic-routes"><h2 id="dynamic-routes">Dynamic Routes</h2><p>You can generate many pages using a single Markdown file and dynamic data. For example, you can create a <code>packages/[pkg].md</code> file that generates a corresponding page for every package in a project. Here, the <code>[pkg]</code> segment is a route <strong>parameter</strong> that differentiates each page from the others.<section class="level3"aria-labelledby="paths-loader-file"><h3 id="paths-loader-file">Paths Loader File</h3><p>Since VitePress is a static site generator, the possible page paths must be determined at build time. Therefore, a dynamic route page <strong>must</strong> be accompanied by a <strong>paths loader file</strong>. For <code>packages/[pkg].md</code>, we will need <code>packages/[pkg].paths.js</code> (<code>.ts</code> is also supported):<pre class="language-text"><code class="language-text">.
└─ packages
   ├─ [pkg].md         # route template
   └─ [pkg].paths.js   # route paths loader</code></pre><p>The paths loader should provide an object with a <code>paths</code> method as its default export. The <code>paths</code> method should return an array of objects with a <code>params</code> property. Each of these objects will generate a corresponding page.<p>Given the following <code>paths</code> array:<pre class="language-js"><code class="language-js"><span class="token comment">// packages/[pkg].paths.js</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token function">paths</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">pkg</span><span class="token operator">:</span> <span class="token string">'foo'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">pkg</span><span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>The generated HTML pages will be:<pre class="language-text"><code class="language-text">.
└─ packages
   ├─ foo.html
   └─ bar.html</code></pre></section><section class="level3"aria-labelledby="multiple-params"><h3 id="multiple-params">Multiple Params</h3><p>A dynamic route can contain multiple params:<p><strong>File Structure</strong><pre class="language-text"><code class="language-text">.
└─ packages
   ├─ [pkg]-[version].md
   └─ [pkg]-[version].paths.js</code></pre><p><strong>Paths Loader</strong><pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">paths</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">pkg</span><span class="token operator">:</span> <span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token string">'1.0.0'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">pkg</span><span class="token operator">:</span> <span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token string">'2.0.0'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">pkg</span><span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token string">'1.0.0'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">pkg</span><span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token string">'2.0.0'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><p><strong>Output</strong><pre class="language-text"><code class="language-text">.
└─ packages
   ├─ foo-1.0.0.html
   ├─ foo-2.0.0.html
   ├─ bar-1.0.0.html
   └─ bar-2.0.0.html</code></pre></section><section class="level3"aria-labelledby="dynamically-generating-paths"><h3 id="dynamically-generating-paths">Dynamically Generating Paths</h3><p>The paths loader module is run in Node.js and only executed during build time. You can dynamically generate the paths array using any data, either local or remote.<p>Generating paths from local files:<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports">fs</span> <span class="token keyword module">from</span> <span class="token string">'fs'</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token function">paths</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> fs
      <span class="token punctuation">.</span><span class="token method function property-access">readdirSync</span><span class="token punctuation">(</span><span class="token string">'packages'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pkg</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> pkg <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Generating paths from remote data:<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">paths</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> pkgs <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token punctuation">(</span><span class="token keyword control-flow">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://my-api.com/packages'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword control-flow">return</span> pkgs<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pkg</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">pkg</span><span class="token operator">:</span> pkg<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">,</span>
          <span class="token literal-property property">version</span><span class="token operator">:</span> pkg<span class="token punctuation">.</span><span class="token property-access">version</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section><section class="level3"aria-labelledby="accessing-params-in-page"><h3 id="accessing-params-in-page">Accessing Params in Page</h3><p>You can use the params to pass additional data to each page. The Markdown route file can access the current page params in Vue expressions via the <code>$params</code> global property:<pre class="language-md"><code class="language-md"><span class="token list punctuation">-</span> package name: {{ $params.pkg }}
<span class="token list punctuation">-</span> version: {{ $params.version }}</code></pre><p>You can also access the current page's params via the <a href="../reference/runtime-api#usedata"><code>useData</code></a> runtime API. This is available in both Markdown files and Vue components:<pre class="language-vue"><code class="language-vue">&#x3C;script setup>
import { useData } from 'vitepress'

// params is a Vue ref
const { params } = useData()

console.log(params.value)
&#x3C;/script></code></pre></section><section class="level3"aria-labelledby="rendering-raw-content"><h3 id="rendering-raw-content">Rendering Raw Content</h3><p>Params passed to the page will be serialized in the client JavaScript payload, so you should avoid passing heavy data in params, for example raw Markdown or HTML content fetched from a remote CMS.<p>Instead, you can pass such content to each page using the <code>content</code> property on each path object:<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  <span class="token function">paths</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">paths</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> posts <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token punctuation">(</span><span class="token keyword control-flow">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://my-cms.com/blog-posts'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token keyword control-flow">return</span> posts<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> post<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">content</span><span class="token operator">:</span> post<span class="token punctuation">.</span><span class="token property-access">content</span> <span class="token comment">// raw Markdown or HTML</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Then, use the following special syntax to render the content as part of the Markdown file itself:<pre class="language-md"><code class="language-md"><span class="token comment">&#x3C;!-- @content --></span></code></pre><p><span style="float:footnote"><a href="./index.html#toc">Go to TOC</a></span></section></section></section>