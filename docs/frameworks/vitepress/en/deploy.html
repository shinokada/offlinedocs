<!doctype html><html lang="en"><meta charset="utf-8"><title>Deploy Your VitePress Site</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="outline"content="deep"><link rel="stylesheet"href="../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="deploy-your-vitepress-site"class="level1"><h1>Deploy Your VitePress Site</h1><p>The following guides are based on some shared assumptions:<ul><li><p>The VitePress site is inside the <code>docs</code> directory of your project.<li><p>You are using the default build output directory (<code>.vitepress/dist</code>).<li><p>VitePress is installed as a local dependency in your project, and you have set up the following scripts in your <code>package.json</code>:<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"docs:build"</span><span class="token operator">:</span> <span class="token string">"vitepress build docs"</span><span class="token punctuation">,</span>
    <span class="token property">"docs:preview"</span><span class="token operator">:</span> <span class="token string">"vitepress preview docs"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></ul><section id="build-and-test-locally"class="level2"><h2>Build and Test Locally</h2><ol><li><p>Run this command to build the docs:<pre class="language-sh"><code class="language-sh">$ npm run docs:build</code></pre><li><p>Once built, preview it locally by running:<pre class="language-sh"><code class="language-sh">$ npm run docs:preview</code></pre><p>The <code>preview</code> command will boot up a local static web server that will serve the output directory <code>.vitepress/dist</code> at <code>http://localhost:4173</code>. You can use this to make sure everything looks good before pushing to production.<li><p>You can configure the port of the server by passing <code>--port</code> as an argument.<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"docs:preview"</span><span class="token operator">:</span> <span class="token string">"vitepress preview docs --port 8080"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></ol><p>Now the <code>docs:preview</code> method will launch the server at <code>http://localhost:8080</code>.</section><section id="setting-a-public-base-path"class="level2"><h2>Setting a Public Base Path</h2><p>By default, we assume the site is going to be deployed at the root path of a domain (<code>/</code>). If your site is going to be served at a sub-path, e.g. <code>https://mywebsite.com/blog/</code>, then you need to set the <a href="../reference/site-config#base"><code>base</code></a> option to <code>'/blog/'</code> in the VitePress config.<p><strong>Example:</strong> If you're using Github (or GitLab) Pages and deploying to <code>user.github.io/repo/</code>, then set your <code>base</code> to <code>/repo/</code>.</section><section id="http-cache-headers"class="level2"><h2>HTTP Cache Headers</h2><p>If you have control over the HTTP headers on your production server, you can configure <code>cache-control</code> headers to achieve better performance on repeated visits.<p>The production build uses hashed file names for static assets (JavaScript, CSS and other imported assets not in <code>public</code>). If you inspect the production preview using your browser devtools' network tab, you will see files like <code>app.4f283b18.js</code>.<p>This <code>4f283b18</code> hash is generated from the content of this file. The same hashed URL is guaranteed to serve the same file content - if the contents change, the URLs change too. This means you can safely use the strongest cache headers for these files. All such files will be placed under <code>assets/</code> in the output directory, so you can configure the following header for them:<pre class="language-text"><code class="language-text">Cache-Control: max-age=31536000,immutable</code></pre><p>:::details Example Netlify <code>_headers</code> file<pre class="language-text"><code class="language-text">/assets/*
  cache-control: max-age=31536000
  cache-control: immutable</code></pre><p>Note: the <code>_headers</code> file should be placed in the <a href="/guide/asset-handling#the-public-directory">public directory</a> - in our case, <code>docs/public/_headers</code> - so that it is copied verbatim to the output directory.<p><a href="https://docs.netlify.com/routing/headers/">Netlify custom headers documentation</a><p>:::<p>:::details Example Vercel config in <code>vercel.json</code><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"headers"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"source"</span><span class="token operator">:</span> <span class="token string">"/assets/(.*)"</span><span class="token punctuation">,</span>
      <span class="token property">"headers"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"Cache-Control"</span><span class="token punctuation">,</span>
          <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"max-age=31536000, immutable"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><p>Note: the <code>vercel.json</code> file should be placed at the root of your <strong>repository</strong>.<p><a href="https://vercel.com/docs/concepts/projects/project-configuration#headers">Vercel documentation on headers config</a><p>:::</section><section id="platform-guides"class="level2"><h2>Platform Guides</h2><section id="netlify--vercel--cloudflare-pages--aws-amplify--render"class="level3"><h3>Netlify / Vercel / Cloudflare Pages / AWS Amplify / Render</h3><p>Set up a new project and change these settings using your dashboard:<ul><li><strong>Build Command:</strong> <code>npm run docs:build</code><li><strong>Output Directory:</strong> <code>docs/.vitepress/dist</code><li><strong>Node Version:</strong> <code>16</code> (or above, by default it usually will be 14 or 16, but on Cloudflare Pages the default is still 12, so you may need to <a href="https://developers.cloudflare.com/pages/platform/build-configuration/">change that</a>)</ul><p>::: warning Don't enable options like <em>Auto Minify</em> for HTML code. It will remove comments from output which have meaning to Vue. You may see hydration mismatch errors if they get removed. :::</section><section id="github-pages"class="level3"><h3>GitHub Pages</h3><ol><li><p>In your theme config file, <code>docs/.vitepress/config.js</code>, set the <code>base</code> property to the name of your GitHub repository. If you plan to deploy your site to <code>https://foo.github.io/bar/</code>, then you should set base to <code>'/bar/'</code>. It should always start and end with a slash.<li><p>Create a file named <code>deploy.yml</code> inside <code>.github/workflows</code> directory of your project with the following content:<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">workflow_dispatch</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> main
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">permissions</span><span class="token punctuation">:</span>
      <span class="token key atrule">pages</span><span class="token punctuation">:</span> write
      <span class="token key atrule">id-token</span><span class="token punctuation">:</span> write
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> github<span class="token punctuation">-</span>pages
      <span class="token key atrule">url</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> steps.deployment.outputs.page_url <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">fetch-depth</span><span class="token punctuation">:</span> <span class="token number">0</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token number">16</span>
          <span class="token key atrule">cache</span><span class="token punctuation">:</span> npm
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> npm ci
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build
        <span class="token key atrule">run</span><span class="token punctuation">:</span> npm run docs<span class="token punctuation">:</span>build
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/configure<span class="token punctuation">-</span>pages@v2
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/upload<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>artifact@v1
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">path</span><span class="token punctuation">:</span> docs/.vitepress/dist
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy
        <span class="token key atrule">id</span><span class="token punctuation">:</span> deployment
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/deploy<span class="token punctuation">-</span>pages@v1</code></pre><p>::: tip Please replace the corresponding branch name. For example, if the branch you want to build is <code>master</code>, then you should replace <code>main</code> with <code>master</code> in the above file. :::<li><p>In your repository's Settings under Pages menu item, select <code>GitHub Actions</code> in Build and deployment's Source.<li><p>Now commit your code and push it to the <code>main</code> branch.<li><p>Wait for actions to complete.<li><p>In your repository's Settings under Pages menu item, click <code>Visit site</code>, then you can see your site. Your docs will automatically deploy each time you push.</ol></section><section id="gitlab-pages"class="level3"><h3>GitLab Pages</h3><ol><li><p>Set <code>outDir</code> in <code>docs/.vitepress/config.js</code> to <code>../public</code>.<li><p>Still in your config file, <code>docs/.vitepress/config.js</code>, set the <code>base</code> property to the name of your GitLab repository. If you plan to deploy your site to <code>https://foo.gitlab.io/bar/</code>, then you should set base to <code>'/bar/'</code>. It should always start and end with a slash.<li><p>Create a file called <code>.gitlab-ci.yml</code> in the root of your project with the content below. This will build and deploy your site whenever you make changes to your content:<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">image</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span><span class="token number">16</span>
<span class="token key atrule">pages</span><span class="token punctuation">:</span>
  <span class="token key atrule">cache</span><span class="token punctuation">:</span>
    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> node_modules/
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> npm install
    <span class="token punctuation">-</span> npm run docs<span class="token punctuation">:</span>build
  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span>
    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> public
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> main</code></pre><li><p>Alternatively, if you want to use an <em>alpine</em> version of node, you have to install <code>git</code> manually. In that case, the code above modifies to this:<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">image</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span>16<span class="token punctuation">-</span>alpine
<span class="token key atrule">pages</span><span class="token punctuation">:</span>
  <span class="token key atrule">cache</span><span class="token punctuation">:</span>
    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> node_modules/
  <span class="token key atrule">before_script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> apk add git
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> npm install
    <span class="token punctuation">-</span> npm run docs<span class="token punctuation">:</span>build
  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span>
    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> public
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> main</code></pre></ol></section><section id="azure-static-web-apps"class="level3"><h3>Azure Static Web Apps</h3><ol><li><p>Follow the <a href="https://docs.microsoft.com/en-us/azure/static-web-apps/build-configuration">official documentation</a>.<li><p>Set these values in your configuration file (and remove the ones you don't require, like <code>api_location</code>):<ul><li><strong><code>app_location</code></strong>: <code>/</code><li><strong><code>output_location</code></strong>: <code>docs/.vitepress/dist</code><li><strong><code>app_build_command</code></strong>: <code>npm run docs:build</code></ul></ol></section><section id="firebase"class="level3"><h3>Firebase</h3><ol><li><p>Create <code>firebase.json</code> and <code>.firebaserc</code> at the root of your project:<p><code>firebase.json</code>:<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"hosting"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"public"</span><span class="token operator">:</span> <span class="token string">"docs/.vitepress/dist"</span><span class="token punctuation">,</span>
    <span class="token property">"ignore"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p><code>.firebaserc</code>:<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"projects"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"default"</span><span class="token operator">:</span> <span class="token string">"&#x3C;YOUR_FIREBASE_ID>"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><li><p>After running <code>npm run docs:build</code>, run this command to deploy:<pre class="language-sh"><code class="language-sh">firebase deploy</code></pre></ol></section><section id="surge"class="level3"><h3>Surge</h3><ol><li><p>After running <code>npm run docs:build</code>, run this command to deploy:<pre class="language-sh"><code class="language-sh">npx surge docs/.vitepress/dist</code></pre></ol></section><section id="heroku"class="level3"><h3>Heroku</h3><ol><li><p>Follow documentation and guide given in <a href="https://elements.heroku.com/buildpacks/heroku/heroku-buildpack-static"><code>heroku-buildpack-static</code></a>.<li><p>Create a file called <code>static.json</code> in the root of your project with the below content:<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"root"</span><span class="token operator">:</span> <span class="token string">"docs/.vitepress/dist"</span>
<span class="token punctuation">}</span></code></pre></ol></section><section id="edgio"class="level3"><h3>Edgio</h3><p>Refer <a href="https://docs.edg.io/guides/vitepress">Creating and Deploying a VitePress App To Edgio</a>. <span style="float:footnote"><a href="./index.html#toc">Go to TOC</a></span></section></section></section>