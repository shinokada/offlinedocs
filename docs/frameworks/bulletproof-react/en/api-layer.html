<!doctype html><html lang="en"><meta charset="utf-8"><title>ðŸ“¡ API Layer</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"type="text/css"href="../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="-api-layer"><h1 id="-api-layer">ðŸ“¡ API Layer</h1><section class="level3"aria-labelledby="use-a-single-instance-of-the-api-client"><h3 id="use-a-single-instance-of-the-api-client">Use a Single Instance of the API Client</h3><p>When your application interacts with either RESTful or GraphQL APIs, it is beneficial to use a single instance of the API client that has been pre-configured and can be reused throughout the application. For example, you can create a single API client instance using the native fetch API or libraries such as <a href="https://github.com/axios/axios">axios</a>, <a href="https://github.com/prisma-labs/graphql-request">graphql-request</a>, or <a href="https://www.apollographql.com/docs/react/">apollo-client</a> with predefined configuration settings.<p><a href="../apps/react-vihttps://github.com/alan2207/bulletproof-react/tree/master/src/lib/api-client.ts">API Client Example Code</a></section><section class="level3"aria-labelledby="define-and-export-request-declarations"><h3 id="define-and-export-request-declarations">Define and Export Request Declarations</h3><p>Rather than declaring API requests on the fly, it is recommended to define and export them separately.<p>Declaring API requests in a structured manner can help maintain a clean and organized codebase as everything is colocated. Every API request declaration should consist of:<ul><li>Types and validation schemas for the request and response data<li>A fetcher function that calls an endpoint, using the API client instance<li>A hook that consumes the fetcher function that is built on top of libraries such as <a href="https://tanstack.com/query">react-query</a>, <a href="https://swr.vercel.app/">swr</a>, <a href="https://www.apollographql.com/docs/react/">apollo-client</a>, <a href="https://formidable.com/open-source/urql/">urql</a>, etc. to manage the data fetching and caching logic.</ul><p>This approach simplifies the tracking of defined endpoints available in the application. Additionally, typing the responses and inferring them further down the application enhances application type safety.<p><a href="../apps/react-vihttps://github.com/alan2207/bulletproof-react/tree/master/src/features/discussions/api/get-discussions.ts">API Request Declarations - Query - Example Code</a> <a href="../apps/react-vihttps://github.com/alan2207/bulletproof-react/tree/master/src/features/discussions/api/create-discussion.ts">API Request Declarations - Mutation - Example Code</a> <span style="float:footnote"><a href="./index.html#toc">Go to TOC</a></span></section></section>