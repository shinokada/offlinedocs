<!doctype html><html lang="en"><meta charset="utf-8"><title>Standalone applications</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="standalone-applications"class="level3"><h3>Standalone applications</h3><p>There are several ways of mounting a Nest application. You can create a web app, a microservice or just a bare Nest <strong>standalone application</strong> (without any network listeners). The Nest standalone application is a wrapper around the Nest <strong>IoC container</strong>, which holds all instantiated classes. We can obtain a reference to any existing instance from within any imported module directly using the standalone application object. Thus, you can take advantage of the Nest framework anywhere, including, for example, scripted <strong>CRON</strong> jobs. You can even build a <strong>CLI</strong> on top of it.<section id="getting-started"class="level4"><h4>Getting started</h4><p>To create a Nest standalone application, use the following construction:<pre class="language-typescript"><code class="language-typescript">@<span class="token decorator"><span class="token at operator">@</span><span class="token function">filename</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">bootstrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token maybe-class-name">NestFactory</span><span class="token punctuation">.</span><span class="token method function property-access">createApplicationContext</span><span class="token punctuation">(</span><span class="token maybe-class-name">AppModule</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// application logic...</span>
<span class="token punctuation">}</span>
<span class="token function">bootstrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The standalone application object allows you to obtain a reference to any instance registered within the Nest application. Let's imagine that we have a <code>TasksService</code> in the <code>TasksModule</code>. This class provides a set of methods that we want to call from within a CRON job.<pre class="language-typescript"><code class="language-typescript">@<span class="token decorator"><span class="token at operator">@</span><span class="token function">filename</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token maybe-class-name">NestFactory</span><span class="token punctuation">.</span><span class="token method function property-access">createApplicationContext</span><span class="token punctuation">(</span><span class="token maybe-class-name">AppModule</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tasksService <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token maybe-class-name">TasksService</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>To access the <code>TasksService</code> instance we use the <code>get()</code> method. The <code>get()</code> method acts like a <strong>query</strong> that searches for an instance in each registered module. Alternatively, for strict context checking, pass an options object with the <code>strict: true</code> property. With this option in effect, you have to navigate through specific modules to obtain a particular instance from the selected context.<pre class="language-typescript"><code class="language-typescript">@<span class="token decorator"><span class="token at operator">@</span><span class="token function">filename</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token maybe-class-name">NestFactory</span><span class="token punctuation">.</span><span class="token method function property-access">createApplicationContext</span><span class="token punctuation">(</span><span class="token maybe-class-name">AppModule</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tasksService <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token method function property-access">select</span><span class="token punctuation">(</span><span class="token maybe-class-name">TasksModule</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token maybe-class-name">TasksService</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> strict<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Following is a summary of the methods available for retrieving instance references from the standalone application object.<table><tr><td><code>get()</code><td>Retrieves an instance of a controller or provider (including guards, filters, and so on) available in the application context.<tr><td><code>select()</code><td>Navigates through the module's graph to pull out a specific instance of the selected module (used together with strict mode as described above).</table><blockquote><p>info <strong>Hint</strong> In non-strict mode, the root module is selected by default. To select any other module, you need to navigate the modules graph manually, step by step.</blockquote><p>If you want the node application to close after the script finishes (e.g., for a script running CRON jobs), add <code>await app.close()</code> to the end of your <code>bootstrap</code> function:<pre class="language-typescript"><code class="language-typescript">@<span class="token decorator"><span class="token at operator">@</span><span class="token function">filename</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">bootstrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token maybe-class-name">NestFactory</span><span class="token punctuation">.</span><span class="token method function property-access">createApplicationContext</span><span class="token punctuation">(</span><span class="token maybe-class-name">AppModule</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// application logic...</span>
  <span class="token keyword control-flow">await</span> app<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">bootstrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="example"class="level4"><h4>Example</h4><p>A working example is available <a href="https://github.com/nestjs/nest/tree/master/sample/18-context">here</a>. <span style="float:footnote"><a href="./index.html#toc">Go to TOC</a></span></section></section>