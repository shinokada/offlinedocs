<!doctype html><html lang="en"><meta charset="utf-8"><title>CSRF Protection</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="csrf-protection"class="level3"><h3>CSRF Protection</h3><p>Cross-site request forgery (also known as CSRF or XSRF) is a type of malicious exploit of a website where <strong>unauthorized</strong> commands are transmitted from a user that the web application trusts. To mitigate this kind of attack you can use the <a href="https://github.com/expressjs/csurf">csurf</a> package.<section id="use-with-express-default"class="level4"><h4>Use with Express (default)</h4><p>Start by installing the required package:<pre class="language-bash"><code class="language-bash">$ <span class="token function">npm</span> i --save csurf</code></pre><blockquote><p>warning <strong>Warning</strong> This package is deprecated, refer to <a href="https://github.com/expressjs/csurf#csurf"><code>csurf</code> docs</a> for more information.</blockquote><blockquote><p>warning <strong>Warning</strong> As explained in the <a href="https://github.com/expressjs/csurf#csurf"><code>csurf</code> docs</a>, this middleware requires either session middleware or <code>cookie-parser</code> to be initialized first. Please see that documentation for further instructions.</blockquote><p>Once the installation is complete, apply the <code>csurf</code> middleware as global middleware.<pre class="language-typescript"><code class="language-typescript"><span class="token keyword module">import</span> <span class="token imports"><span class="token operator">*</span> <span class="token keyword module">as</span> csurf</span> <span class="token keyword module">from</span> <span class="token string">'csurf'</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
<span class="token comment">// somewhere in your initialization file</span>
app<span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span><span class="token function">csurf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="use-with-fastify"class="level4"><h4>Use with Fastify</h4><p>Start by installing the required package:<pre class="language-bash"><code class="language-bash">$ <span class="token function">npm</span> i --save @fastify/csrf-protection</code></pre><p>Once the installation is complete, register the <code>@fastify/csrf-protection</code> plugin, as follows:<pre class="language-typescript"><code class="language-typescript"><span class="token keyword module">import</span> <span class="token imports">fastifyCsrf</span> <span class="token keyword module">from</span> <span class="token string">'@fastify/csrf-protection'</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
<span class="token comment">// somewhere in your initialization file after registering some storage plugin</span>
<span class="token keyword control-flow">await</span> app<span class="token punctuation">.</span><span class="token method function property-access">register</span><span class="token punctuation">(</span>fastifyCsrf<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>warning <strong>Warning</strong> As explained in the <code>@fastify/csrf-protection</code> docs <a href="https://github.com/fastify/csrf-protection#usage">here</a>, this plugin requires a storage plugin to be initialized first. Please, see that documentation for further instructions. <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></blockquote></section></section>