<!doctype html><html lang="en"><meta charset="utf-8"><title>Gateways</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="gateways"class="level3"><h3>Gateways</h3><p>Most of the concepts discussed elsewhere in this documentation, such as dependency injection, decorators, exception filters, pipes, guards and interceptors, apply equally to gateways. Wherever possible, Nest abstracts implementation details so that the same components can run across HTTP-based platforms, WebSockets, and Microservices. This section covers the aspects of Nest that are specific to WebSockets.<p>In Nest, a gateway is simply a class annotated with <code>@WebSocketGateway()</code> decorator. Technically, gateways are platform-agnostic which makes them compatible with any WebSockets library once an adapter is created. There are two WS platforms supported out-of-the-box: <a href="https://github.com/socketio/socket.io">socket.io</a> and <a href="https://github.com/websockets/ws">ws</a>. You can choose the one that best suits your needs. Also, you can build your own adapter by following this <a href="/websockets/adapter">guide</a>.<figure><img src="/Users/shinichiokada/Bash_Projects/markdown-docs-as-pdf/.vivliostyle/nestjs/en/src/assets/Gateways_1.png"></figure><blockquote><p>info <strong>Hint</strong> Gateways can be treated as <a href="/providers">providers</a>; this means they can inject dependencies through the class constructor. Also, gateways can be injected by other classes (providers and controllers) as well.</blockquote><section id="installation"class="level4"><h4>Installation</h4><p>To start building WebSockets-based applications, first install the required package:<pre class="language-bash"><code class="language-bash">@@filename<span class="token punctuation">(</span><span class="token punctuation">)</span>
$ <span class="token function">npm</span> i --save @nestjs/websockets @nestjs/platform-socket.io
@@switch
$ <span class="token function">npm</span> i --save @nestjs/websockets @nestjs/platform-socket.io</code></pre></section><section id="overview"class="level4"><h4>Overview</h4><p>In general, each gateway is listening on the same port as the <strong>HTTP server</strong>, unless your app is not a web application, or you have changed the port manually. This default behavior can be modified by passing an argument to the <code>@WebSocketGateway(80)</code> decorator where <code>80</code> is a chosen port number. You can also set a <a href="https://socket.io/docs/v4/namespaces/">namespace</a> used by the gateway using the following construction:<pre class="language-typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">WebSocketGateway</span></span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> namespace<span class="token operator">:</span> <span class="token string">'events'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><blockquote><p>warning <strong>Warning</strong> Gateways are not instantiated until they are referenced in the providers array of an existing module.</blockquote><p>You can pass any supported <a href="https://socket.io/docs/v4/server-options/">option</a> to the socket constructor with the second argument to the <code>@WebSocketGateway()</code> decorator, as shown below:<pre class="language-typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">WebSocketGateway</span></span><span class="token punctuation">(</span><span class="token number">81</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> transports<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'websocket'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>The gateway is now listening, but we have not yet subscribed to any incoming messages. Let's create a handler that will subscribe to the <code>events</code> messages and respond to the user with the exact same data.<pre class="language-typescript"><code class="language-typescript">@<span class="token decorator"><span class="token at operator">@</span><span class="token function">filename</span></span><span class="token punctuation">(</span>events<span class="token punctuation">.</span><span class="token property-access">gateway</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">SubscribeMessage</span></span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span>
<span class="token function">handleEvent</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">MessageBody</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> data<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
@@<span class="token keyword control-flow">switch</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Bind</span></span><span class="token punctuation">(</span><span class="token function"><span class="token maybe-class-name">MessageBody</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">SubscribeMessage</span></span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span>
<span class="token function">handleEvent</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><blockquote><p>info <strong>Hint</strong> <code>@SubscribeMessage()</code> and <code>@MessageBody()</code> decorators are imported from <code>@nestjs/websockets</code> package.</blockquote><p>Once the gateway is created, we can register it in our module.<pre class="language-typescript"><code class="language-typescript"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Module</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@nestjs/common'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">EventsGateway</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./events.gateway'</span><span class="token punctuation">;</span>

@<span class="token decorator"><span class="token at operator">@</span><span class="token function">filename</span></span><span class="token punctuation">(</span>events<span class="token punctuation">.</span><span class="token property-access">module</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Module</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  providers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token maybe-class-name">EventsGateway</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">EventsModule</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><p>You can also pass in a property key to the decorator to extract it from the incoming message body:<pre class="language-typescript"><code class="language-typescript">@<span class="token decorator"><span class="token at operator">@</span><span class="token function">filename</span></span><span class="token punctuation">(</span>events<span class="token punctuation">.</span><span class="token property-access">gateway</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">SubscribeMessage</span></span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span>
<span class="token function">handleEvent</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">MessageBody</span></span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span> id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token comment">// id === messageBody.id</span>
  <span class="token keyword control-flow">return</span> id<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
@@<span class="token keyword control-flow">switch</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Bind</span></span><span class="token punctuation">(</span><span class="token function"><span class="token maybe-class-name">MessageBody</span></span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">SubscribeMessage</span></span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span>
<span class="token function">handleEvent</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// id === messageBody.id</span>
  <span class="token keyword control-flow">return</span> id<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>If you would prefer not to use decorators, the following code is functionally equivalent:<pre class="language-typescript"><code class="language-typescript">@<span class="token decorator"><span class="token at operator">@</span><span class="token function">filename</span></span><span class="token punctuation">(</span>events<span class="token punctuation">.</span><span class="token property-access">gateway</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">SubscribeMessage</span></span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span>
<span class="token function">handleEvent</span><span class="token punctuation">(</span>client<span class="token operator">:</span> <span class="token maybe-class-name">Socket</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
@@<span class="token keyword control-flow">switch</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">SubscribeMessage</span></span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span>
<span class="token function">handleEvent</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>In the example above, the <code>handleEvent()</code> function takes two arguments. The first one is a platform-specific <a href="https://socket.io/docs/v4/server-api/#socket">socket instance</a>, while the second one is the data received from the client. This approach is not recommended though, because it requires mocking the <code>socket</code> instance in each unit test.<p>Once the <code>events</code> message is received, the handler sends an acknowledgment with the same data that was sent over the network. In addition, it's possible to emit messages using a library-specific approach, for example, by making use of <code>client.emit()</code> method. In order to access a connected socket instance, use <code>@ConnectedSocket()</code> decorator.<pre class="language-typescript"><code class="language-typescript">@<span class="token decorator"><span class="token at operator">@</span><span class="token function">filename</span></span><span class="token punctuation">(</span>events<span class="token punctuation">.</span><span class="token property-access">gateway</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">SubscribeMessage</span></span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span>
<span class="token function">handleEvent</span><span class="token punctuation">(</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">MessageBody</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> data<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">ConnectedSocket</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> client<span class="token operator">:</span> <span class="token maybe-class-name">Socket</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
@@<span class="token keyword control-flow">switch</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Bind</span></span><span class="token punctuation">(</span><span class="token function"><span class="token maybe-class-name">MessageBody</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function"><span class="token maybe-class-name">ConnectedSocket</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">SubscribeMessage</span></span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span>
<span class="token function">handleEvent</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> client<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><blockquote><p>info <strong>Hint</strong> <code>@ConnectedSocket()</code> decorator is imported from <code>@nestjs/websockets</code> package.</blockquote><p>However, in this case, you won't be able to leverage interceptors. If you don't want to respond to the user, you can simply skip the <code>return</code> statement (or explicitly return a "falsy" value, e.g. <code>undefined</code>).<p>Now when a client emits the message as follows:<pre class="language-typescript"><code class="language-typescript">socket<span class="token punctuation">.</span><span class="token method function property-access">emit</span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Nest'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The <code>handleEvent()</code> method will be executed. In order to listen for messages emitted from within the above handler, the client has to attach a corresponding acknowledgment listener:<pre class="language-typescript"><code class="language-typescript">socket<span class="token punctuation">.</span><span class="token method function property-access">emit</span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Nest'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="multiple-responses"class="level4"><h4>Multiple responses</h4><p>The acknowledgment is dispatched only once. Furthermore, it is not supported by native WebSockets implementation. To solve this limitation, you may return an object which consists of two properties. The <code>event</code> which is a name of the emitted event and the <code>data</code> that has to be forwarded to the client.<pre class="language-typescript"><code class="language-typescript">@<span class="token decorator"><span class="token at operator">@</span><span class="token function">filename</span></span><span class="token punctuation">(</span>events<span class="token punctuation">.</span><span class="token property-access">gateway</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">SubscribeMessage</span></span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span>
<span class="token function">handleEvent</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">MessageBody</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> data<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">WsResponse</span><span class="token operator">&#x3C;</span><span class="token builtin">unknown</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> event <span class="token operator">=</span> <span class="token string">'events'</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> event<span class="token punctuation">,</span> data <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
@@<span class="token keyword control-flow">switch</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Bind</span></span><span class="token punctuation">(</span><span class="token function"><span class="token maybe-class-name">MessageBody</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">SubscribeMessage</span></span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span>
<span class="token function">handleEvent</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> event <span class="token operator">=</span> <span class="token string">'events'</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> event<span class="token punctuation">,</span> data <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><blockquote><p>info <strong>Hint</strong> The <code>WsResponse</code> interface is imported from <code>@nestjs/websockets</code> package.</blockquote><blockquote><p>warning <strong>Warning</strong> You should return a class instance that implements <code>WsResponse</code> if your <code>data</code> field relies on <code>ClassSerializerInterceptor</code>, as it ignores plain JavaScript object responses.</blockquote><p>In order to listen for the incoming response(s), the client has to apply another event listener.<pre class="language-typescript"><code class="language-typescript">socket<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="asynchronous-responses"class="level4"><h4>Asynchronous responses</h4><p>Message handlers are able to respond either synchronously or <strong>asynchronously</strong>. Hence, <code>async</code> methods are supported. A message handler is also able to return an <code>Observable</code>, in which case the result values will be emitted until the stream is completed.<pre class="language-typescript"><code class="language-typescript">@<span class="token decorator"><span class="token at operator">@</span><span class="token function">filename</span></span><span class="token punctuation">(</span>events<span class="token punctuation">.</span><span class="token property-access">gateway</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">SubscribeMessage</span></span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span>
<span class="token function">onEvent</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">MessageBody</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> data<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Observable</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">WsResponse</span><span class="token operator">&#x3C;</span><span class="token builtin">number</span><span class="token operator">>></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> event <span class="token operator">=</span> <span class="token string">'events'</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token keyword module">from</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">pipe</span><span class="token punctuation">(</span>
    <span class="token function">map</span><span class="token punctuation">(</span>data <span class="token arrow operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> event<span class="token punctuation">,</span> data <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
@@<span class="token keyword control-flow">switch</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Bind</span></span><span class="token punctuation">(</span><span class="token function"><span class="token maybe-class-name">MessageBody</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">SubscribeMessage</span></span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span>
<span class="token function">onEvent</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> event <span class="token operator">=</span> <span class="token string">'events'</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token keyword module">from</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">pipe</span><span class="token punctuation">(</span>
    <span class="token function">map</span><span class="token punctuation">(</span>data <span class="token arrow operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> event<span class="token punctuation">,</span> data <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>In the example above, the message handler will respond <strong>3 times</strong> (with each item from the array).</section><section id="lifecycle-hooks"class="level4"><h4>Lifecycle hooks</h4><p>There are 3 useful lifecycle hooks available. All of them have corresponding interfaces and are described in the following table:<table><tr><td><code>OnGatewayInit</code><td>Forces to implement the <code>afterInit()</code> method. Takes library-specific server instance as an argument (and spreads the rest if required).<tr><td><code>OnGatewayConnection</code><td>Forces to implement the <code>handleConnection()</code> method. Takes library-specific client socket instance as an argument.<tr><td><code>OnGatewayDisconnect</code><td>Forces to implement the <code>handleDisconnect()</code> method. Takes library-specific client socket instance as an argument.</table><blockquote><p>info <strong>Hint</strong> Each lifecycle interface is exposed from <code>@nestjs/websockets</code> package.</blockquote></section><section id="server"class="level4"><h4>Server</h4><p>Occasionally, you may want to have a direct access to the native, <strong>platform-specific</strong> server instance. The reference to this object is passed as an argument to the <code>afterInit()</code> method (<code>OnGatewayInit</code> interface). Another option is to use the <code>@WebSocketServer()</code> decorator.<pre class="language-typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">WebSocketServer</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
server<span class="token operator">:</span> <span class="token maybe-class-name">Server</span><span class="token punctuation">;</span></code></pre><blockquote><p>warning <strong>Notice</strong> The <code>@WebSocketServer()</code> decorator is imported from the <code>@nestjs/websockets</code> package.</blockquote><p>Nest will automatically assign the server instance to this property once it is ready to use.<p><app-banner-enterprise></app-banner-enterprise></section><section id="example"class="level4"><h4>Example</h4><p>A working example is available <a href="https://github.com/nestjs/nest/tree/master/sample/02-gateways">here</a>. <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>