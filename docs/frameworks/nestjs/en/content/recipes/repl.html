<!doctype html><html lang="en"><meta charset="utf-8"><title>Read-Eval-Print-Loop (REPL)</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="read-eval-print-loop-repl"class="level3"><h3>Read-Eval-Print-Loop (REPL)</h3><p>REPL is a simple interactive environment that takes single user inputs, executes them, and returns the result to the user. The REPL feature lets you inspect your dependency graph and call methods on your providers (and controllers) directly from your terminal.<section id="usage"class="level4"><h4>Usage</h4><p>To run your NestJS application in REPL mode, create a new <code>repl.ts</code> file (alongside the existing <code>main.ts</code> file) and add the following code inside:<pre class="language-typescript"><code class="language-typescript">@<span class="token decorator"><span class="token at operator">@</span><span class="token function">filename</span></span><span class="token punctuation">(</span>repl<span class="token punctuation">)</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> repl <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@nestjs/core'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">AppModule</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./app.module'</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">bootstrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">await</span> <span class="token function">repl</span><span class="token punctuation">(</span><span class="token maybe-class-name">AppModule</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">bootstrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
@@<span class="token keyword control-flow">switch</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> repl <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@nestjs/core'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">AppModule</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./app.module'</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">bootstrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">await</span> <span class="token function">repl</span><span class="token punctuation">(</span><span class="token maybe-class-name">AppModule</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">bootstrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Now in your terminal, start the REPL with the following command:<pre class="language-bash"><code class="language-bash">$ <span class="token function">npm</span> run start -- --entryFile repl</code></pre><blockquote><p>info <strong>Hint</strong> <code>repl</code> returns a <a href="https://nodejs.org/api/repl.html">Node.js REPL server</a> object.</blockquote><p>Once it's up and running, you should see the following message in your console:<pre class="language-bash"><code class="language-bash">LOG <span class="token punctuation">[</span>NestFactory<span class="token punctuation">]</span> Starting Nest application<span class="token punctuation">..</span>.
LOG <span class="token punctuation">[</span>InstanceLoader<span class="token punctuation">]</span> AppModule dependencies initialized
LOG REPL initialized</code></pre><p>And now you can start interacting with your dependencies graph. For instance, you can retrieve an <code>AppService</code> (we are using the starter project as an example here) and call the <code>getHello()</code> method:<pre class="language-typescript"><code class="language-typescript"><span class="token operator">></span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token maybe-class-name">AppService</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'Hello World!'</span></code></pre><p>You can execute any JavaScript code from within your terminal, for example, assign an instance of the <code>AppController</code> to a local variable, and use <code>await</code> to call an asynchronous method:<pre class="language-typescript"><code class="language-typescript"><span class="token operator">></span> appController <span class="token operator">=</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token maybe-class-name">AppController</span><span class="token punctuation">)</span>
<span class="token maybe-class-name">AppController</span> <span class="token punctuation">{</span> appService<span class="token operator">:</span> <span class="token maybe-class-name">AppService</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token operator">></span> <span class="token keyword control-flow">await</span> appController<span class="token punctuation">.</span><span class="token method function property-access">getHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'Hello World!'</span></code></pre><p>To display all public methods available on a given provider or controller, use the <code>methods()</code> function, as follows:<pre class="language-typescript"><code class="language-typescript"><span class="token operator">></span> <span class="token function">methods</span><span class="token punctuation">(</span><span class="token maybe-class-name">AppController</span><span class="token punctuation">)</span>

<span class="token maybe-class-name">Methods</span><span class="token operator">:</span>
 ◻ getHello</code></pre><p>To print all registered modules as a list together with their controllers and providers, use <code>debug()</code>.<pre class="language-typescript"><code class="language-typescript"><span class="token operator">></span> <span class="token function">debug</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token maybe-class-name">AppModule</span><span class="token operator">:</span>
 <span class="token operator">-</span> controllers<span class="token operator">:</span>
  ◻ <span class="token maybe-class-name">AppController</span>
 <span class="token operator">-</span> providers<span class="token operator">:</span>
  ◻ <span class="token maybe-class-name">AppService</span></code></pre><p>Quick demo:<figure><img src="/Users/shinichiokada/Bash_Projects/markdown-docs-as-pdf/.vivliostyle/nestjs/en/src/assets/repl.gif"alt="REPL example"></figure><p>You can find more information about the existing, predefined native methods in the section below.</section><section id="native-functions"class="level4"><h4>Native functions</h4><p>The built-in NestJS REPL comes with a few native functions that are globally available when you start REPL. You can call <code>help()</code> to list them out.<p>If you don't recall what's the signature (ie: expected parameters and a return type) of a function, you can call <code>&#x3C;function_name>.help</code>. For instance:<pre class="language-text"><code class="language-text">> $.help
Retrieves an instance of either injectable or controller, otherwise, throws exception.
Interface: $(token: InjectionToken) => any</code></pre><blockquote><p>info <strong>Hint</strong> Those function interfaces are written in <a href="https://www.typescriptlang.org/docs/handbook/2/functions.html#function-type-expressions">TypeScript function type expression syntax</a>.</blockquote><table><thead><tr><th>Function<th>Description<th>Signature<tbody><tr><td><code>debug</code><td>Print all registered modules as a list together with their controllers and providers.<td><code>debug(moduleCls?: ClassRef \| string) => void</code><tr><td><code>get</code> or <code>$</code><td>Retrieves an instance of either injectable or controller, otherwise, throws exception.<td><code>get(token: InjectionToken) => any</code><tr><td><code>methods</code><td>Display all public methods available on a given provider or controller.<td><code>methods(token: ClassRef \| string) => void</code><tr><td><code>resolve</code><td>Resolves transient or request-scoped instance of either injectable or controller, otherwise, throws exception.<td><code>resolve(token: InjectionToken, contextId: any) => Promise&#x3C;any></code><tr><td><code>select</code><td>Allows navigating through the modules tree, for example, to pull out a specific instance from the selected module.<td><code>select(token: DynamicModule \| ClassRef) => INestApplicationContext</code></table><p><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>