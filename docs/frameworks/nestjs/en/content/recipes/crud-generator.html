<!doctype html><html lang="en"><meta charset="utf-8"><title>CRUD generator</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="crud-generator"class="level3"><h3>CRUD generator</h3><p>Throughout the life span of a project, when we build new features, we often need to add new resources to our application. These resources typically require multiple, repetitive operations that we have to repeat each time we define a new resource.<section id="introduction"class="level4"><h4>Introduction</h4><p>Let's imagine a real-world scenario, where we need to expose CRUD endpoints for 2 entities, let's say <strong>User</strong> and <strong>Product</strong> entities. Following the best practices, for each entity we would have to perform several operations, as follows:<ul><li>Generate a module (<code>nest g mo</code>) to keep code organized and establish clear boundaries (grouping related components)<li>Generate a controller (<code>nest g co</code>) to define CRUD routes (or queries/mutations for GraphQL applications)<li>Generate a service (<code>nest g s</code>) to implement &#x26; isolate business logic<li>Generate an entity class/interface to represent the resource data shape<li>Generate Data Transfer Objects (or inputs for GraphQL applications) to define how the data will be sent over the network</ul><p>That's a lot of steps!<p>To help speed up this repetitive process, <a href="/cli/overview">Nest CLI</a> provides a generator (schematic) that automatically generates all the boilerplate code to help us avoid doing all of this, and make the developer experience much simpler.<blockquote><p>info <strong>Note</strong> The schematic supports generating <strong>HTTP</strong> controllers, <strong>Microservice</strong> controllers, <strong>GraphQL</strong> resolvers (both code first and schema first), and <strong>WebSocket</strong> Gateways.</blockquote></section><section id="generating-a-new-resource"class="level4"><h4>Generating a new resource</h4><p>To create a new resource, simply run the following command in the root directory of your project:<pre class="language-shell"><code class="language-shell">$ nest g resource</code></pre><p><code>nest g resource</code> command not only generates all the NestJS building blocks (module, service, controller classes) but also an entity class, DTO classes as well as the testing (<code>.spec</code>) files.<p>Below you can see the generated controller file (for REST API):<pre class="language-typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Controller</span></span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">)</span>
<span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">UsersController</span></span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> <span class="token keyword">readonly</span> usersService<span class="token operator">:</span> <span class="token maybe-class-name">UsersService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Post</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">create</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Body</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> createUserDto<span class="token operator">:</span> <span class="token maybe-class-name">CreateUserDto</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">usersService</span><span class="token punctuation">.</span><span class="token method function property-access">create</span><span class="token punctuation">(</span>createUserDto<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Get</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">usersService</span><span class="token punctuation">.</span><span class="token method function property-access">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Get</span></span><span class="token punctuation">(</span><span class="token string">':id'</span><span class="token punctuation">)</span>
  <span class="token function">findOne</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Param</span></span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span> id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">usersService</span><span class="token punctuation">.</span><span class="token method function property-access">findOne</span><span class="token punctuation">(</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Patch</span></span><span class="token punctuation">(</span><span class="token string">':id'</span><span class="token punctuation">)</span>
  <span class="token function">update</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Param</span></span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span> id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token decorator"><span class="token at operator">@</span><span class="token function">Body</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> updateUserDto<span class="token operator">:</span> <span class="token maybe-class-name">UpdateUserDto</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">usersService</span><span class="token punctuation">.</span><span class="token method function property-access">update</span><span class="token punctuation">(</span><span class="token operator">+</span>id<span class="token punctuation">,</span> updateUserDto<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Delete</span></span><span class="token punctuation">(</span><span class="token string">':id'</span><span class="token punctuation">)</span>
  <span class="token function">remove</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Param</span></span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span> id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">usersService</span><span class="token punctuation">.</span><span class="token method function property-access">remove</span><span class="token punctuation">(</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Also, it automatically creates placeholders for all the CRUD endpoints (routes for REST APIs, queries and mutations for GraphQL, message subscribes for both Microservices and WebSocket Gateways) - all without having to lift a finger.<blockquote><p>warning <strong>Note</strong> Generated service classes are <strong>not</strong> tied to any specific <strong>ORM (or data source)</strong>. This makes the generator generic enough to meet the needs of any project. By default, all methods will contain placeholders, allowing you to populate it with the data sources specific to your project.</blockquote><p>Likewise, if you want to generate resolvers for a GraphQL application, simply select the <code>GraphQL (code first)</code> (or <code>GraphQL (schema first)</code>) as your transport layer.<p>In this case, NestJS will generate a resolver class instead of a REST API controller:<pre class="language-shell"><code class="language-shell">$ nest g resource <span class="token function">users</span>

<span class="token operator">></span> ? What transport layer <span class="token keyword">do</span> you use? GraphQL <span class="token punctuation">(</span>code first<span class="token punctuation">)</span>
<span class="token operator">></span> ? Would you like to generate CRUD entry points? Yes
<span class="token operator">></span> CREATE src/users/users.module.ts <span class="token punctuation">(</span><span class="token number">224</span> bytes<span class="token punctuation">)</span>
<span class="token operator">></span> CREATE src/users/users.resolver.spec.ts <span class="token punctuation">(</span><span class="token number">525</span> bytes<span class="token punctuation">)</span>
<span class="token operator">></span> CREATE src/users/users.resolver.ts <span class="token punctuation">(</span><span class="token number">1109</span> bytes<span class="token punctuation">)</span>
<span class="token operator">></span> CREATE src/users/users.service.spec.ts <span class="token punctuation">(</span><span class="token number">453</span> bytes<span class="token punctuation">)</span>
<span class="token operator">></span> CREATE src/users/users.service.ts <span class="token punctuation">(</span><span class="token number">625</span> bytes<span class="token punctuation">)</span>
<span class="token operator">></span> CREATE src/users/dto/create-user.input.ts <span class="token punctuation">(</span><span class="token number">195</span> bytes<span class="token punctuation">)</span>
<span class="token operator">></span> CREATE src/users/dto/update-user.input.ts <span class="token punctuation">(</span><span class="token number">281</span> bytes<span class="token punctuation">)</span>
<span class="token operator">></span> CREATE src/users/entities/user.entity.ts <span class="token punctuation">(</span><span class="token number">187</span> bytes<span class="token punctuation">)</span>
<span class="token operator">></span> UPDATE src/app.module.ts <span class="token punctuation">(</span><span class="token number">312</span> bytes<span class="token punctuation">)</span></code></pre><blockquote><p>info <strong>Hint</strong> To avoid generating test files, you can pass the <code>--no-spec</code> flag, as follows: <code>nest g resource users --no-spec</code></blockquote><p>We can see below, that not only were all boilerplate mutations and queries created, but everything is all tied together. We're utilizing the <code>UsersService</code>, <code>User</code> Entity, and our DTO's.<pre class="language-typescript"><code class="language-typescript"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Resolver</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Query</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Mutation</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Args</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Int</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@nestjs/graphql'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">UsersService</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./users.service'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">User</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./entities/user.entity'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">CreateUserInput</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./dto/create-user.input'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">UpdateUserInput</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./dto/update-user.input'</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Resolver</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token maybe-class-name">User</span><span class="token punctuation">)</span>
<span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">UsersResolver</span></span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> <span class="token keyword">readonly</span> usersService<span class="token operator">:</span> <span class="token maybe-class-name">UsersService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Mutation</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token maybe-class-name">User</span><span class="token punctuation">)</span>
  <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Args</span></span><span class="token punctuation">(</span><span class="token string">'createUserInput'</span><span class="token punctuation">)</span> createUserInput<span class="token operator">:</span> <span class="token maybe-class-name">CreateUserInput</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">usersService</span><span class="token punctuation">.</span><span class="token method function property-access">create</span><span class="token punctuation">(</span>createUserInput<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Query</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">[</span><span class="token maybe-class-name">User</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'users'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">usersService</span><span class="token punctuation">.</span><span class="token method function property-access">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Query</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token maybe-class-name">User</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'user'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">findOne</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Args</span></span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token function-variable function">type</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token maybe-class-name">Int</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">usersService</span><span class="token punctuation">.</span><span class="token method function property-access">findOne</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Mutation</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token maybe-class-name">User</span><span class="token punctuation">)</span>
  <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Args</span></span><span class="token punctuation">(</span><span class="token string">'updateUserInput'</span><span class="token punctuation">)</span> updateUserInput<span class="token operator">:</span> <span class="token maybe-class-name">UpdateUserInput</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">usersService</span><span class="token punctuation">.</span><span class="token method function property-access">update</span><span class="token punctuation">(</span>updateUserInput<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">,</span> updateUserInput<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Mutation</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token maybe-class-name">User</span><span class="token punctuation">)</span>
  <span class="token function">removeUser</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Args</span></span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token function-variable function">type</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token maybe-class-name">Int</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">usersService</span><span class="token punctuation">.</span><span class="token method function property-access">remove</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>