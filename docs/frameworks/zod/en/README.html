<!doctype html><html lang="en"><meta charset="utf-8"><title>Table of contents</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><p align="center"><img src="logo.svg"width="200px"align="center"alt="Zod logo"><h1 align="center">Zod</h1><p align="center">✨ <a href="https://zod.dev">https://zod.dev</a> ✨<br>TypeScript-first schema validation with static type inference<p></p><br><p align="center"><a href="https://github.com/colinhacks/zod/actions?query=branch%3Amaster"><img src="https://github.com/colinhacks/zod/actions/workflows/test.yml/badge.svg?event=push&#x26;branch=master"alt="Zod CI status"></a><a href="https://twitter.com/colinhacks"rel="nofollow"><img src="https://img.shields.io/badge/created%20by-@colinhacks-4BBAAB.svg"alt="Created by Colin McDonnell"></a><a href="https://opensource.org/licenses/MIT"rel="nofollow"><img src="https://img.shields.io/github/license/colinhacks/zod"alt="License"></a><a href="https://www.npmjs.com/package/zod"rel="nofollow"><img src="https://img.shields.io/npm/dw/zod.svg"alt="npm"></a><a href="https://www.npmjs.com/package/zod"rel="nofollow"><img src="https://img.shields.io/github/stars/colinhacks/zod"alt="stars"></a><a href="https://discord.gg/KaSRdyX2vc"rel="nofollow"><img src="https://img.shields.io/discord/893487829802418277?label=Discord&#x26;logo=discord&#x26;logoColor=white"alt="discord server"></a><div align="center"><a href="https://zod.dev">Documentation</a> <span>  •  </span><a href="https://discord.gg/RcG33DQJdf">Discord</a> <span>  •  </span><a href="https://www.npmjs.com/package/zod">npm</a> <span>  •  </span><a href="https://github.com/colinhacks/zod/issues/new">Issues</a> <span>  •  </span><a href="https://twitter.com/colinhacks">@colinhacks</a> <span>  •  </span><a href="https://trpc.io">tRPC</a><br></div><br><br><blockquote><p>These docs have been translated into <a href="./README_ZH.md">Chinese</a>.</blockquote><section id="table-of-contents"class="level2"><h2>Table of contents</h2><ul><li><a href="#introduction">Introduction</a><ul><li><a href="#sponsors">Sponsors</a><li><a href="#ecosystem">Ecosystem</a></ul><li><a href="#installation">Installation</a><ul><li><a href="#requirements">Requirements</a><li><a href="#from-npm-nodebun">Node/npm</a><li><a href="#from-denolandx-deno">Deno</a></ul><li><a href="#basic-usage">Basic usage</a><li><a href="#primitives">Primitives</a><li><a href="#literals">Literals</a><li><a href="#strings">Strings</a><li><a href="#numbers">Numbers</a><li><a href="#nans">NaNs</a><li><a href="#booleans">Booleans</a><li><a href="#dates">Dates</a><li><a href="#zod-enums">Zod enums</a><li><a href="#native-enums">Native enums</a><li><a href="#optionals">Optionals</a><li><a href="#nullables">Nullables</a><li><a href="#objects">Objects</a><ul><li><a href="#shape">.shape</a><li><a href="#keyof">.keyof</a><li><a href="#extend">.extend</a><li><a href="#merge">.merge</a><li><a href="#pickomit">.pick/.omit</a><li><a href="#partial">.partial</a><li><a href="#deepPartial">.deepPartial</a><li><a href="#passthrough">.passthrough</a><li><a href="#strict">.strict</a><li><a href="#strip">.strip</a><li><a href="#catchall">.catchall</a></ul><li><a href="#arrays">Arrays</a><ul><li><a href="#element">.element</a><li><a href="#nonempty">.nonempty</a><li><a href="#minmaxlength">.min/.max/.length</a></ul><li><a href="#tuples">Tuples</a><li><a href="#unions">Unions</a><li><a href="#discriminated-unions">Discriminated Unions</a><li><a href="#records">Records</a><li><a href="#maps">Maps</a><li><a href="#sets">Sets</a><li><a href="#intersections">Intersections</a><li><a href="#recursive-types">Recursive types</a><ul><li><a href="#json-type">JSON type</a><li><a href="#cyclical-objects">Cyclical data</a></ul><li><a href="#promises">Promises</a><li><a href="#instanceof">Instanceof</a><li><a href="#functions">Functions</a><li><a href="#preprocess">Preprocess</a><li><a href="#custom-schemas">Custom</a><li><a href="#schema-methods">Schema methods</a><ul><li><a href="#parse">.parse</a><li><a href="#parseasync">.parseAsync</a><li><a href="#safeparse">.safeParse</a><li><a href="#safeparseasync">.safeParseAsync</a><li><a href="#refine">.refine</a><li><a href="#superRefine">.superRefine</a><li><a href="#transform">.transform</a><li><a href="#default">.default</a><li><a href="#catch">.catch</a><li><a href="#optional">.optional</a><li><a href="#nullable">.nullable</a><li><a href="#nullish">.nullish</a><li><a href="#array">.array</a><li><a href="#promise">.promise</a><li><a href="#or">.or</a><li><a href="#and">.and</a><li><a href="#brand">.brand</a></ul><li><a href="#guides-and-concepts">Guides and concepts</a><ul><li><a href="#type-inference">Type inference</a><li><a href="#writing-generic-functions">Writing generic functions</a><li><a href="#error-handling">Error handling</a><li><a href="#error-formatting">Error formatting</a></ul><li><a href="#comparison">Comparison</a><ul><li><a href="#joi">Joi</a><li><a href="#yup">Yup</a><li><a href="#io-ts">io-ts</a><li><a href="#runtypes">Runtypes</a></ul><li><a href="#changelog">Changelog</a></ul></section><section id="introduction"class="level2"><h2>Introduction</h2><p>Zod is a TypeScript-first schema declaration and validation library. I'm using the term "schema" to broadly refer to any data type, from a simple <code>string</code> to a complex nested object.<p>Zod is designed to be as developer-friendly as possible. The goal is to eliminate duplicative type declarations. With Zod, you declare a validator <em>once</em> and Zod will automatically infer the static TypeScript type. It's easy to compose simpler types into complex data structures.<p>Some other great aspects:<ul><li>Zero dependencies<li>Works in Node.js and all modern browsers<li>Tiny: 8kb minified + zipped<li>Immutable: methods (e.g. <code>.optional()</code>) return a new instance<li>Concise, chainable interface<li>Functional approach: <a href="https://lexi-lambda.github.io/blog/2019/11/05/parse-don-t-validate/">parse, don't validate</a><li>Works with plain JavaScript too! You don't need to use TypeScript.</ul><section id="sponsors"class="level3"><h3>Sponsors</h3><p>Sponsorship at any level is appreciated and encouraged. For individual developers, consider the <a href="https://github.com/sponsors/colinhacks">Cup of Coffee tier</a>. If you built a paid product using Zod, consider one of the <a href="https://github.com/sponsors/colinhacks">podium tiers</a>.<section id="gold"class="level4"><h4>Gold</h4><table><tr><td align="center"><a href="https://astro.build/"><img src="https://avatars.githubusercontent.com/u/44914786?s=200&#x26;v=4"width="200px;"alt="Astro"></a><br><b>Astro</b><br><a href="https://astro.build">astro.build</a><br><p width="200px">Astro is a new kind of static<br>site builder for the modern web.<br>Powerful developer experience meets<br>lightweight output.<td align="center"><a href="https://glow.app/"><img src="https://i.imgur.com/R0R43S2.jpg"width="200px;"alt=""></a><br><b>Glow Wallet</b><br><a href="https://glow.app/">glow.app</a><br><p width="200px">Your new favorite<br>Solana wallet.<tr><td align="center"><a href="https://deletype.com/"><img src="https://avatars0.githubusercontent.com/u/15068039?s=200&#x26;v=4"width="200px;"alt="Deletype logo"></a><br><b>Deletype</b><br><a href="https://deletype.com">deletype.com</a><td align="center"><a href="https://proxy.com/"><img src="https://avatars.githubusercontent.com/u/14321439?s=200&#x26;v=4"width="200px;"alt="Proxy logo"></a><br><b>Proxy</b><br><a href="https://proxy.com">proxy.com</a></table></section><section id="silver"class="level4"><h4>Silver</h4><table><tr><td align="center"colspan="2"><a href="https://www.numeric.io"><img src="https://i.imgur.com/kTiLtZt.png"width="250px;"alt="Numeric logo"></a><br><b>Numeric</b><br><a href="https://www.numeric.io">numeric.io</a><td align="center"><a href="https://snaplet.dev"><img src="https://avatars.githubusercontent.com/u/69029941?s=200&#x26;v=4"width="150px;"alt="Snaplet logo"></a><br><b>Snaplet</b><br><a href="https://snaplet.dev">snaplet.dev</a><tr><td align="center"><a href="https://marcatopartners.com/"><img src="https://avatars.githubusercontent.com/u/84106192?s=200&#x26;v=4"width="150px;"alt="Marcato Partners"></a><br><b>Marcato Partners</b><br><a href="https://marcatopartners.com/">marcatopartners.com</a><td align="center"><a href="https://interval.com"><img src="https://avatars.githubusercontent.com/u/67802063?s=200&#x26;v=4"width="150px;"alt=""></a><br><b>Interval</b><br><a href="https://interval.com">interval.com</a><td align="center"><a href="https://seasoned.cc"><img src="https://avatars.githubusercontent.com/u/33913103?s=200&#x26;v=4"width="150px;"alt=""></a><br><b>Seasoned Software</b><br><a href="https://seasoned.cc">seasoned.cc</a><tr><td align="center"><a href="https://www.bamboocreative.nz/"><img src="https://avatars.githubusercontent.com/u/41406870?v=4"width="150px;"alt="Bamboo Creative logo"></a><br><b>Bamboo Creative</b><br><a href="https://www.bamboocreative.nz">bamboocreative.nz</a></table></section><section id="bronze"class="level4"><h4>Bronze</h4><table><tr><td align="center"><a href="https://twitter.com/flybayer"><img src="https://avatars2.githubusercontent.com/u/8813276?s=460&#x26;u=4ff8beb9a67b173015c4b426a92d89cab960af1b&#x26;v=4"width="100px;"alt=""></a><br><b>Brandon Bayer</b><br><a href="https://twitter.com/flybayer">@flybayer</a>, <span>creator of <a href="https://blitzjs.com">Blitz.js</a></span><br><td align="center"><a href="https://github.com/brabeji"><img src="https://avatars.githubusercontent.com/u/2237954?v=4"width="100px;"alt=""></a><br><b>Jiří Brabec</b><br><a href="https://github.com/brabeji">@brabeji</a><br><td align="center"><a href="https://twitter.com/alexdotjs"><img src="https://avatars.githubusercontent.com/u/459267?v=4"width="100px;"alt=""></a><br><b>Alex Johansson</b><br><a href="https://twitter.com/alexdotjs">@alexdotjs</a><tr><td align="center"><a href="https://fungible.systems/"><img src="https://avatars.githubusercontent.com/u/80220121?s=200&#x26;v=4"width="100px;"alt="Fungible Systems logo"></a><br><b>Fungible Systems</b><br><a href="https://fungible.systems/">fungible.systems</a><br><td align="center"><a href="https://adaptable.io/"><img src="https://avatars.githubusercontent.com/u/60378268?s=200&#x26;v=4"width="100px;"alt=""></a><br><b>Adaptable</b><br><a href="https://adaptable.io/">adaptable.io</a><br><td align="center"><a href="https://www.avanawallet.com/"><img src="https://avatars.githubusercontent.com/u/105452197?s=200&#x26;v=4"width="100px;"alt="Avana Wallet logo"></a><br><b>Avana Wallet</b><br><a href="https://www.avanawallet.com/">avanawallet.com</a><br><span>Solana non-custodial wallet</span><br></table></section></section><section id="ecosystem"class="level3"><h3>Ecosystem</h3><p>There are a growing number of tools that are built atop or support Zod natively! If you've built a tool or library on top of Zod, tell me about it <a href="https://twitter.com/colinhacks">on Twitter</a> or <a href="https://github.com/colinhacks/zod/discussions">start a Discussion</a>. I'll add it below and tweet it out.<section id="resources"class="level4"><h4>Resources</h4><ul><li><a href="https://www.totaltypescript.com/tutorials/zod">Total TypeScript Zod Tutorial</a> by <a href="https://twitter.com/mattpocockuk">@mattpocockuk</a><li><a href="https://www.youtube.com/watch?v=rY_XqfSHock">Fixing TypeScript's Blindspot: Runtime Typechecking</a> by <a href="https://twitter.com/jherr">@jherr</a></ul></section><section id="api-libraries"class="level4"><h4>API libraries</h4><ul><li><a href="https://github.com/trpc/trpc"><code>tRPC</code></a>: Build end-to-end typesafe APIs without GraphQL.<li><a href="https://github.com/anatine/zod-plugins/tree/main/packages/zod-nestjs"><code>@anatine/zod-nestjs</code></a>: Helper methods for using Zod in a NestJS project.<li><a href="https://github.com/flock-community/zod-endpoints"><code>zod-endpoints</code></a>: Contract-first strictly typed endpoints with Zod. OpenAPI compatible.<li><a href="https://github.com/SeasonedSoftware/domain-functions/"><code>domain-functions</code></a>: Decouple your business logic from your framework using composable functions. With first-class type inference from end to end powered by Zod schemas.<li><a href="https://github.com/ecyrbe/zodios"><code>@zodios/core</code></a>: A typescript API client with runtime and compile time validation backed by axios and zod.<li><a href="https://github.com/RobinTail/express-zod-api"><code>express-zod-api</code></a>: Build Express-based APIs with I/O schema validation and custom middlewares.</ul></section><section id="form-integrations"class="level4"><h4>Form integrations</h4><ul><li><a href="https://github.com/react-hook-form/resolvers#zod"><code>react-hook-form</code></a>: A first-party Zod resolver for React Hook Form.<li><a href="https://github.com/causaly/zod-validation-error"><code>zod-validation-error</code></a>: Generate user-friendly error messages from <code>ZodError</code>s<li><a href="https://github.com/robertLichtnow/zod-formik-adapter"><code>zod-formik-adapter</code></a>: A community-maintained Formik adapter for Zod.<li><a href="https://github.com/esamattis/react-zorm"><code>react-zorm</code></a>: Standalone <code>&#x3C;form></code> generation and validation for React using Zod.<li><a href="https://github.com/rileytomasek/zodix"><code>zodix</code></a>: Zod utilities for FormData and URLSearchParams in Remix loaders and actions.<li><a href="https://github.com/glazy/formik-validator-zod"><code>formik-validator-zod</code></a>: Formik-compliant validator library that simplifies using Zod with Formik.<li><a href="https://github.com/aiji42/zod-i18n"><code>zod-i18n-map</code></a>: Useful for translating Zod error messages.<li><a href="https://github.com/fabian-hiller/modular-forms"><code>@modular-forms/solid</code></a>: Modular form library for SolidJS that supports Zod for validation.</ul></section><section id="zod-to-x"class="level4"><h4>Zod to X</h4><ul><li><a href="https://github.com/sachinraja/zod-to-ts"><code>zod-to-ts</code></a>: Generate TypeScript definitions from Zod schemas.<li><a href="https://github.com/StefanTerdell/zod-to-json-schema"><code>zod-to-json-schema</code></a>: Convert your Zod schemas into <a href="https://json-schema.org/">JSON Schemas</a>.<li><a href="https://github.com/anatine/zod-plugins/tree/main/packages/zod-openapi"><code>@anatine/zod-openapi</code></a>: Converts a Zod schema to an OpenAPI v3.x <code>SchemaObject</code>.<li><a href="https://github.com/DavidTimms/zod-fast-check"><code>zod-fast-check</code></a>: Generate <code>fast-check</code> arbitraries from Zod schemas.<li><a href="https://github.com/kbkk/abitia/tree/master/packages/zod-dto"><code>zod-dto</code></a>: Generate Nest.js DTOs from a Zod schema.<li><a href="https://github.com/turkerdev/fastify-type-provider-zod"><code>fastify-type-provider-zod</code></a>: Create Fastify type providers from Zod schemas.<li><a href="https://github.com/asteasolutions/zod-to-openapi"><code>zod-to-openapi</code></a>: Generate full OpenAPI (Swagger) docs from Zod, including schemas, endpoints &#x26; parameters.<li><a href="https://github.com/incetarik/nestjs-graphql-zod"><code>nestjs-graphql-zod</code></a>: Generates NestJS GraphQL model classes from Zod schemas. Provides GraphQL method decorators working with Zod schemas.</ul></section><section id="x-to-zod"class="level4"><h4>X to Zod</h4><ul><li><a href="https://github.com/fabien0102/ts-to-zod"><code>ts-to-zod</code></a>: Convert TypeScript definitions into Zod schemas.<li><a href="https://github.com/johngeorgewright/runtyping/tree/master/packages/zod"><code>@runtyping/zod</code></a>: Generate Zod from static types &#x26; JSON schema.<li><a href="https://github.com/StefanTerdell/json-schema-to-zod"><code>json-schema-to-zod</code></a>: Convert your <a href="https://json-schema.org/">JSON Schemas</a> into Zod schemas. <a href="https://StefanTerdell.github.io/json-schema-to-zod-react/">Live demo</a>.<li><a href="https://github.com/rsinohara/json-to-zod"><code>json-to-zod</code></a>: Convert JSON objects into Zod schemas. <a href="https://rsinohara.github.io/json-to-zod-react/">Live demo</a>.<li><a href="https://github.com/Code-Hex/graphql-codegen-typescript-validation-schema"><code>graphql-codegen-typescript-validation-schema</code></a>: GraphQL Code Generator plugin to generate form validation schema from your GraphQL schema<li><a href="https://github.com/CarterGrimmeisen/zod-prisma"><code>zod-prisma</code></a>: Generate Zod schemas from your Prisma schema.<li><a href="https://github.com/Southclaws/supervillain"><code>Supervillain</code></a>: Generate Zod schemas from your Go structs.<li><a href="https://github.com/omar-dulaimi/prisma-zod-generator"><code>prisma-zod-generator</code></a>: Emit Zod schemas from your Prisma schema.<li><a href="https://github.com/omar-dulaimi/prisma-trpc-generator"><code>prisma-trpc-generator</code></a>: Emit fully implemented tRPC routers and their validation schemas using Zod.<li><a href="https://github.com/chrishoermann/zod-prisma-types"><code>zod-prisma-types</code></a> Create Zod types from your Prisma models</ul></section><section id="mocking"class="level4"><h4>Mocking</h4><ul><li><a href="https://github.com/anatine/zod-plugins/tree/main/packages/zod-mock"><code>@anatine/zod-mock</code></a>: Generate mock data from a Zod schema. Powered by <a href="https://github.com/Marak/Faker.js">faker.js</a>.<li><a href="https://github.com/dipasqualew/zod-mocking"><code>zod-mocking</code></a>: Generate mock data from your Zod schemas.</ul></section><section id="powered-by-zod"class="level4"><h4>Powered by Zod</h4><ul><li><a href="https://github.com/gajus/slonik/tree/gajus/add-zod-validation-backwards-compatible#runtime-validation-and-static-type-inference"><code>slonik</code></a>: Node.js Postgres client with strong Zod integration.<li><a href="https://github.com/mdbetancourt/soly"><code>soly</code></a>: Create CLI applications with zod.<li><a href="https://github.com/sidwebworks/zod-xlsx"><code>zod-xlsx</code></a>: A xlsx based resource validator using Zod schemas.<li><a href="https://github.com/lostfictions/znv"><code>znv</code></a>: Type-safe environment parsing and validation for Node.js with Zod schemas</ul></section></section></section><section id="installation"class="level2"><h2>Installation</h2><section id="requirements"class="level3"><h3>Requirements</h3><ul><li><p>TypeScript 4.5+!<li><p>You must enable <code>strict</code> mode in your <code>tsconfig.json</code>. This is a best practice for all TypeScript projects.<pre class="language-ts"><code class="language-ts"><span class="token comment">// tsconfig.json</span>
<span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token string-property property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token string-property property">"strict"</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></ul></section><section id="from-npm-nodebun"class="level3"><h3>From <code>npm</code> (Node/Bun)</h3><pre class="language-sh"><code class="language-sh">npm install zod       # npm
yarn add zod          # yarn
bun add zod           # bun
pnpm add zod          # pnpm</code></pre></section><section id="from-denolandx-deno"class="level3"><h3>From <code>deno.land/x</code> (Deno)</h3><p>Unlike Node, Deno relies on direct URL imports instead of a package manager like NPM. Zod is available on <a href="https://deno.land/x">deno.land/x</a>. The latest version can be imported like so:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> z <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"https://deno.land/x/zod/mod.ts"</span><span class="token punctuation">;</span></code></pre><p>You can also specify a particular version:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> z <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"https://deno.land/x/zod@v3.16.1/mod.ts"</span><span class="token punctuation">;</span></code></pre><blockquote><p>The rest of this README assumes you are using npm and importing directly from the <code>"zod"</code> package.</blockquote></section></section><section id="basic-usage"class="level2"><h2>Basic usage</h2><p>Creating a simple string schema<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> z <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"zod"</span><span class="token punctuation">;</span>

<span class="token comment">// creating a schema for strings</span>
<span class="token keyword">const</span> mySchema <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// parsing</span>
mySchema<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"tuna"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => "tuna"</span>
mySchema<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => throws ZodError</span>

<span class="token comment">// "safe" parsing (doesn't throw error if validation fails)</span>
mySchema<span class="token punctuation">.</span><span class="token method function property-access">safeParse</span><span class="token punctuation">(</span><span class="token string">"tuna"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => { success: true; data: "tuna" }</span>
mySchema<span class="token punctuation">.</span><span class="token method function property-access">safeParse</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => { success: false; error: ZodError }</span></code></pre><p>Creating an object schema<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> z <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"zod"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">User</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  username<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token maybe-class-name">User</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token punctuation">{</span> username<span class="token operator">:</span> <span class="token string">"Ludwig"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// extract the inferred type</span>
<span class="token class-name"><span class="token keyword">type</span></span> <span class="token maybe-class-name">User</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> <span class="token maybe-class-name">User</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token comment">// { username: string }</span></code></pre></section><section id="primitives"class="level2"><h2>Primitives</h2><pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> z <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"zod"</span><span class="token punctuation">;</span>

<span class="token comment">// primitive values</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">bigint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">boolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// empty types</span>
z<span class="token punctuation">.</span><span class="token keyword nil">undefined</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token keyword null nil">null</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">void</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// accepts undefined</span>

<span class="token comment">// catch-all types</span>
<span class="token comment">// allows any value</span>
z<span class="token punctuation">.</span><span class="token method function property-access">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">unknown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// never type</span>
<span class="token comment">// allows no values</span>
z<span class="token punctuation">.</span><span class="token method function property-access">never</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="literals"class="level2"><h2>Literals</h2><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> tuna <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">literal</span><span class="token punctuation">(</span><span class="token string">"tuna"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> twelve <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">literal</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> twobig <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">literal</span><span class="token punctuation">(</span><span class="token number">2n</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// bigint literal</span>
<span class="token keyword">const</span> tru <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">literal</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> terrificSymbol <span class="token operator">=</span> <span class="token known-class-name class-name">Symbol</span><span class="token punctuation">(</span><span class="token string">"terrific"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> terrific <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">literal</span><span class="token punctuation">(</span>terrificSymbol<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// retrieve literal value</span>
tuna<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">;</span> <span class="token comment">// "tuna"</span></code></pre><blockquote><p>Currently there is no support for Date literals in Zod. If you have a use case for this feature, please file an issue.</blockquote></section><section id="strings"class="level2"><h2>Strings</h2><p>Zod includes a handful of string-specific validations.<pre class="language-ts"><code class="language-ts">z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">max</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">min</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">length</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">email</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">uuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">cuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">regex</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">startsWith</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">endsWith</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// trim whitespace</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">datetime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// defaults to UTC, see below for options</span></code></pre><blockquote><p>Check out <a href="https://github.com/validatorjs/validator.js">validator.js</a> for a bunch of other useful string validation functions that can be used in conjunction with <a href="#refine">Refinements</a>.</blockquote><p>You can customize some common error messages when creating a string schema.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> name <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  required_error<span class="token operator">:</span> <span class="token string">"Name is required"</span><span class="token punctuation">,</span>
  invalid_type_error<span class="token operator">:</span> <span class="token string">"Name must be a string"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>When using validation methods, you can pass in an additional argument to provide a custom error message.<pre class="language-ts"><code class="language-ts">z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">min</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">"Must be 5 or more characters long"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">max</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">"Must be 5 or fewer characters long"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">length</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">"Must be exactly 5 characters long"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">email</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">"Invalid email address"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">url</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">"Invalid url"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">uuid</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">"Invalid UUID"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">startsWith</span><span class="token punctuation">(</span><span class="token string">"https://"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">"Must provide secure URL"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">endsWith</span><span class="token punctuation">(</span><span class="token string">".com"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">"Only .com domains allowed"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">datetime</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">"Invalid datetime string! Must be UTC."</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="coercion-for-primitives"class="level2"><h2>Coercion for primitives</h2><p>Zod now provides a more convenient way to coerce primitive values.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> schema <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">coerce</span><span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
schema<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"tuna"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => "tuna"</span>
schema<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => "12"</span>
schema<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => "true"</span></code></pre><p>During the parsing step, the input is passed through the <code>String()</code> function, which is a JavaScript built-in for coercing data into strings. Note that the returned schema is a <code>ZodString</code> instance so you can use all string methods.<pre class="language-ts"><code class="language-ts">z<span class="token punctuation">.</span><span class="token property-access">coerce</span><span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">email</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">min</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>All primitive types support coercion.<pre class="language-ts"><code class="language-ts">z<span class="token punctuation">.</span><span class="token property-access">coerce</span><span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// String(input)</span>
z<span class="token punctuation">.</span><span class="token property-access">coerce</span><span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Number(input)</span>
z<span class="token punctuation">.</span><span class="token property-access">coerce</span><span class="token punctuation">.</span><span class="token method function property-access">boolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Boolean(input)</span>
z<span class="token punctuation">.</span><span class="token property-access">coerce</span><span class="token punctuation">.</span><span class="token method function property-access">bigint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// BigInt(input)</span>
z<span class="token punctuation">.</span><span class="token property-access">coerce</span><span class="token punctuation">.</span><span class="token method function property-access">date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// new Date(input)</span></code></pre><p><strong>Boolean coercion</strong><p>Zod's boolean coercion is very simple! It passes the value into the <code>Boolean(value)</code> function, that's it. Any truthy value will resolve to <code>true</code>, any falsy value will resolve to <code>false</code>.<pre class="language-ts"><code class="language-ts">z<span class="token punctuation">.</span><span class="token property-access">coerce</span><span class="token punctuation">.</span><span class="token method function property-access">boolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"tuna"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => true</span>
z<span class="token punctuation">.</span><span class="token property-access">coerce</span><span class="token punctuation">.</span><span class="token method function property-access">boolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => true</span>
z<span class="token punctuation">.</span><span class="token property-access">coerce</span><span class="token punctuation">.</span><span class="token method function property-access">boolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"false"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => true</span>
z<span class="token punctuation">.</span><span class="token property-access">coerce</span><span class="token punctuation">.</span><span class="token method function property-access">boolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => true</span>
z<span class="token punctuation">.</span><span class="token property-access">coerce</span><span class="token punctuation">.</span><span class="token method function property-access">boolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => true</span>

z<span class="token punctuation">.</span><span class="token property-access">coerce</span><span class="token punctuation">.</span><span class="token method function property-access">boolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => false</span>
z<span class="token punctuation">.</span><span class="token property-access">coerce</span><span class="token punctuation">.</span><span class="token method function property-access">boolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token keyword nil">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => false</span>
z<span class="token punctuation">.</span><span class="token property-access">coerce</span><span class="token punctuation">.</span><span class="token method function property-access">boolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => false</span></code></pre><section id="datetime-validation"class="level3"><h3>Datetime validation</h3><p>The <code>z.string().datetime()</code> method defaults to UTC validation: no timezone offsets with arbitrary sub-second decimal precision.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> datetime <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">datetime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

datetime<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"2020-01-01T00:00:00Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// pass</span>
datetime<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"2020-01-01T00:00:00.123Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// pass</span>
datetime<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"2020-01-01T00:00:00.123456Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// pass (arbitrary precision)</span>
datetime<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"2020-01-01T00:00:00+02:00"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// fail (no offsets allowed)</span></code></pre><p>Timezone offsets can be allowed by setting the <code>offset</code> option to <code>true</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> datetime <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">datetime</span><span class="token punctuation">(</span><span class="token punctuation">{</span> offset<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

datetime<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"2020-01-01T00:00:00+02:00"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// pass</span>
datetime<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"2020-01-01T00:00:00.123+02:00"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// pass (millis optional)</span>
datetime<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"2020-01-01T00:00:00.123+0200"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// pass (millis optional)</span>
datetime<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"2020-01-01T00:00:00Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// pass (Z still supported)</span></code></pre><p>You can additionally constrain the allowable <code>precision</code>. By default, arbitrary sub-second precision is supported (but optional).<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> datetime <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">datetime</span><span class="token punctuation">(</span><span class="token punctuation">{</span> precision<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

datetime<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"2020-01-01T00:00:00.123Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// pass</span>
datetime<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"2020-01-01T00:00:00Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// fail</span>
datetime<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"2020-01-01T00:00:00.123456Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// fail</span></code></pre></section></section><section id="numbers"class="level2"><h2>Numbers</h2><p>You can customize certain error messages when creating a number schema.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> age <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  required_error<span class="token operator">:</span> <span class="token string">"Age is required"</span><span class="token punctuation">,</span>
  invalid_type_error<span class="token operator">:</span> <span class="token string">"Age must be a number"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Zod includes a handful of number-specific validations.<pre class="language-ts"><code class="language-ts">z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">gt</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">gte</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// alias .min(5)</span>
z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">lt</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">lte</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// alias .max(5)</span>

z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">int</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// value must be an integer</span>

z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">positive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//     > 0</span>
z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">nonnegative</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  >= 0</span>
z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">negative</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//     &#x3C; 0</span>
z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">nonpositive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  &#x3C;= 0</span>

z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">multipleOf</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Evenly divisible by 5. Alias .step(5)</span>

z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">finite</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// value must be finite, not Infinity or -Infinity</span></code></pre><p>Optionally, you can pass in a second argument to provide a custom error message.<pre class="language-ts"><code class="language-ts">z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">lte</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">"this👏is👏too👏big"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="nans"class="level2"><h2>NaNs</h2><p>You can customize certain error messages when creating a nan schema.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> isNaN <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">nan</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  required_error<span class="token operator">:</span> <span class="token string">"isNaN is required"</span><span class="token punctuation">,</span>
  invalid_type_error<span class="token operator">:</span> <span class="token string">"isNaN must be not a number"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="booleans"class="level2"><h2>Booleans</h2><p>You can customize certain error messages when creating a boolean schema.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> isActive <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">boolean</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  required_error<span class="token operator">:</span> <span class="token string">"isActive is required"</span><span class="token punctuation">,</span>
  invalid_type_error<span class="token operator">:</span> <span class="token string">"isActive must be a boolean"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="dates"class="level2"><h2>Dates</h2><p>Use z.date() to validate <code>Date</code> instances.<pre class="language-ts"><code class="language-ts">z<span class="token punctuation">.</span><span class="token method function property-access">date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">safeParse</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Date</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// success: true</span>
z<span class="token punctuation">.</span><span class="token method function property-access">date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">safeParse</span><span class="token punctuation">(</span><span class="token string">"2022-01-12T00:00:00.000Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// success: false</span></code></pre><p>You can customize certain error messages when creating a date schema.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> myDateSchema <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">date</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  required_error<span class="token operator">:</span> <span class="token string">"Please select a date and time"</span><span class="token punctuation">,</span>
  invalid_type_error<span class="token operator">:</span> <span class="token string">"That's not a date!"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Zod provides a handful of date-specific validations.<pre class="language-ts"><code class="language-ts">z<span class="token punctuation">.</span><span class="token method function property-access">date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">min</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Date</span></span><span class="token punctuation">(</span><span class="token string">"1900-01-01"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">"Too old"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
z<span class="token punctuation">.</span><span class="token method function property-access">date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">max</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Date</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">"Too young!"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>Supporting date strings</strong><p>To write a schema that accepts either a <code>Date</code> or a date string, use <a href="#preprocess"><code>z.preprocess</code></a>.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> dateSchema <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">preprocess</span><span class="token punctuation">(</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> arg <span class="token operator">==</span> <span class="token string">"string"</span> <span class="token operator">||</span> arg <span class="token keyword">instanceof</span> <span class="token class-name"><span class="token known-class-name class-name">Date</span></span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Date</span></span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> z<span class="token punctuation">.</span><span class="token method function property-access">date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">DateSchema</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> dateSchema<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token comment">// type DateSchema = Date</span>

dateSchema<span class="token punctuation">.</span><span class="token method function property-access">safeParse</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Date</span></span><span class="token punctuation">(</span><span class="token string">"1/12/22"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// success: true</span>
dateSchema<span class="token punctuation">.</span><span class="token method function property-access">safeParse</span><span class="token punctuation">(</span><span class="token string">"2022-01-12T00:00:00.000Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// success: true</span></code></pre></section><section id="zod-enums"class="level2"><h2>Zod enums</h2><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token maybe-class-name">FishEnum</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">enum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"Salmon"</span><span class="token punctuation">,</span> <span class="token string">"Tuna"</span><span class="token punctuation">,</span> <span class="token string">"Trout"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">FishEnum</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> <span class="token maybe-class-name">FishEnum</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token comment">// 'Salmon' | 'Tuna' | 'Trout'</span></code></pre><p><code>z.enum</code> is a Zod-native way to declare a schema with a fixed set of allowable <em>string</em> values. Pass the array of values directly into <code>z.enum()</code>. Alternatively, use <code>as const</code> to define your enum values as a tuple of strings. See the <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-4.html#const-assertions">const assertion docs</a> for details.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token constant">VALUES</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Salmon"</span><span class="token punctuation">,</span> <span class="token string">"Tuna"</span><span class="token punctuation">,</span> <span class="token string">"Trout"</span><span class="token punctuation">]</span> <span class="token keyword module">as</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">FishEnum</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">enum</span><span class="token punctuation">(</span><span class="token constant">VALUES</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>This is not allowed, since Zod isn't able to infer the exact values of each element.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> fish <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Salmon"</span><span class="token punctuation">,</span> <span class="token string">"Tuna"</span><span class="token punctuation">,</span> <span class="token string">"Trout"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">FishEnum</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">enum</span><span class="token punctuation">(</span>fish<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>Autocompletion</strong><p>To get autocompletion with a Zod enum, use the <code>.enum</code> property of your schema:<pre class="language-ts"><code class="language-ts"><span class="token maybe-class-name">FishEnum</span><span class="token punctuation">.</span><span class="token property-access">enum</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Salmon</span></span><span class="token punctuation">;</span> <span class="token comment">// => autocompletes</span>

<span class="token maybe-class-name">FishEnum</span><span class="token punctuation">.</span><span class="token property-access">enum</span><span class="token punctuation">;</span>
<span class="token comment">/*
=> {
  Salmon: "Salmon",
  Tuna: "Tuna",
  Trout: "Trout",
}
*/</span></code></pre><p>You can also retrieve the list of options as a tuple with the <code>.options</code> property:<pre class="language-ts"><code class="language-ts"><span class="token maybe-class-name">FishEnum</span><span class="token punctuation">.</span><span class="token property-access">options</span><span class="token punctuation">;</span> <span class="token comment">// ["Salmon", "Tuna", "Trout"]);</span></code></pre></section><section id="native-enums"class="level2"><h2>Native enums</h2><p>Zod enums are the recommended approach to defining and validating enums. But if you need to validate against an enum from a third-party library (or you don't want to rewrite your existing enums) you can use <code>z.nativeEnum()</code>.<p><strong>Numeric enums</strong><pre class="language-ts"><code class="language-ts"><span class="token keyword">enum</span> <span class="token maybe-class-name">Fruits</span> <span class="token punctuation">{</span>
  <span class="token maybe-class-name">Apple</span><span class="token punctuation">,</span>
  <span class="token maybe-class-name">Banana</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">FruitEnum</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">nativeEnum</span><span class="token punctuation">(</span><span class="token maybe-class-name">Fruits</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">FruitEnum</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> <span class="token maybe-class-name">FruitEnum</span><span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// Fruits</span>

<span class="token maybe-class-name">FruitEnum</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token maybe-class-name">Fruits</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Apple</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// passes</span>
<span class="token maybe-class-name">FruitEnum</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token maybe-class-name">Fruits</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Banana</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// passes</span>
<span class="token maybe-class-name">FruitEnum</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// passes</span>
<span class="token maybe-class-name">FruitEnum</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// passes</span>
<span class="token maybe-class-name">FruitEnum</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// fails</span></code></pre><p><strong>String enums</strong><pre class="language-ts"><code class="language-ts"><span class="token keyword">enum</span> <span class="token maybe-class-name">Fruits</span> <span class="token punctuation">{</span>
  <span class="token maybe-class-name">Apple</span> <span class="token operator">=</span> <span class="token string">"apple"</span><span class="token punctuation">,</span>
  <span class="token maybe-class-name">Banana</span> <span class="token operator">=</span> <span class="token string">"banana"</span><span class="token punctuation">,</span>
  <span class="token maybe-class-name">Cantaloupe</span><span class="token punctuation">,</span> <span class="token comment">// you can mix numerical and string enums</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">FruitEnum</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">nativeEnum</span><span class="token punctuation">(</span><span class="token maybe-class-name">Fruits</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">FruitEnum</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> <span class="token maybe-class-name">FruitEnum</span><span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// Fruits</span>

<span class="token maybe-class-name">FruitEnum</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token maybe-class-name">Fruits</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Apple</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// passes</span>
<span class="token maybe-class-name">FruitEnum</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token maybe-class-name">Fruits</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Cantaloupe</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// passes</span>
<span class="token maybe-class-name">FruitEnum</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"apple"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// passes</span>
<span class="token maybe-class-name">FruitEnum</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"banana"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// passes</span>
<span class="token maybe-class-name">FruitEnum</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// passes</span>
<span class="token maybe-class-name">FruitEnum</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"Cantaloupe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// fails</span></code></pre><p><strong>Const enums</strong><p>The <code>.nativeEnum()</code> function works for <code>as const</code> objects as well. ⚠️ <code>as const</code> required TypeScript 3.4+!<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token maybe-class-name">Fruits</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token maybe-class-name">Apple</span><span class="token operator">:</span> <span class="token string">"apple"</span><span class="token punctuation">,</span>
  <span class="token maybe-class-name">Banana</span><span class="token operator">:</span> <span class="token string">"banana"</span><span class="token punctuation">,</span>
  <span class="token maybe-class-name">Cantaloupe</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword module">as</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">FruitEnum</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">nativeEnum</span><span class="token punctuation">(</span><span class="token maybe-class-name">Fruits</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">FruitEnum</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> <span class="token maybe-class-name">FruitEnum</span><span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// "apple" | "banana" | 3</span>

<span class="token maybe-class-name">FruitEnum</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"apple"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// passes</span>
<span class="token maybe-class-name">FruitEnum</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"banana"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// passes</span>
<span class="token maybe-class-name">FruitEnum</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// passes</span>
<span class="token maybe-class-name">FruitEnum</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"Cantaloupe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// fails</span></code></pre><p>You can access the underlying object with the <code>.enum</code> property:<pre class="language-ts"><code class="language-ts"><span class="token maybe-class-name">FruitEnum</span><span class="token punctuation">.</span><span class="token property-access">enum</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Apple</span></span><span class="token punctuation">;</span> <span class="token comment">// "apple"</span></code></pre></section><section id="optionals"class="level2"><h2>Optionals</h2><p>You can make any schema optional with <code>z.optional()</code>. This wraps the schema in a <code>ZodOptional</code> instance and returns the result.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> schema <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">optional</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

schema<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token keyword nil">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => returns undefined</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> schema<span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// string | undefined</span></code></pre><p>For convenience, you can also call the <code>.optional()</code> method on an existing schema.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> user <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  username<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">optional</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> user<span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// { username?: string | undefined };</span></code></pre><p>You can extract the wrapped schema from a <code>ZodOptional</code> instance with <code>.unwrap()</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> stringSchema <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> optionalString <span class="token operator">=</span> stringSchema<span class="token punctuation">.</span><span class="token method function property-access">optional</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
optionalString<span class="token punctuation">.</span><span class="token method function property-access">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> stringSchema<span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre></section><section id="nullables"class="level2"><h2>Nullables</h2><p>Similarly, you can create nullable types with <code>z.nullable()</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> nullableString <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">nullable</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
nullableString<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"asdf"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => "asdf"</span>
nullableString<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => null</span></code></pre><p>Or use the <code>.nullable()</code> method.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token constant">E</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// equivalent to nullableString</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">E</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> <span class="token constant">E</span><span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// string | null</span></code></pre><p>Extract the inner schema with <code>.unwrap()</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> stringSchema <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> nullableString <span class="token operator">=</span> stringSchema<span class="token punctuation">.</span><span class="token method function property-access">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
nullableString<span class="token punctuation">.</span><span class="token method function property-access">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> stringSchema<span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre></section><section id="objects"class="level2"><h2>Objects</h2><pre class="language-ts"><code class="language-ts"><span class="token comment">// all properties are required by default</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">Dog</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// extract the inferred type like this</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Dog</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> <span class="token maybe-class-name">Dog</span><span class="token operator">></span><span class="token punctuation">;</span>

<span class="token comment">// equivalent to:</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Dog</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><section id="shape"class="level3"><h3><code>.shape</code></h3><p>Use <code>.shape</code> to access the schemas for a particular key.<pre class="language-ts"><code class="language-ts"><span class="token maybe-class-name">Dog</span><span class="token punctuation">.</span><span class="token property-access">shape</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">;</span> <span class="token comment">// => string schema</span>
<span class="token maybe-class-name">Dog</span><span class="token punctuation">.</span><span class="token property-access">shape</span><span class="token punctuation">.</span><span class="token property-access">age</span><span class="token punctuation">;</span> <span class="token comment">// => number schema</span></code></pre></section><section id="keyof"class="level3"><h3><code>.keyof</code></h3><p>Use <code>.keyof</code> to create a <code>ZodEnum</code> schema from the keys of an object schema.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> keySchema <span class="token operator">=</span> <span class="token maybe-class-name">Dog</span><span class="token punctuation">.</span><span class="token keyword">keyof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
keySchema<span class="token punctuation">;</span> <span class="token comment">// ZodEnum&#x3C;["name", "age"]></span></code></pre></section><section id="extend"class="level3"><h3><code>.extend</code></h3><p>You can add additional fields to an object schema with the <code>.extend</code> method.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token maybe-class-name">DogWithBreed</span> <span class="token operator">=</span> <span class="token maybe-class-name">Dog</span><span class="token punctuation">.</span><span class="token method function property-access">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  breed<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>You can use <code>.extend</code> to overwrite fields! Be careful with this power!</section><section id="merge"class="level3"><h3><code>.merge</code></h3><p>Equivalent to <code>A.extend(B.shape)</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token maybe-class-name">BaseTeacher</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span> students<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">array</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">HasID</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">Teacher</span> <span class="token operator">=</span> <span class="token maybe-class-name">BaseTeacher</span><span class="token punctuation">.</span><span class="token method function property-access">merge</span><span class="token punctuation">(</span><span class="token maybe-class-name">HasID</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Teacher</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> <span class="token maybe-class-name">Teacher</span><span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// => { students: string[], id: string }</span></code></pre><blockquote><p>If the two schemas share keys, the properties of B overrides the property of A. The returned schema also inherits the "unknownKeys" policy (strip/strict/passthrough) and the catchall schema of B.</blockquote></section><section id="pickomit"class="level3"><h3><code>.pick/.omit</code></h3><p>Inspired by TypeScript's built-in <code>Pick</code> and <code>Omit</code> utility types, all Zod object schemas have <code>.pick</code> and <code>.omit</code> methods that return a modified version. Consider this Recipe schema:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token maybe-class-name">Recipe</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  ingredients<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">array</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>To only keep certain keys, use <code>.pick</code> .<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token maybe-class-name">JustTheName</span> <span class="token operator">=</span> <span class="token maybe-class-name">Recipe</span><span class="token punctuation">.</span><span class="token method function property-access">pick</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">JustTheName</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> <span class="token maybe-class-name">JustTheName</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token comment">// => { name: string }</span></code></pre><p>To remove certain keys, use <code>.omit</code> .<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token maybe-class-name">NoIDRecipe</span> <span class="token operator">=</span> <span class="token maybe-class-name">Recipe</span><span class="token punctuation">.</span><span class="token method function property-access">omit</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NoIDRecipe</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> <span class="token maybe-class-name">NoIDRecipe</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token comment">// => { name: string, ingredients: string[] }</span></code></pre></section><section id="partial"class="level3"><h3><code>.partial</code></h3><p>Inspired by the built-in TypeScript utility type <a href="https://www.typescriptlang.org/docs/handbook/utility-types.html#partialt">Partial</a>, the <code>.partial</code> method makes all properties optional.<p>Starting from this object:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> user <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  email<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  username<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { email: string; username: string }</span></code></pre><p>We can create a partial version:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> partialUser <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token method function property-access">partial</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { email?: string | undefined; username?: string | undefined }</span></code></pre><p>You can also specify which properties to make optional:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> optionalEmail <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token method function property-access">partial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  email<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
{
  email?: string | undefined;
  username: string
}
*/</span></code></pre></section><section id="deeppartial"class="level3"><h3><code>.deepPartial</code></h3><p>The <code>.partial</code> method is shallow — it only applies one level deep. There is also a "deep" version:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> user <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  username<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token dom variable">location</span><span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    latitude<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    longitude<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  strings<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">array</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span> value<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> deepPartialUser <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token method function property-access">deepPartial</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/*
{
  username?: string | undefined,
  location?: {
    latitude?: number | undefined;
    longitude?: number | undefined;
  } | undefined,
  strings?: { value?: string}[]
}
*/</span></code></pre><blockquote><p>Important limitation: deep partials only work as expected in hierarchies of objects, arrays, and tuples.</blockquote></section><section id="required"class="level3"><h3><code>.required</code></h3><p>Contrary to the <code>.partial</code> method, the <code>.required</code> method makes all properties required.<p>Starting from this object:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> user <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  email<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  username<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">partial</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { email?: string | undefined; username?: string | undefined }</span></code></pre><p>We can create a required version:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> requiredUser <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token method function property-access">required</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { email: string; username: string }</span></code></pre><p>You can also specify which properties to make required:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> requiredEmail <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token method function property-access">required</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  email<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
{
  email: string;
  username?: string | undefined;
}
*/</span></code></pre></section><section id="passthrough"class="level3"><h3><code>.passthrough</code></h3><p>By default Zod object schemas strip out unrecognized keys during parsing.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> person <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

person<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"bob dylan"</span><span class="token punctuation">,</span>
  extraKey<span class="token operator">:</span> <span class="token number">61</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// => { name: "bob dylan" }</span>
<span class="token comment">// extraKey has been stripped</span></code></pre><p>Instead, if you want to pass through unknown keys, use <code>.passthrough()</code> .<pre class="language-ts"><code class="language-ts">person<span class="token punctuation">.</span><span class="token method function property-access">passthrough</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"bob dylan"</span><span class="token punctuation">,</span>
  extraKey<span class="token operator">:</span> <span class="token number">61</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// => { name: "bob dylan", extraKey: 61 }</span></code></pre></section><section id="strict"class="level3"><h3><code>.strict</code></h3><p>By default Zod object schemas strip out unrecognized keys during parsing. You can <em>disallow</em> unknown keys with <code>.strict()</code> . If there are any unknown keys in the input, Zod will throw an error.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> person <span class="token operator">=</span> z
  <span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">strict</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

person<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"bob dylan"</span><span class="token punctuation">,</span>
  extraKey<span class="token operator">:</span> <span class="token number">61</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// => throws ZodError</span></code></pre></section><section id="strip"class="level3"><h3><code>.strip</code></h3><p>You can use the <code>.strip</code> method to reset an object schema to the default behavior (stripping unrecognized keys).</section><section id="catchall"class="level3"><h3><code>.catchall</code></h3><p>You can pass a "catchall" schema into an object schema. All unknown keys will be validated against it.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> person <span class="token operator">=</span> z
  <span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">catchall</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

person<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"bob dylan"</span><span class="token punctuation">,</span>
  validExtraKey<span class="token operator">:</span> <span class="token number">61</span><span class="token punctuation">,</span> <span class="token comment">// works fine</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

person<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"bob dylan"</span><span class="token punctuation">,</span>
  validExtraKey<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// fails</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// => throws ZodError</span></code></pre><p>Using <code>.catchall()</code> obviates <code>.passthrough()</code> , <code>.strip()</code> , or <code>.strict()</code>. All keys are now considered "known".</section></section><section id="arrays"class="level2"><h2>Arrays</h2><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> stringArray <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">array</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// equivalent</span>
<span class="token keyword">const</span> stringArray <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Be careful with the <code>.array()</code> method. It returns a new <code>ZodArray</code> instance. This means the <em>order</em> in which you call methods matters. For instance:<pre class="language-ts"><code class="language-ts">z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">optional</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (string | undefined)[]</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">optional</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string[] | undefined</span></code></pre><section id="element"class="level3"><h3><code>.element</code></h3><p>Use <code>.element</code> to access the schema for an element of the array.<pre class="language-ts"><code class="language-ts">stringArray<span class="token punctuation">.</span><span class="token property-access">element</span><span class="token punctuation">;</span> <span class="token comment">// => string schema</span></code></pre></section><section id="nonempty"class="level3"><h3><code>.nonempty</code></h3><p>If you want to ensure that an array contains at least one element, use <code>.nonempty()</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> nonEmptyStrings <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">nonempty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// the inferred type is now</span>
<span class="token comment">// [string, ...string[]]</span>

nonEmptyStrings<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// throws: "Array cannot be empty"</span>
nonEmptyStrings<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"Ariana Grande"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// passes</span></code></pre><p>You can optionally specify a custom error message:<pre class="language-ts"><code class="language-ts"><span class="token comment">// optional custom error message</span>
<span class="token keyword">const</span> nonEmptyStrings <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">nonempty</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  message<span class="token operator">:</span> <span class="token string">"Can't be empty!"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="minmaxlength"class="level3"><h3><code>.min/.max/.length</code></h3><pre class="language-ts"><code class="language-ts">z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">min</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// must contain 5 or more items</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">max</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// must contain 5 or fewer items</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">length</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// must contain 5 items exactly</span></code></pre><p>Unlike <code>.nonempty()</code> these methods do not change the inferred type.</section></section><section id="tuples"class="level2"><h2>Tuples</h2><p>Unlike arrays, tuples have a fixed number of elements and each element can have a different type.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> athleteSchema <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">tuple</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// name</span>
  z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// jersey number</span>
  z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    pointsScored<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// statistics</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Athlete</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> athleteSchema<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token comment">// type Athlete = [string, number, { pointsScored: number }]</span></code></pre><p>A variadic ("rest") argument can be added with the <code>.rest</code> method.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> variadicTuple <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">tuple</span><span class="token punctuation">(</span><span class="token punctuation">[</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">rest</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> variadicTuple<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// => [string, ...number[]];</span></code></pre></section><section id="unions"class="level2"><h2>Unions</h2><p>Zod includes a built-in <code>z.union</code> method for composing "OR" types.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> stringOrNumber <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">union</span><span class="token punctuation">(</span><span class="token punctuation">[</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

stringOrNumber<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// passes</span>
stringOrNumber<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// passes</span></code></pre><p>Zod will test the input against each of the "options" in order and return the first value that validates successfully.<p>For convenience, you can also use the <code>.or</code> method:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> stringOrNumber <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">or</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="discriminated-unions"class="level2"><h2>Discriminated unions</h2><p>A discriminated union is a union of object schemas that all share a particular key.<pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">MyUnion</span></span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">;</span> data<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">"failed"</span><span class="token punctuation">;</span> error<span class="token operator">:</span> <span class="token known-class-name class-name">Error</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Such unions can be represented with the <code>z.discriminatedUnion</code> method. This enables faster evaluation, because Zod can check the <em>discriminator key</em> (<code>status</code> in the example above) to determine which schema should be used to parse the input. This makes parsing more efficient and lets Zod report friendlier errors.<p>With the basic union method the input is tested against each of the provided "options", and in the case of invalidity, issues for all the "options" are shown in the zod error. On the other hand, the discriminated union allows for selecting just one of the "options", testing against it, and showing only the issues related to this "option".<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> myUnion <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">discriminatedUnion</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
  z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span> status<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">literal</span><span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span> status<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">literal</span><span class="token punctuation">(</span><span class="token string">"failed"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> error<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">instanceof</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Error</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

myUnion<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token string">"yippie ki yay"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="records"class="level2"><h2>Records</h2><p>Record schemas are used to validate types such as <code>{ [k: string]: number }</code>.<p>If you want to validate the <em>values</em> of an object against some schema but don't care about the keys, use <code>z.record(valueType)</code>:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token maybe-class-name">NumberCache</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">record</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NumberCache</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> <span class="token maybe-class-name">NumberCache</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token comment">// => { [k: string]: number }</span></code></pre><p>This is particularly useful for storing or caching items by ID.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> userStore<span class="token operator">:</span> <span class="token maybe-class-name">UserStore</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

userStore<span class="token punctuation">[</span><span class="token string">"77d2586b-9e8e-4ecf-8b21-ea7e0530eadd"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"Carlotta"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// passes</span>

userStore<span class="token punctuation">[</span><span class="token string">"77d2586b-9e8e-4ecf-8b21-ea7e0530eadd"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  whatever<span class="token operator">:</span> <span class="token string">"Ice cream sundae"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// TypeError</span></code></pre><section id="record-key-type"class="level3"><h3>Record key type</h3><p>If you want to validate both the keys and the values, use <code>z.record(keyType, valueType)</code>:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token maybe-class-name">NoEmptyKeysSchema</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">record</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">min</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">NoEmptyKeysSchema</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => { 'count': 1 }</span>
<span class="token maybe-class-name">NoEmptyKeysSchema</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">""</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// fails</span></code></pre><p><em>(Notice how when passing two arguments, <code>valueType</code> is the second argument)</em><p><strong>A note on numerical keys</strong><p>While <code>z.record(keyType, valueType)</code> is able to accept numerical key types and TypeScript's built-in Record type is <code>Record&#x3C;KeyType, ValueType></code>, it's hard to represent the TypeScript type <code>Record&#x3C;number, any></code> in Zod.<p>As it turns out, TypeScript's behavior surrounding <code>[k: number]</code> is a little unintuitive:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> testMap<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>k<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">"one"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> testMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">typeof</span> key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// prints: `1: string`</span></code></pre><p>As you can see, JavaScript automatically casts all object keys to strings under the hood. Since Zod is trying to bridge the gap between static and runtime types, it doesn't make sense to provide a way of creating a record schema with numerical keys, since there's no such thing as a numerical key in runtime JavaScript.</section></section><section id="maps"class="level2"><h2>Maps</h2><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> stringNumberMap <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">StringNumberMap</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> stringNumberMap<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token comment">// type StringNumberMap = Map&#x3C;string, number></span></code></pre></section><section id="sets"class="level2"><h2>Sets</h2><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> numberSet <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NumberSet</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> numberSet<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token comment">// type NumberSet = Set&#x3C;number></span></code></pre><p>Set schemas can be further contrainted with the following utility methods.<pre class="language-ts"><code class="language-ts">z<span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">nonempty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// must contain at least one item</span>
z<span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">min</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// must contain 5 or more items</span>
z<span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">max</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// must contain 5 or fewer items</span>
z<span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// must contain 5 items exactly</span></code></pre></section><section id="intersections"class="level2"><h2>Intersections</h2><p>Intersections are useful for creating "logical AND" types. This is useful for intersecting two object types.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token maybe-class-name">Person</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">Employee</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  role<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">EmployedPerson</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">intersection</span><span class="token punctuation">(</span><span class="token maybe-class-name">Person</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Employee</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// equivalent to:</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">EmployedPerson</span> <span class="token operator">=</span> <span class="token maybe-class-name">Person</span><span class="token punctuation">.</span><span class="token method function property-access">and</span><span class="token punctuation">(</span><span class="token maybe-class-name">Employee</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Though in many cases, it is recommended to use <code>A.merge(B)</code> to merge two objects. The <code>.merge</code> method returns a new <code>ZodObject</code> instance, whereas <code>A.and(B)</code> returns a less useful <code>ZodIntersection</code> instance that lacks common object methods like <code>pick</code> and <code>omit</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> a <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">union</span><span class="token punctuation">(</span><span class="token punctuation">[</span>z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">union</span><span class="token punctuation">(</span><span class="token punctuation">[</span>z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> z<span class="token punctuation">.</span><span class="token method function property-access">boolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">intersection</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">c</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> c<span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// => number</span></code></pre></section><section id="recursive-types"class="level2"><h2>Recursive types</h2><p>You can define a recursive schema in Zod, but because of a limitation of TypeScript, their type can't be statically inferred. Instead you'll need to define the type definition manually, and provide it to Zod as a "type hint".<pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">Category</span></span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  subcategories<span class="token operator">:</span> <span class="token maybe-class-name">Category</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// cast to z.ZodType&#x3C;Category></span>
<span class="token keyword">const</span> <span class="token maybe-class-name">Category</span><span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ZodType</span></span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Category</span><span class="token operator">></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span>
  z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    subcategories<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">array</span><span class="token punctuation">(</span><span class="token maybe-class-name">Category</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token maybe-class-name">Category</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"People"</span><span class="token punctuation">,</span>
  subcategories<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">"Politicians"</span><span class="token punctuation">,</span>
      subcategories<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"Presidents"</span><span class="token punctuation">,</span> subcategories<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// passes</span></code></pre><p>Unfortunately this code is a bit duplicative, since you're declaring the types twice: once in the interface and again in the Zod definition.<section id="json-type"class="level3"><h3>JSON type</h3><p>If you want to validate any JSON value, you can use the snippet below.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> literalSchema <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">union</span><span class="token punctuation">(</span><span class="token punctuation">[</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> z<span class="token punctuation">.</span><span class="token method function property-access">boolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> z<span class="token punctuation">.</span><span class="token keyword null nil">null</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Literal</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> literalSchema<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Json</span></span> <span class="token operator">=</span> <span class="token maybe-class-name">Literal</span> <span class="token operator">|</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token maybe-class-name">Json</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token maybe-class-name">Json</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> jsonSchema<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ZodType</span></span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Json</span><span class="token operator">></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span>
  z<span class="token punctuation">.</span><span class="token method function property-access">union</span><span class="token punctuation">(</span><span class="token punctuation">[</span>literalSchema<span class="token punctuation">,</span> z<span class="token punctuation">.</span><span class="token method function property-access">array</span><span class="token punctuation">(</span>jsonSchema<span class="token punctuation">)</span><span class="token punctuation">,</span> z<span class="token punctuation">.</span><span class="token method function property-access">record</span><span class="token punctuation">(</span>jsonSchema<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

jsonSchema<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Thanks to <a href="https://github.com/ggoodman">ggoodman</a> for suggesting this.</section><section id="cyclical-objects"class="level3"><h3>Cyclical objects</h3><p>Despite supporting recursive schemas, passing cyclical data into Zod will cause an infinite loop.</section></section><section id="promises"class="level2"><h2>Promises</h2><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> numberPromise <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">promise</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>"Parsing" works a little differently with promise schemas. Validation happens in two parts:<ol><li>Zod synchronously checks that the input is an instance of Promise (i.e. an object with <code>.then</code> and <code>.catch</code> methods.).<li>Zod uses <code>.then</code> to attach an additional validation step onto the existing Promise. You'll have to use <code>.catch</code> on the returned Promise to handle validation failures.</ol><pre class="language-ts"><code class="language-ts">numberPromise<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"tuna"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ZodError: Non-Promise type: string</span>

numberPromise<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Promise</span><span class="token punctuation">.</span><span class="token method function property-access">resolve</span><span class="token punctuation">(</span><span class="token string">"tuna"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// => Promise&#x3C;number></span>

<span class="token keyword">const</span> <span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">await</span> numberPromise<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Promise</span><span class="token punctuation">.</span><span class="token method function property-access">resolve</span><span class="token punctuation">(</span><span class="token string">"tuna"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ZodError: Non-number type: string</span>

  <span class="token keyword control-flow">await</span> numberPromise<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Promise</span><span class="token punctuation">.</span><span class="token method function property-access">resolve</span><span class="token punctuation">(</span><span class="token number">3.14</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// => 3.14</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></section><section id="instanceof"class="level2"><h2>Instanceof</h2><p>You can use <code>z.instanceof</code> to check that the input is an instance of a class. This is useful to validate inputs against classes that are exported from third-party libraries.<pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Test</span></span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">TestSchema</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">instanceof</span><span class="token punctuation">(</span><span class="token maybe-class-name">Test</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> blob<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token string">"whatever"</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">TestSchema</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">Test</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// passes</span>
<span class="token maybe-class-name">TestSchema</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"blob"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// throws</span></code></pre></section><section id="functions"class="level2"><h2>Functions</h2><p>Zod also lets you define "function schemas". This makes it easy to validate the inputs and outputs of a function without intermixing your validation code and "business logic".<p>You can create a function schema with <code>z.function(args, returnType)</code> .<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> myFunction <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">myFunction</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> myFunction<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token comment">// => ()=>unknown</span></code></pre><p>Define inputs and outputs.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> myFunction <span class="token operator">=</span> z
  <span class="token punctuation">.</span><span class="token method function property-access">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">args</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// accepts an arbitrary number of arguments</span>
  <span class="token punctuation">.</span><span class="token method function property-access">returns</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">boolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">myFunction</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> myFunction<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token comment">// => (arg0: string, arg1: number)=>boolean</span></code></pre><p>Function schemas have an <code>.implement()</code> method which accepts a function and returns a new function that automatically validates its inputs and outputs.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> trimmedLength <span class="token operator">=</span> z
  <span class="token punctuation">.</span><span class="token method function property-access">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">args</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// accepts an arbitrary number of arguments</span>
  <span class="token punctuation">.</span><span class="token method function property-access">returns</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">implement</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// TypeScript knows x is a string!</span>
    <span class="token keyword control-flow">return</span> x<span class="token punctuation">.</span><span class="token method function property-access">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">trimmedLength</span><span class="token punctuation">(</span><span class="token string">"sandwich"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => 8</span>
<span class="token function">trimmedLength</span><span class="token punctuation">(</span><span class="token string">" asdf "</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => 4</span></code></pre><p>If you only care about validating inputs, just don't call the <code>.returns()</code> method. The output type will be inferred from the implementation.<blockquote><p>You can use the special <code>z.void()</code> option if your function doesn't return anything. This will let Zod properly infer the type of void-returning functions. (Void-returning functions actually return undefined.)</blockquote><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> myFunction <span class="token operator">=</span> z
  <span class="token punctuation">.</span><span class="token method function property-access">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">args</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">implement</span><span class="token punctuation">(</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">[</span>arg<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

myFunction<span class="token punctuation">;</span> <span class="token comment">// (arg: string)=>number[]</span></code></pre><p>Extract the input and output schemas from a function schema.<pre class="language-ts"><code class="language-ts">myFunction<span class="token punctuation">.</span><span class="token method function property-access">parameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// => ZodTuple&#x3C;[ZodString, ZodNumber]></span>

myFunction<span class="token punctuation">.</span><span class="token method function property-access">returnType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// => ZodBoolean</span></code></pre></section><section id="preprocess"class="level2"><h2>Preprocess</h2><blockquote><p>Zod now supports primitive coercion without the need for <code>.preprocess()</code>. See the <a href="#coercion-for-primitives">coercion docs</a> for more information.</blockquote><p>Typically Zod operates under a "parse then transform" paradigm. Zod validates the input first, then passes it through a chain of transformation functions. (For more information about transforms, read the <a href="#transform">.transform docs</a>.)<p>But sometimes you want to apply some transform to the input <em>before</em> parsing happens. A common use case: type coercion. Zod enables this with the <code>z.preprocess()</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> castToString <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">preprocess</span><span class="token punctuation">(</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token known-class-name class-name">String</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">,</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>This returns a <code>ZodEffects</code> instance. <code>ZodEffects</code> is a wrapper class that contains all logic pertaining to preprocessing, refinements, and transforms.</section><section id="custom-schemas"class="level2"><h2>Custom schemas</h2><p>You can create a Zod schema for any TypeScript type by using <code>z.custom()</code>. This is useful for creating schemas for types that are not supported by Zod out of the box, such as template string literals.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> px <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">custom</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token builtin">number</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d+px$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token method function property-access">test</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
px<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"100px"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// pass</span>
px<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"100vw"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// fail</span></code></pre><p>If you don't provide a validation function, Zod will allow any value. This can be dangerous!<pre class="language-ts"><code class="language-ts">z<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">custom</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token punctuation">{</span> arg<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// performs no validation</span></code></pre></section><section id="schema-methods"class="level2"><h2>Schema methods</h2><p>All Zod schemas contain certain methods.<section id="parse"class="level3"><h3><code>.parse</code></h3><p><code>.parse(data: unknown): T</code><p>Given any Zod schema, you can call its <code>.parse</code> method to check <code>data</code> is valid. If it is, a value is returned with full type information! Otherwise, an error is thrown.<blockquote><p>IMPORTANT: The value returned by <code>.parse</code> is a <em>deep clone</em> of the variable you passed in.</blockquote><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> stringSchema <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

stringSchema<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"fish"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => returns "fish"</span>
stringSchema<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// throws error</span></code></pre></section><section id="parseasync"class="level3"><h3><code>.parseAsync</code></h3><p><code>.parseAsync(data:unknown): Promise&#x3C;T></code><p>If you use asynchronous <a href="#refine">refinements</a> or <a href="#transform">transforms</a> (more on those later), you'll need to use <code>.parseAsync</code><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> stringSchema <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">refine</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token arrow operator">=></span> val<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">&#x3C;=</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword control-flow">await</span> stringSchema<span class="token punctuation">.</span><span class="token method function property-access">parseAsync</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => returns "hello"</span>
<span class="token keyword control-flow">await</span> stringSchema<span class="token punctuation">.</span><span class="token method function property-access">parseAsync</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => throws error</span></code></pre></section><section id="safeparse"class="level3"><h3><code>.safeParse</code></h3><p><code>.safeParse(data:unknown): { success: true; data: T; } | { success: false; error: ZodError; }</code><p>If you don't want Zod to throw errors when validation fails, use <code>.safeParse</code>. This method returns an object containing either the successfully parsed data or a ZodError instance containing detailed information about the validation problems.<pre class="language-ts"><code class="language-ts">stringSchema<span class="token punctuation">.</span><span class="token method function property-access">safeParse</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// => { success: false; error: ZodError }</span>

stringSchema<span class="token punctuation">.</span><span class="token method function property-access">safeParse</span><span class="token punctuation">(</span><span class="token string">"billie"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// => { success: true; data: 'billie' }</span></code></pre><p>The result is a <em>discriminated union</em> so you can handle errors very conveniently:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> result <span class="token operator">=</span> stringSchema<span class="token punctuation">.</span><span class="token method function property-access">safeParse</span><span class="token punctuation">(</span><span class="token string">"billie"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span><span class="token property-access">success</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// handle error then return</span>
  result<span class="token punctuation">.</span><span class="token property-access">error</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// do something</span>
  result<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section><section id="safeparseasync"class="level3"><h3><code>.safeParseAsync</code></h3><blockquote><p>Alias: <code>.spa</code></blockquote><p>An asynchronous version of <code>safeParse</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword control-flow">await</span> stringSchema<span class="token punctuation">.</span><span class="token method function property-access">safeParseAsync</span><span class="token punctuation">(</span><span class="token string">"billie"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>For convenience, this has been aliased to <code>.spa</code>:<pre class="language-ts"><code class="language-ts"><span class="token keyword control-flow">await</span> stringSchema<span class="token punctuation">.</span><span class="token method function property-access">spa</span><span class="token punctuation">(</span><span class="token string">"billie"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="refine"class="level3"><h3><code>.refine</code></h3><p><code>.refine(validator: (data:T)=>any, params?: RefineParams)</code><p>Zod lets you provide custom validation logic via <em>refinements</em>. (For advanced features like creating multiple issues and customizing error codes, see <a href="#superrefine"><code>.superRefine</code></a>.)<p>Zod was designed to mirror TypeScript as closely as possible. But there are many so-called "refinement types" you may wish to check for that can't be represented in TypeScript's type system. For instance: checking that a number is an integer or that a string is a valid email address.<p>For example, you can define a custom validation check on <em>any</em> Zod schema with <code>.refine</code> :<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> myString <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">refine</span><span class="token punctuation">(</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token arrow operator">=></span> val<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">&#x3C;=</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  message<span class="token operator">:</span> <span class="token string">"String can't be more than 255 characters"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>⚠️ Refinement functions should not throw. Instead they should return a falsy value to signal failure.</blockquote><section id="arguments"class="level4"><h4>Arguments</h4><p>As you can see, <code>.refine</code> takes two arguments.<ol><li>The first is the validation function. This function takes one input (of type <code>T</code> — the inferred type of the schema) and returns <code>any</code>. Any truthy value will pass validation. (Prior to <a href="mailto:zod@1.6.2">zod@1.6.2</a> the validation function had to return a boolean.)<li>The second argument accepts some options. You can use this to customize certain error-handling behavior:</ol><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">RefineParams</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// override error message</span>
  message<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  <span class="token comment">// appended to error path</span>
  path<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">// params object you can use to customize message</span>
  <span class="token comment">// in error map</span>
  params<span class="token operator">?</span><span class="token operator">:</span> object<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>For advanced cases, the second argument can also be a function that returns <code>RefineParams</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> longString <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">refine</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token arrow operator">=></span> val<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>val<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is not more than 10 characters</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="customize-error-path"class="level4"><h4>Customize error path</h4><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> passwordForm <span class="token operator">=</span> z
  <span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    password<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    confirm<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">refine</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token arrow operator">=></span> data<span class="token punctuation">.</span><span class="token property-access">password</span> <span class="token operator">===</span> data<span class="token punctuation">.</span><span class="token property-access">confirm</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    message<span class="token operator">:</span> <span class="token string">"Passwords don't match"</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"confirm"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// path of error</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

passwordForm<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token punctuation">{</span> password<span class="token operator">:</span> <span class="token string">"asdf"</span><span class="token punctuation">,</span> confirm<span class="token operator">:</span> <span class="token string">"qwer"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Because you provided a <code>path</code> parameter, the resulting error will be:<pre class="language-ts"><code class="language-ts"><span class="token known-class-name class-name">ZodError</span> <span class="token punctuation">{</span>
  issues<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token string-property property">"code"</span><span class="token operator">:</span> <span class="token string">"custom"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"path"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"confirm"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">"message"</span><span class="token operator">:</span> <span class="token string">"Passwords don't match"</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></section><section id="asynchronous-refinements"class="level4"><h4>Asynchronous refinements</h4><p>Refinements can also be async:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> userId <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">refine</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// verify that ID exists in database</span>
  <span class="token keyword control-flow">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>⚠️ If you use async refinements, you must use the <code>.parseAsync</code> method to parse data! Otherwise Zod will throw an error.</blockquote></section><section id="relationship-to-transforms"class="level4"><h4>Relationship to transforms</h4><p>Transforms and refinements can be interleaved:<pre class="language-ts"><code class="language-ts">z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">transform</span><span class="token punctuation">(</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token arrow operator">=></span> val<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">refine</span><span class="token punctuation">(</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token arrow operator">=></span> val <span class="token operator">></span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section></section><section id="superrefine"class="level3"><h3><code>.superRefine</code></h3><p>The <code>.refine</code> method is actually syntactic sugar atop a more versatile (and verbose) method called <code>superRefine</code>. Here's an example:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token maybe-class-name">Strings</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">array</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">superRefine</span><span class="token punctuation">(</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">></span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span><span class="token method function property-access">addIssue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      code<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ZodIssueCode</span></span><span class="token punctuation">.</span><span class="token property-access">too_big</span><span class="token punctuation">,</span>
      maximum<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">"array"</span><span class="token punctuation">,</span>
      inclusive<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token string">"Too many items 😡"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">!==</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Set</span></span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">size</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span><span class="token method function property-access">addIssue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      code<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ZodIssueCode</span></span><span class="token punctuation">.</span><span class="token property-access">custom</span><span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">No duplicates allowed.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>You can add as many issues as you like. If <code>ctx.addIssue</code> is <em>not</em> called during the execution of the function, validation passes.<p>Normally refinements always create issues with a <code>ZodIssueCode.custom</code> error code, but with <code>superRefine</code> you can create any issue of any code. Each issue code is described in detail in the Error Handling guide: <a href="ERROR_HANDLING.md">ERROR_HANDLING.md</a>.<section id="abort-early"class="level4"><h4>Abort early</h4><p>By default, parsing will continue even after a refinement check fails. For instance, if you chain together multiple refinements, they will all be executed. However, it may be desirable to <em>abort early</em> to prevent later refinements from being executed. To achieve this, pass the <code>fatal</code> flag to <code>ctx.addIssue</code> and return <code>z.NEVER</code>.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> schema <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">superRefine</span><span class="token punctuation">(</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>val <span class="token operator">&#x3C;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span><span class="token method function property-access">addIssue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      code<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ZodIssueCode</span></span><span class="token punctuation">.</span><span class="token property-access">custom</span><span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token string">"should be >= 10"</span><span class="token punctuation">,</span>
      fatal<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword control-flow">return</span> z<span class="token punctuation">.</span><span class="token constant">NEVER</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>val <span class="token operator">!==</span> <span class="token number">12</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span><span class="token method function property-access">addIssue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      code<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ZodIssueCode</span></span><span class="token punctuation">.</span><span class="token property-access">custom</span><span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token string">"should be twelve"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="type-refinements"class="level4"><h4>Type refinements</h4><p>If you provide a <a href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#using-type-predicates">type predicate</a> to <code>.refine()</code> or <code>.superRefine()</code>, the resulting type will be narrowed down to your predicate's type. This is useful if you are mixing multiple chained refinements and transformations:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> schema <span class="token operator">=</span> z
  <span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    first<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    second<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">superRefine</span><span class="token punctuation">(</span><span class="token punctuation">(</span>arg<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span><span class="token operator">:</span> arg <span class="token keyword">is</span> <span class="token punctuation">{</span> first<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> second<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ctx<span class="token punctuation">.</span><span class="token method function property-access">addIssue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        code<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ZodIssueCode</span></span><span class="token punctuation">.</span><span class="token property-access">custom</span><span class="token punctuation">,</span> <span class="token comment">// customize your issue</span>
        message<span class="token operator">:</span> <span class="token string">"object should exist"</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword control-flow">return</span> z<span class="token punctuation">.</span><span class="token constant">NEVER</span><span class="token punctuation">;</span> <span class="token comment">// The return value is not used, but we need to return something to satisfy the typing</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// here, TS knows that arg is not null</span>
  <span class="token punctuation">.</span><span class="token method function property-access">refine</span><span class="token punctuation">(</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token arrow operator">=></span> arg<span class="token punctuation">.</span><span class="token property-access">first</span> <span class="token operator">===</span> <span class="token string">"bob"</span><span class="token punctuation">,</span> <span class="token string">"`first` is not `bob`!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>⚠️ You <strong>must</strong> use <code>ctx.addIssue()</code> instead of returning a boolean value to indicate whether the validation passes. If <code>ctx.addIssue</code> is <em>not</em> called during the execution of the function, validation passes.</blockquote></section></section><section id="transform"class="level3"><h3><code>.transform</code></h3><p>To transform data after parsing, use the <code>transform</code> method.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> stringToNumber <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">transform</span><span class="token punctuation">(</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token arrow operator">=></span> val<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

stringToNumber<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"string"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => 6</span></code></pre><section id="chaining-order"class="level4"><h4>Chaining order</h4><p>Note that <code>stringToNumber</code> above is an instance of the <code>ZodEffects</code> subclass. It is NOT an instance of <code>ZodString</code>. If you want to use the built-in methods of <code>ZodString</code> (e.g. <code>.email()</code>) you must apply those methods <em>before</em> any transforms.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> emailToDomain <span class="token operator">=</span> z
  <span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">email</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">transform</span><span class="token punctuation">(</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token arrow operator">=></span> val<span class="token punctuation">.</span><span class="token method function property-access">split</span><span class="token punctuation">(</span><span class="token string">"@"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

emailToDomain<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"colinhacks@example.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => example.com</span></code></pre></section><section id="validating-during-transform"class="level4"><h4>Validating during transform</h4><p>The <code>.transform</code> method can simultaneously validate and transform the value. This is often simpler and less duplicative than chaining <code>transform</code> and <code>refine</code>.<p>As with <code>.superRefine</code>, the transform function receives a <code>ctx</code> object with a <code>addIssue</code> method that can be used to register validation issues.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> numberInString <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">transform</span><span class="token punctuation">(</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> parsed <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>parsed<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span><span class="token method function property-access">addIssue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      code<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ZodIssueCode</span></span><span class="token punctuation">.</span><span class="token property-access">custom</span><span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token string">"Not a number"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// This is a special symbol you can use to</span>
    <span class="token comment">// return early from the transform function.</span>
    <span class="token comment">// It has type `never` so it does not affect the</span>
    <span class="token comment">// inferred return type.</span>
    <span class="token keyword control-flow">return</span> z<span class="token punctuation">.</span><span class="token constant">NEVER</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> parsed<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="relationship-to-refinements"class="level4"><h4>Relationship to refinements</h4><p>Transforms and refinements can be interleaved. These will be executed in the order they are declared.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> nameToGreeting <span class="token operator">=</span> z
  <span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">transform</span><span class="token punctuation">(</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token arrow operator">=></span> val<span class="token punctuation">.</span><span class="token method function property-access">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">refine</span><span class="token punctuation">(</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token arrow operator">=></span> val<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">></span> <span class="token number">15</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">transform</span><span class="token punctuation">(</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>val<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">refine</span><span class="token punctuation">(</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token arrow operator">=></span> val<span class="token punctuation">.</span><span class="token method function property-access">indexOf</span><span class="token punctuation">(</span><span class="token string">"!"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="async-transforms"class="level4"><h4>Async transforms</h4><p>Transforms can also be async.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token maybe-class-name">IdToUser</span> <span class="token operator">=</span> z
  <span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">uuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">transform</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword control-flow">await</span> <span class="token function">getUserById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>⚠️ If your schema contains asynchronous transforms, you must use .parseAsync() or .safeParseAsync() to parse data. Otherwise Zod will throw an error.</blockquote></section></section><section id="default"class="level3"><h3><code>.default</code></h3><p>You can use transforms to implement the concept of "default values" in Zod.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> stringWithDefault <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword module">default</span><span class="token punctuation">(</span><span class="token string">"tuna"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

stringWithDefault<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token keyword nil">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => "tuna"</span></code></pre><p>Optionally, you can pass a function into <code>.default</code> that will be re-executed whenever a default value needs to be generated:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> numberWithRandomDefault <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword module">default</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token property-access">random</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

numberWithRandomDefault<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token keyword nil">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => 0.4413456736055323</span>
numberWithRandomDefault<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token keyword nil">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => 0.1871840107401901</span>
numberWithRandomDefault<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token keyword nil">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => 0.7223408162401552</span></code></pre><p>Conceptually, this is how Zod processes default values:<ol><li>If the input is <code>undefined</code>, the default value is returned<li>Otherwise, the data is parsed using the base schema</ol></section><section id="catch"class="level3"><h3><code>.catch</code></h3><p>Use <code>.catch()</code> to provide a "catch value" to be returned in the event of a parsing error.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> numberWithCatch <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword control-flow">catch</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

numberWithCatch<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => 5</span>
numberWithCatch<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"tuna"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => 42</span></code></pre><p>Optionally, you can pass a function into <code>.catch</code> that will be re-executed whenever a default value needs to be generated:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> numberWithRandomCatch <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword control-flow">catch</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token property-access">random</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

numberWithRandomDefault<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"sup"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => 0.4413456736055323</span>
numberWithRandomDefault<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"sup"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => 0.1871840107401901</span>
numberWithRandomDefault<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token string">"sup"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// => 0.7223408162401552</span></code></pre><p>Conceptually, this is how Zod processes "catch values":<ol><li>The data is parsed using the base schema<li>If the parsing fails, the "catch value" is returned</ol></section><section id="optional"class="level3"><h3><code>.optional</code></h3><p>A convenience method that returns an optional version of a schema.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> optionalString <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">optional</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string | undefined</span>

<span class="token comment">// equivalent to</span>
z<span class="token punctuation">.</span><span class="token method function property-access">optional</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="nullable"class="level3"><h3><code>.nullable</code></h3><p>A convenience method that returns a nullable version of a schema.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> nullableString <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string | null</span>

<span class="token comment">// equivalent to</span>
z<span class="token punctuation">.</span><span class="token method function property-access">nullable</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="nullish"class="level3"><h3><code>.nullish</code></h3><p>A convenience method that returns a "nullish" version of a schema. Nullish schemas will accept both <code>undefined</code> and <code>null</code>. Read more about the concept of "nullish" <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#nullish-coalescing">in the TypeScript 3.7 release notes</a>.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> nullishString <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">nullish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string | null | undefined</span>

<span class="token comment">// equivalent to</span>
z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">optional</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="array"class="level3"><h3><code>.array</code></h3><p>A convenience method that returns an array schema for the given type:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> stringArray <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string[]</span>

<span class="token comment">// equivalent to</span>
z<span class="token punctuation">.</span><span class="token method function property-access">array</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="promise"class="level3"><h3><code>.promise</code></h3><p>A convenience method for promise types:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> stringPromise <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Promise&#x3C;string></span>

<span class="token comment">// equivalent to</span>
z<span class="token punctuation">.</span><span class="token method function property-access">promise</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="or"class="level3"><h3><code>.or</code></h3><p>A convenience method for union types.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> stringOrNumber <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">or</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string | number</span>

<span class="token comment">// equivalent to</span>
z<span class="token punctuation">.</span><span class="token method function property-access">union</span><span class="token punctuation">(</span><span class="token punctuation">[</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="and"class="level3"><h3><code>.and</code></h3><p>A convenience method for creating intersection types.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> nameAndAge <span class="token operator">=</span> z
  <span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">and</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span> age<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { name: string } &#x26; { age: number }</span>

<span class="token comment">// equivalent to</span>
z<span class="token punctuation">.</span><span class="token method function property-access">intersection</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span> age<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="brand"class="level3"><h3><code>.brand</code></h3><p><code>.brand&#x3C;T>() => ZodBranded&#x3C;this, B></code><p>TypeScript's type system is structural, which means that any two types that are structurally equivalent are considered the same.<pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Cat</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Dog</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">petCat</span> <span class="token operator">=</span> <span class="token punctuation">(</span>cat<span class="token operator">:</span> <span class="token maybe-class-name">Cat</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fido<span class="token operator">:</span> <span class="token maybe-class-name">Dog</span> <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"fido"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">petCat</span><span class="token punctuation">(</span>fido<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// works fine</span></code></pre><p>In some cases, its can be desirable to simulate <em>nominal typing</em> inside TypeScript. For instance, you may wish to write a function that only accepts an input that has been validated by Zod. This can be achieved with <em>branded types</em> (AKA <em>opaque types</em>).<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token maybe-class-name">Cat</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">brand</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token string">"Cat"</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Cat</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> <span class="token maybe-class-name">Cat</span><span class="token operator">></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">petCat</span> <span class="token operator">=</span> <span class="token punctuation">(</span>cat<span class="token operator">:</span> <span class="token maybe-class-name">Cat</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// this works</span>
<span class="token keyword">const</span> simba <span class="token operator">=</span> <span class="token maybe-class-name">Cat</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"simba"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">petCat</span><span class="token punctuation">(</span>simba<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// this doesn't</span>
<span class="token function">petCat</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"fido"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Under the hood, this works by attaching a "brand" to the inferred type using an intersection type. This way, plain/unbranded data structures are no longer assignable to the inferred type of the schema.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token maybe-class-name">Cat</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">brand</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token string">"Cat"</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Cat</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> <span class="token maybe-class-name">Cat</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token comment">// {name: string} &#x26; {[symbol]: "Cat"}</span></code></pre><p>Note that branded types do not affect the runtime result of <code>.parse</code>. It is a static-only construct.</section></section><section id="guides-and-concepts"class="level2"><h2>Guides and concepts</h2><section id="type-inference"class="level3"><h3>Type inference</h3><p>You can extract the TypeScript type of any schema with <code>z.infer&#x3C;typeof mySchema></code> .<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token constant">A</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> <span class="token constant">A</span><span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// string</span>

<span class="token keyword">const</span> u<span class="token operator">:</span> <span class="token constant">A</span> <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span> <span class="token comment">// TypeError</span>
<span class="token keyword">const</span> u<span class="token operator">:</span> <span class="token constant">A</span> <span class="token operator">=</span> <span class="token string">"asdf"</span><span class="token punctuation">;</span> <span class="token comment">// compiles</span></code></pre><p><strong>What about transforms?</strong><p>In reality each Zod schema internally tracks <strong>two</strong> types: an input and an output. For most schemas (e.g. <code>z.string()</code>) these two are the same. But once you add transforms into the mix, these two values can diverge. For instance <code>z.string().transform(val => val.length)</code> has an input of <code>string</code> and an output of <code>number</code>.<p>You can separately extract the input and output types like so:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> stringToNumber <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">transform</span><span class="token punctuation">(</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token arrow operator">=></span> val<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ⚠️ Important: z.infer returns the OUTPUT type!</span>
<span class="token keyword">type</span> <span class="token class-name">input</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">input</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> stringToNumber<span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name">output</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">output</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> stringToNumber<span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// number</span>

<span class="token comment">// equivalent to z.output!</span>
<span class="token keyword">type</span> <span class="token class-name">inferred</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> stringToNumber<span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// number</span></code></pre></section><section id="writing-generic-functions"class="level3"><h3>Writing generic functions</h3><p>When attempting to write a function that accepts a Zod schema as an input, it's common to try something like this:<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">makeSchemaOptional</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>schema<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ZodType</span></span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> schema<span class="token punctuation">.</span><span class="token method function property-access">optional</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>This approach has some issues. The <code>schema</code> variable in this function is typed as an instance of <code>ZodType</code>, which is an abstract class that all Zod schemas inherit from. This approach loses type information, namely <em>which subclass</em> the input actually is.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> arg <span class="token operator">=</span> <span class="token function">makeSchemaOptional</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
arg<span class="token punctuation">.</span><span class="token method function property-access">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>A better approach is for the generic parameter to refer to <em>the schema as a whole</em>.<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">makeSchemaOptional</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token constant">T</span> <span class="token keyword">extends</span> z<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ZodTypeAny</span></span><span class="token operator">></span></span></span><span class="token punctuation">(</span>schema<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> schema<span class="token punctuation">.</span><span class="token method function property-access">optional</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><blockquote><p><code>ZodTypeAny</code> is just a shorthand for <code>ZodType&#x3C;any, any, any></code>, a type that is broad enough to match any Zod schema.</blockquote><p>As you can see, <code>schema</code> is now fully and properly typed.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> arg <span class="token operator">=</span> <span class="token function">makeSchemaOptional</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
arg<span class="token punctuation">.</span><span class="token method function property-access">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ZodString</span></code></pre><section id="constraining-allowable-inputs"class="level4"><h4>Constraining allowable inputs</h4><p>The <code>ZodType</code> class has three generic parameters.<pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">ZodType</span><span class="token operator">&#x3C;</span>
  <span class="token maybe-class-name">Output</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token punctuation">,</span>
  <span class="token maybe-class-name">Def</span> <span class="token keyword">extends</span> <span class="token maybe-class-name">ZodTypeDef</span> <span class="token operator">=</span> <span class="token maybe-class-name">ZodTypeDef</span><span class="token punctuation">,</span>
  <span class="token maybe-class-name">Input</span> <span class="token operator">=</span> <span class="token maybe-class-name">Output</span>
<span class="token operator">></span></span> <span class="token punctuation">{</span> <span class="token spread operator">...</span> <span class="token punctuation">}</span></code></pre><p>By constraining these in your generic input, you can limit what schemas are allowable as inputs to your function:<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">makeSchemaOptional</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token constant">T</span> <span class="token keyword">extends</span> z<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ZodType</span></span><span class="token operator">&#x3C;</span><span class="token builtin">string</span><span class="token operator">>></span></span></span><span class="token punctuation">(</span>schema<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> schema<span class="token punctuation">.</span><span class="token method function property-access">optional</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">makeSchemaOptional</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// works fine</span>

<span class="token function">makeSchemaOptional</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Error: 'ZodNumber' is not assignable to parameter of type 'ZodType&#x3C;string, ZodTypeDef, string>'</span></code></pre></section></section><section id="error-handling"class="level3"><h3>Error handling</h3><p>Zod provides a subclass of Error called <code>ZodError</code>. ZodErrors contain an <code>issues</code> array containing detailed information about the validation problems.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> data <span class="token operator">=</span> z
  <span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">safeParse</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token number">12</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span><span class="token property-access">success</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  data<span class="token punctuation">.</span><span class="token property-access">error</span><span class="token punctuation">.</span><span class="token property-access">issues</span><span class="token punctuation">;</span>
  <span class="token comment">/* [
      {
        "code": "invalid_type",
        "expected": "string",
        "received": "number",
        "path": [ "name" ],
        "message": "Expected string, received number"
      }
  ] */</span>
<span class="token punctuation">}</span></code></pre><blockquote><p>For detailed information about the possible error codes and how to customize error messages, check out the dedicated error handling guide: <a href="ERROR_HANDLING.md">ERROR_HANDLING.md</a></blockquote><p>Zod's error reporting emphasizes <em>completeness</em> and <em>correctness</em>. If you are looking to present a useful error message to the end user, you should either override Zod's error messages using an error map (described in detail in the Error Handling guide) or use a third party library like <a href="https://github.com/causaly/zod-validation-error"><code>zod-validation-error</code></a></section><section id="error-formatting"class="level3"><h3>Error formatting</h3><p>You can use the <code>.format()</code> method to convert this error into a nested object.<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> data <span class="token operator">=</span> z
  <span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">safeParse</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token number">12</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span><span class="token property-access">success</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> formatted <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token property-access">error</span><span class="token punctuation">.</span><span class="token method function property-access">format</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/* {
    name: { _errors: [ 'Expected string, received number' ] }
  } */</span>

  formatted<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token operator">?.</span>_errors<span class="token punctuation">;</span>
  <span class="token comment">// => ["Expected string, received number"]</span>
<span class="token punctuation">}</span></code></pre></section></section><section id="comparison"class="level2"><h2>Comparison</h2><p>There are a handful of other widely-used validation libraries, but all of them have certain design limitations that make for a non-ideal developer experience.<section id="joi"class="level3"><h3>Joi</h3><p><a href="https://github.com/hapijs/joi">https://github.com/hapijs/joi</a><p>Doesn't support static type inference 😕</section><section id="yup"class="level3"><h3>Yup</h3><p><a href="https://github.com/jquense/yup">https://github.com/jquense/yup</a><p>Yup is a full-featured library that was implemented first in vanilla JS, and later rewritten in TypeScript.<ul><li>Supports casting and transforms<li>All object fields are optional by default<li>Missing object methods: (partial, deepPartial)<li>Missing promise schemas<li>Missing function schemas<li>Missing union &#x26; intersection schemas</ul></section><section id="io-ts"class="level3"><h3>io-ts</h3><p><a href="https://github.com/gcanti/io-ts">https://github.com/gcanti/io-ts</a><p>io-ts is an excellent library by gcanti. The API of io-ts heavily inspired the design of Zod.<p>In our experience, io-ts prioritizes functional programming purity over developer experience in many cases. This is a valid and admirable design goal, but it makes io-ts particularly hard to integrate into an existing codebase with a more procedural or object-oriented bias. For instance, consider how to define an object with optional properties in io-ts:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token operator">*</span> <span class="token keyword module">as</span> t</span> <span class="token keyword module">from</span> <span class="token string">"io-ts"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">A</span> <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token method function property-access">type</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  foo<span class="token operator">:</span> t<span class="token punctuation">.</span><span class="token property-access">string</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">B</span> <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token method function property-access">partial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  bar<span class="token operator">:</span> t<span class="token punctuation">.</span><span class="token property-access">number</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">C</span> <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token method function property-access">intersection</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">TypeOf</span></span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> <span class="token constant">C</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token comment">// returns { foo: string; bar?: number | undefined }</span></code></pre><p>You must define the required and optional props in separate object validators, pass the optionals through <code>t.partial</code> (which marks all properties as optional), then combine them with <code>t.intersection</code> .<p>Consider the equivalent in Zod:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token constant">C</span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token method function property-access">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  foo<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  bar<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token method function property-access">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">optional</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token property-access">infer</span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> <span class="token constant">C</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token comment">// returns { foo: string; bar?: number | undefined }</span></code></pre><p>This more declarative API makes schema definitions vastly more concise.<p><code>io-ts</code> also requires the use of gcanti's functional programming library <code>fp-ts</code> to parse results and handle errors. This is another fantastic resource for developers looking to keep their codebase strictly functional. But depending on <code>fp-ts</code> necessarily comes with a lot of intellectual overhead; a developer has to be familiar with functional programming concepts and the <code>fp-ts</code> nomenclature to use the library.<ul><li>Supports codecs with serialization &#x26; deserialization transforms<li>Supports branded types<li>Supports advanced functional programming, higher-kinded types, <code>fp-ts</code> compatibility<li>Missing object methods: (pick, omit, partial, deepPartial, merge, extend)<li>Missing nonempty arrays with proper typing (<code>[T, ...T[]]</code>)<li>Missing promise schemas<li>Missing function schemas</ul></section><section id="runtypes"class="level3"><h3>Runtypes</h3><p><a href="https://github.com/pelotom/runtypes">https://github.com/pelotom/runtypes</a><p>Good type inference support, but limited options for object type masking (no <code>.pick</code> , <code>.omit</code> , <code>.extend</code> , etc.). No support for <code>Record</code> s (their <code>Record</code> is equivalent to Zod's <code>object</code> ). They DO support branded and readonly types, which Zod does not.<ul><li>Supports "pattern matching": computed properties that distribute over unions<li>Supports readonly types<li>Missing object methods: (deepPartial, merge)<li>Missing nonempty arrays with proper typing (<code>[T, ...T[]]</code>)<li>Missing promise schemas<li>Missing error customization</ul></section><section id="ow"class="level3"><h3>Ow</h3><p><a href="https://github.com/sindresorhus/ow">https://github.com/sindresorhus/ow</a><p>Ow is focused on function input validation. It's a library that makes it easy to express complicated assert statements, but it doesn't let you parse untyped data. They support a much wider variety of types; Zod has a nearly one-to-one mapping with TypeScript's type system, whereas ow lets you validate several highly-specific types out of the box (e.g. <code>int32Array</code> , see full list in their README).<p>If you want to validate function inputs, use function schemas in Zod! It's a much simpler approach that lets you reuse a function type declaration without repeating yourself (namely, copy-pasting a bunch of ow assertions at the beginning of every function). Also Zod lets you validate your return types as well, so you can be sure there won't be any unexpected data passed downstream.</section></section><section id="changelog"class="level2"><h2>Changelog</h2><p>View the changelog at <a href="CHANGELOG.md">CHANGELOG.md</a></section>