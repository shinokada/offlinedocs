<!doctype html><html lang="en"><meta charset="utf-8"><title>TypeScript 2.3</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="layout"content="docs"><meta name="permalink"content="/docs/handbook/release-notes/typescript-2-3.html"><meta name="oneline"content="TypeScript 2.3 Release Notes"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="generators-and-iteration-for-es5es3"class="level2"><h2>Generators and Iteration for ES5/ES3</h2><p><em>First some ES2016 terminology:</em><section id="iterators"class="level5"><h5>Iterators</h5><p><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-iteration">ES2015 introduced <code>Iterator</code></a>, which is an object that exposes three methods, <code>next</code>, <code>return</code>, and <code>throw</code>, as per the following interface:<pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">Iterator</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  <span class="token function">next</span><span class="token punctuation">(</span>value<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">IteratorResult</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span><span class="token operator">?</span><span class="token punctuation">(</span>value<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">IteratorResult</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">throw</span><span class="token operator">?</span><span class="token punctuation">(</span>e<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">IteratorResult</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>This kind of iterator is useful for iterating over synchronously available values, such as the elements of an Array or the keys of a Map. An object that supports iteration is said to be "iterable" if it has a <code>Symbol.iterator</code> method that returns an <code>Iterator</code> object.<p>The Iterator protocol also defines the target of some of the ES2015 features like <code>for..of</code> and spread operator and the array rest in destructuring assignmnets.</section><section id="generators"class="level5"><h5>Generators</h5><p><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-generatorfunction-objects">ES2015 also introduced "Generators"</a>, which are functions that can be used to yield partial computation results via the <code>Iterator</code> interface and the <code>yield</code> keyword. Generators can also internally delegate calls to another iterable through <code>yield *</code>. For example:<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">yield</span><span class="token operator">*</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section><section id="new---downleveliteration"class="level5"><h5>New <code>--downlevelIteration</code></h5><p>Previously generators were only supported if the target is ES6/ES2015 or later. Moreover, constructs that operate on the Iterator protocol, e.g. <code>for..of</code> were only supported if they operate on arrays for targets below ES6/ES2015.<p>TypeScript 2.3 adds full support for generators and the Iterator protocol for ES3 and ES5 targets with <a href="/tsconfig#downlevelIteration"><code>downlevelIteration</code></a> flag.<p>With <a href="/tsconfig#downlevelIteration"><code>downlevelIteration</code></a>, the compiler uses new type check and emit behavior that attempts to call a <code>[Symbol.iterator]()</code> method on the iterated object if it is found, and creates a synthetic array iterator over the object if it is not.<blockquote><p>Please note that this requires a native <code>Symbol.iterator</code> or <code>Symbol.iterator</code> shim at runtime for any non-array values.</blockquote><p><code>for..of</code> statements, Array Destructuring, and Spread elements in Array, Call, and New expressions support <code>Symbol.iterator</code> in ES5/E3 if available when using <a href="/tsconfig#downlevelIteration"><code>downlevelIteration</code></a>, but can be used on an Array even if it does not define <code>Symbol.iterator</code> at run time or design time.</section></section><section id="async-iteration"class="level2"><h2>Async Iteration</h2><p>TypeScript 2.3 adds support for the async iterators and generators as described by the current <a href="https://github.com/tc39/proposal-async-iteration">TC39 proposal</a>.<section id="async-iterators"class="level5"><h5>Async iterators</h5><p>The Async Iteration introduces an <code>AsyncIterator</code>, which is similar to <code>Iterator</code>. The difference lies in the fact that the <code>next</code>, <code>return</code>, and <code>throw</code> methods of an <code>AsyncIterator</code> return a <code>Promise</code> for the iteration result, rather than the result itself. This allows the caller to enlist in an asynchronous notification for the time at which the <code>AsyncIterator</code> has advanced to the point of yielding a value. An <code>AsyncIterator</code> has the following shape:<pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">AsyncIterator</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  <span class="token function">next</span><span class="token punctuation">(</span>value<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">IteratorResult</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">>></span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span><span class="token operator">?</span><span class="token punctuation">(</span>value<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">IteratorResult</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">>></span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">throw</span><span class="token operator">?</span><span class="token punctuation">(</span>e<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">IteratorResult</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">>></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>An object that supports async iteration is said to be "iterable" if it has a <code>Symbol.asyncIterator</code> method that returns an <code>AsyncIterator</code> object.</section><section id="async-generators"class="level5"><h5>Async Generators</h5><p>The <a href="https://github.com/tc39/proposal-async-iteration">Async Iteration proposal</a> introduces "Async Generators", which are async functions that also can be used to yield partial computation results. Async Generators can also delegate calls via <code>yield*</code> to either an iterable or async iterable:<pre class="language-ts"><code class="language-ts"><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">yield</span><span class="token operator">*</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">yield</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">yield</span> <span class="token number">4</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>As with Generators, Async Generators can only be function declarations, function expressions, or methods of classes or object literals. Arrow functions cannot be Async Generators. Async Generators require a valid, global <code>Promise</code> implementation (either native or an ES2015-compatible polyfill), in addition to a valid <code>Symbol.asyncIterator</code> reference (either a native symbol or a shim).</section><section id="the-for-await-of-statement"class="level5"><h5>The <code>for-await-of</code> Statement</h5><p>Finally, ES2015 introduced the <code>for..of</code> statement as a means of iterating over an iterable. Similarly, the Async Iteration proposal introduces the <code>for..await..of</code> statement to iterate over an async iterable:<pre class="language-ts"><code class="language-ts"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">for</span> <span class="token keyword control-flow">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> x <span class="token keyword">of</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>The <code>for..await..of</code> statement is only legal within an Async Function or Async Generator.</section><section id="caveats"class="level5"><h5>Caveats</h5><ul><li>Keep in mind that our support for async iterators relies on support for <code>Symbol.asyncIterator</code> to exist at runtime. You may need to polyfill <code>Symbol.asyncIterator</code>, which for simple purposes can be as simple as: <code>(Symbol as any).asyncIterator = Symbol.asyncIterator || Symbol.for("Symbol.asyncIterator");</code><li>You also need to include <code>esnext</code> in your <a href="/tsconfig#lib"><code>lib</code></a> option, to get the <code>AsyncIterator</code> declaration if you do not already have it.<li>Finally, if your target is ES5 or ES3, you'll also need to set the <code>--downlevelIterators</code> flag.</ul></section></section><section id="generic-parameter-defaults"class="level2"><h2>Generic parameter defaults</h2><p>TypeScript 2.3 adds support for declaring defaults for generic type parameters.<section id="example"class="level5"><h5>Example</h5><p>Consider a function that creates a new <code>HTMLElement</code>, calling it with no arguments generates a <code>Div</code>; you can optionally pass a list of children as well. Previously you would have to define it as:<pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Container</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">HTMLDivElement</span><span class="token punctuation">,</span> <span class="token maybe-class-name">HTMLDivElement</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">create</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token maybe-class-name">HTMLElement</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>element<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Container</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">create</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token maybe-class-name">HTMLElement</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token maybe-class-name">HTMLElement</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>
  element<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span>
  children<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Container</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>With generic parameter defaults we can reduce it to:<pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">create</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token maybe-class-name">HTMLElement</span> <span class="token operator">=</span> <span class="token maybe-class-name">HTMLDivElement</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token operator">=</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>
  element<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span>
  children<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">U</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Container</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>A generic parameter default follows the following rules:<ul><li>A type parameter is deemed optional if it has a default.<li>Required type parameters must not follow optional type parameters.<li>Default types for a type parameter must satisfy the constraint for the type parameter, if it exists.<li>When specifying type arguments, you are only required to specify type arguments for the required type parameters. Unspecified type parameters will resolve to their default types.<li>If a default type is specified and inference cannot choose a candidate, the default type is inferred.<li>A class or interface declaration that merges with an existing class or interface declaration may introduce a default for an existing type parameter.<li>A class or interface declaration that merges with an existing class or interface declaration may introduce a new type parameter as long as it specifies a default.</ul></section></section><section id="new---strict-master-option"class="level2"><h2>New <code>--strict</code> master option</h2><p>New checks added to TypeScript are often off by default to avoid breaking existing projects. While avoiding breakage is a good thing, this strategy has the drawback of making it increasingly complex to choose the highest level of type safety, and doing so requires explicit opt-in action on every TypeScript release. With the <a href="/tsconfig#strict"><code>strict</code></a> option it becomes possible to choose maximum type safety with the understanding that additional errors might be reported by newer versions of the compiler as improved type checking features are added.<p>The new <a href="/tsconfig#strict"><code>strict</code></a> compiler option represents the recommended setting of a number of type checking options. Specifically, specifying <a href="/tsconfig#strict"><code>strict</code></a> corresponds to specifying all of the following options (and may in the future include more options):<ul><li><a href="/tsconfig#strictNullChecks"><code>strictNullChecks</code></a><li><a href="/tsconfig#noImplicitAny"><code>noImplicitAny</code></a><li><a href="/tsconfig#noImplicitThis"><code>noImplicitThis</code></a><li><a href="/tsconfig#alwaysStrict"><code>alwaysStrict</code></a></ul><p>In exact terms, the <a href="/tsconfig#strict"><code>strict</code></a> option sets the <em>default</em> value for the compiler options listed above. This means it is still possible to individually control the options. For example,<pre class="language-sh"><code class="language-sh">--strict --noImplicitThis false</code></pre><p>has the effect of turning on all strict options <em>except</em> the <a href="/tsconfig#noImplicitThis"><code>noImplicitThis</code></a> option. Using this scheme it is possible to express configurations consisting of <em>all</em> strict options except some explicitly listed options. In other words, it is now possible to default to the highest level of type safety but opt out of certain checks.<p>Starting with TypeScript 2.3, the default <code>tsconfig.json</code> generated by <code>tsc --init</code> includes a <code>"strict": true</code> setting in the <code>"compilerOptions"</code> section. Thus, new projects started with <code>tsc --init</code> will by default have the highest level of type safety enabled.</section><section id="enhanced---init-output"class="level2"><h2>Enhanced <code>--init</code> output</h2><p>Along with setting <a href="/tsconfig#strict"><code>strict</code></a> on by default, <code>tsc --init</code> has an enhanced output. Default <code>tsconfig.json</code> files generated by <code>tsc --init</code> now include a set of the common compiler options along with their descriptions commented out. Just un-comment the configuration you like to set to get the desired behavior; we hope the new output simplifies the setting up new projects and keeps configuration files readable as projects grow.</section><section id="errors-in-js-files-with---checkjs"class="level2"><h2>Errors in .js files with <code>--checkJs</code></h2><p>By default the TypeScript compiler does not report any errors in .js files including using <a href="/tsconfig#allowJs"><code>allowJs</code></a>. With TypeScript 2.3 type-checking errors can also be reported in <code>.js</code> files with <a href="/tsconfig#checkJs"><code>checkJs</code></a>.<p>You can skip checking some files by adding <code>// @ts-nocheck</code> comment to them; conversely you can choose to check only a few <code>.js</code> files by adding <code>// @ts-check</code> comment to them without setting <a href="/tsconfig#checkJs"><code>checkJs</code></a>. You can also ignore errors on specific lines by adding <code>// @ts-ignore</code> on the preceding line.<p><code>.js</code> files are still checked to ensure that they only include standard ECMAScript features; type annotations are only allowed in <code>.ts</code> files and are flagged as errors in <code>.js</code> files. JSDoc comments can be used to add some type information to your JavaScript code, see <a href="https://github.com/Microsoft/TypeScript/wiki/JSDoc-support-in-JavaScript">JSDoc Support documentation</a> for more details about the supported JSDoc constructs.<p>See <a href="https://github.com/Microsoft/TypeScript/wiki/Type-Checking-JavaScript-Files">Type checking JavaScript Files documentation</a> for more details. <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section>