<!doctype html><html lang="en"><meta charset="utf-8"><title>TypeScript 3.0</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="layout"content="docs"><meta name="permalink"content="/docs/handbook/release-notes/typescript-3-0.html"><meta name="oneline"content="TypeScript 3.0 Release Notes"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="project-references"class="level2"><h2>Project References</h2><p>TypeScript 3.0 introduces a new concept of project references. Project references allow TypeScript projects to depend on other TypeScript projects - specifically, allowing <code>tsconfig.json</code> files to reference other <code>tsconfig.json</code> files. Specifying these dependencies makes it easier to split your code into smaller projects, since it gives TypeScript (and tools around it) a way to understand build ordering and output structure.<p>TypeScript 3.0 also introduces a new mode for tsc, the <code>--build</code> flag, that works hand-in-hand with project references to enable faster TypeScript builds.<p>See <a href="/docs/handbook/project-references.html">Project References handbook page</a> for more documentation.</section><section id="tuples-in-rest-parameters-and-spread-expressions"class="level2"><h2>Tuples in rest parameters and spread expressions</h2><p>TypeScript 3.0 adds support to multiple new capabilities to interact with function parameter lists as tuple types. TypeScript 3.0 adds support for:<ul><li><a href="#rest-parameters-with-tuple-types">Expansion of rest parameters with tuple types into discrete parameters.</a><li><a href="#spread-expressions-with-tuple-types">Expansion of spread expressions with tuple types into discrete arguments.</a><li><a href="#generic-rest-parameters">Generic rest parameters and corresponding inference of tuple types.</a><li><a href="#optional-elements-in-tuple-types">Optional elements in tuple types.</a><li><a href="#rest-elements-in-tuple-types">Rest elements in tuple types.</a></ul><p>With these features it becomes possible to strongly type a number of higher-order functions that transform functions and their parameter lists.</section><section id="rest-parameters-with-tuple-types"class="level2"><h2>Rest parameters with tuple types</h2><p>When a rest parameter has a tuple type, the tuple type is expanded into a sequence of discrete parameters. For example the following two declarations are equivalent:<pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token spread operator">...</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></code></pre><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>args_0<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> args_1<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> args_2<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></code></pre></section><section id="spread-expressions-with-tuple-types"class="level2"><h2>Spread expressions with tuple types</h2><p>When a function call includes a spread expression of a tuple type as the last argument, the spread expression corresponds to a sequence of discrete arguments of the tuple element types.<p>Thus, the following calls are equivalent:<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token spread operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="generic-rest-parameters"class="level2"><h2>Generic rest parameters</h2><p>A rest parameter is permitted to have a generic type that is constrained to an array type, and type inference can infer tuple types for such generic rest parameters. This enables higher-order capturing and spreading of partial parameter lists:<section id="example"class="level5"><h5>Example</h5><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">bind</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">V</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>
  <span class="token function-variable function">f</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token spread operator">...</span>args<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token constant">V</span><span class="token punctuation">,</span>
  x<span class="token operator">:</span> <span class="token constant">T</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token spread operator">...</span>args<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token constant">V</span><span class="token punctuation">;</span>

<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">f3</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> z<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> f2 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>f3<span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (y: string, z: boolean) => void</span>
<span class="token keyword">const</span> f1 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>f2<span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (z: boolean) => void</span>
<span class="token keyword">const</span> f0 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>f1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// () => void</span>

<span class="token function">f3</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f2</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f1</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>In the declaration of <code>f2</code> above, type inference infers types <code>number</code>, <code>[string, boolean]</code> and <code>void</code> for <code>T</code>, <code>U</code> and <code>V</code> respectively.<p>Note that when a tuple type is inferred from a sequence of parameters and later expanded into a parameter list, as is the case for <code>U</code>, the original parameter names are used in the expansion (however, the names have no semantic meaning and are not otherwise observable).</section></section><section id="optional-elements-in-tuple-types"class="level2"><h2>Optional elements in tuple types</h2><p>Tuple types now permit a <code>?</code> postfix on element types to indicate that the element is optional:<section id="example-1"class="level5"><h5>Example</h5><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> t<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token operator">?</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><p>In <a href="/tsconfig#strictNullChecks"><code>strictNullChecks</code></a> mode, a <code>?</code> modifier automatically includes <code>undefined</code> in the element type, similar to optional parameters.<p>A tuple type permits an element to be omitted if it has a postfix <code>?</code> modifier on its type and all elements to the right of it also have <code>?</code> modifiers.<p>When tuple types are inferred for rest parameters, optional parameters in the source become optional tuple elements in the inferred type.<p>The <code>length</code> property of a tuple type with optional elements is a union of numeric literal types representing the possible lengths. For example, the type of the <code>length</code> property in the tuple type <code>[number, string?, boolean?]</code> is <code>1 | 2 | 3</code>.</section><section id="rest-elements-in-tuple-types"class="level3"><h3>Rest elements in tuple types</h3><p>The last element of a tuple type can be a rest element of the form <code>...X</code>, where <code>X</code> is an array type. A rest element indicates that the tuple type is open-ended and may have zero or more additional elements of the array element type. For example, <code>[number, ...string[]]</code> means tuples with a <code>number</code> element followed by any number of <code>string</code> elements.<section id="example-2"class="level5"><h5>Example</h5><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">tuple</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token spread operator">...</span>args<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> args<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> numbers<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">getArrayOfNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> t1 <span class="token operator">=</span> <span class="token function">tuple</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [string, number, boolean]</span>
<span class="token keyword">const</span> t2 <span class="token operator">=</span> <span class="token function">tuple</span><span class="token punctuation">(</span><span class="token string">"bar"</span><span class="token punctuation">,</span> <span class="token spread operator">...</span>numbers<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [string, ...number[]]</span></code></pre><p>The type of the <code>length</code> property of a tuple type with a rest element is <code>number</code>.</section></section></section><section id="new-unknown-top-type"class="level2"><h2>New <code>unknown</code> top type</h2><p>TypeScript 3.0 introduces a new top type <code>unknown</code>. <code>unknown</code> is the type-safe counterpart of <code>any</code>. Anything is assignable to <code>unknown</code>, but <code>unknown</code> isn't assignable to anything but itself and <code>any</code> without a type assertion or a control flow based narrowing. Likewise, no operations are permitted on an <code>unknown</code> without first asserting or narrowing to a more specific type.<section id="example-3"class="level5"><h5>Example</h5><pre class="language-ts"><code class="language-ts"><span class="token comment">// In an intersection everything absorbs unknown</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T00</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&#x26;</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span> <span class="token comment">// null</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T01</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&#x26;</span> <span class="token keyword nil">undefined</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T02</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&#x26;</span> <span class="token keyword null nil">null</span> <span class="token operator">&#x26;</span> <span class="token keyword nil">undefined</span><span class="token punctuation">;</span> <span class="token comment">// null &#x26; undefined (which becomes never)</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T03</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&#x26;</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T04</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&#x26;</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// string[]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T05</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&#x26;</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span> <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T06</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&#x26;</span> <span class="token builtin">any</span><span class="token punctuation">;</span> <span class="token comment">// any</span>

<span class="token comment">// In a union an unknown absorbs everything</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T10</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span> <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T11</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token keyword nil">undefined</span><span class="token punctuation">;</span> <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T12</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token keyword null nil">null</span> <span class="token operator">|</span> <span class="token keyword nil">undefined</span><span class="token punctuation">;</span> <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T13</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T14</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T15</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span> <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T16</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token builtin">any</span><span class="token punctuation">;</span> <span class="token comment">// any</span>

<span class="token comment">// Type variable and unknown in union and intersection</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T20</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">&#x26;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// T &#x26; {}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T21</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// T | {}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T22</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">&#x26;</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span> <span class="token comment">// T</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T23</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span> <span class="token comment">// unknown</span>

<span class="token comment">// unknown in conditional types</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T30</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// Deferred</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T31</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">unknown</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// Deferred (so it distributes)</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T32</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token builtin">never</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T33</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">never</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// Deferred</span>

<span class="token comment">// keyof unknown</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T40</span></span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token builtin">any</span><span class="token punctuation">;</span> <span class="token comment">// string | number | symbol</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T41</span></span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span> <span class="token comment">// never</span>

<span class="token comment">// Only equality operators are allowed with unknown</span>

<span class="token keyword">function</span> <span class="token function">f10</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  x <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">;</span>
  x <span class="token operator">!==</span> <span class="token number">10</span><span class="token punctuation">;</span>
  x <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
  x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
  x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
  <span class="token operator">-</span>x<span class="token punctuation">;</span> <span class="token comment">// Error</span>
  <span class="token operator">+</span>x<span class="token punctuation">;</span> <span class="token comment">// Error</span>
<span class="token punctuation">}</span>

<span class="token comment">// No property accesses, element accesses, or function calls</span>

<span class="token keyword">function</span> <span class="token function">f11</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  x<span class="token punctuation">.</span><span class="token property-access">foo</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
  x<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
  <span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
  <span class="token keyword">new</span> <span class="token class-name">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
<span class="token punctuation">}</span>

<span class="token comment">// typeof, instanceof, and user defined type predicates</span>

<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">isFunction</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span><span class="token operator">:</span> x <span class="token keyword">is</span> <span class="token known-class-name class-name">Function</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">f20</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">"number"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">;</span> <span class="token comment">// string | number</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>x <span class="token keyword">instanceof</span> <span class="token class-name"><span class="token known-class-name class-name">Error</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">;</span> <span class="token comment">// Error</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">;</span> <span class="token comment">// Function</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Homomorphic mapped type over unknown</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T50</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T51</span></span> <span class="token operator">=</span> <span class="token constant">T50</span><span class="token operator">&#x3C;</span><span class="token builtin">any</span><span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// { [x: string]: number }</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T52</span></span> <span class="token operator">=</span> <span class="token constant">T50</span><span class="token operator">&#x3C;</span><span class="token builtin">unknown</span><span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// {}</span>

<span class="token comment">// Anything is assignable to unknown</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">f21</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>pAny<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> pNever<span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">,</span> pT<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>
  x <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
  x <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
  x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Error</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  x <span class="token operator">=</span> x<span class="token punctuation">;</span>
  x <span class="token operator">=</span> pAny<span class="token punctuation">;</span>
  x <span class="token operator">=</span> pNever<span class="token punctuation">;</span>
  x <span class="token operator">=</span> pT<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// unknown assignable only to itself and any</span>

<span class="token keyword">function</span> <span class="token function">f22</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> v1<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
  <span class="token keyword">let</span> v2<span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
  <span class="token keyword">let</span> v3<span class="token operator">:</span> object <span class="token operator">=</span> x<span class="token punctuation">;</span> <span class="token comment">// Error</span>
  <span class="token keyword">let</span> v4<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> x<span class="token punctuation">;</span> <span class="token comment">// Error</span>
  <span class="token keyword">let</span> v5<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span> <span class="token comment">// Error</span>
  <span class="token keyword">let</span> v6<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> x<span class="token punctuation">;</span> <span class="token comment">// Error</span>
  <span class="token keyword">let</span> v7<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token keyword null nil">null</span> <span class="token operator">|</span> <span class="token keyword nil">undefined</span> <span class="token operator">=</span> x<span class="token punctuation">;</span> <span class="token comment">// Error</span>
<span class="token punctuation">}</span>

<span class="token comment">// Type parameter 'T extends unknown' not related to object</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">f23</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">unknown</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> y<span class="token operator">:</span> object <span class="token operator">=</span> x<span class="token punctuation">;</span> <span class="token comment">// Error</span>
<span class="token punctuation">}</span>

<span class="token comment">// Anything but primitive assignable to { [x: string]: unknown }</span>

<span class="token keyword">function</span> <span class="token function">f24</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  x <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  x <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  x <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
<span class="token punctuation">}</span>

<span class="token comment">// Locals of type unknown always considered initialized</span>

<span class="token keyword">function</span> <span class="token function">f25</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> y <span class="token operator">=</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Spread of unknown causes result to be unknown</span>

<span class="token keyword">function</span> <span class="token function">f26</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">,</span> z<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token spread operator">...</span>x <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// { a: number }</span>
  <span class="token keyword">let</span> o2 <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token spread operator">...</span>x<span class="token punctuation">,</span> <span class="token spread operator">...</span>y <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// unknown</span>
  <span class="token keyword">let</span> o3 <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token spread operator">...</span>x<span class="token punctuation">,</span> <span class="token spread operator">...</span>y<span class="token punctuation">,</span> <span class="token spread operator">...</span>z <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// any</span>
<span class="token punctuation">}</span>

<span class="token comment">// Functions with unknown return type don't need return expressions</span>

<span class="token keyword">function</span> <span class="token function">f27</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// Rest type cannot be created from unknown</span>

<span class="token keyword">function</span> <span class="token function">f28</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span> <span class="token spread operator">...</span>a <span class="token punctuation">}</span> <span class="token operator">=</span> x<span class="token punctuation">;</span> <span class="token comment">// Error</span>
<span class="token punctuation">}</span>

<span class="token comment">// Class properties of type unknown don't need definite assignment</span>

<span class="token keyword">class</span> <span class="token class-name"><span class="token constant">C1</span></span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
  b<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>
  c<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section></section><section id="support-for-defaultprops-in-jsx"class="level2"><h2>Support for <code>defaultProps</code> in JSX</h2><p>TypeScript 2.9 and earlier didn’t leverage <a href="https://reactjs.org/docs/typechecking-with-proptypes.html#default-prop-values">React <code>defaultProps</code></a> declarations inside JSX components. Users would often have to declare properties optional and use non-null assertions inside of <code>render</code>, or they'd use type-assertions to fix up the type of the component before exporting it.<p>TypeScript 3.0 adds support for a new type alias in the <code>JSX</code> namespace called <code>LibraryManagedAttributes</code>. This helper type defines a transformation on the component's <code>Props</code> type, before using to check a JSX expression targeting it; thus allowing customization like: how conflicts between provided props and inferred props are handled, how inferences are mapped, how optionality is handled, and how inferences from differing places should be combined.<p>In short using this general type, we can model React's specific behavior for things like <code>defaultProps</code> and, to some extent, <code>propTypes</code>.<pre class="language-tsx"><code class="language-tsx"><span class="token keyword module">export</span> <span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">Props</span></span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Greet</span></span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token maybe-class-name">React</span></span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Component</span></span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Props</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">Hello </span><span class="token punctuation">{</span>name<span class="token punctuation">.</span><span class="token method function property-access">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"world"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Type-checks! No type assertions needed!</span>
<span class="token keyword">let</span> el <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">Greet</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span></code></pre></section><section id="caveats"class="level2"><h2>Caveats</h2><section id="explicit-types-on-defaultprops"class="level3"><h3>Explicit types on <code>defaultProps</code></h3><p>The default-ed properties are inferred from the <code>defaultProps</code> property type. If an explicit type annotation is added, e.g. <code>static defaultProps: Partial&#x3C;Props>;</code> the compiler will not be able to identify which properties have defaults (since the type of <code>defaultProps</code> include all properties of <code>Props</code>).<p>Use <code>static defaultProps: Pick&#x3C;Props, "name">;</code> as an explicit type annotation instead, or do not add a type annotation as done in the example above.<p>For function components (formerly known as SFCs) use ES2015 default initializers:<pre class="language-tsx"><code class="language-tsx"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Greet</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> name <span class="token operator">=</span> <span class="token string">"world"</span> <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token maybe-class-name">Props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">Hello </span><span class="token punctuation">{</span>name<span class="token punctuation">.</span><span class="token method function property-access">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><section id="changes-to-typesreact"class="level4"><h4>Changes to <code>@types/React</code></h4><p>Corresponding changes to add <code>LibraryManagedAttributes</code> definition to the <code>JSX</code> namespace in <code>@types/React</code> are still needed. Keep in mind that there are some limitations.</section></section></section><section id="-reference-lib--reference-directives"class="level2"><h2><code>/// &#x3C;reference lib="..." /></code> reference directives</h2><p>TypeScript adds a new triple-slash-reference directive (<code>/// &#x3C;reference lib="name" /></code>), allowing a file to explicitly include an existing built-in <em>lib</em> file.<p>Built-in <em>lib</em> files are referenced in the same fashion as the <a href="/tsconfig#lib"><code>lib</code></a> compiler option in <em>tsconfig.json</em> (e.g. use <code>lib="es2015"</code> and not <code>lib="lib.es2015.d.ts"</code>, etc.).<p>For declaration file authors who relay on built-in types, e.g. DOM APIs or built-in JS run-time constructors like <code>Symbol</code> or <code>Iterable</code>, triple-slash-reference lib directives are the recommended. Previously these .d.ts files had to add forward/duplicate declarations of such types.<section id="example-4"class="level5"><h5>Example</h5><p>Using <code>/// &#x3C;reference lib="es2017.string" /></code> to one of the files in a compilation is equivalent to compiling with <code>--lib es2017.string</code>.<pre class="language-ts"><code class="language-ts"><span class="token comment">/// &#x3C;reference lib="es2017.string" /></span>

<span class="token string">"foo"</span><span class="token punctuation">.</span><span class="token method function property-access">padStart</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>