<!doctype html><html lang="en"><meta charset="utf-8"><title>Decorators</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="layout"content="docs"><meta name="permalink"content="/docs/handbook/decorators.html"><meta name="oneline"content="TypeScript Decorators overview"><meta name="translatable"content="true"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="introduction"class="level2"><h2>Introduction</h2><blockquote class="bg-reading"><p>Further Reading:<br><a href="https://saul-mirone.github.io/a-complete-guide-to-typescript-decorator/">A Complete Guide to TypeScript Decorators</a></blockquote><p>With the introduction of Classes in TypeScript and ES6, there now exist certain scenarios that require additional features to support annotating or modifying classes and class members. Decorators provide a way to add both annotations and a meta-programming syntax for class declarations and members. Decorators are a <a href="https://github.com/tc39/proposal-decorators">stage 2 proposal</a> for JavaScript and are available as an experimental feature of TypeScript.<blockquote><p>NOTE  Decorators are an experimental feature that may change in future releases.</blockquote><p>To enable experimental support for decorators, you must enable the <a href="/tsconfig#experimentalDecorators"><code>experimentalDecorators</code></a> compiler option either on the command line or in your <code>tsconfig.json</code>:<p><strong>Command Line</strong>:<pre class="language-shell"><code class="language-shell">tsc --target ES5 --experimentalDecorators</code></pre><p><strong>tsconfig.json</strong>:<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"ES5"</span><span class="token punctuation">,</span>
    <span class="token property">"experimentalDecorators"</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section><section id="decorators"class="level2"><h2>Decorators</h2><p>A <em>Decorator</em> is a special kind of declaration that can be attached to a <a href="#class-decorators">class declaration</a>, <a href="#method-decorators">method</a>, <a href="#accessor-decorators">accessor</a>, <a href="#property-decorators">property</a>, or <a href="#parameter-decorators">parameter</a>. Decorators use the form <code>@expression</code>, where <code>expression</code> must evaluate to a function that will be called at runtime with information about the decorated declaration.<p>For example, given the decorator <code>@sealed</code> we might write the <code>sealed</code> function as follows:<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">sealed</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// do something with 'target' ...</span>
<span class="token punctuation">}</span></code></pre></section><section id="decorator-factories"class="level2"><h2>Decorator Factories</h2><p>If we want to customize how a decorator is applied to a declaration, we can write a decorator factory. A <em>Decorator Factory</em> is simply a function that returns the expression that will be called by the decorator at runtime.<p>We can write a decorator factory in the following fashion:<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">color</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// this is the decorator factory, it sets up</span>
  <span class="token comment">// the returned decorator function</span>
  <span class="token keyword control-flow">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// this is the decorator</span>
    <span class="token comment">// do something with 'target' and 'value'...</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section><section id="decorator-composition"class="level2"><h2>Decorator Composition</h2><p>Multiple decorators can be applied to a declaration, for example on a single line:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @experimentalDecorators</span>
<span class="token comment">// @noErrors</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// ---cut---</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">f</span></span> <span class="token decorator"><span class="token at operator">@</span><span class="token function">g</span></span> x</code></pre><p>On multiple lines:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @experimentalDecorators</span>
<span class="token comment">// @noErrors</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// ---cut---</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">f</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">g</span></span>
x</code></pre><p>When multiple decorators apply to a single declaration, their evaluation is similar to <a href="https://wikipedia.org/wiki/Function_composition">function composition in mathematics</a>. In this model, when composing functions <em>f</em> and <em>g</em>, the resulting composite (<em>f</em> ∘ <em>g</em>)(<em>x</em>) is equivalent to <em>f</em>(<em>g</em>(<em>x</em>)).<p>As such, the following steps are performed when evaluating multiple decorators on a single declaration in TypeScript:<ol><li>The expressions for each decorator are evaluated top-to-bottom.<li>The results are then called as functions from bottom-to-top.</ol><p>If we were to use <a href="#decorator-factories">decorator factories</a>, we can observe this evaluation order with the following example:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @experimentalDecorators</span>
<span class="token keyword">function</span> <span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">"first(): factory evaluated"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> <span class="token maybe-class-name">PropertyDescriptor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">"first(): called"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">second</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">"second(): factory evaluated"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> <span class="token maybe-class-name">PropertyDescriptor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">"second(): called"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">ExampleClass</span></span> <span class="token punctuation">{</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">first</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">second</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Which would print this output to the console:<pre class="language-shell"><code class="language-shell">first<span class="token punctuation">(</span><span class="token punctuation">)</span>: factory evaluated
second<span class="token punctuation">(</span><span class="token punctuation">)</span>: factory evaluated
second<span class="token punctuation">(</span><span class="token punctuation">)</span>: called
first<span class="token punctuation">(</span><span class="token punctuation">)</span>: called</code></pre></section><section id="decorator-evaluation"class="level2"><h2>Decorator Evaluation</h2><p>There is a well defined order to how decorators applied to various declarations inside of a class are applied:<ol><li><em>Parameter Decorators</em>, followed by <em>Method</em>, <em>Accessor</em>, or <em>Property Decorators</em> are applied for each instance member.<li><em>Parameter Decorators</em>, followed by <em>Method</em>, <em>Accessor</em>, or <em>Property Decorators</em> are applied for each static member.<li><em>Parameter Decorators</em> are applied for the constructor.<li><em>Class Decorators</em> are applied for the class.</ol></section><section id="class-decorators"class="level2"><h2>Class Decorators</h2><p>A <em>Class Decorator</em> is declared just before a class declaration. The class decorator is applied to the constructor of the class and can be used to observe, modify, or replace a class definition. A class decorator cannot be used in a declaration file, or in any other ambient context (such as on a <code>declare</code> class).<p>The expression for the class decorator will be called as a function at runtime, with the constructor of the decorated class as its only argument.<p>If the class decorator returns a value, it will replace the class declaration with the provided constructor function.<blockquote><p>NOTE  Should you choose to return a new constructor function, you must take care to maintain the original prototype. The logic that applies decorators at runtime will <strong>not</strong> do this for you.</blockquote><p>The following is an example of a class decorator (<code>@sealed</code>) applied to a <code>BugReport</code> class:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @experimentalDecorators</span>
<span class="token keyword">function</span> <span class="token function">sealed</span><span class="token punctuation">(</span>constructor<span class="token operator">:</span> <span class="token known-class-name class-name">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">seal</span><span class="token punctuation">(</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">seal</span><span class="token punctuation">(</span>constructor<span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ---cut---</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">sealed</span></span>
<span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">BugReport</span></span> <span class="token punctuation">{</span>
  type <span class="token operator">=</span> <span class="token string">"report"</span><span class="token punctuation">;</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span>t<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">title</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>We can define the <code>@sealed</code> decorator using the following function declaration:<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">sealed</span><span class="token punctuation">(</span>constructor<span class="token operator">:</span> <span class="token known-class-name class-name">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">seal</span><span class="token punctuation">(</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">seal</span><span class="token punctuation">(</span>constructor<span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>When <code>@sealed</code> is executed, it will seal both the constructor and its prototype, and will therefore prevent any further functionality from being added to or removed from this class during runtime by accessing <code>BugReport.prototype</code> or by defining properties on <code>BugReport</code> itself (note that ES2015 classes are really just syntactic sugar to prototype-based constructor functions). This decorator does <strong>not</strong> prevent classes from sub-classing <code>BugReport</code>.<p>Next we have an example of how to override the constructor to set new defaults.<pre class="language-ts"><code class="language-ts"><span class="token comment">// @errors: 2339</span>
<span class="token comment">// @experimentalDecorators</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">reportableClassDecorator</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token spread operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>constructor<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token keyword">extends</span></span> constructor <span class="token punctuation">{</span>
    reportingURL <span class="token operator">=</span> <span class="token string">"http://www..."</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">reportableClassDecorator</span></span>
<span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">BugReport</span></span> <span class="token punctuation">{</span>
  type <span class="token operator">=</span> <span class="token string">"report"</span><span class="token punctuation">;</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span>t<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">title</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> bug <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">BugReport</span></span><span class="token punctuation">(</span><span class="token string">"Needs dark mode"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>bug<span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Prints "Needs dark mode"</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>bug<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Prints "report"</span>

<span class="token comment">// Note that the decorator _does not_ change the TypeScript type</span>
<span class="token comment">// and so the new property `reportingURL` is not known</span>
<span class="token comment">// to the type system:</span>
bug<span class="token punctuation">.</span><span class="token property-access">reportingURL</span><span class="token punctuation">;</span></code></pre></section><section id="method-decorators"class="level2"><h2>Method Decorators</h2><p>A <em>Method Decorator</em> is declared just before a method declaration. The decorator is applied to the <em>Property Descriptor</em> for the method, and can be used to observe, modify, or replace a method definition. A method decorator cannot be used in a declaration file, on an overload, or in any other ambient context (such as in a <code>declare</code> class).<p>The expression for the method decorator will be called as a function at runtime, with the following three arguments:<ol><li>Either the constructor function of the class for a static member, or the prototype of the class for an instance member.<li>The name of the member.<li>The <em>Property Descriptor</em> for the member.</ol><blockquote><p>NOTE  The <em>Property Descriptor</em> will be <code>undefined</code> if your script target is less than <code>ES5</code>.</blockquote><p>If the method decorator returns a value, it will be used as the <em>Property Descriptor</em> for the method.<blockquote><p>NOTE  The return value is ignored if your script target is less than <code>ES5</code>.</blockquote><p>The following is an example of a method decorator (<code>@enumerable</code>) applied to a method on the <code>Greeter</code> class:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @experimentalDecorators</span>
<span class="token keyword">function</span> <span class="token function">enumerable</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span>propertyKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>descriptor<span class="token operator">:</span> <span class="token maybe-class-name">PropertyDescriptor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    descriptor<span class="token punctuation">.</span><span class="token property-access">enumerable</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Greeter</span></span> <span class="token punctuation">{</span>
  greeting<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">greeting</span> <span class="token operator">=</span> message<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">enumerable</span></span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token string">"Hello, "</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">greeting</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>We can define the <code>@enumerable</code> decorator using the following function declaration:<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">enumerable</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> <span class="token maybe-class-name">PropertyDescriptor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    descriptor<span class="token punctuation">.</span><span class="token property-access">enumerable</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>The <code>@enumerable(false)</code> decorator here is a <a href="#decorator-factories">decorator factory</a>. When the <code>@enumerable(false)</code> decorator is called, it modifies the <code>enumerable</code> property of the property descriptor.</section><section id="accessor-decorators"class="level2"><h2>Accessor Decorators</h2><p>An <em>Accessor Decorator</em> is declared just before an accessor declaration. The accessor decorator is applied to the <em>Property Descriptor</em> for the accessor and can be used to observe, modify, or replace an accessor's definitions. An accessor decorator cannot be used in a declaration file, or in any other ambient context (such as in a <code>declare</code> class).<blockquote><p>NOTE  TypeScript disallows decorating both the <code>get</code> and <code>set</code> accessor for a single member. Instead, all decorators for the member must be applied to the first accessor specified in document order. This is because decorators apply to a <em>Property Descriptor</em>, which combines both the <code>get</code> and <code>set</code> accessor, not each declaration separately.</blockquote><p>The expression for the accessor decorator will be called as a function at runtime, with the following three arguments:<ol><li>Either the constructor function of the class for a static member, or the prototype of the class for an instance member.<li>The name of the member.<li>The <em>Property Descriptor</em> for the member.</ol><blockquote><p>NOTE  The <em>Property Descriptor</em> will be <code>undefined</code> if your script target is less than <code>ES5</code>.</blockquote><p>If the accessor decorator returns a value, it will be used as the <em>Property Descriptor</em> for the member.<blockquote><p>NOTE  The return value is ignored if your script target is less than <code>ES5</code>.</blockquote><p>The following is an example of an accessor decorator (<code>@configurable</code>) applied to a member of the <code>Point</code> class:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @experimentalDecorators</span>
<span class="token keyword">function</span> <span class="token function">configurable</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>
    target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span>
    propertyKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    descriptor<span class="token operator">:</span> <span class="token maybe-class-name">PropertyDescriptor</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    descriptor<span class="token punctuation">.</span><span class="token property-access">configurable</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Point</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> _x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> _y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_x</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_y</span> <span class="token operator">=</span> y<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">configurable</span></span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">get</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_x</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">configurable</span></span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">get</span> <span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_y</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>We can define the <code>@configurable</code> decorator using the following function declaration:<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">configurable</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> <span class="token maybe-class-name">PropertyDescriptor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    descriptor<span class="token punctuation">.</span><span class="token property-access">configurable</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section><section id="property-decorators"class="level2"><h2>Property Decorators</h2><p>A <em>Property Decorator</em> is declared just before a property declaration. A property decorator cannot be used in a declaration file, or in any other ambient context (such as in a <code>declare</code> class).<p>The expression for the property decorator will be called as a function at runtime, with the following two arguments:<ol><li>Either the constructor function of the class for a static member, or the prototype of the class for an instance member.<li>The name of the member.</ol><blockquote><p>NOTE  A <em>Property Descriptor</em> is not provided as an argument to a property decorator due to how property decorators are initialized in TypeScript. This is because there is currently no mechanism to describe an instance property when defining members of a prototype, and no way to observe or modify the initializer for a property. The return value is ignored too. As such, a property decorator can only be used to observe that a property of a specific name has been declared for a class.</blockquote><p>We can use this information to record metadata about the property, as in the following example:<pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Greeter</span></span> <span class="token punctuation">{</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">format</span></span><span class="token punctuation">(</span><span class="token string">"Hello, %s"</span><span class="token punctuation">)</span>
  greeting<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span>message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">greeting</span> <span class="token operator">=</span> message<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> formatString <span class="token operator">=</span> <span class="token function">getFormat</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"greeting"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> formatString<span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">greeting</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>We can then define the <code>@format</code> decorator and <code>getFormat</code> functions using the following function declarations:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token string">"reflect-metadata"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> formatMetadataKey <span class="token operator">=</span> <span class="token known-class-name class-name">Symbol</span><span class="token punctuation">(</span><span class="token string">"format"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">format</span><span class="token punctuation">(</span>formatString<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token known-class-name class-name">Reflect</span><span class="token punctuation">.</span><span class="token method function property-access">metadata</span><span class="token punctuation">(</span>formatMetadataKey<span class="token punctuation">,</span> formatString<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getFormat</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token known-class-name class-name">Reflect</span><span class="token punctuation">.</span><span class="token method function property-access">getMetadata</span><span class="token punctuation">(</span>formatMetadataKey<span class="token punctuation">,</span> target<span class="token punctuation">,</span> propertyKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>The <code>@format("Hello, %s")</code> decorator here is a <a href="#decorator-factories">decorator factory</a>. When <code>@format("Hello, %s")</code> is called, it adds a metadata entry for the property using the <code>Reflect.metadata</code> function from the <code>reflect-metadata</code> library. When <code>getFormat</code> is called, it reads the metadata value for the format.<blockquote><p>NOTE  This example requires the <code>reflect-metadata</code> library. See <a href="#metadata">Metadata</a> for more information about the <code>reflect-metadata</code> library.</blockquote></section><section id="parameter-decorators"class="level2"><h2>Parameter Decorators</h2><p>A <em>Parameter Decorator</em> is declared just before a parameter declaration. The parameter decorator is applied to the function for a class constructor or method declaration. A parameter decorator cannot be used in a declaration file, an overload, or in any other ambient context (such as in a <code>declare</code> class).<p>The expression for the parameter decorator will be called as a function at runtime, with the following three arguments:<ol><li>Either the constructor function of the class for a static member, or the prototype of the class for an instance member.<li>The name of the member.<li>The ordinal index of the parameter in the function's parameter list.</ol><blockquote><p>NOTE  A parameter decorator can only be used to observe that a parameter has been declared on a method.</blockquote><p>The return value of the parameter decorator is ignored.<p>The following is an example of a parameter decorator (<code>@required</code>) applied to parameter of a member of the <code>BugReport</code> class:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @experimentalDecorators</span>
<span class="token keyword">function</span> <span class="token function">validate</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> <span class="token maybe-class-name">TypedPropertyDescriptor</span><span class="token operator">&#x3C;</span><span class="token builtin">any</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">required</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token known-class-name class-name">Object</span><span class="token punctuation">,</span> propertyKey<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">symbol</span><span class="token punctuation">,</span> parameterIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">BugReport</span></span> <span class="token punctuation">{</span>
  type <span class="token operator">=</span> <span class="token string">"report"</span><span class="token punctuation">;</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span>t<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">title</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">validate</span></span>
  <span class="token function">print</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">required</span></span> verbose<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>verbose<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">type: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">type</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\ntitle: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">title</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
     <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>We can then define the <code>@required</code> and <code>@validate</code> decorators using the following function declarations:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @experimentalDecorators</span>
<span class="token comment">// @emitDecoratorMetadata</span>
<span class="token keyword module">import</span> <span class="token string">"reflect-metadata"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> requiredMetadataKey <span class="token operator">=</span> <span class="token known-class-name class-name">Symbol</span><span class="token punctuation">(</span><span class="token string">"required"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">required</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token known-class-name class-name">Object</span><span class="token punctuation">,</span> propertyKey<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">symbol</span><span class="token punctuation">,</span> parameterIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> existingRequiredParameters<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token known-class-name class-name">Reflect</span><span class="token punctuation">.</span><span class="token method function property-access">getOwnMetadata</span><span class="token punctuation">(</span>requiredMetadataKey<span class="token punctuation">,</span> target<span class="token punctuation">,</span> propertyKey<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  existingRequiredParameters<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>parameterIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token known-class-name class-name">Reflect</span><span class="token punctuation">.</span><span class="token method function property-access">defineMetadata</span><span class="token punctuation">(</span> requiredMetadataKey<span class="token punctuation">,</span> existingRequiredParameters<span class="token punctuation">,</span> target<span class="token punctuation">,</span> propertyKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">validate</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> <span class="token maybe-class-name">TypedPropertyDescriptor</span><span class="token operator">&#x3C;</span><span class="token known-class-name class-name">Function</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> method <span class="token operator">=</span> descriptor<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token operator">!</span><span class="token punctuation">;</span>

  descriptor<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">value</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> requiredParameters<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token known-class-name class-name">Reflect</span><span class="token punctuation">.</span><span class="token method function property-access">getOwnMetadata</span><span class="token punctuation">(</span>requiredMetadataKey<span class="token punctuation">,</span> target<span class="token punctuation">,</span> propertyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>requiredParameters<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> parameterIndex <span class="token keyword">of</span> requiredParameters<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>parameterIndex <span class="token operator">>=</span> arguments<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">||</span> arguments<span class="token punctuation">[</span>parameterIndex<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword nil">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Error</span></span><span class="token punctuation">(</span><span class="token string">"Missing required argument."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">return</span> method<span class="token punctuation">.</span><span class="token method function property-access">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>The <code>@required</code> decorator adds a metadata entry that marks the parameter as required. The <code>@validate</code> decorator then wraps the existing <code>greet</code> method in a function that validates the arguments before invoking the original method.<blockquote><p>NOTE  This example requires the <code>reflect-metadata</code> library. See <a href="#metadata">Metadata</a> for more information about the <code>reflect-metadata</code> library.</blockquote></section><section id="metadata"class="level2"><h2>Metadata</h2><p>Some examples use the <code>reflect-metadata</code> library which adds a polyfill for an <a href="https://github.com/rbuckton/ReflectDecorators">experimental metadata API</a>. This library is not yet part of the ECMAScript (JavaScript) standard. However, once decorators are officially adopted as part of the ECMAScript standard these extensions will be proposed for adoption.<p>You can install this library via npm:<pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> i reflect-metadata --save</code></pre><p>TypeScript includes experimental support for emitting certain types of metadata for declarations that have decorators. To enable this experimental support, you must set the <a href="/tsconfig#emitDecoratorMetadata"><code>emitDecoratorMetadata</code></a> compiler option either on the command line or in your <code>tsconfig.json</code>:<p><strong>Command Line</strong>:<pre class="language-shell"><code class="language-shell">tsc --target ES5 --experimentalDecorators --emitDecoratorMetadata</code></pre><p><strong>tsconfig.json</strong>:<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"ES5"</span><span class="token punctuation">,</span>
    <span class="token property">"experimentalDecorators"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"emitDecoratorMetadata"</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>When enabled, as long as the <code>reflect-metadata</code> library has been imported, additional design-time type information will be exposed at runtime.<p>We can see this in action in the following example:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @emitDecoratorMetadata</span>
<span class="token comment">// @experimentalDecorators</span>
<span class="token comment">// @strictPropertyInitialization: false</span>
<span class="token keyword module">import</span> <span class="token string">"reflect-metadata"</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Point</span></span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token keyword">public</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Line</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> _start<span class="token operator">:</span> <span class="token maybe-class-name">Point</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> _end<span class="token operator">:</span> <span class="token maybe-class-name">Point</span><span class="token punctuation">;</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">validate</span></span>
  <span class="token keyword">set</span> <span class="token function">start</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token maybe-class-name">Point</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_start</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">get</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_start</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">validate</span></span>
  <span class="token keyword">set</span> <span class="token function">end</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token maybe-class-name">Point</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_end</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">get</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_end</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">validate</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> <span class="token maybe-class-name">TypedPropertyDescriptor</span><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> set <span class="token operator">=</span> descriptor<span class="token punctuation">.</span><span class="token property-access">set</span><span class="token operator">!</span><span class="token punctuation">;</span>
  
  descriptor<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">set</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> type <span class="token operator">=</span> <span class="token known-class-name class-name">Reflect</span><span class="token punctuation">.</span><span class="token method function property-access">getMetadata</span><span class="token punctuation">(</span><span class="token string">"design:type"</span><span class="token punctuation">,</span> target<span class="token punctuation">,</span> propertyKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>value <span class="token keyword">instanceof</span> <span class="token class-name"><span class="token keyword">type</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">TypeError</span></span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Invalid type, got </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">typeof</span> value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> not </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    set<span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> line <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">Line</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
line<span class="token punctuation">.</span><span class="token property-access">start</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">Point</span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment">// @ts-ignore</span>
<span class="token comment">// line.end = {}</span>

<span class="token comment">// Fails at runtime with:</span>
<span class="token comment">// > Invalid type, got object not Point</span>
</code></pre><p>The TypeScript compiler will inject design-time type information using the <code>@Reflect.metadata</code> decorator. You could consider it the equivalent of the following TypeScript:<pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Line</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> _start<span class="token operator">:</span> <span class="token maybe-class-name">Point</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> _end<span class="token operator">:</span> <span class="token maybe-class-name">Point</span><span class="token punctuation">;</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">validate</span></span>
  @<span class="token known-class-name class-name">Reflect</span><span class="token punctuation">.</span><span class="token method function property-access">metadata</span><span class="token punctuation">(</span><span class="token string">"design:type"</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Point</span><span class="token punctuation">)</span>
  <span class="token keyword">set</span> <span class="token function">start</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token maybe-class-name">Point</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_start</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">get</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_start</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">validate</span></span>
  @<span class="token known-class-name class-name">Reflect</span><span class="token punctuation">.</span><span class="token method function property-access">metadata</span><span class="token punctuation">(</span><span class="token string">"design:type"</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Point</span><span class="token punctuation">)</span>
  <span class="token keyword">set</span> <span class="token function">end</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token maybe-class-name">Point</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_end</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">get</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_end</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><blockquote><p>NOTE  Decorator metadata is an experimental feature and may introduce breaking changes in future releases. <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></blockquote></section>