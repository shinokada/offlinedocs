<!doctype html><html lang="en"><meta charset="utf-8"><title>Iterators and Generators</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="layout"content="docs"><meta name="permalink"content="/docs/handbook/iterators-and-generators.html"><meta name="oneline"content="How Iterators and Generators work in TypeScript"><meta name="translatable"content="true"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><section id="iterables"class="level2"><h2>Iterables</h2><p>An object is deemed iterable if it has an implementation for the <a href="symbols.html#symboliterator"><code>Symbol.iterator</code></a> property. Some built-in types like <code>Array</code>, <code>Map</code>, <code>Set</code>, <code>String</code>, <code>Int32Array</code>, <code>Uint32Array</code>, etc. have their <code>Symbol.iterator</code> property already implemented. <code>Symbol.iterator</code> function on an object is responsible for returning the list of values to iterate on.<section id="iterable-interface"class="level3"><h3><code>Iterable</code> interface</h3><p><code>Iterable</code> is a type we can use if we want to take in types listed above which are iterable. Here is an example:<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">toArray</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token constant">X</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>xs<span class="token operator">:</span> <span class="token maybe-class-name">Iterable</span><span class="token operator">&#x3C;</span><span class="token constant">X</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">X</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">[</span><span class="token spread operator">...</span>xs<span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></section><section id="forof-statements"class="level3"><h3><code>for..of</code> statements</h3><p><code>for..of</code> loops over an iterable object, invoking the <code>Symbol.iterator</code> property on the object. Here is a simple <code>for..of</code> loop on an array:<pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> someArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"string"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> entry <span class="token keyword">of</span> someArray<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>entry<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1, "string", false</span>
<span class="token punctuation">}</span></code></pre></section><section id="forof-vs-forin-statements"class="level3"><h3><code>for..of</code> vs. <code>for..in</code> statements</h3><p>Both <code>for..of</code> and <code>for..in</code> statements iterate over lists; the values iterated on are different though, <code>for..in</code> returns a list of <em>keys</em> on the object being iterated, whereas <code>for..of</code> returns a list of <em>values</em> of the numeric properties of the object being iterated.<p>Here is an example that demonstrates this distinction:<pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "0", "1", "2",</span>
<span class="token punctuation">}</span>

<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4, 5, 6</span>
<span class="token punctuation">}</span></code></pre><p>Another distinction is that <code>for..in</code> operates on any object; it serves as a way to inspect properties on this object. <code>for..of</code> on the other hand, is mainly interested in values of iterable objects. Built-in objects like <code>Map</code> and <code>Set</code> implement <code>Symbol.iterator</code> property allowing access to stored values.<pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> pets <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Set</span></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"Cat"</span><span class="token punctuation">,</span> <span class="token string">"Dog"</span><span class="token punctuation">,</span> <span class="token string">"Hamster"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pets<span class="token punctuation">[</span><span class="token string">"species"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"mammals"</span><span class="token punctuation">;</span>

<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> pet <span class="token keyword">in</span> pets<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>pet<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "species"</span>
<span class="token punctuation">}</span>

<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> pet <span class="token keyword">of</span> pets<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>pet<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Cat", "Dog", "Hamster"</span>
<span class="token punctuation">}</span></code></pre></section><section id="code-generation"class="level3"><h3>Code generation</h3><section id="targeting-es5-and-es3"class="level4"><h4>Targeting ES5 and ES3</h4><p>When targeting an ES5 or ES3-compliant engine, iterators are only allowed on values of <code>Array</code> type. It is an error to use <code>for..of</code> loops on non-Array values, even if these non-Array values implement the <code>Symbol.iterator</code> property.<p>The compiler will generate a simple <code>for</code> loop for a <code>for..of</code> loop, for instance:<pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> num <span class="token keyword">of</span> numbers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>will be generated as:<pre class="language-js"><code class="language-js"><span class="token keyword">var</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> _i <span class="token operator">&#x3C;</span> numbers<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> _i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> num <span class="token operator">=</span> numbers<span class="token punctuation">[</span>_i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section><section id="targeting-ecmascript-2015-and-higher"class="level4"><h4>Targeting ECMAScript 2015 and higher</h4><p>When targeting an ECMAScipt 2015-compliant engine, the compiler will generate <code>for..of</code> loops to target the built-in iterator implementation in the engine. <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section></section>