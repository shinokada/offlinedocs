<!doctype html><html lang="en"><meta charset="utf-8"><title>Mixins</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="layout"content="docs"><meta name="permalink"content="/docs/handbook/mixins.html"><meta name="oneline"content="Using the mixin pattern with TypeScript"><meta name="translatable"content="true"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><p>Along with traditional OO hierarchies, another popular way of building up classes from reusable components is to build them by combining simpler partial classes. You may be familiar with the idea of mixins or traits for languages like Scala, and the pattern has also reached some popularity in the JavaScript community.<section id="how-does-a-mixin-work"class="level2"><h2>How Does A Mixin Work?</h2><p>The pattern relies on using generics with class inheritance to extend a base class. TypeScript's best mixin support is done via the class expression pattern. You can read more about how this pattern works in JavaScript <a href="https://justinfagnani.com/2015/12/21/real-mixins-with-javascript-classes/">here</a>.<p>To get started, we'll need a class which will have the mixins applied on top of:<pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Sprite</span></span> <span class="token punctuation">{</span>
  name <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
  x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Then you need a type and a factory function which returns a class expression extending the base class.<pre class="language-ts"><code class="language-ts"><span class="token comment">// To get started, we need a type which we'll use to extend</span>
<span class="token comment">// other classes from. The main responsibility is to declare</span>
<span class="token comment">// that the type being passed in is a class.</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Constructor</span></span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token spread operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// This mixin adds a scale property, with getters and setters</span>
<span class="token comment">// for changing it with an encapsulated private property:</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">Scale</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">TBase</span> <span class="token keyword">extends</span> <span class="token maybe-class-name">Constructor</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token maybe-class-name">Base</span><span class="token operator">:</span> <span class="token maybe-class-name">TBase</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Scaling</span></span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token maybe-class-name">Base</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// Mixins may not declare private/protected properties</span>
    <span class="token comment">// however, you can use ES2020 private fields</span>
    _scale <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token function">setScale</span><span class="token punctuation">(</span>scale<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_scale</span> <span class="token operator">=</span> scale<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">get</span> <span class="token function">scale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_scale</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>With these all set up, then you can create a class which represents the base class with mixins applied:<pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Sprite</span></span> <span class="token punctuation">{</span>
  name <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
  x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Constructor</span></span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token spread operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">Scale</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">TBase</span> <span class="token keyword">extends</span> <span class="token maybe-class-name">Constructor</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token maybe-class-name">Base</span><span class="token operator">:</span> <span class="token maybe-class-name">TBase</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Scaling</span></span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token maybe-class-name">Base</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// Mixins may not declare private/protected properties</span>
    <span class="token comment">// however, you can use ES2020 private fields</span>
    _scale <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token function">setScale</span><span class="token punctuation">(</span>scale<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_scale</span> <span class="token operator">=</span> scale<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">get</span> <span class="token function">scale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_scale</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ---cut---</span>
<span class="token comment">// Compose a new class from the Sprite class,</span>
<span class="token comment">// with the Mixin Scale applier:</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">EightBitSprite</span> <span class="token operator">=</span> <span class="token function"><span class="token maybe-class-name">Scale</span></span><span class="token punctuation">(</span><span class="token maybe-class-name">Sprite</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> flappySprite <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">EightBitSprite</span></span><span class="token punctuation">(</span><span class="token string">"Bird"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
flappySprite<span class="token punctuation">.</span><span class="token method function property-access">setScale</span><span class="token punctuation">(</span><span class="token number">0.8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>flappySprite<span class="token punctuation">.</span><span class="token property-access">scale</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="constrained-mixins"class="level2"><h2>Constrained Mixins</h2><p>In the above form, the mixin's have no underlying knowledge of the class which can make it hard to create the design you want.<p>To model this, we modify the original constructor type to accept a generic argument.<pre class="language-ts"><code class="language-ts"><span class="token comment">// This was our previous constructor:</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Constructor</span></span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token spread operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// Now we use a generic version which can apply a constraint on</span>
<span class="token comment">// the class which this mixin is applied to</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">GConstructor</span><span class="token operator">&#x3C;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token spread operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token constant">T</span><span class="token punctuation">;</span></code></pre><p>This allows for creating classes which only work with constrained base classes:<pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">GConstructor</span><span class="token operator">&#x3C;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token spread operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Sprite</span></span> <span class="token punctuation">{</span>
  name <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
  x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Positionable</span></span> <span class="token operator">=</span> <span class="token maybe-class-name">GConstructor</span><span class="token operator">&#x3C;</span><span class="token punctuation">{</span> <span class="token function-variable function">setPos</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword">void</span> <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Spritable</span></span> <span class="token operator">=</span> <span class="token maybe-class-name">GConstructor</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Sprite</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Loggable</span></span> <span class="token operator">=</span> <span class="token maybe-class-name">GConstructor</span><span class="token operator">&#x3C;</span><span class="token punctuation">{</span> <span class="token function-variable function">print</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword">void</span> <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>Then you can create mixins which only work when you have a particular base to build on:<pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">GConstructor</span><span class="token operator">&#x3C;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token spread operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Sprite</span></span> <span class="token punctuation">{</span>
  name <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
  x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Positionable</span></span> <span class="token operator">=</span> <span class="token maybe-class-name">GConstructor</span><span class="token operator">&#x3C;</span><span class="token punctuation">{</span> <span class="token function-variable function">setPos</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword">void</span> <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Spritable</span></span> <span class="token operator">=</span> <span class="token maybe-class-name">GConstructor</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Sprite</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Loggable</span></span> <span class="token operator">=</span> <span class="token maybe-class-name">GConstructor</span><span class="token operator">&#x3C;</span><span class="token punctuation">{</span> <span class="token function-variable function">print</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword">void</span> <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token comment">// ---cut---</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">Jumpable</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token maybe-class-name">TBase</span> <span class="token keyword">extends</span> <span class="token maybe-class-name">Positionable</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token maybe-class-name">Base</span><span class="token operator">:</span> <span class="token maybe-class-name">TBase</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Jumpable</span></span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token maybe-class-name">Base</span></span> <span class="token punctuation">{</span>
    <span class="token function">jump</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// This mixin will only work if it is passed a base</span>
      <span class="token comment">// class which has setPos defined because of the</span>
      <span class="token comment">// Positionable constraint.</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setPos</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></section><section id="alternative-pattern"class="level2"><h2>Alternative Pattern</h2><p>Previous versions of this document recommended a way to write mixins where you created both the runtime and type hierarchies separately, then merged them at the end:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @strict: false</span>
<span class="token comment">// Each mixin is a traditional ES class</span>
<span class="token class-name"><span class="token keyword">class</span></span> <span class="token maybe-class-name">Jumpable</span> <span class="token punctuation">{</span>
  <span class="token function">jump</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Duckable</span></span> <span class="token punctuation">{</span>
  <span class="token function">duck</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Including the base</span>
<span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Sprite</span></span> <span class="token punctuation">{</span>
  x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Then you create an interface which merges</span>
<span class="token comment">// the expected mixins with the same name as your base</span>
<span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">Sprite</span></span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token maybe-class-name">Jumpable</span></span><span class="token punctuation">,</span> <span class="token maybe-class-name">Duckable</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// Apply the mixins into the base class via</span>
<span class="token comment">// the JS at runtime</span>
<span class="token function">applyMixins</span><span class="token punctuation">(</span><span class="token maybe-class-name">Sprite</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token maybe-class-name">Jumpable</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Duckable</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> player <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">Sprite</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
player<span class="token punctuation">.</span><span class="token method function property-access">jump</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>player<span class="token punctuation">.</span><span class="token property-access">x</span><span class="token punctuation">,</span> player<span class="token punctuation">.</span><span class="token property-access">y</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// This can live anywhere in your codebase:</span>
<span class="token keyword">function</span> <span class="token function">applyMixins</span><span class="token punctuation">(</span>derivedCtor<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> constructors<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  constructors<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>baseCtor<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">getOwnPropertyNames</span><span class="token punctuation">(</span>baseCtor<span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">defineProperty</span><span class="token punctuation">(</span>
        derivedCtor<span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">,</span>
        name<span class="token punctuation">,</span>
        <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>baseCtor<span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token operator">||</span>
          <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">create</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>This pattern relies less on the compiler, and more on your codebase to ensure both runtime and type-system are correctly kept in sync.</section><section id="constraints"class="level2"><h2>Constraints</h2><p>The mixin pattern is supported natively inside the TypeScript compiler by code flow analysis. There are a few cases where you can hit the edges of the native support.<section id="decorators-and-mixins-4881"class="level4"><h4>Decorators and Mixins <a href="https://github.com/microsoft/TypeScript/issues/4881"><code>#4881</code></a></h4><p>You cannot use decorators to provide mixins via code flow analysis:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @experimentalDecorators</span>
<span class="token comment">// @errors: 2339</span>
<span class="token comment">// A decorator function which replicates the mixin pattern:</span>
<span class="token keyword">const</span> <span class="token function-variable function"><span class="token maybe-class-name">Pausable</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token keyword">typeof</span> <span class="token maybe-class-name">Player</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Pausable</span></span> <span class="token keyword">extends</span> <span class="token class-name">target</span> <span class="token punctuation">{</span>
    shouldFreeze <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Pausable</span></span>
<span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Player</span></span> <span class="token punctuation">{</span>
  x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// The Player class does not have the decorator's type merged:</span>
<span class="token keyword">const</span> player <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">Player</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
player<span class="token punctuation">.</span><span class="token property-access">shouldFreeze</span><span class="token punctuation">;</span>

<span class="token comment">// The runtime aspect could be manually replicated via</span>
<span class="token comment">// type composition or interface merging.</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">FreezablePlayer</span></span> <span class="token operator">=</span> <span class="token maybe-class-name">Player</span> <span class="token operator">&#x26;</span> <span class="token punctuation">{</span> shouldFreeze<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> playerTwo <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">Player</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword module">as</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token keyword module">as</span> <span class="token maybe-class-name">FreezablePlayer</span><span class="token punctuation">;</span>
playerTwo<span class="token punctuation">.</span><span class="token property-access">shouldFreeze</span><span class="token punctuation">;</span></code></pre></section><section id="static-property-mixins-17829"class="level4"><h4>Static Property Mixins <a href="https://github.com/microsoft/TypeScript/issues/17829"><code>#17829</code></a></h4><p>More of a gotcha than a constraint. The class expression pattern creates singletons, so they can't be mapped at the type system to support different variable types.<p>You can work around this by using functions to return your classes which differ based on a generic:<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">base</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Base</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> prop<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> <span class="token maybe-class-name">Base</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">derived</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Derived</span></span> <span class="token keyword">extends</span> <span class="token class-name">base<span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> anotherProp<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> <span class="token maybe-class-name">Derived</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">Spec</span></span> <span class="token keyword">extends</span> <span class="token class-name">derived<span class="token operator">&#x3C;</span><span class="token builtin">string</span><span class="token operator">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token maybe-class-name">Spec</span><span class="token punctuation">.</span><span class="token property-access">prop</span><span class="token punctuation">;</span> <span class="token comment">// string</span>
<span class="token maybe-class-name">Spec</span><span class="token punctuation">.</span><span class="token property-access">anotherProp</span><span class="token punctuation">;</span> <span class="token comment">// string</span></code></pre><p><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section></section>