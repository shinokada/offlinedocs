<!doctype html><html lang="en"><meta charset="utf-8"><title>Unions and Intersection Types</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="layout"content="docs"><meta name="permalink"content="/docs/handbook/unions-and-intersections.html"><meta name="oneline"content="How to use unions and intersection types in TypeScript"><meta name="handbook"content="true"><meta name="deprecated_by"content="/docs/handbook/2/everyday-types.html#union-types"><meta name="deprecation_redirects"content="discriminating-unions,/docs/handbook/2/narrowing.html#discriminated-unions"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><p>So far, the handbook has covered types which are atomic objects. However, as you model more types you find yourself looking for tools which let you compose or combine existing types instead of creating them from scratch.<p>Intersection and Union types are one of the ways in which you can compose types.<section id="union-types"class="level2"><h2>Union Types</h2><p>Occasionally, you'll run into a library that expects a parameter to be either a <code>number</code> or a <code>string</code>. For instance, take the following function:<pre class="language-ts"><code class="language-ts"><span class="token doc-comment comment">/**
 * Takes a string and adds "padding" to the left.
 * If 'padding' is a string, then 'padding' is appended to the left side.
 * If 'padding' is a number, then that number of spaces is added to the left side.
 */</span>
<span class="token keyword">function</span> <span class="token function">padLeft</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> padding<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> padding <span class="token operator">===</span> <span class="token string">"number"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token known-class-name class-name">Array</span><span class="token punctuation">(</span>padding <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">join</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span> <span class="token operator">+</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> padding <span class="token operator">===</span> <span class="token string">"string"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> padding <span class="token operator">+</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Error</span></span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Expected string or number, got '</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">typeof</span> padding<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">padLeft</span><span class="token punctuation">(</span><span class="token string">"Hello world"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// returns "    Hello world"</span></code></pre><p>The problem with <code>padLeft</code> in the above example is that its <code>padding</code> parameter is typed as <code>any</code>. That means that we can call it with an argument that's neither a <code>number</code> nor a <code>string</code>, but TypeScript will be okay with it.<pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">padLeft</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> padding<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token comment">// ---cut---</span>
<span class="token comment">// passes at compile time, fails at runtime.</span>
<span class="token keyword">let</span> indentedString <span class="token operator">=</span> <span class="token function">padLeft</span><span class="token punctuation">(</span><span class="token string">"Hello world"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>In traditional object-oriented code, we might abstract over the two types by creating a hierarchy of types. While this is much more explicit, it's also a little bit overkill. One of the nice things about the original version of <code>padLeft</code> was that we were able to just pass in primitives. That meant that usage was simple and concise. This new approach also wouldn't help if we were just trying to use a function that already exists elsewhere.<p>Instead of <code>any</code>, we can use a <em>union type</em> for the <code>padding</code> parameter:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @errors: 2345</span>
<span class="token doc-comment comment">/**
 * Takes a string and adds "padding" to the left.
 * If 'padding' is a string, then 'padding' is appended to the left side.
 * If 'padding' is a number, then that number of spaces is added to the left side.
 */</span>
<span class="token keyword">function</span> <span class="token function">padLeft</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> padding<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> indentedString <span class="token operator">=</span> <span class="token function">padLeft</span><span class="token punctuation">(</span><span class="token string">"Hello world"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>A union type describes a value that can be one of several types. We use the vertical bar (<code>|</code>) to separate each type, so <code>number | string | boolean</code> is the type of a value that can be a <code>number</code>, a <code>string</code>, or a <code>boolean</code>.</section><section id="unions-with-common-fields"class="level2"><h2>Unions with Common Fields</h2><p>If we have a value that is a union type, we can only access members that are common to all types in the union.<pre class="language-ts"><code class="language-ts"><span class="token comment">// @errors: 2339</span>

<span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">Bird</span></span> <span class="token punctuation">{</span>
  <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">layEggs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">Fish</span></span> <span class="token punctuation">{</span>
  <span class="token function">swim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">layEggs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">getSmallPet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Fish</span> <span class="token operator">|</span> <span class="token maybe-class-name">Bird</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> pet <span class="token operator">=</span> <span class="token function">getSmallPet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pet<span class="token punctuation">.</span><span class="token method function property-access">layEggs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Only available in one of the two possible types</span>
pet<span class="token punctuation">.</span><span class="token method function property-access">swim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Union types can be a bit tricky here, but it just takes a bit of intuition to get used to. If a value has the type <code>A | B</code>, we only know for <em>certain</em> that it has members that both <code>A</code> <em>and</em> <code>B</code> have. In this example, <code>Bird</code> has a member named <code>fly</code>. We can't be sure whether a variable typed as <code>Bird | Fish</code> has a <code>fly</code> method. If the variable is really a <code>Fish</code> at runtime, then calling <code>pet.fly()</code> will fail.</section><section id="discriminating-unions"class="level2"><h2>Discriminating Unions</h2><p>A common technique for working with unions is to have a single field which uses literal types which you can use to let TypeScript narrow down the possible current type. For example, we're going to create a union of three types which have a single shared field.<pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkLoadingState</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token string">"loading"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkFailedState</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token string">"failed"</span><span class="token punctuation">;</span>
  code<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkSuccessState</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
  response<span class="token operator">:</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    duration<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    summary<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Create a type which represents only one of the above types</span>
<span class="token comment">// but you aren't sure which it is yet.</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkState</span></span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token maybe-class-name">NetworkLoadingState</span>
  <span class="token operator">|</span> <span class="token maybe-class-name">NetworkFailedState</span>
  <span class="token operator">|</span> <span class="token maybe-class-name">NetworkSuccessState</span><span class="token punctuation">;</span></code></pre><style type="text/css">.markdown table.tg{border-collapse:collapse;width:100%;text-align:center;display:table}.tg th{border-bottom:1px solid #000;padding:8px;padding-bottom:0}.tg tbody,.tg tr{width:100%}.tg .highlight{background-color:#f3f3f3}@media (prefers-color-scheme:dark){.tg .highlight{background-color:#424242}}</style><p>All of the above types have a field named <code>state</code>, and then they also have their own fields:<table class="tg"width="100%"><tr><th><code>NetworkLoadingState</code><th><code>NetworkFailedState</code><th><code>NetworkSuccessState</code><tr class="highlight"><td>state<td>state<td>state<tr><td><td>code<td>response</table><p>Given the <code>state</code> field is common in every type inside <code>NetworkState</code> - it is safe for your code to access without an existence check.<p>With <code>state</code> as a literal type, you can compare the value of <code>state</code> to the equivalent string and TypeScript will know which type is currently being used.<table class="tg"width="100%"><tr><th><code>NetworkLoadingState</code><th><code>NetworkFailedState</code><th><code>NetworkSuccessState</code><tr><td><code>"loading"</code><td><code>"failed"</code><td><code>"success"</code></table><p>In this case, you can use a <code>switch</code> statement to narrow down which type is represented at runtime:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @errors: 2339</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkLoadingState</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token string">"loading"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkFailedState</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token string">"failed"</span><span class="token punctuation">;</span>
  code<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkSuccessState</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
  response<span class="token operator">:</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    duration<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    summary<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkState</span></span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token maybe-class-name">NetworkLoadingState</span>
  <span class="token operator">|</span> <span class="token maybe-class-name">NetworkFailedState</span>
  <span class="token operator">|</span> <span class="token maybe-class-name">NetworkSuccessState</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">logger</span><span class="token punctuation">(</span>state<span class="token operator">:</span> <span class="token maybe-class-name">NetworkState</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token comment">// Right now TypeScript does not know which of the three</span>
  <span class="token comment">// potential types state could be.</span>

  <span class="token comment">// Trying to access a property which isn't shared</span>
  <span class="token comment">// across all types will raise an error</span>
  state<span class="token punctuation">.</span><span class="token property-access">code</span><span class="token punctuation">;</span>

  <span class="token comment">// By switching on state, TypeScript can narrow the union</span>
  <span class="token comment">// down in code flow analysis</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">"loading"</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> <span class="token string">"Downloading..."</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"failed"</span><span class="token operator">:</span>
      <span class="token comment">// The type must be NetworkFailedState here,</span>
      <span class="token comment">// so accessing the `code` field is safe</span>
      <span class="token keyword control-flow">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>state<span class="token punctuation">.</span><span class="token property-access">code</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> downloading</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"success"</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Downloaded </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>state<span class="token punctuation">.</span><span class="token property-access">response</span><span class="token punctuation">.</span><span class="token property-access">title</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>state<span class="token punctuation">.</span><span class="token property-access">response</span><span class="token punctuation">.</span><span class="token property-access">summary</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></section><section id="union-exhaustiveness-checking"class="level2"><h2>Union Exhaustiveness checking</h2><p>We would like the compiler to tell us when we don't cover all variants of the discriminated union. For example, if we add <code>NetworkFromCachedState</code> to <code>NetworkState</code>, we need to update <code>logger</code> as well:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @errors: 2366</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkLoadingState</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> state<span class="token operator">:</span> <span class="token string">"loading"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkFailedState</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> state<span class="token operator">:</span> <span class="token string">"failed"</span><span class="token punctuation">;</span> code<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkSuccessState</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
  response<span class="token operator">:</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    duration<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    summary<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkFromCachedState</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token string">"from_cache"</span><span class="token punctuation">;</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  response<span class="token operator">:</span> <span class="token maybe-class-name">NetworkSuccessState</span><span class="token punctuation">[</span><span class="token string">"response"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkState</span></span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token maybe-class-name">NetworkLoadingState</span>
  <span class="token operator">|</span> <span class="token maybe-class-name">NetworkFailedState</span>
  <span class="token operator">|</span> <span class="token maybe-class-name">NetworkSuccessState</span>
  <span class="token operator">|</span> <span class="token maybe-class-name">NetworkFromCachedState</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">logger</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token maybe-class-name">NetworkState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">"loading"</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> <span class="token string">"loading request"</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"failed"</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">failed with code </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>s<span class="token punctuation">.</span><span class="token property-access">code</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"success"</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> <span class="token string">"got response"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>There are two ways to do this. The first is to turn on <a href="/tsconfig#strictNullChecks"><code>strictNullChecks</code></a> and specify a return type:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @errors: 2366</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkLoadingState</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> state<span class="token operator">:</span> <span class="token string">"loading"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkFailedState</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> state<span class="token operator">:</span> <span class="token string">"failed"</span><span class="token punctuation">;</span> code<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkSuccessState</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> state<span class="token operator">:</span> <span class="token string">"success"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkFromCachedState</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> state<span class="token operator">:</span> <span class="token string">"from_cache"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkState</span></span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token maybe-class-name">NetworkLoadingState</span>
  <span class="token operator">|</span> <span class="token maybe-class-name">NetworkFailedState</span>
  <span class="token operator">|</span> <span class="token maybe-class-name">NetworkSuccessState</span>
  <span class="token operator">|</span> <span class="token maybe-class-name">NetworkFromCachedState</span><span class="token punctuation">;</span>

<span class="token comment">// ---cut---</span>
<span class="token keyword">function</span> <span class="token function">logger</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token maybe-class-name">NetworkState</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">"loading"</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> <span class="token string">"loading request"</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"failed"</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">failed with code </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>s<span class="token punctuation">.</span><span class="token property-access">code</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"success"</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> <span class="token string">"got response"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Because the <code>switch</code> is no longer exhaustive, TypeScript is aware that the function could sometimes return <code>undefined</code>. If you have an explicit return type <code>string</code>, then you will get an error that the return type is actually <code>string | undefined</code>. However, this method is quite subtle and, besides, <a href="/tsconfig#strictNullChecks"><code>strictNullChecks</code></a> does not always work with old code.<p>The second method uses the <code>never</code> type that the compiler uses to check for exhaustiveness:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @errors: 2345</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkLoadingState</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> state<span class="token operator">:</span> <span class="token string">"loading"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkFailedState</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> state<span class="token operator">:</span> <span class="token string">"failed"</span><span class="token punctuation">;</span> code<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkSuccessState</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> state<span class="token operator">:</span> <span class="token string">"success"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkFromCachedState</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> state<span class="token operator">:</span> <span class="token string">"from_cache"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">NetworkState</span></span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token maybe-class-name">NetworkLoadingState</span>
  <span class="token operator">|</span> <span class="token maybe-class-name">NetworkFailedState</span>
  <span class="token operator">|</span> <span class="token maybe-class-name">NetworkSuccessState</span>
  <span class="token operator">|</span> <span class="token maybe-class-name">NetworkFromCachedState</span><span class="token punctuation">;</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">function</span> <span class="token function">assertNever</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">never</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Error</span></span><span class="token punctuation">(</span><span class="token string">"Unexpected object: "</span> <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">logger</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token maybe-class-name">NetworkState</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">"loading"</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> <span class="token string">"loading request"</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"failed"</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">failed with code </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>s<span class="token punctuation">.</span><span class="token property-access">code</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"success"</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> <span class="token string">"got response"</span><span class="token punctuation">;</span>
    <span class="token keyword module">default</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> <span class="token function">assertNever</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Here, <code>assertNever</code> checks that <code>s</code> is of type <code>never</code> — the type that's left after all other cases have been removed. If you forget a case, then <code>s</code> will have a real type and you will get a type error. This method requires you to define an extra function, but it's much more obvious when you forget it because the error message includes the missing type name.</section><section id="intersection-types"class="level2"><h2>Intersection Types</h2><p>Intersection types are closely related to union types, but they are used very differently. An intersection type combines multiple types into one. This allows you to add together existing types to get a single type that has all the features you need. For example, <code>Person &#x26; Serializable &#x26; Loggable</code> is a type which is all of <code>Person</code> <em>and</em> <code>Serializable</code> <em>and</em> <code>Loggable</code>. That means an object of this type will have all members of all three types.<p>For example, if you had networking requests with consistent error handling then you could separate out the error handling into its own type which is merged with types which correspond to a single response type.<pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">ErrorHandling</span></span> <span class="token punctuation">{</span>
  success<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  error<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">ArtworksData</span></span> <span class="token punctuation">{</span>
  artworks<span class="token operator">:</span> <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">ArtistsData</span></span> <span class="token punctuation">{</span>
  artists<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// These interfaces are composed to have</span>
<span class="token comment">// consistent error handling, and their own data.</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">ArtworksResponse</span></span> <span class="token operator">=</span> <span class="token maybe-class-name">ArtworksData</span> <span class="token operator">&#x26;</span> <span class="token maybe-class-name">ErrorHandling</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">ArtistsResponse</span></span> <span class="token operator">=</span> <span class="token maybe-class-name">ArtistsData</span> <span class="token operator">&#x26;</span> <span class="token maybe-class-name">ErrorHandling</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">handleArtistsResponse</span> <span class="token operator">=</span> <span class="token punctuation">(</span>response<span class="token operator">:</span> <span class="token maybe-class-name">ArtistsResponse</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token property-access">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token property-access">error</span><span class="token punctuation">.</span><span class="token property-access">message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token property-access">artists</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section>