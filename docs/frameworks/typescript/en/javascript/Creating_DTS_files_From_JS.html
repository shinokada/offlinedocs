<!doctype html><html lang="en"><meta charset="utf-8"><title>Creating .d.ts Files from .js files</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="layout"content="docs"><meta name="permalink"content="/docs/handbook/declaration-files/dts-from-js.html"><meta name="oneline"content="How to add d.ts generation to JavaScript projects"><meta name="translatable"content="true"><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><p><a href="/docs/handbook/release-notes/typescript-3-7.html#--declaration-and---allowjs">With TypeScript 3.7</a>, TypeScript added support for generating .d.ts files from JavaScript using JSDoc syntax.<p>This set up means you can own the editor experience of TypeScript-powered editors without porting your project to TypeScript, or having to maintain .d.ts files in your codebase. TypeScript supports most JSDoc tags, you can find <a href="/docs/handbook/type-checking-javascript-files.html#supported-jsdoc">the reference here</a>.<section id="setting-up-your-project-to-emit-dts-files"class="level2"><h2>Setting up your Project to emit .d.ts files</h2><p>To add creation of .d.ts files in your project, you will need to do up-to four steps:<ul><li>Add TypeScript to your dev dependencies<li>Add a <code>tsconfig.json</code> to configure TypeScript<li>Run the TypeScript compiler to generate the corresponding d.ts files for JS files<li>(optional) Edit your package.json to reference the types</ul><section id="adding-typescript"class="level3"><h3>Adding TypeScript</h3><p>You can learn how to do this in our <a href="/download">installation page</a>.</section><section id="tsconfig"class="level3"><h3>TSConfig</h3><p>The TSConfig is a jsonc file which configures both your compiler flags, and declare where to find files. In this case, you will want a file like the following:<pre class="language-jsonc"><code class="language-jsonc">{
  // Change this to match your project
  "include": ["src/**/*"],

  "compilerOptions": {
    // Tells TypeScript to read JS files, as
    // normally they are ignored as source files
    "allowJs": true,
    // Generate d.ts files
    "declaration": true,
    // This compiler run should
    // only output d.ts files
    "emitDeclarationOnly": true,
    // Types should go into this directory.
    // Removing this would place the .d.ts files
    // next to the .js files
    "outDir": "dist",
    // go to js file when using IDE functions like
    // "Go to Definition" in VSCode
    "declarationMap": true
  }
}</code></pre><p>You can learn more about the options in the <a href="/tsconfig">tsconfig reference</a>. An alternative to using a TSConfig file is the CLI, this is the same behavior as a CLI command.<pre class="language-sh"><code class="language-sh">npx -p typescript tsc src/**/*.js --declaration --allowJs --emitDeclarationOnly --outDir types</code></pre></section></section><section id="run-the-compiler"class="level2"><h2>Run the compiler</h2><p>You can learn how to do this in our <a href="/download">installation page</a>. You want to make sure these files are included in your package if you have the files in your project's <code>.gitignore</code>.</section><section id="editing-the-packagejson"class="level2"><h2>Editing the package.json</h2><p>TypeScript replicates the node resolution for modules in a <code>package.json</code>, with an additional step for finding .d.ts files. Roughly, the resolution will first check the optional <code>types</code> field, then the <code>"main"</code> field, and finally will try <code>index.d.ts</code> in the root.<table><thead><tr><th align="left">Package.json<th align="left">Location of default .d.ts<tbody><tr><td align="left">No "types" field<td align="left">checks "main", then index.d.ts<tr><td align="left">"types": "main.d.ts"<td align="left">main.d.ts<tr><td align="left">"types": "./dist/main.js"<td align="left">./dist/main.d.ts</table><p>If absent, then "main" is used<table><thead><tr><th align="left">Package.json<th align="left">Location of default .d.ts<tbody><tr><td align="left">No "main" field<td align="left">index.d.ts<tr><td align="left">"main":"index.js"<td align="left">index.d.ts<tr><td align="left">"main":"./dist/index.js"<td align="left">./dist/index.d.ts</table></section><section id="tips"class="level2"><h2>Tips</h2><p>If you'd like to write tests for your .d.ts files, try <a href="https://github.com/SamVerschueren/tsd">tsd</a>. <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section>