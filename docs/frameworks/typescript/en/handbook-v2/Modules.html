<!doctype html><html lang="en"><meta charset="utf-8"><title>Modules</title><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="layout"content="docs"><meta name="permalink"content="/docs/handbook/2/modules.html"><meta name="oneline"content="How JavaScript handles communicating across file boundaries."><link rel="stylesheet"href="../../../../../../../../docs/themes/packages/prism-coy-theme/theme_common.css"><p>JavaScript has a long history of different ways to handle modularizing code. TypeScript having been around since 2012, has implemented support for a lot of these formats, but over time the community and the JavaScript specification has converged on a format called ES Modules (or ES6 modules). You might know it as the <code>import</code>/<code>export</code> syntax.<p>ES Modules was added to the JavaScript spec in 2015, and by 2020 had broad support in most web browsers and JavaScript runtimes.<p>For focus, the handbook will cover both ES Modules and its popular pre-cursor CommonJS <code>module.exports =</code> syntax, and you can find information about the other module patterns in the reference section under <a href="/docs/handbook/modules.html">Modules</a>.<section id="how-javascript-modules-are-defined"class="level2"><h2>How JavaScript Modules are Defined</h2><p>In TypeScript, just as in ECMAScript 2015, any file containing a top-level <code>import</code> or <code>export</code> is considered a module.<p>Conversely, a file without any top-level import or export declarations is treated as a script whose contents are available in the global scope (and therefore to modules as well).<p>Modules are executed within their own scope, not in the global scope. This means that variables, functions, classes, etc. declared in a module are not visible outside the module unless they are explicitly exported using one of the export forms. Conversely, to consume a variable, function, class, interface, etc. exported from a different module, it has to be imported using one of the import forms.</section><section id="non-modules"class="level2"><h2>Non-modules</h2><p>Before we start, it's important to understand what TypeScript considers a module. The JavaScript specification declares that any JavaScript files without an <code>export</code> or top-level <code>await</code> should be considered a script and not a module.<p>Inside a script file variables and types are declared to be in the shared global scope, and it's assumed that you'll either use the <a href="/tsconfig#outFile"><code>outFile</code></a> compiler option to join multiple input files into one output file, or use multiple <code>&#x3C;script></code> tags in your HTML to load these files (in the correct order!).<p>If you have a file that doesn't currently have any <code>import</code>s or <code>export</code>s, but you want to be treated as a module, add the line:<pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token exports"><span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">;</span></code></pre><p>which will change the file to be a module exporting nothing. This syntax works regardless of your module target.</section><section id="modules-in-typescript"class="level2"><h2>Modules in TypeScript</h2><blockquote class="bg-reading"><p>Additional Reading:<br><a href="https://exploringjs.com/impatient-js/ch_modules.html#overview-syntax-of-ecmascript-modules">Impatient JS (Modules)</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules">MDN: JavaScript Modules</a><br></blockquote><p>There are three main things to consider when writing module-based code in TypeScript:<ul><li><strong>Syntax</strong>: What syntax do I want to use to import and export things?<li><strong>Module Resolution</strong>: What is the relationship between module names (or paths) and files on disk?<li><strong>Module Output Target</strong>: What should my emitted JavaScript module look like?</ul><section id="es-module-syntax"class="level3"><h3>ES Module Syntax</h3><p>A file can declare a main export via <code>export default</code>:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @filename: hello.ts</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">"Hello, world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>This is then imported via:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @filename: hello.ts</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">"Hello, world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// @filename: index.ts</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword module">import</span> <span class="token imports">helloWorld</span> <span class="token keyword module">from</span> <span class="token string">"./hello.js"</span><span class="token punctuation">;</span>
<span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>In addition to the default export, you can have more than one export of variables and functions via the <code>export</code> by omitting <code>default</code>:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @filename: maths.ts</span>
<span class="token keyword module">export</span> <span class="token keyword">var</span> pi <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword">let</span> squareTwo <span class="token operator">=</span> <span class="token number">1.41</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> phi <span class="token operator">=</span> <span class="token number">1.61</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">RandomNumberGenerator</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">absolute</span><span class="token punctuation">(</span>num<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>num <span class="token operator">&#x3C;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> num <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> num<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>These can be used in another file via the <code>import</code> syntax:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @filename: maths.ts</span>
<span class="token keyword module">export</span> <span class="token keyword">var</span> pi <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword">let</span> squareTwo <span class="token operator">=</span> <span class="token number">1.41</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> phi <span class="token operator">=</span> <span class="token number">1.61</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">RandomNumberGenerator</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">absolute</span><span class="token punctuation">(</span>num<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>num <span class="token operator">&#x3C;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> num <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> num<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// @filename: app.ts</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> pi<span class="token punctuation">,</span> phi<span class="token punctuation">,</span> absolute <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"./maths.js"</span><span class="token punctuation">;</span>

<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>pi<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> absPhi <span class="token operator">=</span> <span class="token function">absolute</span><span class="token punctuation">(</span>phi<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//    ^?</span></code></pre></section><section id="additional-import-syntax"class="level3"><h3>Additional Import Syntax</h3><p>An import can be renamed using a format like <code>import {old as new}</code>:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @filename: maths.ts</span>
<span class="token keyword module">export</span> <span class="token keyword">var</span> pi <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>
<span class="token comment">// @filename: app.ts</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> pi <span class="token keyword module">as</span> π <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"./maths.js"</span><span class="token punctuation">;</span>

<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>π<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//          ^?</span></code></pre><p>You can mix and match the above syntax into a single <code>import</code>:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @filename: maths.ts</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> pi <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">RandomNumberGenerator</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// @filename: app.ts</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">RandomNumberGenerator</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> pi <span class="token keyword module">as</span> π <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"./maths.js"</span><span class="token punctuation">;</span>

<span class="token maybe-class-name">RandomNumberGenerator</span><span class="token punctuation">;</span>
<span class="token comment">// ^?</span>

<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>π<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//          ^?</span></code></pre><p>You can take all of the exported objects and put them into a single namespace using <code>* as name</code>:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @filename: maths.ts</span>
<span class="token keyword module">export</span> <span class="token keyword">var</span> pi <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword">let</span> squareTwo <span class="token operator">=</span> <span class="token number">1.41</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> phi <span class="token operator">=</span> <span class="token number">1.61</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">absolute</span><span class="token punctuation">(</span>num<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>num <span class="token operator">&#x3C;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> num <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> num<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ---cut---</span>
<span class="token comment">// @filename: app.ts</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token operator">*</span> <span class="token keyword module">as</span> math</span> <span class="token keyword module">from</span> <span class="token string">"./maths.js"</span><span class="token punctuation">;</span>

<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span><span class="token property-access">pi</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> positivePhi <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token method function property-access">absolute</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span><span class="token property-access">phi</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//    ^?</span></code></pre><p>You can import a file and <em>not</em> include any variables into your current module via <code>import "./file"</code>:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @filename: maths.ts</span>
<span class="token keyword module">export</span> <span class="token keyword">var</span> pi <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>
<span class="token comment">// ---cut---</span>
<span class="token comment">// @filename: app.ts</span>
<span class="token keyword module">import</span> <span class="token string">"./maths.js"</span><span class="token punctuation">;</span>

<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">"3.14"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>In this case, the <code>import</code> does nothing. However, all of the code in <code>maths.ts</code> was evaluated, which could trigger side-effects which affect other objects.<section id="typescript-specific-es-module-syntax"class="level4"><h4>TypeScript Specific ES Module Syntax</h4><p>Types can be exported and imported using the same syntax as JavaScript values:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @filename: animal.ts</span>
<span class="token keyword module">export</span> <span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Cat</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> breed<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> yearOfBirth<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">Dog</span></span> <span class="token punctuation">{</span>
  breeds<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  yearOfBirth<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// @filename: app.ts</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Cat</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Dog</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"./animal.js"</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Animals</span></span> <span class="token operator">=</span> <span class="token maybe-class-name">Cat</span> <span class="token operator">|</span> <span class="token maybe-class-name">Dog</span><span class="token punctuation">;</span></code></pre><p>TypeScript has extended the <code>import</code> syntax with two concepts for declaring an import of a type:<section id="import-type"class="level6"><h6><code>import type</code></h6><p>Which is an import statement which can <em>only</em> import types:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @filename: animal.ts</span>
<span class="token keyword module">export</span> <span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Cat</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> breed<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> yearOfBirth<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Dog</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> breeds<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> yearOfBirth<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function">createCatName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token string">"fluffy"</span><span class="token punctuation">;</span>

<span class="token comment">// @filename: valid.ts</span>
<span class="token keyword module">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> <span class="token maybe-class-name">Cat</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Dog</span> <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">"./animal.js"</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Animals</span></span> <span class="token operator">=</span> <span class="token maybe-class-name">Cat</span> <span class="token operator">|</span> <span class="token maybe-class-name">Dog</span><span class="token punctuation">;</span>

<span class="token comment">// @filename: app.ts</span>
<span class="token comment">// @errors: 1361</span>
<span class="token keyword module">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> createCatName <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">"./animal.js"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">createCatName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section id="inline-type-imports"class="level6"><h6>Inline <code>type</code> imports</h6><p>TypeScript 4.5 also allows for individual imports to be prefixed with <code>type</code> to indicate that the imported reference is a type:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @filename: animal.ts</span>
<span class="token keyword module">export</span> <span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Cat</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> breed<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> yearOfBirth<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Dog</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> breeds<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> yearOfBirth<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function">createCatName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token string">"fluffy"</span><span class="token punctuation">;</span>
<span class="token comment">// ---cut---</span>
<span class="token comment">// @filename: app.ts</span>
<span class="token keyword module">import</span> <span class="token punctuation">{</span> createCatName<span class="token punctuation">,</span> <span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Cat</span></span><span class="token punctuation">,</span> <span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Dog</span></span> <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">"./animal.js"</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Animals</span></span> <span class="token operator">=</span> <span class="token maybe-class-name">Cat</span> <span class="token operator">|</span> <span class="token maybe-class-name">Dog</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">createCatName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Together these allow a non-TypeScript transpiler like Babel, swc or esbuild to know what imports can be safely removed.</section></section><section id="es-module-syntax-with-commonjs-behavior"class="level4"><h4>ES Module Syntax with CommonJS Behavior</h4><p>TypeScript has ES Module syntax which <em>directly</em> correlates to a CommonJS and AMD <code>require</code>. Imports using ES Module are <em>for most cases</em> the same as the <code>require</code> from those environments, but this syntax ensures you have a 1 to 1 match in your TypeScript file with the CommonJS output:<pre class="language-ts"><code class="language-ts"><span class="token comment">/// &#x3C;reference types="node" /></span>
<span class="token comment">// @module: commonjs</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword module">import</span> fs <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">"fs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> code <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token method function property-access">readFileSync</span><span class="token punctuation">(</span><span class="token string">"hello.ts"</span><span class="token punctuation">,</span> <span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>You can learn more about this syntax in the <a href="/docs/handbook/modules.html#export--and-import--require">modules reference page</a>.</section></section></section><section id="commonjs-syntax"class="level2"><h2>CommonJS Syntax</h2><p>CommonJS is the format which most modules on npm are delivered in. Even if you are writing using the ES Modules syntax above, having a brief understanding of how CommonJS syntax works will help you debug easier.<section id="exporting"class="level4"><h4>Exporting</h4><p>Identifiers are exported via setting the <code>exports</code> property on a global called <code>module</code>.<pre class="language-ts"><code class="language-ts"><span class="token comment">/// &#x3C;reference types="node" /></span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">function</span> <span class="token function">absolute</span><span class="token punctuation">(</span>num<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>num <span class="token operator">&#x3C;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> num <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> num<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  pi<span class="token operator">:</span> <span class="token number">3.14</span><span class="token punctuation">,</span>
  squareTwo<span class="token operator">:</span> <span class="token number">1.41</span><span class="token punctuation">,</span>
  phi<span class="token operator">:</span> <span class="token number">1.61</span><span class="token punctuation">,</span>
  absolute<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Then these files can be imported via a <code>require</code> statement:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @module: commonjs</span>
<span class="token comment">// @filename: maths.ts</span>
<span class="token comment">/// &#x3C;reference types="node" /></span>
<span class="token keyword">function</span> <span class="token function">absolute</span><span class="token punctuation">(</span>num<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>num <span class="token operator">&#x3C;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> num <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> num<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  pi<span class="token operator">:</span> <span class="token number">3.14</span><span class="token punctuation">,</span>
  squareTwo<span class="token operator">:</span> <span class="token number">1.41</span><span class="token punctuation">,</span>
  phi<span class="token operator">:</span> <span class="token number">1.61</span><span class="token punctuation">,</span>
  absolute<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// @filename: index.ts</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">const</span> maths <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">"maths"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
maths<span class="token punctuation">.</span><span class="token property-access">pi</span><span class="token punctuation">;</span>
<span class="token comment">//    ^?</span></code></pre><p>Or you can simplify a bit using the destructuring feature in JavaScript:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @module: commonjs</span>
<span class="token comment">// @filename: maths.ts</span>
<span class="token comment">/// &#x3C;reference types="node" /></span>
<span class="token keyword">function</span> <span class="token function">absolute</span><span class="token punctuation">(</span>num<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>num <span class="token operator">&#x3C;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> num <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> num<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  pi<span class="token operator">:</span> <span class="token number">3.14</span><span class="token punctuation">,</span>
  squareTwo<span class="token operator">:</span> <span class="token number">1.41</span><span class="token punctuation">,</span>
  phi<span class="token operator">:</span> <span class="token number">1.61</span><span class="token punctuation">,</span>
  absolute<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// @filename: index.ts</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> squareTwo <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">"maths"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
squareTwo<span class="token punctuation">;</span>
<span class="token comment">// ^?</span></code></pre></section><section id="commonjs-and-es-modules-interop"class="level3"><h3>CommonJS and ES Modules interop</h3><p>There is a mis-match in features between CommonJS and ES Modules regarding the distinction between a default import and a module namespace object import. TypeScript has a compiler flag to reduce the friction between the two different sets of constraints with <a href="/tsconfig#esModuleInterop"><code>esModuleInterop</code></a>.</section></section><section id="typescripts-module-resolution-options"class="level2"><h2>TypeScript's Module Resolution Options</h2><p>Module resolution is the process of taking a string from the <code>import</code> or <code>require</code> statement, and determining what file that string refers to.<p>TypeScript includes two resolution strategies: Classic and Node. Classic, the default when the compiler option <a href="/tsconfig#module"><code>module</code></a> is not <code>commonjs</code>, is included for backwards compatibility. The Node strategy replicates how Node.js works in CommonJS mode, with additional checks for <code>.ts</code> and <code>.d.ts</code>.<p>There are many TSConfig flags which influence the module strategy within TypeScript: <a href="/tsconfig#moduleResolution"><code>moduleResolution</code></a>, <a href="/tsconfig#baseUrl"><code>baseUrl</code></a>, <a href="/tsconfig#paths"><code>paths</code></a>, <a href="/tsconfig#rootDirs"><code>rootDirs</code></a>.<p>For the full details on how these strategies work, you can consult the <a href="/docs/handbook/module-resolution.html">Module Resolution</a>.</section><section id="typescripts-module-output-options"class="level2"><h2>TypeScript's Module Output Options</h2><p>There are two options which affect the emitted JavaScript output:<ul><li><a href="/tsconfig#target"><code>target</code></a> which determines which JS features are downleveled (converted to run in older JavaScript runtimes) and which are left intact<li><a href="/tsconfig#module"><code>module</code></a> which determines what code is used for modules to interact with each other</ul><p>Which <a href="/tsconfig#target"><code>target</code></a> you use is determined by the features available in the JavaScript runtime you expect to run the TypeScript code in. That could be: the oldest web browser you support, the lowest version of Node.js you expect to run on or could come from unique constraints from your runtime - like Electron for example.<p>All communication between modules happens via a module loader, the compiler option <a href="/tsconfig#module"><code>module</code></a> determines which one is used. At runtime the module loader is responsible for locating and executing all dependencies of a module before executing it.<p>For example, here is a TypeScript file using ES Modules syntax, showcasing a few different options for <a href="/tsconfig#module"><code>module</code></a>:<pre class="language-ts"><code class="language-ts"><span class="token comment">// @filename: constants.ts</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> valueOfPi <span class="token operator">=</span> <span class="token number">3.142</span><span class="token punctuation">;</span>
<span class="token comment">// @filename: index.ts</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> valueOfPi <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"./constants.js"</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword">const</span> twoPi <span class="token operator">=</span> valueOfPi <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span></code></pre><section id="es2020"class="level4"><h4><code>ES2020</code></h4><pre class="language-ts"><code class="language-ts"><span class="token comment">// @showEmit</span>
<span class="token comment">// @module: es2020</span>
<span class="token comment">// @noErrors</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> valueOfPi <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"./constants.js"</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword">const</span> twoPi <span class="token operator">=</span> valueOfPi <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span></code></pre></section><section id="commonjs"class="level4"><h4><code>CommonJS</code></h4><pre class="language-ts"><code class="language-ts"><span class="token comment">// @showEmit</span>
<span class="token comment">// @module: commonjs</span>
<span class="token comment">// @noErrors</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> valueOfPi <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"./constants.js"</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword">const</span> twoPi <span class="token operator">=</span> valueOfPi <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span></code></pre></section><section id="umd"class="level4"><h4><code>UMD</code></h4><pre class="language-ts"><code class="language-ts"><span class="token comment">// @showEmit</span>
<span class="token comment">// @module: umd</span>
<span class="token comment">// @noErrors</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> valueOfPi <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"./constants.js"</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword">const</span> twoPi <span class="token operator">=</span> valueOfPi <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span></code></pre><blockquote><p>Note that ES2020 is effectively the same as the original <code>index.ts</code>.</blockquote><p>You can see all of the available options and what their emitted JavaScript code looks like in the <a href="/tsconfig#module">TSConfig Reference for <code>module</code></a>.</section></section><section id="typescript-namespaces"class="level2"><h2>TypeScript namespaces</h2><p>TypeScript has its own module format called <code>namespaces</code> which pre-dates the ES Modules standard. This syntax has a lot of useful features for creating complex definition files, and still sees active use <a href="/dt">in DefinitelyTyped</a>. While not deprecated, the majority of the features in namespaces exist in ES Modules and we recommend you use that to align with JavaScript's direction. You can learn more about namespaces in <a href="/docs/handbook/namespaces.html">the namespaces reference page</a>. <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></section>