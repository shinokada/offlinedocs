<!doctype html><html lang="en"><meta charset="utf-8"><title>'svelte/compiler'</title><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="stylesheet"href="../../../../themes/packages/prism-coy-theme/theme_common.css"><section class="level1"aria-labelledby="sveltecompiler"><h1 id="sveltecompiler">'svelte/compiler'</h1><p>Typically, you won't interact with the Svelte compiler directly, but will instead integrate it into your build system using a bundler plugin. The bundler plugin that the Svelte team most recommends and invests in is <a href="https://github.com/sveltejs/vite-plugin-svelte">vite-plugin-svelte</a>. The <a href="https://kit.svelte.dev/">SvelteKit</a> framework provides a setup leveraging <code>vite-plugin-svelte</code> to build applications as well as a <a href="https://kit.svelte.dev/docs/packaging">tool for packaging Svelte component libraries</a>. Svelte Society maintains a list of <a href="https://sveltesociety.dev/tools/#bundling">other bundler plugins</a> for additional tools like Rollup and Webpack.<p>Nonetheless, it's useful to understand how to use the compiler, since bundler plugins generally expose compiler options to you.<section class="level2"aria-labelledby="compile"><h2 id="compile">compile</h2><blockquote><p>EXPORT_SNIPPET: svelte/compiler#compile</blockquote><p>This is where the magic happens. <code>svelte.compile</code> takes your component source code, and turns it into a JavaScript module that exports a class.<pre class="language-js"><code class="language-js"><span class="token comment">// @filename: ambient.d.ts</span>
declare global <span class="token punctuation">{</span>
	<span class="token keyword">var</span> <span class="token literal-property property">source</span><span class="token operator">:</span> string
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token exports"><span class="token punctuation">{</span><span class="token punctuation">}</span></span>

<span class="token comment">// @filename: index.ts</span>
<span class="token comment">// cut---</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> compile <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'svelte/compiler'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">compile</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token comment">// options</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Refer to <a href="#types-compileoptions">CompileOptions</a> for all the available options.<p>The returned <code>result</code> object contains the code for your component, along with useful bits of metadata.<pre class="language-ts"><code class="language-ts"><span class="token comment">// @filename: ambient.d.ts</span>
<span class="token keyword">declare</span> global <span class="token punctuation">{</span>
	<span class="token keyword">const</span> source<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token exports"><span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">;</span>

<span class="token comment">// @filename: main.ts</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> compile <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'svelte/compiler'</span><span class="token punctuation">;</span>
<span class="token comment">// cut---</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> js<span class="token punctuation">,</span> css<span class="token punctuation">,</span> ast<span class="token punctuation">,</span> warnings<span class="token punctuation">,</span> vars<span class="token punctuation">,</span> stats <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">compile</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Refer to <a href="#types-compileresult">CompileResult</a> for a full description of the compile result.</section><section class="level2"aria-labelledby="parse"><h2 id="parse">parse</h2><blockquote><p>EXPORT_SNIPPET: svelte/compiler#parse</blockquote><p>The <code>parse</code> function parses a component, returning only its abstract syntax tree. Unlike compiling with the <code>generate: false</code> option, this will not perform any validation or other analysis of the component beyond parsing it. Note that the returned AST is not considered public API, so breaking changes could occur at any point in time.<pre class="language-js"><code class="language-js"><span class="token comment">// @filename: ambient.d.ts</span>
declare global <span class="token punctuation">{</span>
	<span class="token keyword">var</span> <span class="token literal-property property">source</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token exports"><span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">;</span>

<span class="token comment">// @filename: main.ts</span>
<span class="token comment">// cut---</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> parse <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'svelte/compiler'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ast <span class="token operator">=</span> <span class="token function">parse</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'App.svelte'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section class="level2"aria-labelledby="preprocess"><h2 id="preprocess">preprocess</h2><blockquote><p>EXPORT_SNIPPET: svelte/compiler#preprocess</blockquote><p>A number of <a href="https://sveltesociety.dev/tools#preprocessors">official and community-maintained preprocessing plugins</a> are available to allow you to use Svelte with tools like TypeScript, PostCSS, SCSS, and Less.<p>You can write your own preprocessor using the <code>svelte.preprocess</code> API.<p>The <code>preprocess</code> function provides convenient hooks for arbitrarily transforming component source code. For example, it can be used to convert a <code>&#x3C;style lang="sass"></code> block into vanilla CSS.<p>The first argument is the component source code. The second is an array of <em>preprocessors</em> (or a single preprocessor, if you only have one), where a preprocessor is an object with a <code>name</code> which is required, and <code>markup</code>, <code>script</code> and <code>style</code> functions, each of which is optional.<p>The <code>markup</code> function receives the entire component source text, along with the component's <code>filename</code> if it was specified in the third argument.<p>The <code>script</code> and <code>style</code> functions receive the contents of <code>&#x3C;script></code> and <code>&#x3C;style></code> elements respectively (<code>content</code>) as well as the entire component source text (<code>markup</code>). In addition to <code>filename</code>, they get an object of the element's attributes.<p>Each <code>markup</code>, <code>script</code> or <code>style</code> function must return an object (or a Promise that resolves to an object) with a <code>code</code> property, representing the transformed source code. Optionally they can return an array of <code>dependencies</code> which represents files to watch for changes, and a <code>map</code> object which is a sourcemap mapping back the transformation to the original code. <code>script</code> and <code>style</code> preprocessors can optionally return a record of attributes which represent the updated attributes on the script/style tag.<blockquote><p>Preprocessor functions should return a <code>map</code> object whenever possible or else debugging becomes harder as stack traces can't link to the original code correctly.</blockquote><pre class="language-js"><code class="language-js"><span class="token comment">// @filename: ambient.d.ts</span>
declare global <span class="token punctuation">{</span>
	<span class="token keyword">var</span> <span class="token literal-property property">source</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token exports"><span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">;</span>

<span class="token comment">// @filename: main.ts</span>
<span class="token comment">// cut---</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> preprocess <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'svelte/compiler'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">MagicString</span></span> <span class="token keyword module">from</span> <span class="token string">'magic-string'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> code <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">preprocess</span><span class="token punctuation">(</span>
	source<span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token function-variable function">markup</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> content<span class="token punctuation">,</span> filename <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
			<span class="token keyword">const</span> pos <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token method function property-access">indexOf</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>pos <span class="token operator">&#x3C;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">code</span><span class="token operator">:</span> content <span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MagicString</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token punctuation">{</span> filename <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			s<span class="token punctuation">.</span><span class="token method function property-access">overwrite</span><span class="token punctuation">(</span>pos<span class="token punctuation">,</span> pos <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">storeName</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">code</span><span class="token operator">:</span> s<span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token literal-property property">map</span><span class="token operator">:</span> s<span class="token punctuation">.</span><span class="token method function property-access">generateMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'App.svelte'</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>If a <code>dependencies</code> array is returned, it will be included in the result object. This is used by packages like <a href="https://github.com/sveltejs/vite-plugin-svelte">vite-plugin-svelte</a> and <a href="https://github.com/sveltejs/rollup-plugin-svelte">rollup-plugin-svelte</a> to watch additional files for changes, in the case where your <code>&#x3C;style></code> tag has an <code>@import</code> (for example).<pre class="language-ts"><code class="language-ts"><span class="token comment">// @filename: ambient.d.ts</span>
<span class="token keyword">declare</span> global <span class="token punctuation">{</span>
	<span class="token keyword">var</span> source<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token exports"><span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">;</span>

<span class="token comment">// @filename: main.ts</span>
<span class="token comment">// @errors: 2322 2345 2339</span>
<span class="token comment">/// &#x3C;reference types="@types/node" /></span>
<span class="token comment">// cut---</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> preprocess <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'svelte/compiler'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">MagicString</span></span> <span class="token keyword module">from</span> <span class="token string">'magic-string'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports">sass</span> <span class="token keyword module">from</span> <span class="token string">'sass'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> dirname <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'path'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> code <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">preprocess</span><span class="token punctuation">(</span>
	source<span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		name<span class="token operator">:</span> <span class="token string">'my-fancy-preprocessor'</span><span class="token punctuation">,</span>
		<span class="token function-variable function">markup</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> content<span class="token punctuation">,</span> filename <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
			<span class="token comment">// Return code as is when no foo string present</span>
			<span class="token keyword">const</span> pos <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token method function property-access">indexOf</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>pos <span class="token operator">&#x3C;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Replace foo with bar using MagicString which provides</span>
			<span class="token comment">// a source map along with the changed code</span>
			<span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">MagicString</span></span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token punctuation">{</span> filename <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			s<span class="token punctuation">.</span><span class="token method function property-access">overwrite</span><span class="token punctuation">(</span>pos<span class="token punctuation">,</span> pos <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> storeName<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
				code<span class="token operator">:</span> s<span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				map<span class="token operator">:</span> s<span class="token punctuation">.</span><span class="token method function property-access">generateMap</span><span class="token punctuation">(</span><span class="token punctuation">{</span> hires<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> file<span class="token operator">:</span> filename <span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">style</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> content<span class="token punctuation">,</span> attributes<span class="token punctuation">,</span> filename <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
			<span class="token comment">// only process &#x3C;style lang="sass"></span>
			<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>attributes<span class="token punctuation">.</span><span class="token property-access">lang</span> <span class="token operator">!==</span> <span class="token string">'sass'</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>

			<span class="token keyword">const</span> <span class="token punctuation">{</span> css<span class="token punctuation">,</span> stats <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token arrow operator">=></span>
				sass<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span>
					<span class="token punctuation">{</span>
						file<span class="token operator">:</span> filename<span class="token punctuation">,</span>
						data<span class="token operator">:</span> content<span class="token punctuation">,</span>
						includePaths<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">dirname</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">]</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
						<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword control-flow">else</span> <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">)</span>
			<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// remove lang attribute from style tag</span>
			<span class="token keyword">delete</span> attributes<span class="token punctuation">.</span><span class="token property-access">lang</span><span class="token punctuation">;</span>

			<span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
				code<span class="token operator">:</span> css<span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				dependencies<span class="token operator">:</span> stats<span class="token punctuation">.</span><span class="token property-access">includedFiles</span><span class="token punctuation">,</span>
				attributes
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		filename<span class="token operator">:</span> <span class="token string">'App.svelte'</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Multiple preprocessors can be used together. The output of the first becomes the input to the second. Within one preprocessor, <code>markup</code> runs first, then <code>script</code> and <code>style</code>.<blockquote><p>In Svelte 3, all <code>markup</code> functions ran first, then all <code>script</code> and then all <code>style</code> preprocessors. This order was changed in Svelte 4.</blockquote><pre class="language-js"><code class="language-js"><span class="token comment">// @errors: 2322</span>
<span class="token comment">// @filename: ambient.d.ts</span>
declare global <span class="token punctuation">{</span>
	<span class="token keyword">var</span> <span class="token literal-property property">source</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token exports"><span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">;</span>

<span class="token comment">// @filename: main.ts</span>
<span class="token comment">// cut---</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> preprocess <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'svelte/compiler'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> code <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">preprocess</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> <span class="token punctuation">[</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'first preprocessor'</span><span class="token punctuation">,</span>
		<span class="token function-variable function">markup</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
			<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'this runs first'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">script</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
			<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'this runs second'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">style</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
			<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'this runs third'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'second preprocessor'</span><span class="token punctuation">,</span>
		<span class="token function-variable function">markup</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
			<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'this runs fourth'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">script</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
			<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'this runs fifth'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">style</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
			<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'this runs sixth'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'App.svelte'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section class="level2"aria-labelledby="walk"><h2 id="walk">walk</h2><blockquote><p>EXPORT_SNIPPET: svelte/compiler#walk</blockquote><p>The <code>walk</code> function provides a way to walk the abstract syntax trees generated by the parser, using the compiler's own built-in instance of <a href="https://github.com/Rich-Harris/estree-walker">estree-walker</a>.<p>The walker takes an abstract syntax tree to walk and an object with two optional methods: <code>enter</code> and <code>leave</code>. For each node, <code>enter</code> is called (if present). Then, unless <code>this.skip()</code> is called during <code>enter</code>, each of the children are traversed, and then <code>leave</code> is called on the node.<pre class="language-js"><code class="language-js"><span class="token comment">// @filename: ambient.d.ts</span>
declare global <span class="token punctuation">{</span>
	<span class="token keyword">var</span> <span class="token literal-property property">ast</span><span class="token operator">:</span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'estree'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Node</span></span><span class="token punctuation">;</span>
	<span class="token keyword">function</span> <span class="token function">do_something</span><span class="token punctuation">(</span>node<span class="token operator">:</span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'estree'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Node</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
	<span class="token keyword">function</span> <span class="token function">do_something_else</span><span class="token punctuation">(</span>node<span class="token operator">:</span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'estree'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Node</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
	<span class="token keyword">function</span> <span class="token function">should_skip_children</span><span class="token punctuation">(</span>node<span class="token operator">:</span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'estree'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Node</span></span><span class="token punctuation">)</span><span class="token operator">:</span> boolean<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token exports"><span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">;</span>

<span class="token comment">// @filename: main.ts</span>
<span class="token comment">// @errors: 7006</span>
<span class="token comment">// cut---</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> walk <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'svelte/compiler'</span><span class="token punctuation">;</span>

<span class="token function">walk</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token function">enter</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">do_something</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token function">should_skip_children</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function">leave</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">do_something_else</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section class="level2"aria-labelledby="version"><h2 id="version">VERSION</h2><blockquote><p>EXPORT_SNIPPET: svelte/compiler#VERSION</blockquote><p>The current version, as set in package.json.<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token punctuation">{</span> <span class="token constant">VERSION</span> <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">'svelte/compiler'</span><span class="token punctuation">;</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">running svelte version </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">VERSION</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></section><section class="level2"aria-labelledby="types"><h2 id="types">Types</h2><blockquote><p>TYPES: svelte/compiler <span style="float:footnote"><a href="../index.html#toc">Go to TOC</a></span></blockquote></section></section>